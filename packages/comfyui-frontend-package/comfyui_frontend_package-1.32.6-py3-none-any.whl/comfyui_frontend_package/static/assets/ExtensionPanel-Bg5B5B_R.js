var j=Object.defineProperty;var s=(C,E)=>j(C,"name",{value:E,configurable:!0});import{defineComponent as $,ref as d,computed as y,onMounted as F,openBlock as p,createBlock as c,withCtx as r,createVNode as l,unref as i,createElementVNode as f,createElementBlock as V,Fragment as z,renderList as I,toDisplayString as b,createTextVNode as k,createCommentVNode as L}from"vue";import{F as P}from"./vendor-primevue-BTSUBtd4.js";import S from"primevue/button";import h from"primevue/column";import Q from"primevue/contextmenu";import q from"primevue/datatable";import G from"primevue/message";import H from"primevue/selectbutton";import T from"primevue/tag";import J from"primevue/toggleswitch";import{O as K,u as W,cO as X,cQ as Y}from"./index-CU6LcO2W.js";import"@primevue/themes";import"@primevue/themes/aura";import"./vendor-other-BpgYsL4Z.js";import"./vendor-vue-C7sAPp8E.js";import"primevue/config";import"primevue/confirmationservice";import"primevue/toastservice";import"primevue/tooltip";import"vue-i18n";import"primevue/skeleton";import"primevue/multiselect";import"primevue/inputtext";import"primevue/select";import"primevue/checkbox";import"primevue/divider";import"primevue/scrollpanel";import"primevue/usetoast";import"primevue/card";import"primevue/listbox";import"primevue/progressbar";import"primevue/floatlabel";import"@primevue/forms";import"@primevue/forms/resolvers/zod";import"primevue/password";import"primevue/progressspinner";import"primevue/inputnumber";import"primevue/tabpanels";import"primevue/tabs";import"primevue/iconfield";import"primevue/inputicon";import"primevue/badge";import"primevue/chip";import"primevue/tabpanel";import"primevue/colorpicker";import"primevue/radiobutton";import"primevue/knob";import"primevue/slider";import"primevue/panel";import"primevue/tabmenu";import"primevue/popover";import"primevue/tab";import"primevue/tablist";import"primevue";import"primevue/autocomplete";import"primevue/dropdown";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"primevue/galleria";import"primevue/tree";import"primevue/toolbar";import"primevue/dialog";import"primevue/confirmpopup";import"primevue/useconfirm";import"primevue/confirmdialog";import"./vendor-tiptap-mfowjb53.js";import"primevue/blockui";const Z={class:"flex justify-end"},ee={class:"mb-3 flex gap-2"},Et=$({__name:"ExtensionPanel",setup(C){const E=["All","Core","Custom"],v=d("All"),u=d([]),x=d({global:{value:"",matchMode:P.CONTAINS}}),t=K(),_=W(),a=d({}),N=y(()=>{const e=t.extensions;switch(v.value){case"Core":return e.filter(n=>t.isCoreExtension(n.name));case"Custom":return e.filter(n=>!t.isCoreExtension(n.name));default:return e}});F(()=>{t.extensions.forEach(e=>{a.value[e.name]=t.isExtensionEnabled(e.name)})});const g=y(()=>t.extensions.filter(e=>a.value[e.name]!==t.isExtensionEnabled(e.name))),O=y(()=>g.value.length>0),m=s(async()=>{const e=Object.entries(a.value).filter(([n,o])=>!o).map(([n])=>n);await _.set("Comfy.Extension.Disabled",[...t.inactiveDisabledExtensionNames,...e])},"updateExtensionStatus"),A=s(async()=>{t.extensions.forEach(e=>{t.isExtensionReadOnly(e.name)||(a.value[e.name]=!0)}),await m()},"enableAllExtensions"),D=s(async()=>{t.extensions.forEach(e=>{t.isExtensionReadOnly(e.name)||(a.value[e.name]=!1)}),await m()},"disableAllExtensions"),M=s(async()=>{t.extensions.forEach(e=>{t.isCoreExtension(e.name)||(a.value[e.name]=!1)}),await m()},"disableThirdPartyExtensions"),B=s(()=>{window.location.reload()},"applyChanges"),w=d(),R=[{label:"Enable Selected",icon:"pi pi-check",command:s(async()=>{u.value.forEach(e=>{t.isExtensionReadOnly(e.name)||(a.value[e.name]=!0)}),await m()},"command")},{label:"Disable Selected",icon:"pi pi-times",command:s(async()=>{u.value.forEach(e=>{t.isExtensionReadOnly(e.name)||(a.value[e.name]=!1)}),await m()},"command")},{separator:!0},{label:"Enable All",icon:"pi pi-check",command:A},{label:"Disable All",icon:"pi pi-times",command:D},{label:"Disable 3rd Party",icon:"pi pi-times",command:M,disabled:!t.hasThirdPartyExtensions}];return(e,n)=>(p(),c(X,{value:"Extension",class:"extension-panel"},{header:r(()=>[l(Y,{modelValue:x.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=o=>x.value.global.value=o),placeholder:e.$t("g.searchExtensions")+"..."},null,8,["modelValue","placeholder"]),O.value?(p(),c(i(G),{key:0,severity:"info","pt:text":"w-full",class:"max-h-96 overflow-y-auto"},{default:r(()=>[f("ul",null,[(p(!0),V(z,null,I(g.value,o=>(p(),V("li",{key:o.name},[f("span",null,b(i(t).isExtensionEnabled(o.name)?"[-]":"[+]"),1),k(" "+b(o.name),1)]))),128))]),f("div",Z,[l(i(S),{label:e.$t("g.reloadToApplyChanges"),outlined:"",severity:"danger",onClick:B},null,8,["label"])])]),_:1})):L("",!0)]),default:r(()=>[f("div",ee,[l(i(H),{modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=o=>v.value=o),options:E},null,8,["modelValue"])]),l(i(q),{selection:u.value,"onUpdate:selection":n[3]||(n[3]=o=>u.value=o),value:N.value,"striped-rows":"",size:"small",filters:x.value,"selection-mode":"multiple","data-key":"name"},{default:r(()=>[l(i(h),{"selection-mode":"multiple",frozen:!0,style:{width:"3rem"}}),l(i(h),{header:e.$t("g.extensionName"),sortable:"",field:"name"},{body:r(o=>[k(b(o.data.name)+" ",1),i(t).isCoreExtension(o.data.name)?(p(),c(i(T),{key:0,value:"Core"})):(p(),c(i(T),{key:1,value:"Custom",severity:"info"}))]),_:1},8,["header"]),l(i(h),{pt:{headerCell:"flex items-center justify-end",bodyCell:"flex items-center justify-end"}},{header:r(()=>[l(i(S),{icon:"pi pi-ellipsis-h",text:"",severity:"secondary",onClick:n[2]||(n[2]=o=>w.value?.show(o))}),l(i(Q),{ref_key:"menu",ref:w,model:R},null,512)]),body:r(o=>[l(i(J),{modelValue:a.value[o.data.name],"onUpdate:modelValue":s(U=>a.value[o.data.name]=U,"onUpdate:modelValue"),disabled:i(t).isExtensionReadOnly(o.data.name),onChange:m},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["selection","value","filters"])]),_:1}))}});export{Et as default};
//# sourceMappingURL=ExtensionPanel-Bg5B5B_R.js.map
