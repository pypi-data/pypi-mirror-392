# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2
from ..core.unchecked_base_model import UncheckedBaseModel
from .json_query_on_call_table_with_string_type_column_column import JsonQueryOnCallTableWithStringTypeColumnColumn
from .json_query_on_call_table_with_string_type_column_filters_item import (
    JsonQueryOnCallTableWithStringTypeColumnFiltersItem,
)
from .json_query_on_call_table_with_string_type_column_operation import (
    JsonQueryOnCallTableWithStringTypeColumnOperation,
)
from .json_query_on_call_table_with_string_type_column_table import JsonQueryOnCallTableWithStringTypeColumnTable
from .json_query_on_call_table_with_string_type_column_type import JsonQueryOnCallTableWithStringTypeColumnType


class JsonQueryOnCallTableWithStringTypeColumn(UncheckedBaseModel):
    type: JsonQueryOnCallTableWithStringTypeColumnType = pydantic.Field()
    """
    This is the type of query. Only allowed type is "vapiql-json".
    """

    table: JsonQueryOnCallTableWithStringTypeColumnTable = pydantic.Field()
    """
    This is the table that will be queried.
    """

    filters: typing.Optional[typing.List[JsonQueryOnCallTableWithStringTypeColumnFiltersItem]] = pydantic.Field(
        default=None
    )
    """
    This is the filters to apply to the insight.
    The discriminator automatically selects the correct filter type based on column and operator.
    """

    column: JsonQueryOnCallTableWithStringTypeColumnColumn = pydantic.Field()
    """
    This is the column that will be queried in the selected table.
    Available columns depend on the selected table.
    String Type columns are columns where the rows store String data
    """

    operation: JsonQueryOnCallTableWithStringTypeColumnOperation = pydantic.Field()
    """
    This is the aggregation operation to perform on the column.
    When the column is a string type, the operation must be "count".
    """

    name: typing.Optional[str] = pydantic.Field(default=None)
    """
    This is the name of the query.
    It will be used to label the query in the insight board on the UI.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
