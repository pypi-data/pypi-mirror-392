# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
import typing_extensions
from ..core.pydantic_utilities import IS_PYDANTIC_V2
from ..core.serialization import FieldMetadata
from ..core.unchecked_base_model import UncheckedBaseModel
from .fallback_assembly_ai_transcriber_language import FallbackAssemblyAiTranscriberLanguage
from .fallback_assembly_ai_transcriber_provider import FallbackAssemblyAiTranscriberProvider


class FallbackAssemblyAiTranscriber(UncheckedBaseModel):
    provider: FallbackAssemblyAiTranscriberProvider = pydantic.Field()
    """
    This is the transcription provider that will be used.
    """

    language: typing.Optional[FallbackAssemblyAiTranscriberLanguage] = pydantic.Field(default=None)
    """
    This is the language that will be set for the transcription.
    """

    confidence_threshold: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="confidenceThreshold")
    ] = pydantic.Field(default=None)
    """
    Transcripts below this confidence threshold will be discarded.
    
    @default 0.4
    """

    format_turns: typing_extensions.Annotated[typing.Optional[bool], FieldMetadata(alias="formatTurns")] = (
        pydantic.Field(default=None)
    )
    """
    This enables formatting of transcripts.
    
    @default true
    """

    end_of_turn_confidence_threshold: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="endOfTurnConfidenceThreshold")
    ] = pydantic.Field(default=None)
    """
    This is the end of turn confidence threshold. The minimum confidence that the end of turn is detected.
    Note: Only used if startSpeakingPlan.smartEndpointingPlan is not set.
    @min 0
    @max 1
    @default 0.7
    """

    min_end_of_turn_silence_when_confident: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="minEndOfTurnSilenceWhenConfident")
    ] = pydantic.Field(default=None)
    """
    This is the minimum end of turn silence when confident in milliseconds.
    Note: Only used if startSpeakingPlan.smartEndpointingPlan is not set.
    @default 160
    """

    word_finalization_max_wait_time: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="wordFinalizationMaxWaitTime")
    ] = None
    max_turn_silence: typing_extensions.Annotated[typing.Optional[float], FieldMetadata(alias="maxTurnSilence")] = (
        pydantic.Field(default=None)
    )
    """
    This is the maximum turn silence time in milliseconds.
    Note: Only used if startSpeakingPlan.smartEndpointingPlan is not set.
    @default 400
    """

    realtime_url: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="realtimeUrl")] = (
        pydantic.Field(default=None)
    )
    """
    The WebSocket URL that the transcriber connects to.
    """

    word_boost: typing_extensions.Annotated[typing.Optional[typing.List[str]], FieldMetadata(alias="wordBoost")] = (
        pydantic.Field(default=None)
    )
    """
    Add up to 2500 characters of custom vocabulary.
    """

    keyterms_prompt: typing_extensions.Annotated[
        typing.Optional[typing.List[str]], FieldMetadata(alias="keytermsPrompt")
    ] = pydantic.Field(default=None)
    """
    Keyterms prompting improves recognition accuracy for specific words and phrases.
    Can include up to 100 keyterms, each up to 50 characters.
    Costs an additional $0.04/hour when enabled.
    """

    end_utterance_silence_threshold: typing_extensions.Annotated[
        typing.Optional[float], FieldMetadata(alias="endUtteranceSilenceThreshold")
    ] = pydantic.Field(default=None)
    """
    The duration of the end utterance silence threshold in milliseconds.
    """

    disable_partial_transcripts: typing_extensions.Annotated[
        typing.Optional[bool], FieldMetadata(alias="disablePartialTranscripts")
    ] = pydantic.Field(default=None)
    """
    Disable partial transcripts.
    Set to `true` to not receive partial transcripts. Defaults to `false`.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
