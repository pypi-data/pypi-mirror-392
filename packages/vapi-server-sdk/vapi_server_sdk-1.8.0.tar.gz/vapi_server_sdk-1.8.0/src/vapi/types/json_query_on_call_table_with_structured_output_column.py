# This file was auto-generated by Fern from our API Definition.

import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2
from ..core.unchecked_base_model import UncheckedBaseModel
from .json_query_on_call_table_with_structured_output_column_column import (
    JsonQueryOnCallTableWithStructuredOutputColumnColumn,
)
from .json_query_on_call_table_with_structured_output_column_filters_item import (
    JsonQueryOnCallTableWithStructuredOutputColumnFiltersItem,
)
from .json_query_on_call_table_with_structured_output_column_operation import (
    JsonQueryOnCallTableWithStructuredOutputColumnOperation,
)
from .json_query_on_call_table_with_structured_output_column_table import (
    JsonQueryOnCallTableWithStructuredOutputColumnTable,
)
from .json_query_on_call_table_with_structured_output_column_type import (
    JsonQueryOnCallTableWithStructuredOutputColumnType,
)


class JsonQueryOnCallTableWithStructuredOutputColumn(UncheckedBaseModel):
    type: JsonQueryOnCallTableWithStructuredOutputColumnType = pydantic.Field()
    """
    This is the type of query. Only allowed type is "vapiql-json".
    """

    table: JsonQueryOnCallTableWithStructuredOutputColumnTable = pydantic.Field()
    """
    This is the table that will be queried.
    """

    filters: typing.Optional[typing.List[JsonQueryOnCallTableWithStructuredOutputColumnFiltersItem]] = pydantic.Field(
        default=None
    )
    """
    This is the filters to apply to the insight.
    The discriminator automatically selects the correct filter type based on column and operator.
    """

    column: JsonQueryOnCallTableWithStructuredOutputColumnColumn = pydantic.Field()
    """
    This is the column that will be queried in the call table.
    Structured Output Type columns are only to query on artifact.structuredOutputs[OutputID] column.
    """

    operation: JsonQueryOnCallTableWithStructuredOutputColumnOperation = pydantic.Field()
    """
    This is the aggregation operation to perform on the column.
    When the column is a structured output type, the operation depends on the value of the structured output.
    If the structured output is a string or boolean, the operation must be "count".
    If the structured output is a number, the operation can be "average", "sum", "min", or "max".
    """

    name: typing.Optional[str] = pydantic.Field(default=None)
    """
    This is the name of the query.
    It will be used to label the query in the insight board on the UI.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
