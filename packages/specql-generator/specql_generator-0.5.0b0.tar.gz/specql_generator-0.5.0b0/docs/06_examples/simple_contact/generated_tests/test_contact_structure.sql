-- Test Contact Structure
-- Generated by SpecQL v0.5.0-beta
-- Tests database schema compliance with entity definition

BEGIN;
SELECT plan(10);

-- Test: Contact table should exist
SELECT has_table(
    'crm'::name,
    'tb_contact'::name,
    'Contact table should exist'
);

-- Test: Email column exists with correct type
SELECT has_column('crm', 'tb_contact', 'email');
SELECT col_type_is('crm', 'tb_contact', 'email', 'text');

-- Test: First name column exists
SELECT has_column('crm', 'tb_contact', 'first_name');
SELECT col_type_is('crm', 'tb_contact', 'first_name', 'text');

-- Test: Last name column exists
SELECT has_column('crm', 'tb_contact', 'last_name');
SELECT col_type_is('crm', 'tb_contact', 'last_name', 'text');

-- Test: Status column exists with enum type
SELECT has_column('crm', 'tb_contact', 'status');
SELECT col_type_is('crm', 'tb_contact', 'status', 'text');

-- Test: Phone column exists
SELECT has_column('crm', 'tb_contact', 'phone');
SELECT col_type_is('crm', 'tb_contact', 'phone', 'text');

-- Test: Primary key constraint exists
SELECT col_is_pk('crm', 'tb_contact', 'id');

-- Test: Status check constraint exists
SELECT has_check_constraint('crm', 'tb_contact', 'status', 'status_check');

-- Test: Audit columns exist
SELECT has_column('crm', 'tb_contact', 'created_at');
SELECT has_column('crm', 'tb_contact', 'updated_at');

SELECT * FROM finish();
ROLLBACK;