"""
Comprehensive help documentation for SpecQL CLI

This module contains the enhanced help text that transforms the CLI from
"powerful but requires expertise" to "powerful AND intuitive".
"""

from typing import Dict, Any


def get_generate_help_text() -> str:
    """Get the comprehensive help text for the generate command"""
    return """
Usage: specql generate [OPTIONS] ENTITY_FILES...

   Generate production-ready PostgreSQL schema from SpecQL YAML entity definitions.

    By default, generates hierarchical directory structure in migrations/ with FraiseQL
    framework defaults (tv_* views, Trinity pattern, audit fields) for production use.

 QUICK START:

   # First time? See example specifications
   specql examples --list
   specql examples simple-entity

   # Generate your first entity
   specql generate my-entity.yaml

   # Interactive mode with previews and confirmations
   specql generate entities/**/*.yaml --interactive

 COMMON EXAMPLES:

  # Generate all entities (FraiseQL framework, production-ready)
  specql generate entities/**/*.yaml
  # → Uses FraiseQL defaults: tv_* views, Trinity pattern, audit fields

  # Generate for specific framework
  specql generate entities/**/*.yaml --framework django
  # → Uses Django defaults: models.py, admin.py, no tv_*

  # Generate specific entities
  specql generate entities/catalog/*.yaml

   # Custom output directory
   specql generate entities/**/*.yaml --output migrations/v2/

   # Development mode (flat structure for confiture)
   specql generate entities/**/*.yaml --dev

   # Dry run to see what would be generated
   specql generate entities/**/*.yaml --dry-run

   # List available frameworks
   specql list-frameworks

 OUTPUT FORMATS:

  hierarchical (default)
    Organized directory structure matching domain/subdomain/entity hierarchy.
    Best for: Production migrations, large codebases, team collaboration

    Structure:
      migrations/
        ├── 000_app_foundation.sql
        └── 01_write_side/
            ├── 011_catalog/
            │   └── 0112_manufacturer/
            │       └── 01121_manufacturer/
            │           ├── 011211_tb_manufacturer.sql
            │           └── 011211_fn_manufacturer_*.sql

  flat (--dev or --format=confiture)
    Flat directory structure grouped by object type.
    Best for: Development with confiture, simple projects

    Structure:
      db/schema/
        ├── 10_tables/manufacturer.sql
        ├── 20_helpers/manufacturer_helpers.sql
        └── 30_functions/create_manufacturer.sql

GENERATED ARTIFACTS:

  For each entity, SpecQL generates:
    • Table definition (tb_*) with Trinity pattern (id, pk_*, identifier)
    • Table view (tv_*) for GraphQL queries (default, use --no-tv to skip)
    • Audit fields (created_at, updated_at, deleted_at, etc.)
    • Foreign key constraints and indexes
    • Helper functions (get_by_id, get_by_identifier, etc.)
    • CRUD actions (create_*, update_*, delete_*)
    • Business action functions (as defined in YAML)
    • GraphQL metadata (FraiseQL @comments)

OPTIONS:

  --framework [fraiseql|django|rails|prisma]  Target framework (default: fraiseql)
  --format [hierarchical|flat]                Output format (default: hierarchical)
  --output DIRECTORY                          Output directory (default: migrations/)
  --use-registry                              Use registry for table codes (default: enabled)
  --dev                                       Development mode: flat format in db/schema/
  --no-tv                                     Skip table view (tv_*) generation
   --foundation-only                           Generate only app foundation
   --verbose, -v                               Show detailed generation progress
   --dry-run                                   Show what would be generated without writing
   --interactive                               Interactive mode with previews and confirmations
   --help                                      Show this help message

FRAMEWORK-SPECIFIC DEFAULTS:

  FraiseQL (default):
    • Table views (tv_*) for GraphQL queries
    • Trinity pattern (pk_*, id, identifier)
    • Audit fields (created_at, updated_at, etc.)
    • FraiseQL GraphQL annotations
    • Helper functions for type-safe access

  Django (future):
    • models.py with Django ORM models
    • admin.py for Django admin interface
    • Standard Django migrations
    • Single primary key (id)

  Rails (future):
    • ActiveRecord model classes
    • Rails migration files
    • Standard Rails conventions
    • Single primary key (id)

TABLE VIEWS (tv_*) - FraiseQL Specific:

  For FraiseQL framework, table views are generated by default.
  Table views provide:
    • GraphQL-friendly views with FraiseQL annotations
    • Simplified query interface for frontend applications
    • Automatic JOIN resolution for relationships
    • Essential for full-stack FraiseQL deployments

  Use --no-tv to skip table view generation if not needed.

MORE HELP:

  Documentation:  https://github.com/fraiseql/specql/docs
  Examples:       https://github.com/fraiseql/specql/examples

Report issues: https://github.com/fraiseql/specql/issues
"""


def get_framework_help() -> Dict[str, Any]:
    """Get framework-specific help information"""
    return {
        "fraiseql": {
            "description": "PostgreSQL + FraiseQL GraphQL (full-stack)",
            "defaults": {
                "include_tv": True,
                "trinity_pattern": True,
                "audit_fields": True,
                "fraiseql_annotations": True,
                "helper_functions": True,
            },
            "artifacts": [
                "Table views (tv_*) for GraphQL queries",
                "Trinity pattern (pk_*, id, identifier)",
                "Audit fields (created_at, updated_at, etc.)",
                "FraiseQL GraphQL annotations",
                "Helper functions for type-safe access",
            ],
        },
        "django": {
            "description": "Django ORM models and admin",
            "defaults": {
                "include_tv": False,
                "trinity_pattern": False,
                "include_models": True,
                "include_admin": True,
            },
            "artifacts": [
                "models.py with Django ORM models",
                "admin.py for Django admin interface",
                "Standard Django migrations",
                "Single primary key (id)",
            ],
        },
        "rails": {
            "description": "Rails ActiveRecord models",
            "defaults": {
                "include_tv": False,
                "trinity_pattern": False,
                "include_models": True,
                "include_migrations": True,
            },
            "artifacts": [
                "ActiveRecord model classes",
                "Rails migration files",
                "Standard Rails conventions",
                "Single primary key (id)",
            ],
        },
    }


def get_output_format_help() -> Dict[str, str]:
    """Get help text for different output formats"""
    return {
        "hierarchical": """
Organized directory structure matching domain/subdomain/entity hierarchy.
Best for: Production migrations, large codebases, team collaboration

Structure:
  migrations/
    ├── 000_app_foundation.sql
    └── 01_write_side/
        ├── 011_catalog/
        │   └── 0112_manufacturer/
        │       └── 01121_manufacturer/
        │           ├── 011211_tb_manufacturer.sql
        │           └── 011211_fn_manufacturer_*.sql
""",
        "flat": """
Flat directory structure grouped by object type.
Best for: Development with confiture, simple projects

Structure:
  db/schema/
    ├── 10_tables/manufacturer.sql
    ├── 20_helpers/manufacturer_helpers.sql
    └── 30_functions/create_manufacturer.sql
""",
    }


def get_examples_help() -> str:
    """Get examples section of help text"""
    return """
COMMON EXAMPLES:

  # Generate all entities (FraiseQL framework, production-ready)
  specql generate entities/**/*.yaml
  # → Uses FraiseQL defaults: tv_* views, Trinity pattern, audit fields

  # Generate for specific framework
  specql generate entities/**/*.yaml --framework django
  # → Uses Django defaults: models.py, admin.py, no tv_*

  # Generate specific entities
  specql generate entities/catalog/*.yaml

  # Custom output directory
  specql generate entities/**/*.yaml --output migrations/v2/

  # Development mode (flat structure for confiture)
  specql generate entities/**/*.yaml --dev

  # List available frameworks
  specql list-frameworks
"""
