<?xml version="1.0" encoding="UTF-8" ?>
<!-- Copyright 2020-2022 Tecnativa - Pedro M. Baeza
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>
    <data>
        <record
            model="res.groups.privilege"
            id="res_groups_privilege_account_commission"
        >
            <field name="name">Account Commissions</field>
            <field name="category_id" ref="base.module_category_hidden" />
            <field name="sequence">8</field>
        </record>
        <record id="group_invoicing_commission" model="res.groups">
            <field name="name">Manage invoices commissions</field>
            <field name="privilege_id" ref="res_groups_privilege_account_commission" />
            <field name="implied_ids" eval="[Command.link(ref('base.group_user'))]" />
            <field
                name="user_ids"
                eval="[Command.link(ref('base.user_root')), Command.link(ref('base.user_admin'))]"
            />
        </record>
    </data>
    <data noupdate="1">
        <record id="rule_invoice_line_agent_multi_company" model="ir.rule">
            <field name="name">Invoice commission line multi-company</field>
            <field name="model_id" ref="model_account_invoice_line_agent" />
            <field name="global" eval="True" />
            <field
                name="domain_force"
            >['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
        </record>
        <record id="rule_settlement_all" model="ir.rule">
            <field name="name">Commission settlements - Sales invoices</field>
            <field
                name="groups"
                eval="[Command.link(ref('group_invoicing_commission'))]"
            />
            <field name="model_id" ref="model_commission_settlement" />
            <field
                name="domain_force"
            >[('settlement_type', '=', 'sale_invoice')]</field>
        </record>
    </data>
</odoo>
