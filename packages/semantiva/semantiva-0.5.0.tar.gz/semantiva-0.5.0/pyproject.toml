[project]
name = "semantiva"
dynamic = []
description = "Semantiva: An HPC-ready, domain-driven, type-oriented framework that delivers semantic transparency to advanced scientific computing."
license = "Apache-2.0"
readme = "README.md"
requires-python = ">=3.10.12"
dependencies = [
    "numpy >=1.21.2",
    "pyyaml >= 6.0",
    "rdflib >= 4.2.2",
    "typing_extensions >= 4.3.0",
    "jsonschema >= 4.0.0",
    "referencing >= 0.2.0",
]
distribution = true
version = "0.5.0"

[project.scripts]
semantiva = "semantiva.cli:main"

[project.entry-points."semantiva.extensions"]
semantiva-examples = "semantiva.examples.extension:SemantivaExamplesExtension"

[tool.pdm.build]
includes = [
    "semantiva",
    "semantiva/py.typed",
    "semantiva/trace/schema/*.json",
]
excludes = [
    "semantiva/tests/**",
    "semantiva/__pycache__/**",
    "docs/**",
    "logs/**",
]

[tool.pdm.dev-dependencies]
dev = [
    "black >=24.10.0",
    "mypy >=1.14.1",
    "pylint >=3.3.3",
    "pytest >=8.3.4",
    "ruff >=0.1.13",
    "coverage",
    "types-PyYAML>=6.0.12",
]
docs = [
    "sphinx>=7.3",
    "myst-parser>=2.0",
]

[tool.pdm.scripts]
cicheck = "bash ./ci_pipeline.sh"

[tool.pdm.version]
source = "file"
path = "version.txt"

[tool.black]

[tool.pylint]
max-line-length = 120
fail-under = 7.5

[tool.ruff]
target-version = "py310"
line-length = 120

[tool.ruff.lint]
select = [
    "E",
    "F",
]
extend-ignore = [
    "E501",
]

[tool.mypy]
exclude = [
    "docs/",
]
ignore_missing_imports = true

[tool.coverage.run]
source = [
    "semantiva",
]

[tool.setuptools]
include = [
    "NOTICE",
    "LICENSE",
    "README.md",
]
include-package-data = true

[tool.setuptools.package-data]
"semantiva.trace.schema" = [
    "*.json",
]

[tool.pytest.ini_options]
markers = [
    "no_auto_examples: Skip automatic loading of semantiva-examples extension",
]

[build-system]
requires = [
    "pdm-backend",
]
build-backend = "pdm.backend"
