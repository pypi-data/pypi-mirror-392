import{r as l,j as a,R as Re,e as be}from"./vendor-react-HgYf5haI.js";import{r as le}from"./vendor-react-grid-layout-p1QaFhf8.js";import{u as Oe,E as Ne}from"./vendor-echarts-Dwmdrxdr.js";import{i as we,a as Pe}from"./vendor-echarts-gl-Dy9zB92n.js";import"./vendor-main-DSi3UDf9.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const ae=new Set(["surface","radar","area","areas","pie","text","gauge"]),se="transparent",Z=2,Fe=!1,ye=!0,De="#333",Ue=12,V="#999",Me="dashed",Ge="#e0e0e0",U=!0,Ae="rgba(64, 158, 255, 0.2)",K="#673ab7",je=16,ke="23%",Be="3%",Xe="3%",We="10%",He=!0,qe="axis",Ve="cross",Ye="#6a7985",$e="center",Ze=7,J=35,Q=!1,ve=2,ze="#409eff",ie="category",ue="auto",de="category",pe="auto",fe="time",me="auto",Ee="category",he="auto",ge="shadow",Ke=!0,Je=!0,Qe=["40%","65%"],et="item",tt="{b}: {c} ({d}%)",ot="item",nt=10,rt="50%",st="60%",at="70%",ct=0,lt=1,it=2,ne=2,ut=100,dt=100,pt=250,ft="value",mt="value",Et="value",ht="continuous",gt="right",Tt="center",_t=["High","Low"],xt=!0,St=["#5470c6","#73c0de","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#d73027","#ee6666"],yt=!1,At="color",vt="center",Ct="center",Lt="clamp(1.2rem, 1.6vw, 2.2rem)",It="bold",Rt="center",bt="middle",Ot=40,Nt=10,wt=["50%","55%"],Pt="90%",Te=[210,-30],Ft=4,re=[.25,.5,.75,1],ee=["#91cc75","#fac858","#fc8452","#ee6666"],Dt=[[.25,"#91cc75"],[.5,"#fac858"],[.75,"#fc8452"],[1,"#ee6666"]],Ut=15,Mt=10,te="clamp(0.6rem, 0.8vw, 1.0rem)",Gt=30,jt=20,_e="auto",kt=5,Bt="clamp(0.9rem, 0.8vw, 1.5rem)",Xt="bold",Wt=[0,"40%"],Ht="clamp(0.9rem, 0.8vw, 1.5rem)",qt=[0,"60%"],T=(e,o)=>({progressive:500,progressiveThreshold:2e3,animationDurationUpdate:200,animationEasingUpdate:"linear",title:{text:e,left:$e,textStyle:{fontSize:je,color:o?.["--primary-color"]||K},top:Ze},tooltip:{trigger:qe,axisPointer:{type:Ve,label:{backgroundColor:Ye}}},grid:{top:ke,left:Be,right:Xe,bottom:We,containLabel:He},backgroundColor:se}),Vt=(e,o)=>{const n=o-e;if(n<=0)return .1;const t=n/5,r=[1e-4,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100];let s=1;for(let i=0;i<r.length;i++)if(r[i]>=t){s=r[i];break}return s},D=e=>{const o=e.length>0?Math.min(...e):0,n=e.length>0?Math.max(...e):1;return{type:"value",max:t=>parseFloat((t.max+.01).toFixed(Z)),min:t=>parseFloat((t.min-.01).toFixed(Z)),interval:parseFloat((e.length>0?Vt(o,n):1).toFixed(Z)),axisLabel:{hideOverlap:U,formatter:t=>t.toFixed(Z)},axisLine:{lineStyle:{color:V}},splitLine:{lineStyle:{color:Ge,type:Me}}}},j=(e,o,n)=>{const t={name:o,type:e};return["line","sequence","lines","sequences"].includes(e)?{...t,smooth:ye,showSymbol:Fe,lineStyle:{width:ve},areaStyle:{color:Ae},data:n}:e==="bar"?{...t,data:n}:e==="scatter"?{...t,data:n,symbolSize:nt}:t},Yt={sequence:(e,o,n)=>({...T(o,n),xAxis:{type:fe,axisLine:{lineStyle:{color:V}},axisLabel:{interval:me,hideOverlap:U}},yAxis:D(e.map(t=>t.value)),series:[j("line","Sequence Value",e.map(t=>({id:t.id,value:[t.index,t.value]})))]}),line:(e,o,n)=>({...T(o,n),xAxis:{type:ie,axisLine:{lineStyle:{color:V}},axisLabel:{interval:ue,hideOverlap:U}},yAxis:D(e.map(t=>t.value)),series:[j("line","Line Value",e.map(t=>[t.index,t.value]))]}),bar:(e,o,n)=>({...T(o,n),tooltip:{...T(o).tooltip,axisPointer:{type:ge}},xAxis:{type:Ee,data:e.map(t=>({id:t.id,value:t.index})),axisLabel:{interval:he,hideOverlap:U}},yAxis:D(e.map(t=>t.value)),series:[j("bar","Bar Value",e.map(t=>({id:t.id,value:t.value})))]}),pie:(e,o,n)=>({title:T(o,n).title,tooltip:{trigger:et,formatter:tt},series:[{name:"Pie Value",type:"pie",radius:Qe,avoidLabelOverlap:U,label:{show:Ke,position:"outside",formatter:"{b}"},labelLine:{show:Je},data:e.value[0].map((t,r)=>({id:t,value:e.value[1][r],name:t}))}]}),scatter:(e,o,n)=>({...T(o,n),tooltip:{trigger:ot,formatter:t=>`(${t.value[0].toFixed(Z)}, ${t.value[1].toFixed(Z)})`},xAxis:D(e.map(t=>t.value)),yAxis:D(e.map(t=>t.value)),series:[j("scatter","Scatter Value",e.map(t=>({id:t.id,value:t.value})))]}),radar:(e,o,n)=>({title:T(o,n).title,animationDurationUpdate:10,radar:{indicator:e.value[0].map((t,r)=>({name:t,max:e.value[1][r]})),center:[rt,st],radius:at,axisName:{color:De,textStyle:{fontSize:Ue}}},series:[{name:"Radar Value",type:"radar",data:[{value:e.value[2],name:"Data"}],lineStyle:{width:ve,color:ze},areaStyle:{color:Ae}}]}),sequences:(e,o,n)=>({...T(o,n),tooltip:{...T(o).tooltip},legend:{data:e[0].value[0],top:J,selectedMode:Q},xAxis:{type:fe,axisLine:{lineStyle:{color:V}},axisLabel:{interval:me,hideOverlap:U}},yAxis:D(e.flatMap(t=>t[1])),series:e[0].value[0].map((t,r)=>j("line",t,e.map(s=>({id:s.id,value:[s.index,s.value[1][r]]}))))}),lines:(e,o,n)=>({...T(o,n),tooltip:{...T(o).tooltip},legend:{data:e[0].value[0],top:J,selectedMode:Q},xAxis:{type:ie,data:e.map(t=>t.index),axisLine:{lineStyle:{color:V}},axisLabel:{interval:ue,hideOverlap:U}},yAxis:D(e.flatMap(t=>t.value[1])),series:e[0].value[0].map((t,r)=>j("line",t,e.map(s=>[s.index,s.value[1][r]])))}),bars:(e,o,n)=>({...T(o,n),tooltip:{...T(o).tooltip,axisPointer:{type:ge}},legend:{data:e[0].value[0],top:J,selectedMode:Q},xAxis:{type:Ee,data:e.map(t=>t.index),axisLabel:{interval:he,hideOverlap:U}},yAxis:D(e.flatMap(t=>t.value[1])),series:e[0].value[0].map((t,r)=>j("bar",t,e.map(s=>s.value[1][r])))}),area:(e,o,n)=>({...T(o,n),xAxis:{type:de,axisLine:{lineStyle:{color:V}},axisLabel:{interval:pe,hideOverlap:U}},yAxis:D(e.value[1]),series:[j("line","Area Value",e.value[0].map((t,r)=>[t,e.value[1][r]]))]}),areas:(e,o,n)=>({...T(o,n),tooltip:{...T(o).tooltip},legend:{data:e.value[1],top:J,selectedMode:Q},xAxis:{type:de,data:e.value[0],axisLine:{lineStyle:{color:V}},axisLabel:{interval:pe,hideOverlap:U}},yAxis:D(e.value[2].flat()),series:e.value[1].map((t,r)=>j("line",t,e.value[2][r].map((s,i)=>[e.value[0][i],s])))}),surface:(e,o,n)=>({...T(o,n),xAxis3D:{name:e.value[0][ct],nameTextStyle:{color:n?.["--primary-color"]||K},type:ft},yAxis3D:{name:e.value[0][lt],nameTextStyle:{color:n?.["--primary-color"]||K},type:mt},zAxis3D:{name:e.value[0][it],nameTextStyle:{color:n?.["--primary-color"]||K},type:Et},grid3D:{boxWidth:ut,boxDepth:dt,viewControl:{distance:pt}},visualMap:{type:ht,left:gt,top:Tt,dimension:ne,min:Math.min(...e.value[2].map(t=>t[ne])),max:Math.max(...e.value[2].map(t=>t[ne])),text:_t,calculable:xt,inRange:{color:St}},series:[{type:"surface",name:"Surface Value",dataShape:e.value[1],data:e.value[2],wireframe:{show:yt},surface:{smooth:ye},shading:At}]}),text:(e,o,n)=>({title:T(o,n).title,backgroundColor:se,graphic:[{type:"text",left:vt,top:Ct,style:{text:e&&e.value?e.value:"",fill:n?.["--primary-color"]||K,fontSize:Lt,fontWeight:It,textAlign:Rt,textVerticalAlign:bt,lineHeight:Ot},zlevel:Nt}]}),gauge:(e,o,n)=>{const t=e.value[1],r=t[0],s=t[1],i=s-r,u=r+i*re[0],p=r+i*re[1],f=r+i*re[2];return{title:T(o,n).title,backgroundColor:se,series:[{type:"gauge",center:wt,radius:Pt,startAngle:Te[0],endAngle:Te[1],min:r,max:s,splitNumber:Ft,axisLine:{lineStyle:{width:Ut,color:Dt}},axisTick:{length:Mt,lineStyle:{color:_e}},splitLine:{length:jt,lineStyle:{color:_e}},axisLabel:{distance:Gt,formatter:function(h){return h<=u?"{one|"+h.toFixed(2)+"}":h<=p?"{two|"+h.toFixed(2)+"}":h<=f?"{three|"+h.toFixed(2)+"}":"{four|"+h.toFixed(2)+"}"},rich:{one:{color:ee[0],fontSize:te},two:{color:ee[1],fontSize:te},three:{color:ee[2],fontSize:te},four:{color:ee[3],fontSize:te}}},pointer:{width:kt},title:{color:n?.["--primary-color"],fontSize:Bt,offsetCenter:Wt,fontWeight:Xt},detail:{valueAnimation:!0,fontSize:Ht,color:n?.["--primary-color"],offsetCenter:qt,formatter:function(h){return h.toFixed(2)}},data:[{value:e.value[2],name:e.value[0]}]}]}}},xe={grape:{"--primary-color":"#673ab7","--secondary-color":"#6c757d","--background-color":"#673ab7","--text-color":"#eeeeee","--primary-color-hover":"rgba(81, 45, 168, 1)"},apple:{"--primary-color":"#8eb73a","--secondary-color":"#6c757d","--background-color":"#8eb73a","--text-color":"#eeeeee","--primary-color-hover":"rgba(105, 153, 7, 1)"},sky:{"--primary-color":"#2196f3","--secondary-color":"#757575","--background-color":"#2196f3","--text-color":"#eeeeee","--primary-color-hover":"rgba(33, 150, 243, 0.8)"},coffee:{"--primary-color":"#5D4037","--secondary-color":"#A1887F","--background-color":"#4E342E","--text-color":"#FBEFF4","--primary-color-hover":"rgba(121, 85, 72, 0.8)"},night:{"--primary-color":"#37474F","--secondary-color":"#90A4AE","--background-color":"#263238","--text-color":"#CFD8DC","--primary-color-hover":"rgba(84, 110, 122, 0.8)"},moss:{"--primary-color":"#556B2F","--secondary-color":"#A4B48A","--background-color":"#495638","--text-color":"#E8F5E9","--primary-color-hover":"rgba(55, 71, 79, 0.8)"},sunset:{"--primary-color":"#BF360C","--secondary-color":"#FFAB91","--background-color":"#A61C00","--text-color":"#FBE9E7","--primary-color-hover":"rgba(216, 67, 21, 0.8)"},lake:{"--primary-color":"#006064","--secondary-color":"#80CBC4","--background-color":"#004D40","--text-color":"#E0F7FA","--primary-color-hover":"rgba(0, 131, 143, 0.8)"}},Ce=l.createContext(),$t=({children:e})=>{const[o,n]=l.useState("night"),t=xe[o];l.useEffect(()=>{for(const s in t)document.documentElement.style.setProperty(s,t[s])},[t]);const r=s=>{n(s)};return a.jsx(Ce.Provider,{value:{theme:t,changeTheme:r,allThemes:xe,currentThemeName:o},children:e})},oe=()=>l.useContext(Ce);Oe([we,Pe]);const Zt=(e,o,n,t)=>{const r=n||[];if(r.length===0)return{};const s=Yt[e.toLowerCase()];return s?s(r,o,t):{}},zt=({chartType:e,title:o,data:n,setInstance:t})=>{const{theme:r}=oe(),s=Zt(e,o,n,r),i=u=>{t&&t(u)};return Re.useEffect(()=>()=>{t&&t(null)},[t]),a.jsx(Ne,{option:s,style:{height:"100%",width:"100%"},onChartReady:i})};let Y={WEB_SOCKET:"ws://localhost:9005/ws",TITLE:"Stream Data Panel",CHART_TYPE:"ChartType",KEY_WORD:"KeyWord",SUBSCRIBE:"SUBSCRIBE",FAILED:"FAILED",SUCCESS:"SUCCESS"};async function Kt(){try{return Y=await(await fetch("/config")).json(),console.log("Configuration loaded from Haskell successfully."),Y}catch(e){if(console.log("Failed to load configuration from Haskell:",e),typeof eel>"u")return console.warn("Eel object not found. Using default/placeholder configuration."),Y;try{return Y=await eel.get_initial_config()(),console.log("Configuration loaded from Python successfully."),Y}catch(o){return console.error("Failed to load configuration from Python:",o),Y}}}function $(){return Y}const Jt=()=>$().WEB_SOCKET,Qt=()=>$().TITLE,eo=()=>$().CHART_TYPE,to=()=>$().KEY_WORD,oo=()=>$().SUBSCRIBE,no=()=>$().FAILED,ro=()=>$().SUCCESS,Le=l.createContext(null),Ie=()=>{const e=l.useContext(Le);if(!e)throw new Error("useConfigContext must be used within a ConfigProvider");return e},so=({children:e,exportLayout:o,importLayout:n,triggerImport:t,importInputRef:r,isImporting:s,panelTitle:i,setPanelTitle:u})=>{const p={exportLayout:o,importLayout:n,triggerImport:t,importInputRef:r,isImporting:s,panelTitle:i,setPanelTitle:u};return a.jsx(Le.Provider,{value:p,children:e})},ao=e=>!e||typeof e.timestamp>"u"||typeof e.value>"u"?(console.error("Invalid data format received:",e),null):{id:e.id||`data-${Date.now()}-${pointIndex}`,index:e.timestamp,value:e.value},Se=e=>e.trim().toLowerCase(),co=(e,o,n,t,r)=>{l.useEffect(()=>()=>{clearTimeout(n.current),clearTimeout(o.current),e.current.forEach(s=>{s.readyState===WebSocket.OPEN&&s.close()}),t.current.clear(),r.current.clear()},[e,o,n,t,r])},lo=(e,o)=>{const[n,t]=l.useState([]),[r,s]=l.useState({lg:[],md:[],sm:[],xs:[],xxs:[]}),[i,u]=l.useState(""),[p,f]=l.useState(""),[h,m]=l.useState("idle"),[A,I]=l.useState(0),v=l.useRef(new Map),y=l.useRef(new Map),w=l.useRef(new Map),P=l.useRef(null),b=l.useRef(!1),M=l.useRef(null),C=l.useRef(o);l.useEffect(()=>{C.current=o},[o]);const L=l.useCallback((c,g)=>{g?w.current.set(c,g):w.current.delete(c)},[]),R=l.useCallback(()=>{b.current||(b.current=!0,M.current=setTimeout(()=>{I(c=>c+1),b.current=!1},150))},[]);co(v,M,P,w,y);const N=l.useCallback(c=>{e||(m(c),c!=="connecting"&&(clearTimeout(P.current),P.current=setTimeout(()=>m("idle"),1e3)))},[e]),F=l.useCallback((c,g,E)=>{const _=ae;return{onMessage:X=>d=>{const x=JSON.parse(d.data);if(x.status)if(x.status==="success"){const O={id:c,chartType:g,keyWord:E};y.current.set(c,[]),v.current.set(c,X),t(H=>{const q=[...H,O];return e||(s(S=>{const z={...S};for(const ce in z)z[ce]=[...z[ce],{i:c,x:0,y:1/0,w:6,h:3}];return z}),N("success")),q})}else x.status==="failure"&&(N("failure"),X.close());else{const O=ao(x);if(O){const H=y.current.get(c);if(H&&!(C.current[c]==="on")){let S;_.has(g)?S=O:(S=[...H,O],S.length>100&&S.shift()),y.current.set(c,S),R()}}}},onError:(X,d)=>{console.error(`[WS Error] ID: ${c}`,X),v.current.delete(c),n.find(x=>x.id===c)||N("failure")},onclose:()=>{console.log(`[WS Close] ID: ${c}`)}}},[e,N,R,C,n]),k=l.useCallback((c=i,g=p)=>new Promise((E,_)=>{const G=Se(c.trim()),B=Se(g.trim());if(!G||!B){N("failure"),_(new Error("Chart type or keyword cannot be empty."));return}const X=crypto.randomUUID(),d=new WebSocket(Jt());e||m("connecting");const{onMessage:x,onError:O,onclose:H}=F(X,G,B);d.onopen=()=>{const S={chart_type:G,key_word:B};d.send(JSON.stringify(S))};const q=x(d);d.onmessage=S=>{q(S),JSON.parse(S.data).status==="success"&&E(X)},d.onclose=H,d.onerror=S=>O(S,d)}),[i,p,e,F,N]),W=l.useCallback(c=>{const g=v.current.get(c);g&&(g.readyState===WebSocket.OPEN&&g.close(),v.current.delete(c)),w.current.delete(c),y.current.delete(c),t(E=>E.filter(_=>_.id!==c)),s(E=>{const _={};for(const G in E)_[G]=E[G].filter(B=>B.i!==c);return _})},[]);return{charts:n,setCharts:t,layouts:r,setLayouts:s,chartTypeInput:i,setChartTypeInput:u,keyWordInput:p,setKeyWordInput:f,subscriptionStatus:h,chartData:y,chartRefs:w,addChart:k,removeChart:W,setChartInstance:L}},io=({panelTitle:e,setPanelTitle:o,currentThemeName:n,allThemes:t,changeTheme:r,charts:s,layouts:i,setLayouts:u,addChart:p,removeChart:f,chartRefs:h,setIsImporting:m,isImporting:A})=>{const I=l.useRef(null),v=l.useCallback(()=>{I.current&&!A&&I.current.click()},[A]),y=l.useCallback(()=>{const P={title:e,themeName:n,charts:s.map(R=>({chartType:R.chartType,keyWord:R.keyWord})),layouts:i},b=JSON.stringify(P,null,2),M=new Blob([b],{type:"application/json"}),C=URL.createObjectURL(M),L=document.createElement("a");L.href=C,L.download=`panel_layout_${new Date().toISOString().slice(0,19).replace("T","_")}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(C)},[e,n,s,i]),w=l.useCallback(async P=>{const b=P.target.files[0];if(!b)return;const M=new FileReader;M.onload=async C=>{m(!0);const L=[];try{const R=JSON.parse(C.target.result),{title:N,themeName:F,charts:k,layouts:W}=R;if(N&&o(N),F&&t[F]?r(F):F&&console.warn(`Theme "${F}" not found. Keeping current theme.`),!k||!W)throw new Error("Invalid file format. Missing charts or layouts.");s.forEach(c=>f(c.id)),u({lg:[],md:[],sm:[],xs:[],xxs:[]}),await new Promise(c=>setTimeout(c,0));for(let c=0;c<k.length;c++){const g=k[c];try{const E=await p(g.chartType,g.keyWord);L.push({oldI:W.lg[c]?.i||`temp-old-id-${c}`,newI:E})}catch(E){console.error(`Failed to subscribe to chart ${g.keyWord}:`,E)}}if(await new Promise(c=>setTimeout(c,300)),L.length>0){const c={...W},g=new Map(L.map(E=>[E.oldI,E.newI]));for(const E in c)c[E]&&(c[E]=c[E].filter(_=>g.has(_.i)).map(_=>({..._,i:g.get(_.i)})));u(c),await new Promise(E=>setTimeout(E,50)),h.current.forEach(E=>{try{E.resize()}catch(_){console.error("ECharts resize failed:",_)}}),console.log("Panel layout imported, positioned, and charts resized successfully.")}else console.log("No charts were successfully imported/subscribed.")}catch(R){console.error("Error importing layout file:",R),alert("Import layout file failed: "+R.message)}finally{m(!1),P.target.value=null}},M.readAsText(b)},[s,f,u,p,o,r,t,h,m]);return{importInputRef:I,triggerImport:v,exportLayout:y,importLayout:w}},uo=le.WidthProvider(le.Responsive),po=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),fo=(e,o,n,t)=>{l.useEffect(()=>{const r=n.current,s=t.current;e.forEach(u=>{const p=u.id,f=ae.has(u.chartType),h=s.has(p);if(!h&&f){const m=r.get(p);if(m){const A=m.getDom(),I=v=>{v.stopPropagation(),o(p)};A.addEventListener("dblclick",I),s.set(p,{domElement:A,handler:I})}}if(h&&!f){const m=s.get(p);m.domElement.removeEventListener("dblclick",m.handler),s.delete(p)}});const i=new Set(e.map(u=>u.id));s.forEach((u,p)=>{i.has(p)||(u.domElement.removeEventListener("dblclick",u.handler),s.delete(p))})},[e,o,n,t])},mo=(e,o)=>{l.useEffect(()=>{Object.entries(e).forEach(([n,t])=>{if(t==="on"){const r=o.current.get(n);r&&r.resize()}})},[e,o])},Eo=({children:e})=>{const{theme:o,changeTheme:n,allThemes:t,currentThemeName:r}=oe(),[s,i]=l.useState(Qt()),[u,p]=l.useState(!1),[f,h]=l.useState({}),{charts:m,layouts:A,setLayouts:I,chartTypeInput:v,setChartTypeInput:y,keyWordInput:w,setKeyWordInput:P,subscriptionStatus:b,chartData:M,chartRefs:C,addChart:L,removeChart:R,setChartInstance:N}=lo(u,f),F=l.useRef(new Map),k=l.useCallback((d,x)=>{h(O=>{const q=(O[d]==="on"?"on":"off")==="on"?"off":"on";console.log(`[Chart DoubleClick] ID: ${d}, State: ${q}, Type: ${x.chartType}`);const S=C.current.get(d);return S&&setTimeout(()=>S.resize(),0),{...O,[d]:q}})},[C]),W=l.useCallback(d=>{const x=m.find(O=>O.id===d);!x||!ae.has(x.chartType)||k(d,x)},[m,k]);fo(m,W,C,F),mo(f,C);const{importInputRef:c,triggerImport:g,exportLayout:E,importLayout:_}=io({panelTitle:s,setPanelTitle:i,currentThemeName:r,allThemes:t,changeTheme:n,charts:m,layouts:A,setLayouts:I,addChart:L,removeChart:R,chartRefs:C,setIsImporting:p,isImporting:u}),G=()=>a.jsxs("div",{className:"controls",children:[a.jsxs("div",{className:"underline-input-group",children:[a.jsxs("div",{className:"underline-input-wrapper",children:[a.jsx("input",{id:"ChartType",type:"text",className:"underline-input",placeholder:" ",value:v,onChange:d=>y(d.target.value)}),a.jsx("label",{className:"underline-label",htmlFor:"ChartType",children:eo()})]}),a.jsxs("div",{className:"underline-input-wrapper",children:[a.jsx("input",{id:"KeyWord",type:"text",className:"underline-input",placeholder:" ",value:w,onChange:d=>P(d.target.value)}),a.jsx("label",{className:"underline-label",htmlFor:"KeyWord",children:to()})]})]}),a.jsx("div",{className:"underline-button-group",children:a.jsx("button",{className:`underline-button ${b}`,onClick:()=>L(v,w),disabled:u,children:u?"IMPORTING...":b==="success"?ro():b==="failure"?no():oo()})})]}),B=()=>a.jsx(uo,{className:"layout",layouts:A,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:100,margin:[20,20],onLayoutChange:(d,x)=>I(x),draggableHandle:".chart-drag-handle",children:m.map(d=>a.jsxs("div",{className:`chart-item ${f[d.id]==="on"?"chart-item-zoomed":""}`,children:[a.jsx("div",{className:"chart-drag-handle",children:"..."}),a.jsx("div",{className:"chart-content",children:a.jsx(zt,{chartType:d.chartType,title:po(`${d.keyWord}`),data:M.current.get(d.id)||[],setInstance:x=>N(d.id,x)})}),a.jsx("button",{onClick:()=>R(d.id),className:"remove-button",children:"Ã—"})]},d.id))});return a.jsxs(so,{exportLayout:E,importLayout:_,triggerImport:g,importInputRef:c,isImporting:u,panelTitle:s,setPanelTitle:i,children:[e,a.jsx("input",{type:"file",id:"import-layout",ref:c,className:"import-file",accept:".json",onChange:_,disabled:u,style:{display:"none"}}),a.jsxs("div",{className:"panel",children:[G(),a.jsx("div",{className:"grid-container",children:B()})]})]})},ho="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M480-480Zm-400%200q0-88%2034-163t93-130q59-55%20136-83.5T508-879q17%202%2027%2014.5t7%2029.5q-3%2017-16.5%2027t-30.5%209q-69-3-129.5%2019.5T259-713q-46%2044-72.5%20103.5T160-480q0%20134%2093%20227t227%2093q69%200%20128.5-26.5T712-259q46-48%2068-109t19-127q-1-17%209-30.5t27-16.5q17-3%2029.5%207t14.5%2027q6%2087-22.5%20164T774-208q-57%2062-133%2095T480-80q-83%200-156-31.5T197-197q-54-54-85.5-127T80-480Zm640-120q-50%200-85-35t-35-85q0-50%2035-85t85-35q50%200%2085%2035t35%2085q0%2050-35%2085t-85%2035Z'/%3e%3c/svg%3e",go=()=>{const{theme:e,changeTheme:o,allThemes:n}=oe(),[t,r]=l.useState(!1),s=l.useRef(null),i=l.useRef(null),u=()=>r(!0),p=()=>r(!1);return l.useEffect(()=>{const f=s.current;if(!f)return;const h=m=>{m.preventDefault();const A=i.current;A&&(A.scrollLeft+=m.deltaY*.4+m.deltaX)};return f.addEventListener("wheel",h,{passive:!1}),()=>{f.removeEventListener("wheel",h)}},[]),a.jsxs("div",{ref:s,className:`control-icon-container theme-selector-container ${t?"open":""}`,onMouseEnter:u,onMouseLeave:p,children:[a.jsx("button",{className:"control-icon-button theme-toggle-button",style:{backgroundColor:e?.["--primary-color"],color:e?.["--text-color"]},children:a.jsx("img",{src:ho,alt:"T",className:"control-icon-svg theme-icon-svg"})}),a.jsx("div",{ref:i,className:`theme-list ${t?"open":""}`,children:Object.keys(n).map(f=>a.jsx("button",{className:"theme-select-button",onClick:()=>o(f),style:{backgroundColor:n[f]?.["--primary-color"],color:n[f]?.["--text-color"],borderColor:e===n[f]?"#fff":"transparent"},children:f},f))})]})},To=()=>{const{panelTitle:e,setPanelTitle:o}=Ie(),[n,t]=l.useState(!1),r=()=>{t(!0)},s=p=>{o(p.target.value)},i=()=>{t(!1)},u=p=>{p.key==="Enter"&&t(!1)};return a.jsx("header",{className:"header-title",children:n?a.jsx("input",{id:"header-input",className:"header-input",type:"text",value:e,onChange:s,onBlur:i,onKeyDown:u,autoFocus:!0}):a.jsx("h1",{className:"header-h1",onDoubleClick:r,children:e||"Input New Title"})})},_o="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M480-320%20280-520l56-58%20104%20104v-326h80v326l104-104%2056%2058-200%20200ZM240-160q-33%200-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0%2033-23.5%2056.5T720-160H240Z'/%3e%3c/svg%3e",xo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M240-400q-33%200-56.5-23.5T160-480q0-33%2023.5-56.5T240-560q33%200%2056.5%2023.5T320-480q0%2033-23.5%2056.5T240-400Zm240%200q-33%200-56.5-23.5T400-480q0-33%2023.5-56.5T480-560q33%200%2056.5%2023.5T560-480q0%2033-23.5%2056.5T480-400Zm240%200q-33%200-56.5-23.5T640-480q0-33%2023.5-56.5T720-560q33%200%2056.5%2023.5T800-480q0%2033-23.5%2056.5T720-400Z'/%3e%3c/svg%3e",So="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M440-320v-326L336-542l-56-58%20200-200%20200%20200-56%2058-104-104v326h-80ZM240-160q-33%200-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0%2033-23.5%2056.5T720-160H240Z'/%3e%3c/svg%3e",yo=()=>{const{theme:e,changeTheme:o,allThemes:n}=oe(),[t,r]=l.useState(!1),[s,i]=l.useState(!1),u=()=>r(!0),p=()=>r(!1),f=()=>i(!0),h=()=>i(!1),{exportLayout:m,importLayout:A,triggerImport:I,importInputRef:v,isImporting:y}=Ie();return a.jsxs("div",{className:"control-icon-group config-io-group",children:[a.jsx("div",{className:`control-icon-container config-io-container ${t?"open":""}`,onMouseEnter:u,onMouseLeave:p,children:a.jsx("button",{className:`control-icon-button config-io-button ${t?"open":""}`,onClick:m,disabled:y,children:a.jsx("img",{src:_o,alt:"S",className:"control-icon-svg config-icon-svg download"})})}),a.jsxs("div",{className:`control-icon-container config-io-container ${s?"open":""}`,onMouseEnter:f,onMouseLeave:h,children:[a.jsx("button",{className:`control-icon-button config-io-button ${s?"open":""}`,onClick:I,disabled:y,children:y?a.jsx("img",{src:xo,alt:":",className:"control-icon-svg config-icon-svg import"}):a.jsx("img",{src:So,alt:"L",className:"control-icon-svg config-icon-svg upload"})}),a.jsx("input",{type:"file",id:"import-layout",ref:v,className:"import-file",accept:".json",onChange:A,style:{display:"none"},disabled:y})]})]})},Ao=()=>a.jsxs("div",{className:"header-row",children:[a.jsx(go,{}),a.jsx(To,{}),a.jsx(yo,{})]});function vo(){const[e,o]=l.useState(!0);return l.useEffect(()=>{Kt().then(()=>{o(!1)})},[]),e?a.jsx("div",{children:"Loading Application Configuration... Please wait."}):a.jsx($t,{children:a.jsx("div",{className:"app",children:a.jsx(Eo,{children:a.jsx(Ao,{})})})})}be.createRoot(document.getElementById("root")).render(a.jsx(l.StrictMode,{children:a.jsx(vo,{})}));
