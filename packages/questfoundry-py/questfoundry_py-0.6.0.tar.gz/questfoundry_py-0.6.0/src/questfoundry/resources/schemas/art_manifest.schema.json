{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://questfoundry.liesdonk.nl/schemas/art_manifest.schema.json",
  "title": "Art Manifest",
  "description": "Generated from 02-dictionary/artifacts/art_manifest.md. Art Director's inventory of all visual assets (covers, plates, thumbnails, scene art) with filenames, captions, prompts, hashes, and approval status.",
  "type": "object",
  "properties": {
    "manifest_version": {
      "type": "string",
      "description": "Manifest schema version.",
      "const": "1.0"
    },
    "project": {
      "type": "string",
      "description": "Project title (from project_metadata.json). Used for validation and traceability.",
      "minLength": 1,
      "maxLength": 200
    },
    "created": {
      "type": "string",
      "description": "ISO 8601 timestamp of manifest creation.",
      "format": "date-time",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
    },
    "last_updated": {
      "type": "string",
      "description": "ISO 8601 timestamp of last manifest update.",
      "format": "date-time",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
    },
    "assets": {
      "type": "array",
      "description": "Array of visual asset entries.",
      "items": {
        "$ref": "#/$defs/asset_entry"
      },
      "minItems": 1
    }
  },
  "required": ["manifest_version", "project", "created", "last_updated", "assets"],
  "additionalProperties": false,
  "$defs": {
    "asset_entry": {
      "type": "object",
      "description": "Individual visual asset entry in the manifest.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for asset. Matches filename stem (without extension) plus variant suffix if needed.",
          "minLength": 3,
          "maxLength": 100,
          "pattern": "^[a-zA-Z0-9_-]+$"
        },
        "role": {
          "type": "string",
          "description": "Asset type/role in the manuscript.",
          "enum": [
            "cover",
            "cover_backup",
            "interior_plate",
            "scene_art",
            "thumbnail",
            "banner",
            "other"
          ]
        },
        "filename": {
          "type": "string",
          "description": "Exact filename for rendered asset. Must match actual file on disk. Format: {role}_{section_id}_{variant}.{ext}",
          "minLength": 5,
          "maxLength": 200,
          "pattern": "^[a-zA-Z0-9_-]+\\.(png|svg|jpg|jpeg|webp)$"
        },
        "format": {
          "type": "string",
          "description": "File format.",
          "enum": ["PNG", "SVG", "JPEG", "WEBP", "other"]
        },
        "dimensions": {
          "type": "string",
          "description": "Image dimensions in pixels or 'vector' for SVG. Format: {width}x{height} or 'vector'",
          "pattern": "^(\\d+x\\d+|vector)$"
        },
        "title_bearing": {
          "type": "boolean",
          "description": "Whether image includes book title text (rendered, not added in post). Critical for covers: primary cover must be title_bearing: true."
        },
        "caption": {
          "type": ["string", "null"],
          "description": "Player-safe caption for image. Used in <figcaption>, alt text, accessibility. No spoilers, describe what's visible.",
          "minLength": 5,
          "maxLength": 300
        },
        "prompt": {
          "type": "string",
          "description": "Full prompt used to generate image. Stored for reproducibility and re-rendering.",
          "minLength": 10,
          "maxLength": 2000
        },
        "section_anchor": {
          "type": ["string", "null"],
          "description": "Manuscript section anchor where image should be placed. Null for covers/standalone assets.",
          "pattern": "^[a-zA-Z0-9_-]+$"
        },
        "sha256": {
          "type": ["string", "null"],
          "description": "SHA-256 hash of rendered file. Used for integrity verification. 64-character hex string or null if not yet rendered.",
          "pattern": "^[a-f0-9]{64}$"
        },
        "status": {
          "type": "string",
          "description": "Asset approval status.",
          "enum": ["planned", "rendered", "approved", "rejected", "deferred"]
        },
        "rendered_date": {
          "type": ["string", "null"],
          "description": "ISO 8601 timestamp of rendering. Null if status is 'planned' or 'deferred'.",
          "format": "date-time",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"
        },
        "notes": {
          "type": ["string", "null"],
          "description": "Internal notes for tracking, re-work requests, or context.",
          "maxLength": 500
        }
      },
      "required": [
        "id",
        "role",
        "filename",
        "format",
        "dimensions",
        "title_bearing",
        "prompt",
        "section_anchor",
        "sha256",
        "status",
        "rendered_date"
      ],
      "additionalProperties": false
    }
  }
}
