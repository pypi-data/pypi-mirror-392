(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,n){var i=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var i=n(11611),s=n(82846),a=n(91936),r=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,u,d,g,p,m=0,f=!1,h=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function v(t){var n=l,i=c;return l=c=void 0,m=t,d=e.apply(i,n)}function y(e){var n=e-p,i=e-m;return void 0===p||n>=t||n<0||h&&i>=u}function j(){var e,n,i,a=s();if(y(a))return C(a);g=setTimeout(j,(e=a-p,n=a-m,i=t-e,h?o(i,u-n):i))}function C(e){return(g=void 0,x&&l)?v(e):(l=c=void 0,d)}function _(){var e,n=s(),i=y(n);if(l=arguments,c=this,p=n,i){if(void 0===g)return m=e=p,g=setTimeout(j,t),f?v(e):d;if(h)return clearTimeout(g),g=setTimeout(j,t),v(p)}return void 0===g&&(g=setTimeout(j,t)),d}return t=a(t)||0,i(n)&&(f=!!n.leading,u=(h="maxWait"in n)?r(a(n.maxWait)||0,t):u,x="trailing"in n?!!n.trailing:x),_.cancel=function(){void 0!==g&&clearTimeout(g),m=0,l=p=c=g=void 0},_.flush=function(){return void 0===g?d:C(s())},_}},82846:function(e,t,n){var i=n(77400);e.exports=function(){return i.Date.now()}},91936:function(e,t,n){var i=n(74833),s=n(11611),a=n(55193),r=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return r;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?r:+e}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(22627)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var i=n(24246),s=n(66726),a=n.n(s),r=n(27378),o=n(26917);let l=e=>{let{value:t,onChange:n,placeholder:s,...l}=e,[c,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{u(t||"")},[t]);let d=a()(n,500),g=(0,r.useCallback)(e=>{u(e),d(e)},[]);return(0,i.jsx)(o.Z,{value:c,onChange:g,onClear:()=>{u(""),n("")},placeholder:s,...l})}},35287:function(e,t,n){"use strict";var i=n(24246),s=n(98227),a=n(88038),r=n.n(a);n(27378),t.Z=e=>{let{children:t,title:n,fullHeight:a,fullWidth:o,mainProps:l}=e;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",height:a?"100vh":"calc(100vh - 48px)",width:o?"100vw":"calc(100vw - 240px)",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)(s.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...l,children:t})]})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(24246),s=n(98227),a=n(88038),r=n.n(a),o=n(86677);n(27378);var l=n(25980),c=n(90867),u=n(42478),d=n(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(d.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:a=!0,mainProps:d}=e,p=(0,l.hz)(),m=(0,o.useRouter)(),f="/privacy-requests"===m.pathname||"/datastore-connection"===m.pathname,h=!(p.flags.messagingConfiguration&&f),{data:x}=(0,u.JE)(void 0,{skip:h}),{data:v}=(0,c.PW)(void 0,{skip:h}),y=p.flags.messagingConfiguration&&(!x||!v)&&f;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[y?(0,i.jsx)(g,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var i=n(24246),s=n(98227),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:r=!0,children:o,rightContent:l,style:c,...u}=e;return(0,i.jsxs)("div",{...u,style:r?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.lQT,{className:n||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,i.jsx)(a.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(24246),s=n(98227),a=n(79894),r=n.n(a),o=n(27378);let{Text:l}=s.AntTypography,c=e=>{let{items:t,...n}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,i.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:o.title})),c)?o.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,i.jsx)(r(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,i.jsx)(s.zrq,{items:a,...n})}},9270:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var i=n(27378),s=n(36866);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.h)(e),{pageIndex:n,pageSize:a,updatePageIndex:r,updatePageSize:o,pageSizeOptions:l,showSizeChanger:c}=t,u=(0,i.useMemo)(()=>({current:n,pageSize:a,showSizeChanger:c,pageSizeOptions:l.map(String),onChange:r,onShowSizeChange:(e,t)=>{o(t)}}),[n,a,c,l,r,o]);return{...t,paginationProps:u}}},14908:function(e,t,n){"use strict";var i=n(86677),s=n(27378);let a=e=>e.startsWith("#")?e.slice(1):e;t.Z=e=>{let{tabKeys:t,initialTab:n}=e,r=(0,i.useRouter)(),o=r.asPath.split("#")[1]||t[0],[l,c]=(0,s.useState)(o);return(0,s.useEffect)(()=>{n&&t.includes(n)&&c(n)},[n,t,r.isReady]),{activeTab:l,onTabChange:(0,s.useCallback)(async e=>{if(!t.includes(e)){await r.replace({pathname:r.pathname,query:r.query,hash:void 0}),c(t[0]);return}r.isReady&&(await r.replace({pathname:r.pathname,query:r.query,hash:a(e)},void 0,{shallow:!0}),c(e))},[r,t]),setActiveTab:c}}},54762:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(24246),s=n(98227),a=n(62165),r=n(65735);let o=e=>{let{consentStatus:t}=e,{flags:n}=(0,a.hz)(),{assetConsentStatusLabels:o}=n;return o&&(null==t?void 0:t.status)===r.pF.ALERT?(0,i.jsx)(s.esZ,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,i.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,i.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,t,n){"use strict";n.d(t,{FU:function(){return c},JE:function(){return s},Ki:function(){return d},SU:function(){return g},W:function(){return p},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return u}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:u,useUpdateMessagingConfigurationSecretsByKeyMutation:d,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:p}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},22627:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var i,s,a=n(24246),r=n(98227),o=n(79894),l=n.n(o),c=n(27378),u=n(30952),d=n(25980),g=n(35287),p=n(77830),m=n(58754),f=n(9270),h=n(37059),x=n(16394),v=n(17245),y=n(67359);let j=()=>{let{resetPagination:e,pageIndex:t,pageSize:n,paginationProps:i}=(0,f.S)(),{searchQuery:s,updateSearch:o}=(0,v.Rx)(),l=(0,c.useMemo)(()=>[y.n.PENDING,y.n.IN_PROCESSING,y.n.PAUSED,y.n.RETRYING,y.n.ERROR],[]),[u,d]=(0,c.useState)(l),[g,p]=(0,c.useState)(!1),[m,x]=(0,c.useState)(l),[j,C]=(0,c.useState)(!1),_=(0,c.useCallback)(t=>{o(t),e()},[o,e]),k=(0,c.useCallback)(e=>{x(e)},[]),w=(0,c.useCallback)(e=>{C(e)},[]),b=(0,c.useCallback)(()=>{d(m),p(j),e()},[m,j,e]),S=(0,c.useCallback)(()=>{x(l),C(!1),d(l),p(!1),e()},[l,e]),E=[y.n.PENDING,y.n.IN_PROCESSING,y.n.COMPLETE,y.n.ERROR,y.n.PAUSED,y.n.RETRYING,y.n.SKIPPED],{data:T,isLoading:N,isFetching:I}=(0,h.$h)({page:t,size:n,search:s,statuses:u.length>0?u:void 0,return_dismissed:g},{pollingInterval:3e3,refetchOnFocus:!0,refetchOnReconnect:!0});return{searchQuery:s,updateSearch:_,statusFilters:m,updateStatusFilters:k,showDismissed:j,updateShowDismissed:w,applyFilters:b,resetAndApplyFilters:S,availableStatuses:E,listProps:(0,c.useMemo)(()=>({dataSource:(null==T?void 0:T.items)||[],loading:N,locale:{emptyText:(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"No tasks in progress"})}}),[null==T?void 0:T.items,N]),paginationProps:{...i,total:null==T?void 0:T.total},isLoading:N,isFetching:I}};var C=n(10969),_=n(60145),k=n(11558),w=n(70641),b=n(7317),S=n(85302),E=n(64892);function T(e,t,n){let i;let s=(0,_.j)(),a=n?.locale??s.locale??C._,r=(0,S.U)(e,t);if(isNaN(r))throw RangeError("Invalid time value");let o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:r}),[l,c]=(0,b.d)(n?.in,...r>0?[t,e]:[e,t]),u=(0,k.u)(n?.roundingMethod??"round"),d=c.getTime()-l.getTime(),g=d/E.yJ,p=(d-((0,w.D)(c)-(0,w.D)(l)))/E.yJ,m=n?.unit;if("second"===(i=m||(g<1?"second":g<60?"minute":g<E.H_?"hour":p<E.fH?"day":p<E.UU?"month":"year"))){let e=u(d/1e3);return a.formatDistance("xSeconds",e,o)}if("minute"===i){let e=u(g);return a.formatDistance("xMinutes",e,o)}if("hour"===i){let e=u(g/60);return a.formatDistance("xHours",e,o)}if("day"===i){let e=u(p/E.H_);return a.formatDistance("xDays",e,o)}if("month"===i){let e=u(p/E.fH);return 12===e&&"month"!==m?a.formatDistance("xYears",1,o):a.formatDistance("xMonths",e,o)}{let e=u(p/E.UU);return a.formatDistance("xYears",e,o)}}var N=n(88340),I=n(41337),P=n(65735);let{Paragraph:M,Text:A,Title:R}=r.AntTypography,O=e=>"paused"===e?"Awaiting Processing":e.split("_").map(x.kC).join(" "),q=e=>{var t,n,i,s,o,l,c,u,d,g;let{task:p,...m}=e,f=(0,r.pmc)(),[x,{isLoading:v}]=(0,h.mL)(),[y,{isLoading:j}]=(0,h.QC)(),C=!!p.dismissed,_="error"===p.status&&p.action_type!==P.K8.DETECTION,{data:k}=(0,h.Ud)({page:1,size:1e3}),w=p.monitor_config_id?null==k?void 0:null===(t=k.items)||void 0===t?void 0:t.find(e=>e.key===p.monitor_config_id):void 0,b=w?(0,I.AZ)({connection_type:w.connection_type,name:null!==(s=w.name)&&void 0!==s?s:null,key:null!==(o=w.key)&&void 0!==o?o:null,saas_config:w.saas_config?{type:null!==(l=w.saas_config.type)&&void 0!==l?l:null,name:null!==(c=w.saas_config.name)&&void 0!==c?c:null,fides_key:null!==(u=w.saas_config.fides_key)&&void 0!==u?u:null}:null,secrets:(null===(i=w.secrets)||void 0===i?void 0:i.url)?{url:w.secrets.url}:null}):p.connection_type?(0,I.AZ)({connection_type:p.connection_type,name:null!==(d=p.connection_name)&&void 0!==d?d:p.connection_type?p.connection_type.toString():null,key:null,saas_config:null,secrets:null}):void 0,S=(null===(n=p.staged_resource_urns)||void 0===n?void 0:n.length)||0,E=["pending","in_processing","paused","retrying"].includes((p.status||"").toLowerCase()),q=p.field_count||S,D=(()=>{if(p.action_type===P.K8.CLASSIFICATION||p.action_type===P.K8.LLM_CLASSIFICATION){let e="complete"===p.status?"Classified":"Classifying";return"".concat(e," ").concat(q," ").concat(1===q?"field":"fields")}if(p.action_type===P.K8.DETECTION)return"complete"===p.status?"Monitor scanned":"Monitor scanning";if(p.action_type===P.K8.PROMOTION){let e="complete"===p.status?"Confirmed":"Confirming";return"".concat(e," ").concat(q," ").concat(1===q?"field":"fields")}return p.action_type?p.action_type.replace(/_/g," "):"Task"})(),z=p.monitor_name||"Unknown monitor",U=async()=>{try{await x({taskId:p.id}).unwrap(),f({status:"success",description:"Task retry initiated successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to retry task: ".concat(t)})}},F=async()=>{try{await y({taskId:p.id}).unwrap(),f({status:"success",description:"Task dismissed successfully"})}catch(n){var e;let t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.detail)||(null==n?void 0:n.message)||"Unknown error occurred";f({status:"error",description:"Failed to dismiss task: ".concat(t)})}};return(0,a.jsx)("div",{...m,className:"w-full",children:(0,a.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,a.jsx)(r.JGx,{span:14,className:"align-middle",children:(0,a.jsxs)(r.vyj,{direction:"vertical",size:4,children:[(0,a.jsxs)(r.vyj,{align:"center",size:8,wrap:!0,children:[b&&(0,a.jsx)(I.ZP,{data:b,size:24}),(0,a.jsx)(R,{level:5,className:"m-0",children:D}),!E&&(0,a.jsx)(r.j8w,{color:(e=>{switch(e){case"pending":case"retrying":case"skipped":default:return r.tAb.DEFAULT;case"in_processing":return r.tAb.INFO;case"complete":return r.tAb.SUCCESS;case"error":return r.tAb.ERROR;case"paused":return r.tAb.MARBLE}})(p.status),children:(g=p.status)?O(g):"Unknown"})]}),"error"===p.status&&(0,a.jsxs)(r.vyj,{children:[(0,a.jsx)(M,{type:"secondary",size:"sm",ellipsis:{rows:1,expandable:!0,symbol:"more",tooltip:!0},children:p.message||"Unknown error"}),p.message&&(0,a.jsx)(N.Z,{copyText:p.message,size:"small",className:"ml-1"})]})]})}),(0,a.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,a.jsx)(A,{type:"secondary",size:"sm",children:z})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:E?(0,a.jsx)(r.ZJQ,{size:"small"}):(0,a.jsx)(A,{type:"secondary",size:"sm",children:T(new Date(p.updated_at),new Date,{addSuffix:!0})})}),(0,a.jsx)(r.JGx,{span:3,className:"flex items-center justify-end",children:"error"===p.status&&(0,a.jsxs)(r.vyj,{size:0,split:(0,a.jsx)(r.htM,{type:"vertical"}),children:[_&&(0,a.jsx)(r.wpx,{type:"link",size:"small",loading:v,onClick:U,className:"p-0",children:"Retry"}),!C&&(0,a.jsx)(r.wpx,{type:"link",size:"small",loading:j,onClick:F,className:"p-0",children:"Dismiss"})]})})]})})},D=e=>"paused"===e?"Awaiting Processing":e.split("_").map(x.kC).join(" "),z=()=>{var e,t;let[n,i]=(0,c.useState)(!1),{searchQuery:s,updateSearch:o,statusFilters:l,updateStatusFilters:d,showDismissed:g,updateShowDismissed:p,applyFilters:m,resetAndApplyFilters:f,availableStatuses:h,listProps:x,paginationProps:v}=j(),y=(0,c.useCallback)(e=>{d(e)},[d]),C=(0,c.useCallback)(()=>{m(),i(!1)},[m]),_=(0,c.useCallback)(()=>{f(),i(!1)},[f]),k=(0,a.jsxs)(r.jqI,{vertical:!0,className:"min-w-[220px]",children:[(0,a.jsxs)(r.jqI,{vertical:!0,className:"gap-1.5 px-4 py-2",children:[(0,a.jsx)(r.E_O.Group,{value:l,onChange:y,className:"flex flex-col gap-1.5",children:h.map(e=>(0,a.jsx)(r.E_O,{value:e,children:D(e)},e))}),(0,a.jsx)(r.E_O,{checked:g,onChange:e=>p(e.target.checked),children:"Dismissed"})]}),(0,a.jsx)(r.htM,{className:"m-0"}),(0,a.jsxs)(r.jqI,{justify:"space-between",className:"px-4 py-2",children:[(0,a.jsx)(r.wpx,{size:"small",type:"text",onClick:_,className:"-ml-2",children:"Reset"}),(0,a.jsx)(r.wpx,{size:"small",type:"primary",onClick:C,children:"Apply"})]})]});return(0,a.jsxs)(r.jqI,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,a.jsxs)(r.jqI,{justify:"space-between",align:"center",children:[(0,a.jsx)("div",{className:"min-w-[300px]",children:(0,a.jsx)(u.f,{value:null!=s?s:"",onChange:o,placeholder:"Search by monitor name..."})}),(0,a.jsx)(r.bPF,{content:k,trigger:"click",placement:"bottomRight",open:n,onOpenChange:i,children:(0,a.jsx)(r.wpx,{icon:(0,a.jsx)(r.PJP._ME,{}),iconPosition:"end",children:"Filter"})})]}),(0,a.jsx)(r.krs,{...x,className:"h-full overflow-scroll",renderItem:e=>(0,a.jsx)(r.krs.Item,{children:(0,a.jsx)(q,{task:e})})}),(0,a.jsx)(r.B7X,{...v,showSizeChanger:{suffixIcon:(0,a.jsx)(r.PJP._ME,{})},hideOnSinglePage:(null===(e=v.pageSize)||void 0===e?void 0:e.toString())===(null===(t=v.pageSizeOptions)||void 0===t?void 0:t[0])})]})};var U=n(77213);let F=()=>(0,a.jsx)(U.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,a.jsx)(r.jqI,{justify:"center",align:"center",className:"h-full",children:(0,a.jsx)(r.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})}),L=()=>(0,a.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,a.jsx)(l(),{href:p.KH,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"primary",children:"Visit integrations"})})});var G=n(14908);(i=s||(s={})).ATTENTION_REQUIRED="attention-required",i.IN_PROGRESS="in-progress";var Z=()=>{let{flags:e}=(0,d.hz)(),t=!!e.heliosV2,n=(0,c.useMemo)(()=>t?Object.values(s):["attention-required"],[t]),{activeTab:i,onTabChange:a}=(0,G.Z)({tabKeys:n});return{tabs:(0,c.useMemo)(()=>{let e=[{label:"Attention required",hash:"attention-required"}];return t&&e.push({label:"Activity",hash:"in-progress"}),e},[t]),activeTab:i,onTabChange:a}},J=n(54762),B=n(42905),K=n.n(B),W=n(98145);let H=e=>{let{updates:t,isAssetList:n}=e,i=e=>{var t;return null!==(t=W.v8.get(e))&&void 0!==t?t:e},s=(0,c.useMemo)(()=>t?Object.entries(t).filter(e=>{let[t,n]=e;return null!==n&&n>0&&!W.EP.includes(t)}).sort((e,t)=>{let n=W.H6.indexOf(e[0]),i=W.H6.indexOf(t[0]);return -1===n&&-1===i?0:-1===n?1:-1===i?-1:n-i}).map(e=>{let[t,s]=e;return"".concat((0,x.pF)(s)," ").concat(i(t)).concat(n&&1!==s?"s":"")}):[],[t,n]);if(!t)return null;if(n){let e=s.join(", ");return(0,a.jsxs)("span",{children:[e," detected."]})}let r=s.join(", ");return(0,a.jsx)("span",{children:r})};var Y=n(71985);let{Text:Q}=r.AntTypography,X={[Y.w.WEBSITE]:"asset",[Y.w.DATASTORE]:"field",[Y.w.INFRASTRUCTURE]:"system"},$=e=>{let{monitorSummary:t,showSkeleton:n,href:i,...s}=e,{name:o,consent_status:c,total_updates:u,updates:d,last_monitored:g,secrets:p,key:m,connection_type:f,saas_config:h,monitorType:v,isTestMonitor:y}=t,j=g?(0,x.p6)(new Date(g)):void 0,C=g?T(new Date(g),new Date,{addSuffix:!0}):void 0,_=X[v];return(0,a.jsx)(r.krs.Item,{"data-testid":"monitor-result-".concat(m),...s,children:(0,a.jsx)(r.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,a.jsxs)(r.bue,{gutter:{xs:6,lg:12},className:"w-full",children:[(0,a.jsx)(r.JGx,{span:18,className:"align-middle",children:(0,a.jsx)(r.krs.Item.Meta,{avatar:(0,a.jsx)(I.ZP,{data:{kind:I.hY.CONNECTION,connectionType:f,name:o,key:m,saasType:null==h?void 0:h.type,websiteUrl:null==p?void 0:p.url}}),title:(0,a.jsxs)(r.jqI,{align:"center",gap:4,className:K()["monitor-result__title"],children:[(0,a.jsx)(l(),{href:i,"data-testid":"monitor-link",children:o}),(0,a.jsxs)(Q,{type:"secondary",children:[(0,x.pF)(u)," ",_,1===u?"":"s"]}),c&&(0,a.jsx)(J.l,{consentStatus:c}),y&&(0,a.jsx)(r.j8w,{color:"nectar",children:"test monitor"})]}),description:!!d&&(0,a.jsx)(H,{updates:d,isAssetList:v===Y.w.WEBSITE})})}),(0,a.jsx)(r.JGx,{span:6,className:"flex items-center justify-end",children:!!C&&(0,a.jsx)(r.esZ,{title:j,children:(0,a.jsxs)(Q,{type:"secondary","data-testid":"monitor-date",children:[(0,a.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),C]})})})]})})})};var V=()=>{var e,t,n;let i=(0,r.pmc)(),{tabs:o,activeTab:x,onTabChange:v}=Z(),{flags:y}=(0,d.hz)(),{paginationProps:j,pageIndex:C,pageSize:_,resetPagination:k}=(0,f.S)(),[w,b]=(0,c.useState)(""),{webMonitor:S,heliosV2:E}=y,T=[...S?[Y.w.WEBSITE]:[],...E?[Y.w.DATASTORE]:[]],{data:N,isError:I,isLoading:P,isFetching:M}=(0,h.Ud)({page:C,size:_,search:w,monitor_type:T.length>0?T:void 0});(0,c.useEffect)(()=>{k()},[w]),(0,c.useEffect)(()=>{I&&i({title:"Error fetching data",description:"Please try again later",status:"error"})},[I,i]);let A=(null==N?void 0:null===(e=N.items)||void 0===e?void 0:e.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[],R=M?Array.from({length:_},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],O=(0,c.useCallback)((e,t)=>[(0,a.jsx)(l(),{href:null!=t?t:"",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(r.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return S||E?(0,a.jsxs)(g.Z,{title:"Action center",mainProps:{overflow:"hidden"},fullHeight:!0,children:[(0,a.jsx)(m.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}],isSticky:!1}),(0,a.jsx)(r.Niu,{"aria-label":"Action center tabs",mode:"horizontal",items:o.map(e=>({key:e.hash,label:e.label})),selectedKeys:[x],onClick:async e=>{let t=Object.values(s).find(t=>t===e.key);t&&await v(t)},className:"mb-4","data-testid":"action-center-tabs"}),x===s.IN_PROGRESS?(0,a.jsx)(z,{}):(0,a.jsxs)(r.jqI,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,a.jsx)(r.jqI,{className:"justify-between ",children:(0,a.jsx)(u.f,{value:w,onChange:b})}),(0,a.jsx)(r.krs,{loading:P,dataSource:A||R,locale:{emptyText:(0,a.jsx)(L,{})},className:"h-full overflow-scroll",renderItem:e=>{let t=e.key&&e.monitorType?"".concat(p.vi,"/").concat(e.monitorType,"/").concat(e.key):"";return!!(null==e?void 0:e.key)&&(0,a.jsx)($,{showSkeleton:M,monitorSummary:e,href:t,actions:O(e.key,t)},e.key)}}),(0,a.jsx)(r.B7X,{...j,total:(null==N?void 0:N.total)||0,showSizeChanger:{suffixIcon:(0,a.jsx)(r.PJP._ME,{})},hideOnSinglePage:(null===(t=j.pageSize)||void 0===t?void 0:t.toString())===(null===(n=j.pageSizeOptions)||void 0===n?void 0:n[0])})]})]}):(0,a.jsx)(F,{})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}},function(e){e.O(0,[431,7245,7059,2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);