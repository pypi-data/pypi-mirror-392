(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7477],{45550:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/activity",function(){return a(3680)}])},91761:function(e,s,a){"use strict";var t=a(24246),i=a(98227),r=a(812),n=a(17245),o=a(7940),l=a(98559),c=a(65735),d=a(79494),u=a(70675);s.Z=e=>{let{resource:s}=e,[a,{isLoading:g}]=(0,u.v8)(),[I,{isLoading:L}]=(0,u.cM)(),[x,{isLoading:A}]=(0,u.vi)(),C=L||A||g,{diff_status:j,child_diff_statuses:f,top_level_field_name:h}=s,{successAlert:_,errorAlert:S}=(0,n.VY)(),T=j===c.LL.CLASSIFICATION_ADDITION||j===c.LL.CLASSIFICATION_UPDATE||j===c.LL.APPROVED,m=f&&(f[c.LL.CLASSIFICATION_ADDITION]||f[c.LL.CLASSIFICATION_UPDATE]||f[c.LL.APPROVED]),D=(T||m)&&!h,N=T||m,v=(0,o.G)(s)!==c.D$.FIELD,p=D&&N&&v,y=async()=>{let e=await I({staged_resource_urn:s.urn});(0,r.D4)(e)?S((0,r.e$)(e.error),"Failed to promote resource"):_('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},O=async()=>{let e=await x({staged_resource_urn:s.urn});(0,r.D4)(e)?S((0,r.e$)(e.error),"Failed to mute resource"):_("Ignored changes will not be added to a Fides dataset.","".concat(s.name||"Changes"," ignored"))},R=async()=>{let e=await a({staged_resource_urn:s.urn,monitor_config_id:s.monitor_config_id,start_classification:!0,diff_statuses_to_classify:[c.LL.CLASSIFICATION_ADDITION,c.LL.CLASSIFICATION_UPDATE,c.LL.CLASSIFYING,c.LL.CLASSIFICATION_QUEUED]});(0,r.D4)(e)?S((0,r.e$)(e.error),"Failed to reclassify resource"):_("Reclassification of ".concat((0,l.Z)(s)||"the resource"," has begun.  The results may take some time to appear in the “Data discovery“ tab."),"Reclassification started")};return(0,t.jsxs)(i.Ugi,{gap:2,children:[D&&(0,t.jsx)(d.Z,{title:"Confirm",icon:(0,t.jsx)(i.nQG,{}),onClick:y,disabled:C,loading:L}),N&&(0,t.jsx)(d.Z,{title:"Ignore",icon:(0,t.jsx)(i.tpL,{}),onClick:O,disabled:C,loading:A}),v&&!p&&(0,t.jsx)(d.Z,{title:"Reclassify",icon:(0,t.jsx)(i.nyI,{}),onClick:R,disabled:C,loading:g}),p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.LZC,{}),(0,t.jsxs)(i.v2r,{children:[(0,t.jsx)(i.j2t,{as:i.wpx,size:"small",type:"text",icon:(0,t.jsx)(i.nXP,{transform:"rotate(90deg)"}),className:"w-6 gap-0","data-testid":"actions-overflow-btn"}),(0,t.jsx)(i.qyq,{children:(0,t.jsx)(i.sNh,{onClick:R,icon:(0,t.jsx)(i.nyI,{}),"data-testid":"action-reclassify",children:"Reclassify"})})]})]})]})}},3680:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return w}});var t,i,r=a(24246),n=a(27378),o=a(35287),l=a(58754),c=a(47182),d=a(92222),u=a(59003),g=a(98227),I=a(47935),L=a(72625),x=a(70675),A=a(38347),C=a(87667),j=a(50169),f=a(80285),h=a(30952);(t=i||(i={})).DATASET="Dataset",t.CLASSIFICATION="Classification";var _=a(74241),S=a(28278),T=a(20449),m=e=>(0,T.Z)(e)===S.E.CLASSIFICATION?i.CLASSIFICATION:i.DATASET,D=a(54409),N=a(91761);let v={items:[],total:0,page:1,size:50,pages:1},p=()=>(0,r.jsx)(g.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,r.jsxs)(g.gCW,{children:[(0,r.jsx)(g.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,r.jsx)(g.xvT,{fontSize:"sm",children:"You're up to date!"})]})}),y=(0,d.Cl)();var O=e=>{let{onRowClick:s,statusFilters:a,childsStatusFilters:t}=e,[o,l]=(0,n.useState)(""),{PAGE_SIZES:c,pageSize:S,setPageSize:T,onPreviousPageClick:O,isPreviousPageDisabled:R,onNextPageClick:w,isNextPageDisabled:F,startRange:E,endRange:P,pageIndex:b,setTotalPages:Z}=(0,I.oi)(),{isFetching:k,isLoading:V,data:M}=(0,x.z8)({diff_status:a,child_diff_status:t,page:b,size:S,search:o}),{items:U,total:z,pages:G}=(0,n.useMemo)(()=>null!=M?M:v,[M]);(0,n.useEffect)(()=>{Z(G)},[G,Z]);let W=(0,n.useMemo)(()=>[y.accessor(e=>e.name,{id:"name",cell:e=>(0,r.jsx)(C.Z,{result:e.row.original}),header:e=>(0,r.jsx)(I.Rr,{value:"Name",...e})}),y.accessor(e=>e.urn,{id:"project",cell:e=>(0,r.jsx)(I.G3,{value:(0,_.Z)(e.getValue())}),header:e=>(0,r.jsx)(I.Rr,{value:"Project",...e})}),y.display({id:"status",cell:e=>(0,r.jsx)(j.Z,{result:e.row.original}),header:e=>(0,r.jsx)(I.Rr,{value:"Status",...e})}),y.accessor(e=>e.system,{id:"system",cell:e=>(0,r.jsx)(I.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(I.Rr,{value:"System",...e})}),y.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,r.jsx)(I.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(I.Rr,{value:"Detected by",...e})}),y.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,r.jsx)(L.Cy,{time:e.getValue()}),header:e=>(0,r.jsx)(I.Rr,{value:"When",...e})}),y.accessor(e=>e,{id:"action",cell:e=>m(e.getValue())===i.DATASET?(0,r.jsx)(D.Z,{resource:e.getValue()}):(0,r.jsx)(N.Z,{resource:e.getValue()}),header:e=>(0,r.jsx)(I.Rr,{value:"Action",...e})})],[]),$=(0,u.b7)({getCoreRowModel:(0,d.sC)(),getGroupedRowModel:(0,d.qe)(),getExpandedRowModel:(0,d.rV)(),getRowId:f.Z,columns:W,manualPagination:!0,data:U,columnResizeMode:"onChange"});return V?(0,r.jsx)(I.I4,{rowHeight:36,numRows:36}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Q$,{children:(0,r.jsxs)(g.kCb,{gap:6,align:"center",children:[(0,r.jsx)(g.xuv,{flexShrink:0,children:(0,r.jsx)(h.f,{value:o,onChange:l})}),(0,r.jsx)(A.a,{})]})}),(0,r.jsx)(I.ZK,{tableInstance:$,onRowClick:s,emptyTableNotice:(0,r.jsx)(p,{})}),(0,r.jsx)(I.s8,{totalRows:z||0,pageSizes:c,setPageSize:T,onPreviousPageClick:O,isPreviousPageDisabled:R||k,onNextPageClick:w,isNextPageDisabled:F||k,startRange:E,endRange:P})]})},R=a(65735),w=()=>{let{navigateToDetectionResults:e,navigateToDiscoveryResults:s}=(0,c.Z)();return(0,r.jsxs)(o.Z,{title:"Data discovery",children:[(0,r.jsx)(l.Z,{heading:"All activity"}),(0,r.jsx)(O,{onRowClick:a=>{if(m(a)===i.DATASET){e({resourceUrn:a.urn});return}s({resourceUrn:a.urn})},statusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE],childsStatusFilters:[R.LL.ADDITION,R.LL.REMOVAL,R.LL.CLASSIFICATION_ADDITION,R.LL.CLASSIFICATION_UPDATE]})]})}}},function(e){e.O(0,[431,7245,4817,5724,2888,9774,179],function(){return e(e.s=45550)}),_N_E=e.O()}]);