"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{77213:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(24246),s=n(98227),a=n(88038),o=n.n(a),l=n(86677);n(27378);var r=n(25980),d=n(90867),c=n(42478),g=n(77830),u=()=>{let e=(0,l.useRouter)();return(0,i.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.wpx,{onClick:()=>{e.push(g.AD)},children:"Configure"})]}),(0,i.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:n,padded:a=!0,mainProps:g}=e,m=(0,r.hz)(),h=(0,l.useRouter)(),x="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,f=!(m.flags.messagingConfiguration&&x),{data:p}=(0,c.JE)(void 0,{skip:f}),{data:C}=(0,d.PW)(void 0,{skip:f}),v=m.flags.messagingConfiguration&&(!p||!C)&&x;return(0,i.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...g,children:[v?(0,i.jsx)(u,{}):null,t]})]})}},58754:function(e,t,n){var i=n(24246),s=n(98227),a=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:l,rightContent:r,style:d,...c}=e;return(0,i.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,i.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,i.jsx)(s.lQT,{className:n||l?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,r&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:r})]}),!!n&&(0,i.jsx)(a.m,{className:l?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),l]})}},70788:function(e,t,n){n.d(t,{m:function(){return d}});var i=n(24246),s=n(98227),a=n(79894),o=n.n(a),l=n(27378);let{Text:r}=s.AntTypography,d=e=>{let{items:t,...n}=e,a=(0,l.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let a=n===t.length-1,l={...e},d=l.onClick&&!l.href;return("string"==typeof l.title&&(l.title=(0,i.jsx)(r,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,id:a?"breadcrumb-current-page":void 0,children:l.title})),d)?l.title=(0,i.jsx)(s.wpx,{type:"text",size:"small",icon:l.icon,onClick:l.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:l.title}):(l.icon&&(l.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:l.icon}),l.title]})),l.href&&l.title&&(l.title=(0,i.jsx)(o(),{href:l.href,className:"ant-breadcrumb-link",children:l.title}),delete l.href)),l}),[t]);return(0,i.jsx)(s.zrq,{items:a,...n})}},42478:function(e,t,n){n.d(t,{FU:function(){return d},JE:function(){return s},Ki:function(){return g},SU:function(){return u},W:function(){return m},h9:function(){return a},jc:function(){return i},qt:function(){return r},sn:function(){return c}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:o,useGetMessagingConfigurationDetailsQuery:l,useGetMessagingConfigurationsQuery:r,useGetMessagingConfigurationByKeyQuery:d,useUpdateMessagingConfigurationByKeyMutation:c,useUpdateMessagingConfigurationSecretsByKeyMutation:g,useCreateTestConnectionMessageMutation:u,useDeleteMessagingConfigurationByKeyMutation:m}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},15826:function(e,t,n){n.d(t,{$:function(){return k}});var i=n(24246),s=n(92222),a=n(59003),o=n(25980),l=n(812),r=n(47935),d=n(46628),c=n(98227),g=n(86677),u=n(27378),m=n(16134),h=n(58452),x=n(77830),f=n(23923),p=n(32885);let C=e=>{let{onChange:t,displayText:n,isChecked:s,value:a}=e;return(0,i.jsx)(c.XZJ,{id:"checkbox-".concat(a),value:a,height:"20px",mb:3,isChecked:s,onChange:t,colorScheme:"complimentary",mr:5,children:(0,i.jsx)(c.xvT,{fontSize:"sm",lineHeight:5,height:"20px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:n})},a)},v={GVL:!1,AC:!1,COMPASS:!1};var j=e=>{let{isOpen:t,onClose:n,tableInstance:s}=e,[a,o]=(0,u.useState)(v);return(0,u.useMemo)(()=>{let e={id:"vendor_id",value:[]};a.GVL&&e.value.push("gvl"),a.AC&&e.value.push("gacp"),s.setColumnFilters([e])},[a,s]),(0,i.jsxs)(c.u_l,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,i.jsx)(c.ZAr,{}),(0,i.jsxs)(c.hzk,{children:[(0,i.jsx)(c.xBx,{children:"Filters"}),(0,i.jsx)(c.olH,{}),(0,i.jsx)(c.izJ,{}),(0,i.jsxs)(c.fef,{maxH:"85vh",px:6,py:4,overflowX:"auto",children:[(0,i.jsx)(c.xvT,{fontSize:"md",fontWeight:"bold",mb:2,children:"Sources"}),(0,i.jsx)(C,{onChange:()=>{o(e=>({...e,GVL:!e.GVL}))},displayText:l.iC.gvl.fullName,isChecked:a.GVL,value:"gvl"}),(0,i.jsx)(C,{onChange:()=>{o(e=>({...e,AC:!e.AC}))},displayText:l.iC.gacp.fullName,isChecked:a.AC,value:"gacp"})]}),(0,i.jsx)(c.mzw,{children:(0,i.jsxs)(c.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,i.jsx)(c.wpx,{onClick:()=>{s.setColumnFilters([]),o(v)},className:"mr-3 grow",children:"Reset Filters"}),(0,i.jsx)(c.wpx,{"data-testid":"filter-done-btn",type:"primary",onClick:n,className:"grow",children:"Done"})]})})]})]})};let y=e=>{var t;let{value:n}=e,s=(0,l.cj)(n),a=null!==(t=l.iC[s])&&void 0!==t?t:{label:"",fullName:""};return(0,i.jsx)(c.kCb,{alignItems:"center",justifyContent:"center",height:"100%",mr:"2",children:(0,i.jsx)(c.esZ,{title:a.fullName,children:(0,i.jsx)(c.j8w,{children:a.label})})})},b=(0,s.Cl)(),w=()=>(0,i.jsxs)(c.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:[(0,i.jsxs)(c.gCW,{children:[(0,i.jsx)(c.xvT,{fontSize:"md",fontWeight:"600",children:"No results found."}),(0,i.jsx)(c.xvT,{fontSize:"sm",children:'Can\'t find the vendor you are looking for? Add custom systems or unlisted\n      vendors by selecting the "Add custom vendor" button below.'})]}),(0,i.jsx)(f.Z,{buttonLabel:"Add custom vendor",buttonProps:{type:"primary"}})]}),S="Vendor",k=e=>{let{redirectRoute:t}=e,n=(0,c.pmc)(),{dictionaryService:C,tcf:v}=(0,o.hz)(),{isLoading:k}=(0,p.x8)(),T=(0,g.useRouter)(),{isLoading:M}=(0,p.iN)(void 0,{skip:!C}),[R,{isLoading:L,isSuccess:q}]=(0,p.Qk)(),I=(0,m.C)(p.gG),[A,N]=(0,u.useState)(),{isOpen:P,onOpen:z,onClose:F}=(0,c.qY0)(),{isOpen:_,onClose:E,onOpen:W}=(0,c.qY0)(),[G,O]=(0,u.useState)(!1),V=I.every(e=>e.linked_system),D=(0,u.useMemo)(()=>[b.display({id:"select",header:e=>{let{table:t}=e;return(0,i.jsx)(r.k,{dataTestId:"select-page-checkbox",isChecked:t.getIsAllPageRowsSelected(),isDisabled:V||t.getPaginationRowModel().rows.filter(e=>e.original.linked_system).length===t.getState().pagination.pageSize,isIndeterminate:t.getPaginationRowModel().rows.filter(e=>e.getCanSelect()).some(e=>!e.getIsSelected()),onChange:()=>{t.setRowSelection(e=>{let n={...e};return t.getRowModel().rows.forEach(e=>{e.getCanSelect()&&(n[e.id]=!n[e.id])}),n}),O(e=>!e)}})},cell:e=>{let{row:t}=e;return(0,i.jsx)(r.k,{isChecked:t.getIsSelected(),isDisabled:!t.getCanSelect(),isIndeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}}),b.accessor(e=>e.vendor_id,{id:"id",cell:e=>(0,i.jsx)(r.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(r.Rr,{value:"ID",...e}),enableColumnFilter:v}),b.accessor(e=>e.name,{id:"name",cell:e=>(0,i.jsx)(r.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(r.Rr,{value:"Name",...e})}),b.accessor(e=>e.vendor_id,{id:"source",cell:e=>(0,i.jsx)(y,{value:e.getValue()}),header:e=>(0,i.jsx)(r.Rr,{value:"Source",...e}),enableColumnFilter:v,filterFn:"arrIncludesSome"})],[V,v]),Z=(0,a.b7)({columns:D,data:I,getCoreRowModel:(0,s.sC)(),getSortedRowModel:(0,s.tj)(),getFilteredRowModel:(0,s.vL)(),getPaginationRowModel:(0,s.G_)(),onGlobalFilterChange:N,enableRowSelection:e=>!e.original.linked_system,enableSorting:!0,enableGlobalFilter:!0,state:{globalFilter:A,columnVisibility:{id:v,source:v}},initialState:{pagination:{pageSize:r.W3[0]},columnSizing:{select:0,id:0,source:0,name:0}},enableColumnResizing:!0,columnResizeMode:"onChange"});(0,u.useEffect)(()=>{let e={};I.forEach((t,n)=>{t.linked_system&&(e[n]=!0)}),Object.keys(e).length&&Z.setRowSelection(e)},[I,Z]);let{totalRows:B,onPreviousPageClick:H,isPreviousPageDisabled:K,onNextPageClick:U,isNextPageDisabled:J,setPageSize:Y,startRange:$,endRange:Q}=(0,r.bX)(Z),X=async()=>{let e=Z.getSelectedRowModel().rows.filter(e=>!e.original.linked_system).map(e=>e.original.vendor_id);if(e.length>0){let i=await R(e);T.push(t),(0,l.D4)(i)?n((0,d.Vo)((0,l.e$)(i.error))):n((0,d.t5)("Successfully added ".concat(e.length," ").concat(S.toLocaleLowerCase()).concat(e.length>1?"s":"")))}},ee=Z.getSelectedRowModel().rows.some(e=>!e.original.linked_system);if(!C&&!k)return T.push(x.gp),null;if(L||q)return(0,i.jsx)(c.kCb,{height:"100%",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(c.$jN,{})});if(M)return(0,i.jsx)(r.I4,{rowHeight:36,numRows:15});let et=V?"All ".concat(S.toLocaleLowerCase(),"s have already been added"):"Select a ".concat(S.toLocaleLowerCase()," "),en=Z.getSelectedRowModel().rows.filter(e=>!e.original.linked_system).length,ei=Z.getState().columnFilters.length>0?Z.getState().columnFilters.filter(e=>"vendor_id"===e.id)[0].value.length:0;return(0,i.jsxs)(c.kCb,{flex:1,direction:"column",overflow:"auto","data-testid":"add-multiple-systems-tbl",children:[(0,i.jsx)(h.Z,{isOpen:_,isCentered:!0,onCancel:E,onClose:E,onConfirm:X,title:"Confirmation",message:"You are about to add ".concat(en.toLocaleString("en")," ").concat(S.toLocaleLowerCase()).concat(en>1?"s":"")}),(0,i.jsx)(j,{isOpen:P,onClose:F,tableInstance:Z}),(0,i.jsxs)(r.Q$,{children:[(0,i.jsxs)(c.kCb,{alignItems:"center",grow:1,children:[(0,i.jsx)(c.xuv,{maxW:"420px",width:"100%",children:(0,i.jsx)(r.HO,{globalFilter:A,setGlobalFilter:N,placeholder:"Search"})}),en>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.xvT,{fontWeight:"700",fontSize:"sm",lineHeight:"2",ml:4,children:[en.toLocaleString("en")," selected"]}),(0,i.jsx)(c.esZ,{title:et,children:(0,i.jsx)(c.wpx,{onClick:W,"data-testid":"add-multiple-systems-btn",disabled:!ee,className:"ml-4",children:"Add"})})]}):null]}),(0,i.jsxs)(c.Ugi,{spacing:4,alignItems:"center",children:[(0,i.jsx)(f.Z,{buttonLabel:"Add custom vendor"}),v?(0,i.jsx)("span",{children:(0,i.jsxs)(c.wpx,{onClick:z,"data-testid":"filter-multiple-systems-btn",children:["Filter",ei>0?(0,i.jsx)(c.j8w,{className:"mr-0",children:ei}):null]})}):null]})]}),(0,i.jsx)(r.ZK,{tableInstance:Z,rowActionBar:(0,i.jsx)(r.AA,{tableInstance:Z,selectedRows:en,isOpen:G}),renderRowTooltipLabel:e=>{if(!e.getCanSelect())return"This vendor has already been added. You can view the properties of this vendor by going to the System Inventory."},emptyTableNotice:(0,i.jsx)(w,{})}),(0,i.jsx)(r.s8,{pageSizes:r.W3,totalRows:B||0,onPreviousPageClick:H,isPreviousPageDisabled:K,onNextPageClick:U,isNextPageDisabled:J,setPageSize:Y,startRange:$,endRange:Q})]})}}}]);