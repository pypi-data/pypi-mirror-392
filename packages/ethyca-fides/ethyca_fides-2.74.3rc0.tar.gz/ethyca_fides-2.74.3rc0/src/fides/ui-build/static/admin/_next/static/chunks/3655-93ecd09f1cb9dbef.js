"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3655],{59969:function(e,n,r){var l=r(24246),t=r(98227);r(27378);var i=r(8557);n.Z=e=>{let n,{daysLeft:r,includeText:a,status:s}=e;if(!r||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return(0,l.jsx)("span",{children:"-"});switch(!0){case r>=10:n=t.tAb.SUCCESS;break;case r<10&&r>4:n=t.tAb.WARNING;break;case r<5:n=t.tAb.ERROR}return(0,l.jsx)(t.j8w,{color:n,children:a?"".concat(r," days left"):r})}},18225:function(e,n,r){var l=r(24246),t=r(98227);n.Z=e=>{let{alignment:n="center",...r}=e;return(0,l.jsx)(t.kCb,{boxSize:"full",align:"center",justify:n,children:(0,l.jsx)(t.$jN,{color:"primary",...r})})}},19904:function(e,n,r){r.d(n,{Tg:function(){return a}});var l=r(24246),t=r(16134),i=r(31793);let a=e=>(0,t.C)(i.uu).filter(n=>e.includes(n)).length>0;n.ZP=e=>{let{scopes:n,children:r}=e;return a(n)?(0,l.jsx)(l.Fragment,{children:r}):null}},57526:function(e,n,r){var l=r(24246),t=r(98227),i=r(27378),a=r(90449);n.Z=e=>{let{isOpen:n,onClose:r,onApproveRequest:s,isLoading:u,subjectRequest:c}=e,{identity:d,identity_verified_at:o,custom_privacy_request_fields:h}=c,f=(0,a.o8)(d),x=(0,a.Ub)(d,f),m=[...f?[f]:[],...x],y=(0,a.aP)(h),p=(0,i.useCallback)(()=>{s().then(()=>{r()})},[s,r]);return(0,l.jsxs)(t.u_l,{isOpen:n,onClose:r,size:"lg",isCentered:!0,children:[(0,l.jsx)(t.ZAr,{}),(0,l.jsxs)(t.hzk,{children:[(0,l.jsx)(t.xBx,{children:"Privacy request approval"}),(0,l.jsxs)(t.fef,{paddingTop:0,paddingBottom:0,children:[(0,l.jsx)(t.xvT,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,l.jsxs)(t.QI$,{children:[m.map(e=>(0,l.jsx)(t.HCh,{children:(0,l.jsxs)(t.kCb,{alignItems:"flex-start",children:[(0,l.jsxs)(t.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,l.jsx)(t.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:e.value}),"(",o?"Verified":"Unverified",")"]})},e.key)),y.map(e=>(0,l.jsx)(t.HCh,{children:(0,l.jsxs)(t.kCb,{alignItems:"flex-start",children:[(0,l.jsxs)(t.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[e.label,":"]}),(0,l.jsx)(t.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:Array.isArray(e.value)?e.value.join(", "):String(e.value)}),"(Unverified)"]})},e.key))]})]}),(0,l.jsx)(t.mzw,{children:(0,l.jsxs)(t.MIq,{columns:2,width:"100%",children:[(0,l.jsx)(t.wpx,{onClick:r,className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,l.jsx)(t.wpx,{type:"primary","data-testid":"continue-btn",onClick:p,loading:u,children:"Confirm"})]})})]})]})}},66548:function(e,n,r){var l=r(24246),t=r(40324),i=r(98227),a=r(34090),s=r(27378),u=r(55484);let c={denialReason:""};n.Z=e=>{let{isOpen:n,onClose:r,onDenyRequest:d}=e,o=(0,s.useCallback)((e,n)=>{let{setSubmitting:l}=n;d(e.denialReason).then(()=>{l(!1),r()})},[d,r]);return(0,l.jsxs)(i.u_l,{isOpen:n,onClose:r,isCentered:!0,returnFocusOnClose:!1,children:[(0,l.jsx)(i.ZAr,{}),(0,l.jsx)(i.hzk,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,l.jsx)(a.J9,{initialValues:c,validationSchema:u.Ry({denialReason:u.Z_().required().label("Reason for denial")}),onSubmit:o,children:e=>{let{isSubmitting:n,dirty:s,isValid:u}=e;return(0,l.jsxs)(a.l0,{children:[(0,l.jsx)(i.xBx,{children:"Privacy request denial"}),(0,l.jsx)(i.fef,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,l.jsx)(i.fef,{children:(0,l.jsx)(t.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,l.jsxs)(i.mzw,{className:"flex w-full gap-4",children:[(0,l.jsx)(i.wpx,{disabled:n,onClick:r,className:"grow",children:"Cancel"}),(0,l.jsx)(i.wpx,{htmlType:"submit",type:"primary",disabled:!s||!u,loading:n,className:"grow","data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})}},90449:function(e,n,r){r.d(n,{Ub:function(){return c},aP:function(){return d},o8:function(){return u}});var l=r(90104),t=r.n(l),i=r(30644),a=r.n(i);let s=(e,n)=>n?"string"==typeof n&&n.length>0?{value:n,label:e,key:e}:"object"!=typeof n||t()(n.value)?null:{value:n.value,label:n.label,key:e}:null,u=e=>{if(!e)return null;let n=s("email",e.email);if(n)return n;let r=s("phone_number",e.phone_number);if(r)return r;let l=Object.keys(e);return l.length>0?s(l[0],e[l[0]]):null},c=(e,n)=>e?Object.entries(e).map(e=>{let[n,r]=e;return s(n,r)}).filter(e=>!!e).filter(e=>e.key!==(null==n?void 0:n.key)):[],d=e=>e&&e?Object.entries(e).filter(e=>{let[,n]=e;return!a()(n.value)&&""!==n.value}).map(e=>{let[n,r]=e;return{key:n,label:r.label,value:r.value}}):[]},45489:function(e,n,r){r.d(n,{Z:function(){return t}});var l=r(90867);let t=e=>{let{subjectRequest:n}=e,[r,t]=(0,l.RW)({fixedCacheKey:n.id}),[i,a]=(0,l.F1)({fixedCacheKey:n.id}),[s,u]=(0,l.rC)({fixedCacheKey:n.id}),[c,d]=(0,l.zB)({fixedCacheKey:n.id}),o=a.isLoading||t.isLoading||d.isLoading;return{approveRequest:r,approveRequestResult:t,denyRequest:i,denyRequestResult:a,handleApproveRequest:()=>r({id:n.id}),handleDenyRequest:e=>i({id:n.id,reason:e}),handleDeleteRequest:()=>s({id:n.id}),handleFinalizeRequest:()=>c({privacyRequestId:n.id}),softDeleteRequestResult:u,finalizeRequestResult:d,isLoading:o}}},72281:function(e,n,r){r.d(n,{G:function(){return s},d:function(){return u}});var l=r(86677),t=r(27378),i=r(19904),a=r(65735);let s={REQUEST:"request",MANUAL_TASK:"manual-tasks"},u=()=>{let e=(0,l.useRouter)(),n=(0,i.Tg)([a.Sh.PRIVACY_REQUEST_READ]),r=(0,i.Tg)([a.Sh.MANUAL_FIELD_READ_OWN,a.Sh.MANUAL_FIELD_READ_ALL]),u=(0,t.useMemo)(()=>({request:n,manualTask:r}),[n,r]),[c,d]=(0,t.useState)(u.request?s.REQUEST:s.MANUAL_TASK),o=(0,t.useCallback)(()=>{let{tab:n}=e.query;return n&&"string"==typeof n&&Object.values(s).includes(n)?n:null},[e.query]),h=(0,t.useCallback)(n=>{e.replace({pathname:e.pathname,query:{tab:n}},void 0,{shallow:!0})},[e]);return(0,t.useEffect)(()=>{if(!e.isReady)return;let n=o();n?(n===s.REQUEST||n===s.MANUAL_TASK&&u.manualTask)&&d(n):u.request&&d(s.REQUEST)},[e.isReady,e.query,u,o,h]),{activeTab:c,handleTabChange:(0,t.useCallback)(e=>{Object.values(s).includes(e)&&(d(e),h(e))},[h]),availableTabs:u}}}}]);