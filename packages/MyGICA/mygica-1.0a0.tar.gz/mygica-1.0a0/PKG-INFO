Metadata-Version: 2.4
Name: MyGICA
Version: 1.0a0
Summary: å‰ªè¾‘ MyGICA è§†é¢‘çš„ MyGICA å·¥å…·, MyGICA å³ MyGO!!!!! & MUJICA
Author-email: betterer <2534666876@qq.com>
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: GNU Affero General Public License v3
Classifier: Operating System :: OS Independent
Classifier: Development Status :: 3 - Alpha
Classifier: Topic :: Scientific/Engineering
Classifier: Topic :: Multimedia :: Video
Classifier: Topic :: Multimedia :: Sound/Audio
Classifier: Environment :: Console
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: click>=8.3.1
Requires-Dist: dacite>=1.9.2
Requires-Dist: loguru>=0.7.3
Requires-Dist: natsort>=8.4.0
Requires-Dist: numpy>=2.3.3
Requires-Dist: pillow>=11.3.0
Requires-Dist: pysrt>=1.1.2
Dynamic: license-file

# MyGICA ä½¿ç”¨æ–‡æ¡£

## ğŸ“„ ç®€ä»‹

**MyGICA** (å‰ªè¾‘ MyGICA è§†é¢‘çš„ MyGICA å·¥å…·, MyGICA å³ MyGO!!!!! & MUJICA) æ˜¯ä¸€ä¸ªæ–‡æœ¬åŒ–ã€ç»“æ„åŒ–çš„è§†é¢‘å‰ªè¾‘å·¥å…·ï¼Œç”¨äºç›¯å¸§å‰ªè¾‘
MyGICA å¡«è¯ / MAD è§†é¢‘ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç å‰ªè§†é¢‘ä¸”å‰ªè¾‘å•ä½ä¸ºå¸§ã€‚

ç›®å‰æœ¬é¡¹ç›®**å¹¶é AI é¡¹ç›®**ï¼Œåªæ˜¯å°†**è§†é¢‘å‰ªè¾‘æµç¨‹æ–‡æœ¬åŒ–ã€ç»“æ„åŒ–**ï¼Œå¯ä»¥ä½œä¸ºä¸å…¶ä»–äººæˆ– AI **åä½œçš„æ¥å£**ï¼Œå› æ­¤å¹¶ä¸èƒ½è‡ªåŠ¨å‰ªè¾‘ã€‚MyGICA
ä½¿ç”¨ TOML æ–‡æœ¬ä½œä¸ºå‰ªè¾‘è¯´æ˜ï¼Œæ‰©å±•åä¸º .MyGICA.tomlï¼ŒPython + FFmpeg ä½œä¸ºç¼–è¯‘å™¨ã€‚

ç›®å‰å‘å±•æ–¹å‘æœ‰äºŒï¼š1ã€ä¼ ç»ŸåŠŸèƒ½ã€‚ç»§ç»­ä¼˜åŒ–æ•°æ®ç»“æ„å’Œç¼–è¯‘å™¨ä»¥æ”¯æŒæ›´å¤šåŠŸèƒ½æˆ–ç®€åŒ–ä½¿ç”¨éš¾åº¦ã€‚2ã€AI åŠŸèƒ½ã€‚ä½¿ç”¨ AI ç”Ÿæˆ .MyGICA.toml
æ–‡ä»¶åˆç¨¿ï¼ˆä¸çœ‹å¥½ï¼‰ã€‚

MyGICA ä¼˜å…ˆå®ç°äº†ç¬¦åˆé€šå¸¸ MyGICA å¡«è¯ / MAD å‰ªè¾‘ä¹ æƒ¯çš„ç¼–è¯‘å™¨ï¼Œå¦‚ï¼šå…ˆç¡®å®šæ—¶é—´èŒƒå›´ï¼Œå†åœ¨èŒƒå›´å†…å®šä¹‰å­—å¹•ä¸ç‰‡æ®µï¼›å­—å¹•å¸¸ä½¿ç”¨åº”æ´è‰²ï¼›é»˜è®¤æ€»æœ‰
bgm ç­‰ã€‚

è§£å†³å‰ªæ˜ ä¸èƒ½å¯¼å‡º 23.976 (24000 / 1001) å¸§è§†é¢‘ï¼ˆå¯¼å‡º24å¸§ä¼šå’Œé¢„è§ˆä¸ä¸€è‡´ï¼Œå‡ºç°é—ªå¸§ï¼‰åŠ PR ä¸èƒ½å¯¼å…¥ .mkv è§†é¢‘ç´ æçš„é—®é¢˜ã€‚

## ğŸ§© åŠŸèƒ½ç‰¹æ€§

- è‡ªåŠ¨æ·»åŠ å­—å¹•ï¼ˆdrawtext æ»¤é•œï¼Œé»˜è®¤æœ‰å…¥åœºå‡ºåœºåŠ¨ç”»ï¼‰
- è‡ªåŠ¨å¡«å……æ—¶é—´ç©ºéš™ï¼ˆè‡ªåŠ¨æ¥ç»­ä¸Šä¸ªç‰‡æ®µï¼Œå¯æŒ‡å®š NEXT æ¥ç»­ä¸‹ä¸ªç‰‡æ®µï¼Œå…¨ç•™ç©ºæ—¶ä½¿ç”¨ blackï¼‰
- è‡ªåŠ¨è¡¥å…¨ç‰‡æ®µèµ·æ­¢æ—¶é—´ï¼ˆè‡ªåŠ¨æ¨æ–­å•ä¸ªç¼ºå¤±çš„ start / endï¼‰
- è‡ªåŠ¨å¤„ç†å“åº¦ä¸º -2dBTP
- æ”¯æŒç›¯å¸§å‰ªè¾‘ï¼ˆåŸºäºå¸§çš„æ—¶é—´å®šä¹‰ï¼‰
- æ”¯æŒå¤šæºç´ æï¼ˆå¦‚ MKVã€MP4 ç­‰ï¼Œç”± ffmpeg æ”¯æŒï¼‰
- æ”¯æŒå­—ä½“é¢œè‰²æ˜ å°„ï¼ˆç”¨äºå¿«é€Ÿä½¿ç”¨åº”æ´è‰²ï¼‰
- æ”¯æŒç¼“å­˜é¿å…é‡å¤æ¸²æŸ“ï¼Œå¹¶å¯ä»¥æ‰‹åŠ¨æ¸…ç†æŒ‡å®šæ—¶é•¿æœªä½¿ç”¨çš„ç¼“å­˜
- æ”¯æŒç‰‡æ®µæ‹¼æ¥å¤åˆ¶æ¨¡å¼ï¼ˆæ›´å¿«ï¼‰å’Œé‡æ–°ç¼–ç æ¨¡å¼ï¼ˆæ›´å…¼å®¹ï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

```
project/
â”œâ”€â”€ pyproject.toml         # Python é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md              # æœ¬è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ LICENSE                # AGPL-3.0 è®¸å¯è¯
â”œâ”€â”€ ç¤ºä¾‹.MyGICA.toml        # ä¸»é…ç½®æ–‡ä»¶ï¼ˆ.MyGICA.toml æ ¼å¼ï¼‰
â”œâ”€â”€ SC-Heavy.otf           # å­—ä½“æ–‡ä»¶ï¼ˆæ€æºç²—å®‹æˆ–å…¶ä»–å­—ä½“ï¼‰
â”œâ”€â”€ cache_dir/             # ç¼“å­˜ç›®å½•ï¼ˆä¸´æ—¶ç‰‡æ®µï¼‰
â”œâ”€â”€ output_dir/          # è¾“å‡ºç›®å½•ï¼ˆæœ€ç»ˆè§†é¢‘ï¼‰
â””â”€â”€ src/
    â”œâ”€â”€ A_compiler.py          # ç¼–è¯‘å™¨è„šæœ¬ï¼ˆä¸»é€»è¾‘ï¼‰
    â”œâ”€â”€ structure.py           # æ•°æ®ç»“æ„å®šä¹‰ï¼ˆç”¨äºè§£æ TOMLï¼Œå¯ä»¥æŸ¥çœ‹åˆæ³•çš„å®šä¹‰ï¼‰
    â”œâ”€â”€ time_based_cache.py    # æŒ‰æ—¶é—´ç®¡ç†ç¼“å­˜çš„å·¥å…·ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ srt2MyGICA.py          # å°† SRT è½¬ä¸º .MyGICA.toml çš„è„šæœ¬æ¡†æ¶ï¼ˆå¯é€‰ï¼‰
```

---

## ğŸ› ï¸ é…ç½®æ–‡ä»¶æ ¼å¼è¯´æ˜ï¼ˆTOMLï¼‰

### å…¨å±€è®¾ç½®

```toml
fps = '24000/1001'         # å¸§ç‡
suffix = ".mp4"            # è¾“å‡ºæ–‡ä»¶æ ¼å¼
#start = 0                 # è§†é¢‘èµ·å§‹å¸§ï¼ˆé—­åŒºé—´ï¼‰å»ºè®®åªåœ¨éœ€è¦å¿«é€Ÿé¢„è§ˆæ—¶å®šä¹‰ä»¥åªæ¸²æŸ“éƒ¨åˆ†è§†é¢‘
#end = 5000                # è§†é¢‘ç»“æŸå¸§ï¼ˆå¼€åŒºé—´ï¼Œä¸‹åŒï¼‰å»ºè®®åªåœ¨éœ€è¦å¿«é€Ÿé¢„è§ˆæ—¶å®šä¹‰ä»¥åªæ¸²æŸ“éƒ¨åˆ†è§†é¢‘
```

### æºç´ æå®šä¹‰

```toml
[sources]
go1 = 'D:\path\to\mygo1.mkv'
# ...
ji13 = 'D:\path\to\mujica13.mkv'
black = 'cache_in\test_video_basic.mp4'  # ç‰¹æ®Š black ç‰‡æ®µï¼Œè¿è¡Œ `0_gen_black.py` ç”Ÿæˆï¼Œéœ€è¦å¸§ç‡ç­‰å’Œé¡¹ç›®ä¸€è‡´ï¼Œå»ºè®®ä½¿ç”¨ black å¡«å……æœªå‰ªè¾‘ç‰‡æ®µæäº¤ç¼“å­˜åˆ©ç”¨ç‡
bgm = 'background_music.wav'  # èƒŒæ™¯éŸ³ä¹ï¼Œè‡ªåŠ¨åˆå¹¶åˆ°è§†é¢‘ä¸­ï¼Œå¿…é€‰
```

### é¢œè‰²æ˜ å°„ï¼ˆç”¨äºå­—å¹•ï¼‰

```toml
[colors]
'ç¯' = '#77BBDD'
'çˆ±éŸ³' = '#FF8899'
# ...
```

### æ—¶é—´èŒƒå›´å®šä¹‰ï¼ˆå‰ªè¾‘æ®µï¼‰

```toml
[[ranges]]
start = 2020
end = 2098
[[ranges.texts]]
text = "ç«çˆ†è„¾æ°”ä¸€è„šè¸¢åˆ°é’›åˆé‡‘"
[[ranges.clips]]
source = "go1"  # å¯é€‰ PREV å’Œ NEXTï¼Œè¡¨ç¤ºæ¥ç»­ä¸Šä¸ªæˆ–ä¸‹ä¸ªç‰‡æ®µ
start = 29590
end = 29626
[[ranges.clips]]
source = "go1"
start = 30852  # å¯çœç•¥ä¸€ä¸ª start æˆ– endï¼Œè„šæœ¬ä¼šè‡ªåŠ¨è¡¥å…¨
volume = -50
#sound = 'sound_1'  # å¯é€‰ï¼Œæ›¿æ¢ç‰‡æ®µè‡ªå¸¦éŸ³é¢‘
```

---

## ğŸ§  è‡ªåŠ¨åŠŸèƒ½è¯´æ˜

### 1. è‡ªåŠ¨è¡¥å…¨æ—¶é—´ï¼ˆstart / endï¼‰

å¦‚æœæŸæ®µ clip ä¸­åªå†™äº† `start` æˆ– `end`ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ¨æ–­å¦ä¸€ä¸ªå€¼ä»¥å¡«æ»¡æ•´ä¸ª rangeã€‚

### 2. è‡ªåŠ¨å¡«å……ç©ºéš™

å¦‚æœ ranges ä¹‹é—´æœ‰æ—¶é—´ç©ºéš™ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å»¶ç»­ç‰‡æ®µæˆ–æ’å…¥ black ç‰‡æ®µã€‚

### 3. å­—å¹•é¢œè‰²æ˜ å°„

`fontcolor` å¯ä»¥ä½¿ç”¨ `colors` è¡¨ä¸­å®šä¹‰çš„åˆ«åï¼Œå¦‚ `'ç¯'` â†’ `#77BBDD`ã€‚

> å¤©å“ªï¼Œè¿™ä¹Ÿå¤ªè‡ªåŠ¨äº†ï¼æ¥ä¸‹æ¥å°±è¦è‡ªåŠ¨ç”Ÿæˆ bug äº†ï¼

---

## ğŸ§ª ç¤ºä¾‹é…ç½®

[ç¤ºä¾‹.MyGICA.toml](ç¤ºä¾‹.MyGICA.toml)

[ç¤ºä¾‹.MyGICA.mp4](output_dir/ç¤ºä¾‹.MyGICA.mp4)

[æ—¥ä¸è½çš„çˆ±éŸ³.MyGICA.toml](%E6%97%A5%E4%B8%8D%E8%90%BD%E7%9A%84%E7%88%B1%E9%9F%B3.MyGICA.toml)

[æ—¥ä¸è½çš„çˆ±éŸ³.MyGICA.mp4](https://www.bilibili.com/video/BV1KQa9zFE69)

---

## â–¶ï¸ ä½¿ç”¨æ–¹æ³•

### 1. å‡†å¤‡å·¥ä½œ

å®‰è£… ffmpegï¼Œåœ¨ powershell è¿è¡Œ
> winget install Gyan.FFmpeg

å®‰è£… uvï¼Œåœ¨ powershell è¿è¡Œ
> winget install astral-sh.uv

å®‰è£… MyGICAï¼Œåœ¨ powershell è¿è¡Œ
> uv tool install MyGICA

### 2. ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `ç¤ºä¾‹.MyGICA.toml`ï¼Œå¡«å†™ä½ çš„é¡¹ç›®ä¿¡æ¯ã€ç´ æè·¯å¾„ã€å­—å¹•å†…å®¹ç­‰ã€‚

### 3. è¿è¡Œè„šæœ¬

ç¼–è¯‘é¡¹ç›®ï¼Œåœ¨ powershell è¿è¡Œ
> MyGICA ç¤ºä¾‹.MyGICA.toml

è¾“å‡ºæ–‡ä»¶å°†ä¿å­˜åœ¨ `output_dir/{{project_name}}`ã€‚

---

## ğŸµ èƒŒæ™¯éŸ³ä¹å¤„ç†

è„šæœ¬ä¼šè‡ªåŠ¨å°†èƒŒæ™¯éŸ³ä¹ `bgm` åˆå¹¶åˆ°è§†é¢‘ä¸­ï¼š

---

## ğŸ§¾ è¾“å‡ºç›®å½•ç»“æ„

```
output_dir/
â””â”€â”€ {{project.MyGICA.mp4}} # æœ€ç»ˆè§†é¢‘
cache_in/
â””â”€â”€ ...                    # å¯é€‰çš„è¾“å…¥ç´ æ
cache_dir/
â”œâ”€â”€ seg_*.mp4              # å„æ®µç¼“å­˜ç‰‡æ®µ
â””â”€â”€ concat_list.txt        # æ‹¼æ¥åˆ—è¡¨
```

---

## ğŸ§  æ³¨æ„äº‹é¡¹

- æ—¶é—´å•ä½ä¸ºå¸§ï¼ˆframeï¼‰ã€‚
- æ‰€æœ‰è§†é¢‘æºã€å­—ä½“æ–‡ä»¶ã€bgm ç­‰å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚

---

## ğŸ§° ä¾èµ–å·¥å…·

- [ffmpeg](https://ffmpeg.org/)
- Python 3.13
- ç¬¬ä¸‰æ–¹åº“ï¼š`dacite`
- è‡ªç”¨åº“ `betterer`ï¼ˆå·²æ‰“åŒ…ï¼‰

---

## ğŸ“¬ è”ç³»æ–¹å¼

å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚bilibili@ä¸æ­»ã®ç¥¥äº‘ã€‚

---

> ğŸ¬ MyGICA â€”â€” è®©è§†é¢‘å‰ªè¾‘å˜å¾—ç®€å•åˆè‡ªåŠ¨åŒ–ï¼ï¼ˆå¹¶ä¸èƒ½ï¼‰
