[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "rompy-oceanum"
authors = [{ name = "rompy-oceanum contributors" }]
description = "Oceanum Prax pipeline integration for rompy with Prax specification templates"
readme = "README.md"
requires-python = ">=3.8"
classifiers = [
  "Programming Language :: Python :: 3",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
]
dependencies = [
  "rompy>=0.6.1",
  "rompy-swan>=0.6.0",
  "rompy-schism>=0.6.0",
  "pydantic>=2.0.0",
  "pyyaml>=6.0",
  "oceanum>=1.0.11",
  "oceanum-prax>=0.1.0",
  "tenacity",
]

dynamic = ["version"]

[tool.setuptools]
include-package-data = true

[tool.setuptools.packages.find]
where = ["."]

[tool.setuptools.dynamic]
version = { attr = "rompy_oceanum.__version__" }

[tool.setuptools.package-data]
"rompy_oceanum" = ["pipeline_templates/*.yaml"]


[project.urls]
Homepage = "https://github.com/rom-py/rompy"
"Bug Tracker" = "https://github.com/rom-py/rompy/issues"

[project.entry-points."rompy.pipeline"]
prax = "rompy_oceanum.pipeline:PraxPipelineBackend"

[project.entry-points."rompy.postprocess"]
datamesh = "rompy_oceanum.postprocess:DataMeshPostprocessor"

[project.entry-points."oceanum.cli.extensions"]
rompy = "rompy_oceanum.cli.main:cli"

# Optionally, register individual subcommands if needed:
# rompy_run = "rompy_oceanum.cli.rompy.run"
# rompy_status = "rompy_oceanum.cli.rompy.status"
# rompy_logs = "rompy_oceanum.cli.rompy.logs"
# rompy_sync = "rompy_oceanum.cli.rompy.sync"
# rompy_init = "rompy_oceanum.cli.rompy.init"

[project.scripts]
datamesh = "rompy_oceanum.datamesh:main"
rompy-oceanum = "rompy_oceanum.cli:main"

[tool.pytest.ini_options]
minversion = "0.1.7"
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
addopts = "--cov=rompy_oceanum --cov-report=term-missing"

[project.optional-dependencies]
dev = ["pytest>=6.0.0", "pytest-cov>=2.12.0", "pytest-mock>=3.6.0", "tbump"]
docs = [
  "sphinx>=7.0.0",
  "sphinx-rtd-theme>=1.3.0",
  "sphinx-autodoc-typehints>=1.24.0",
  "myst-parser>=2.0.0",
  "sphinx-copybutton>=0.5.2",
  "sphinx-autoapi>=3.0.0",
  "sphinxext-opengraph>=0.8.2",
  "sphinx-design>=0.5.0",
]
