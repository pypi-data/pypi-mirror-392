# https://packaging.python.org/en/latest/tutorials/packaging-projects/#creating-pyproject-toml
[project]
name = "bitbully-databases"
dynamic = ["version"]
description = "Opening Databases for the Board Game Connect-4"
authors = [
    { name = "Markus Thill" }
]
maintainers = [
    { name = "Markus Thill" }
]
readme = "README.md"
requires-python = ">=3.10"

license = "MIT"

keywords = ["connect-4", "opening book", "database"]
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: Implementation :: CPython",
  # "Programming Language :: C++",  # keep only if you actually ship C++ sources
]
dependencies = []  # Add Python dependencies required for your project

[project.urls]
Homepage = "https://github.com/MarkusThill/bitbully-databases"
Issues = "https://github.com/MarkusThill/bitbully-databases/issues"

[project.optional-dependencies]
# Specify optional dependency groups
dev = [
    "commitizen", # Required for versioning
    "pre-commit", # For managing Git hooks (optional)
    "build",
    "twine",
    "readme_renderer[md]",
    "keyrings.alt",
    "pydoclint",
    "mkdocs",
    "mkdocstrings[python]",
    "mkdocs-material",
    "pytest",
    "pyrefly"
]

notebooks = [
    "matplotlib",
    "ipywidgets",
    "ipympl",
    "numpy"
]

ci = [
    "pytest", # For testing
    "ruff", # For linting
]

[build-system]
requires = ["build", "setuptools>=70", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
package-dir = { "" = "src" }
include-package-data = true  # Include additional non-Python files (e.g., libraries)

[tool.setuptools.packages.find]
where = ["src"]  # list of folders that contain the packages (["."] by default)
include = ["bitbully_databases"]  # package names should match these glob patterns (["*"] by default)
exclude = ["tests*"] # exclude packages matching these glob patterns (empty by default)
namespaces = false  # to disable scanning PEP 420 namespaces (true by default)

[tool.setuptools.dynamic]
version = {file = "version.txt"}

[tool.commitizen]
name = "cz_conventional_commits"
version_scheme = "semver"
version = "0.0.2" # Current version managed by Commitizen
version_files = ["pyproject.toml", "version.txt", "src/bitbully_databases/__init__.py"] # if cz can directly bump it
# pre_bump_hooks = "./scripts/update_version.sh"
tag_format = "v$version"  # Tag format (e.g., v1.0.0)
changelog_file = "docs/CHANGELOG.md"  # File to store changelog (if needed)
update_changelog_on_bump = true

[tool.pydoclint]
style = "google"
exclude = '\.git'
allow-init-docstring = true

[tool.ruff]
line-length = 120
include = ["pyproject.toml", "src/**/*.py", "scripts/**/*.py", "tests/**/*.py"]
exclude = ["*.pyi"]

[tool.ruff.format]
docstring-code-format = true
# docstring-code-line-length = 88

[tool.ruff.lint]
preview = true
ignore = []  # add ignores as needed

external = [
    "DOC", # pydoclint
]

select = [
    "A",
    "ANN", # Enforce type hints
    "C", # Flags overly complex functions
    "D", # Encourages proper documentation
    "DOC", # Pydocstyle (docs best practices)
    "E", # Enforces basic style (e.g., indentation, line breaks)
    "F", # Detects undefined variables, imports, syntax errors
    "G", # flake8-logging
    "FURB", # Encourages f-strings (for Python 3.6+)
    "I", # Ensures proper import sorting
    "N", # Enforces consistent function/class naming
    "NPY", # Best practices for NumPy usage (if applicable)
    "PD", # pandas vet
    "PERF",
    "PIE", # Flags unnecessary lambda expressions, etc.
    "PT", # Best practices for testing (if using pytest)
    "PTH", # Encourages pathlib over os.path
    "PGH", # pygrep
    "PYI", # PyPI
    "Q", # quotes
    "RET", # Detects unnecessary return statements & refactors returns
    "RUF", # General Ruff improvements
    "UP", # Encourages modern Python syntax
    "SIM", # Flags redundant expressions & improves readability
    "W", # Enforces basic style (e.g., indentation, line breaks)
]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.pyrefly]
project-includes = ["src/bitbully_databases"]
project-excludes = [
    "**/*.pyi",
]
python-version = "3.10.0"
ignore-missing-imports = ["*"]
