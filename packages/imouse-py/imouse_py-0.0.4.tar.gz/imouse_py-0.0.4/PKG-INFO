Metadata-Version: 2.1
Name: imouse-py
Version: 0.0.4
Summary: iMouseè®¾å¤‡è‡ªåŠ¨åŒ–æ§åˆ¶åº“ä¸€ä¸ªåŸºäºå®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¶æ„çš„Pythonåº“,ç”¨äºè‡ªåŠ¨åŒ–æ§åˆ¶iOSè®¾å¤‡
Home-page: https://github.com/iosauto/imouse-py
Author: iMouse
Author-email: your_email@example.com
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: annotated-types>=0.7.0
Requires-Dist: certifi>=2025.7.9
Requires-Dist: charset-normalizer>=3.4.2
Requires-Dist: colorlog>=6.9.0
Requires-Dist: idna>=3.10
Requires-Dist: pydantic>=2.10.6
Requires-Dist: pydantic_core>=2.27.2
Requires-Dist: requests>=2.32.4
Requires-Dist: typing_extensions>=4.13.2
Requires-Dist: urllib3>=2.2.3
Requires-Dist: websocket-client>=1.8.0

# ğŸ–±ï¸ iMouse - iOS è®¾å¤‡è‡ªåŠ¨åŒ–æ§åˆ¶åº“

> ä¸€ä¸ªåŸºäºå®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¶æ„çš„ Python åº“ï¼Œç”¨äºè‡ªåŠ¨åŒ–æ§åˆ¶ iOS è®¾å¤‡ã€‚  
> **åªé€‚ç”¨äº iMouse XP ç‰ˆï¼Œéœ€é…å¥—ä¸“ç”¨ç¡¬ä»¶ä½¿ç”¨ã€‚**

---
master;main
## âš ï¸ ä½¿ç”¨è¯´æ˜ï¼ˆè¯·åŠ¡å¿…é˜…è¯»ï¼‰

- æœ¬é¡¹ç›®ä»…é€‚ç”¨äº **iMouse XP ç‰ˆ**ï¼Œæ”¯æŒæ ‡å‡† iOS æ— è¶Šç‹±ç¯å¢ƒç›´æ¥æ§åˆ¶,æ— éœ€å®‰è£…ç¬¬ä¸‰æ–¹æ’ä»¶å’ŒAPPã€‚
- å¿…é¡»ä½¿ç”¨é…å¥—çš„iMouseç¡¬ä»¶æ‰èƒ½å®Œæˆæ§åˆ¶æ“ä½œã€‚

**å®˜ç½‘åœ°å€** ğŸ‘‰ [https://www.imouse.cc](https://www.imouse.cc)  
**æ·˜å®è´­ä¹°ç¡¬ä»¶** ğŸ‘‰ [https://imouse.taobao.com](https://imouse.taobao.com)

- **GitHub** https://github.com/iosauto/imouse-py
- **Gitee** https://gitee.com/iosusb/imouse-py

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

- ä½¿ç”¨å‰å…ˆä½¿ç”¨pipå®‰è£…imouse-pyåŒ…
- pip install imouse-py

## ä½¿ç”¨apiç±»åŸºç¡€æ¥å£è°ƒç”¨

```python
import imouse
from imouse.types import MouseSwipeParams

# è¿æ¥åˆ° iMouse æœåŠ¡ç«¯ï¼ˆé»˜è®¤åœ°å€ä¸º localhostï¼‰
api = imouse.api(host="localhost")  # è·å–apiå®ä¾‹,æ‰€æœ‰iMouseæä¾›çš„æ¥å£éƒ½åœ¨apiå®ä¾‹é‡Œé¢è°ƒç”¨

# é€šè¿‡apiç±»é‡Œé¢çš„æ–¹æ³•æ‰§è¡Œé¼ æ ‡æ“ä½œ
api.mouse_click("FA:9E:10:3A:FE:E8", "", 100, 100)  # å·¦é”®ç‚¹å‡»å±å¹•åæ ‡ (100, 100)
api.mouse_swipe("FA:9E:10:3A:FE:E8", params=MouseSwipeParams(  # å‘ä¸Šæ»‘åŠ¨å±å¹•,ä»å±å¹•ä¸‹ç™¾åˆ†ä¹‹10æ»‘åŠ¨åˆ°å±å¹•çš„ç™¾åˆ†ä¹‹90
    direction='up',  # 
    len=0.9
))

```

## é€šè¿‡helperç±»æ›´ç®€å•çš„è°ƒç”¨(æ¨èä½¿ç”¨)

### console æä¾›çš„ API

æä¾›å¯¹è®¾å¤‡ç®¡ç†å’Œå…¨å±€æ“ä½œçš„è®¿é—®:

- **Device**: è®¾å¤‡ç®¡ç†
- **AirPlay**: æŠ•å±è¿æ¥å’Œé…ç½®
- **USB**: imouseç¡¬ä»¶ç®¡ç†
- **Group**: åˆ†ç»„ç®¡ç†
- **ImConfig**: iMouseå…¨å±€é…ç½®ç®¡ç†
- **User**: iMouseè´¦æˆ·ç®¡ç†

```python
import imouse

# è¿æ¥åˆ° iMouse æœåŠ¡ç«¯ï¼ˆé»˜è®¤åœ°å€ä¸º localhostï¼‰
api = imouse.api(host="localhost")  # è·å–apiå®ä¾‹

helper = imouse.helper(api)  # è·å–helperç±»å®ä¾‹

console = helper.console  # è·å–æ§åˆ¶å°å®ä¾‹
ret = console.device.list_by_id()  # è·å–æ‰€æœ‰è®¾å¤‡åˆ—è¡¨
print(ret)
# æŠ•å±æŒ‡å®šè®¾å¤‡
ret = console.airplay.connect('FA:9E:10:3A:FE:E8,FD:9E:10:3A:FE:E0')
if ret:
    print('æˆåŠŸ')
else:
    print(f'å¤±è´¥:{console.error_msg}')

# æ–­å¼€æŒ‡å®šè®¾å¤‡æŠ•å±
ret = console.airplay.disconnect('FA:9E:10:3A:FE:E8,FD:9E:10:3A:FE:E0')
if ret:
    print('æˆåŠŸ')
else:
    print(f'å¤±è´¥:{console.error_msg}')

# æŠ•å±æ‰€æœ‰ç¦»çº¿è®¾å¤‡
ret = console.airplay.connect_all()
if ret:
    print('æˆåŠŸ')
else:
    print(f'å¤±è´¥:{console.error_msg}')
```

### device æä¾›çš„ API

æä¾›å¯¹å•ä¸ªè®¾å¤‡çš„æ§åˆ¶:

- **Image**: è®¾å¤‡å›¾åƒæ“ä½œ,æ¯”å¦‚æˆªå›¾ã€æ‰¾å›¾ã€æ–‡å­—è¯†åˆ«ç­‰
- **KeyBoard**: é”®ç›˜æ“ä½œ
- **Mouse**: é¼ æ ‡æ“ä½œ
- **Shortcut**: å¿«æ·æŒ‡ä»¤æ“ä½œ

```python
import imouse
from imouse.utils import file_to_base64
from imouse.types import MouseSwipeParams

# è¿æ¥åˆ° iMouse æœåŠ¡ç«¯ï¼ˆé»˜è®¤åœ°å€ä¸º localhostï¼‰
api = imouse.api(host="localhost")  # è·å–apiå®ä¾‹

helper = imouse.helper(api)  # è·å–helperç±»å®ä¾‹

device = helper.device('FA:9E:10:3A:FE:E8')  # é€šè¿‡è®¾å¤‡idè·å–è®¾å¤‡å®ä¾‹

# ä¹Ÿå¯ä»¥é€šè¿‡devicesæ–¹æ³•è·å–æ‰€æœ‰å®ä¾‹åˆ—è¡¨
# device_list = helper.devices()
# device = device_list[0]

# æˆªå›¾
ret = device.image.screenshot()
if ret:
    print('æˆªå›¾æˆåŠŸ')
    with open('test.bmp', "wb") as f:
        f.write(ret)
else:
    print(f'æˆªå›¾å¤±è´¥:{device.error_msg}')

# é€šè¿‡opencvæ‰¾å›¾
img_str = file_to_base64("test1.bmp")
ret = device.image.find_image_cv([img_str])
if len(ret) > 0:
    print(f"æ‰¾å›¾æˆåŠŸ[{ret[0].centre[0]},{ret[0].centre[1]}]")
else:
    print(f'æ‰¾å›¾å¤±è´¥:{device.error_msg}')

# å‘ä¸Šæ»‘åŠ¨å±å¹•
ret = device.mouse.swipe(MouseSwipeParams(direction='up', len=0.9),delay = 0.1)  # ä»å±å¹•ä¸‹ç™¾åˆ†ä¹‹10æ»‘åŠ¨åˆ°å±å¹•çš„ç™¾åˆ†ä¹‹90,æ»‘åŠ¨å®Œæˆåå»¶æ—¶0.1ç§’
if ret:
    print('æ»‘åŠ¨æˆåŠŸ')
else:
    print(f'æ»‘åŠ¨å¤±è´¥:{device.error_msg}')

```

### iMouseäº‹ä»¶å¤„ç†

```python
from typing import List
import imouse
from imouse.api import event
from imouse.models import DeviceInfo, UsbInfo, UserData, ImServerConfigData


@event.on("im_connect")
def im_connect(ver: str):
    print(f"[äº‹ä»¶]è¿æ¥å†…æ ¸æˆåŠŸ: {ver}")


@event.on("im_disconnect")
def im_disconnect():
    print(f"[äº‹ä»¶]ä¸å†…æ ¸æ–­å¼€è¿æ¥")


@event.on("dev_connect")
def dev_connect(device_info: DeviceInfo):
    print("[äº‹ä»¶]æœ‰è®¾å¤‡è¿æ¥" + device_info.device_id)


@event.on("dev_disconnect")
def dev_disconnect(device_info: DeviceInfo):
    print("[äº‹ä»¶]æœ‰è®¾å¤‡æ–­å¼€è¿æ¥->" + device_info.device_id)


@event.on("dev_rotate")
def dev_rotate(device_info: DeviceInfo):
    print("[äº‹ä»¶]æœ‰è®¾å¤‡å‘ç”Ÿæ—‹è½¬->" + device_info.device_id)


@event.on("dev_change")
def dev_change(device_info: DeviceInfo):
    print("[äº‹ä»¶]æœ‰è®¾å¤‡æ”¹å˜->" + device_info.device_id)


@event.on("dev_delete")
def dev_delete(deviceid_list: List[str]):
    print(f"[äº‹ä»¶]æœ‰è®¾å¤‡åˆ é™¤->{deviceid_list}")


@event.on("group_change")
def group_change(gid: str, name: str):
    print(f"[äº‹ä»¶]æœ‰åˆ†ç»„æ”¹å˜->{gid},{name}")


@event.on("group_change")
def group_change(gid: str, name: str):
    print(f"[äº‹ä»¶]æœ‰åˆ†ç»„æ”¹å˜->{gid},{name}")


@event.on("group_delete")
def group_delete(gid_list: List[str]):
    print(f"[äº‹ä»¶]æœ‰åˆ†ç»„åˆ é™¤->{gid_list}")


@event.on("usb_change")
def usb_change(usb_info: UsbInfo):
    print(f"[äº‹ä»¶]æœ‰usbè®¾å¤‡æ”¹å˜->{usb_info}")


@event.on("airplay_connect_log")
def airplay_connect_log(message: str):
    print(f"[äº‹ä»¶]è‡ªåŠ¨æŠ•å±æ—¥å¿—->{message}")


@event.on("user_info")
def user_info(data: UserData):
    print(f"[äº‹ä»¶]ç”¨æˆ·ä¿¡æ¯çŠ¶æ€->{data}")


@event.on("im_log")
def im_log(message: str):
    print(f"[äº‹ä»¶]iMouseäº‹ä»¶->{message}")


@event.on("error_push")
def error_push(message: str, call_fun: str):
    print(f"[äº‹ä»¶]iMouseé”™è¯¯æ—¥å¿—->{message},{call_fun}")


@event.on("im_config_change")
def im_config_change(config: ImServerConfigData):
    print(f"[äº‹ä»¶]iMouseå†…æ ¸é…ç½®æ”¹å˜->{config}")


@event.on("logout")
def logout():
    print(f"[äº‹ä»¶]iMouseè´¦å·é€€å‡º-")


@event.on("dev_sort_change")
def dev_sort_change(sort_index: int, sort_value: int):
    print(f"[äº‹ä»¶]iMouseè®¾å¤‡åˆ—è¡¨æ’åºæ”¹å˜->{sort_index},{sort_value}")


api = imouse.api(host='192.168.9.9')

```

### é…ç½®iMouseæ—¥å¿—è¾“å‡º

```python
import logging
from imouse.utils import logger

logger.configure(
    is_debug=True,  # æ˜¯å¦å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼ˆFalse æ—¶ info/debug ä¸è¾“å‡ºï¼‰
    name='imouse',  # æ—¥å¿—åç§°ï¼ˆä¼šå½±å“ logger åç§°å’Œæ—¥å¿—æ–‡ä»¶åï¼‰
    log_dir='logs',  # æ—¥å¿—ç›®å½•ï¼ˆé»˜è®¤ logs æ–‡ä»¶å¤¹ï¼‰
    log_level=logging.DEBUG,  # æ—¥å¿—ç­‰çº§
    log_show_thread_id=False,  # æ˜¯å¦æ˜¾ç¤ºçº¿ç¨‹ ID
    log_show_file_and_line=False  # æ˜¯å¦æ˜¾ç¤ºæ–‡ä»¶å’Œè¡Œå·
)
```

