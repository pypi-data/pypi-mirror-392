# Comprehensive test: builtin functions, module functions, type methods, and case-specific assertions

# Builtin function
len:
  evals:
    IsInteger:
      type: int
    NonNegative:
      assertion: "output >= 0"
  dataset:
    - case:
        input: [1, 2, 3]
        expected: 3
    - case:
        input: "hello"
        expected: 5
        assertion: "output == len(input)"

# Module function
json.loads:
  evals:
    IsDict:
      type: dict
  dataset:
    - case:
        input: '{"name": "test"}'
        expected: { "name": "test" }

# Builtin type method
str.upper:
  evals:
    IsString:
      type: str
    AllUppercase:
      assertion: "output.isupper()"
  dataset:
    - case:
        input: "hello"
        expected: "HELLO"
        assertion: "len(output) == len(input)"
    - case:
        input: "world"
        expected: "WORLD"

# Another builtin type method
str.strip:
  evals:
    IsString:
      type: str
  dataset:
    - case:
        input: "  test  "
        expected: "test"
        assertion: "not output.startswith(' ')"

# Builtin function with case assertion
abs:
  evals:
    IsNumber:
      type: "int | float"
    NonNegative:
      assertion: "output >= 0"
  dataset:
    - case:
        input: -5
        expected: 5
        assertion: "output == abs(input)"
    - case:
        input: 10
        expected: 10
        assertion: "output == input"
