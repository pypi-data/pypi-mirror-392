[tox]
envlist = py38, py39, py310, py311, lint, security
isolated_build = True

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311, lint, security, mypy

[testenv]
deps =
    pytest>=7.0
    pytest-cov>=4.0
    cryptography>=41.0.0
    pyperclip>=1.8.0
commands =
    pytest {posargs:tests} --cov=secure_string_cipher --cov-report=term-missing

[testenv:lint]
deps =
    ruff>=0.1.0
commands =
    ruff check .
    ruff format --check .

[testenv:security]
deps =
    bandit>=1.7.0
    safety>=2.3.0
commands =
    bandit -r src/
    safety check

[testenv:mypy]
deps =
    mypy>=1.0
commands =
    mypy src/ tests/

[pytest]
testpaths = tests
python_files = test_*.py
python_functions = test_*
addopts = -v --tb=short

[flake8]
max-line-length = 88
extend-ignore = E203
exclude = .tox,*.egg,build,data
select = B,C,E,F,W,T4,B9

[coverage:run]
source = string_cipher
omit = tests/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
    raise ImportError
