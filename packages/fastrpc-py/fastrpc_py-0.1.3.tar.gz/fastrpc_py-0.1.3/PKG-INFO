Metadata-Version: 2.4
Name: fastrpc-py
Version: 0.1.3
Summary: Add your description here
Author-email: xingshuyin <xing-shuyin@qq.com>
License: MIT
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: fastapi>=0.117.1
Requires-Dist: python-multipart>=0.0.20
Requires-Dist: requests>=2.32.5
Requires-Dist: setuptools>=80.9.0
Requires-Dist: uvicorn[standard]>=0.37.0

# FastRPC
GITHUB ä»“åº“ï¼š[xing-shuyin/fastrpc](https://github.com/xing-shuyin/fastrpc)

ä¸€ä¸ªåŸºäº FastAPI çš„è½»é‡çº§ã€é«˜æ€§èƒ½ RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰æ¡†æ¶ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„é«˜æ•ˆä¼ è¾“ã€‚

## ç‰¹æ€§

- ğŸš€ **åŸºäº FastAPI**ï¼šäº«å— FastAPI çš„é«˜æ€§èƒ½å’Œå¼‚æ­¥æ”¯æŒ
- ğŸ“¦ **å¤šæ•°æ®ç±»å‹æ”¯æŒ**ï¼šæ”¯æŒå­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ã€åˆ—è¡¨ã€å­—å…¸ã€å­—èŠ‚æµã€æ—¥æœŸæ—¶é—´ç­‰å¤šç§æ•°æ®ç±»å‹
- ğŸ“ **æ–‡ä»¶ä¼ è¾“**ï¼šæ”¯æŒäºŒè¿›åˆ¶æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
- ğŸ” **è‡ªåŠ¨ç±»å‹è½¬æ¢**ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è‡ªåŠ¨è¿›è¡Œç±»å‹åºåˆ—åŒ–å’Œååºåˆ—åŒ–
- ğŸ“‹ **æœåŠ¡å‘ç°**ï¼šè‡ªåŠ¨ç”Ÿæˆå¯ç”¨çš„å‡½æ•°åˆ—è¡¨å’Œå‚æ•°ä¿¡æ¯
- ğŸ **Pythonic API**ï¼šä½¿ç”¨è£…é¥°å™¨å’Œé­”æœ¯æ–¹æ³•æä¾›ç®€æ´çš„æ¥å£

## å®‰è£…

```bash
pip install fastrpc-py
```

## å¿«é€Ÿå¼€å§‹

### æœåŠ¡å™¨ç«¯

```python
from fastrpc import FastRpc
from datetime import datetime

# åˆ›å»º FastRPC å®ä¾‹
app = FastRpc()

# æ³¨å†Œ RPC å‡½æ•°
@app.path("echo_int")
def echo_int(number: int) -> int:
    """è¿”å›ä¼ å…¥çš„æ•´æ•°"""
    return number

@app.path("echo_float")
def echo_float(number: float) -> float:
    """è¿”å›ä¼ å…¥çš„æµ®ç‚¹æ•°"""
    return number

@app.path("echo_bool")
def echo_bool(flag: bool) -> bool:
    """è¿”å›ä¼ å…¥çš„å¸ƒå°”å€¼"""
    return flag

@app.path("echo_list")
def echo_list(items: list) -> list:
    """è¿”å›ä¼ å…¥çš„åˆ—è¡¨"""
    return items

@app.path("echo_dict")
def echo_dict(data: dict) -> dict:
    """è¿”å›ä¼ å…¥çš„å­—å…¸"""
    return data

@app.path("echo_bytes")
def echo_bytes(data: bytes) -> bytes:
    """è¿”å›ä¼ å…¥çš„å­—èŠ‚æ•°æ®"""
    return data

@app.path("echo_str")
def echo_str(text: str) -> str:
    """è¿”å›ä¼ å…¥çš„å­—ç¬¦ä¸²"""
    return f"Echo: {text}"

@app.path("echo_datetime")
def echo_datetime(dt: datetime) -> datetime:
    """è¿”å›ä¼ å…¥çš„æ—¥æœŸæ—¶é—´"""
    return dt

@app.path("process_file")
def process_file(file_data: bytes) -> dict:
    """å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶"""
    return {
        "file_size": len(file_data),
        "processed": True,
        "message": "File processed successfully"
    }

# å¯åŠ¨æœåŠ¡å™¨
if __name__ == "__main__":
    app.run(host="0.0.0.0", port=8000)
```

### å®¢æˆ·ç«¯

```python
from fastrpc import FastRpcClient
from datetime import datetime

# åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹
client = FastRpcClient(host="127.0.0.1", port=8000)

# è°ƒç”¨è¿œç¨‹å‡½æ•°
print("æ•´æ•°:", client.echo_int(42))
print("æµ®ç‚¹æ•°:", client.echo_float(3.14159))
print("å¸ƒå°”å€¼:", client.echo_bool(True))
print("åˆ—è¡¨:", client.echo_list([1, 2, 3, 4]))
print("å­—å…¸:", client.echo_dict({"name": "Alice", "age": 30}))
print("å­—ç¬¦ä¸²:", client.echo_str("Hello FastRPC!"))
print("æ—¥æœŸæ—¶é—´:", client.echo_datetime(datetime.now()))

# æ–‡ä»¶å¤„ç†
with open("example.txt", "rb") as f:
    file_content = f.read()
result = client.process_file(file_content)
print("æ–‡ä»¶å¤„ç†ç»“æœ:", result)

# æˆ–è€…ç›´æ¥ä¼ é€’æ–‡ä»¶è·¯å¾„
result = client.process_file("example.txt")
print("æ–‡ä»¶å¤„ç†ç»“æœ:", result)
```

## API å‚è€ƒ

### FastRpc ç±»

#### `FastRpc()`
åˆ›å»º FastRPC æœåŠ¡å™¨å®ä¾‹ã€‚

#### `@app.path(path: str)`
è£…é¥°å™¨ï¼Œç”¨äºæ³¨å†Œ RPC å‡½æ•°ã€‚
- `path`: å‡½æ•°çš„è®¿é—®è·¯å¾„

#### `app.run(host: str = "0.0.0.0", port: int = 8000)`
å¯åŠ¨ RPC æœåŠ¡å™¨ã€‚
- `host`: ç›‘å¬åœ°å€
- `port`: ç›‘å¬ç«¯å£

### FastRpcClient ç±»

#### `FastRpcClient(host: str = "127.0.0.1", port: int = 8000)`
åˆ›å»º RPC å®¢æˆ·ç«¯å®ä¾‹ã€‚
- `host`: æœåŠ¡å™¨åœ°å€
- `port`: æœåŠ¡å™¨ç«¯å£

#### åŠ¨æ€æ–¹æ³•è°ƒç”¨
å®¢æˆ·ç«¯æ”¯æŒåŠ¨æ€æ–¹æ³•è°ƒç”¨ï¼Œæ–¹æ³•åå¯¹åº”æœåŠ¡å™¨ç«¯æ³¨å†Œçš„å‡½æ•°è·¯å¾„ï¼š
```python
client.function_name(param1=value1, param2=value2)
```

## æ”¯æŒçš„æ•°æ®ç±»å‹

### å‚æ•°ç±»å‹
- `str`: å­—ç¬¦ä¸²
- `int`: æ•´æ•°
- `float`: æµ®ç‚¹æ•°
- `bool`: å¸ƒå°”å€¼
- `list`: åˆ—è¡¨
- `dict`: å­—å…¸
- `bytes`: å­—èŠ‚æ•°æ®ï¼ˆæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼‰
- `datetime`: æ—¥æœŸæ—¶é—´å¯¹è±¡

### è¿”å›ç±»å‹
- `str`: å­—ç¬¦ä¸²
- `int`: æ•´æ•°
- `float`: æµ®ç‚¹æ•°
- `bool`: å¸ƒå°”å€¼
- `list`: åˆ—è¡¨
- `dict`: å­—å…¸
- `bytes`: å­—èŠ‚æ•°æ®ï¼ˆæ”¯æŒæ–‡ä»¶ä¸‹è½½ï¼‰
- `datetime`: æ—¥æœŸæ—¶é—´å¯¹è±¡

## æ–‡ä»¶ä¼ è¾“

### ä¸Šä¼ æ–‡ä»¶
```python
# æ–¹å¼1ï¼šç›´æ¥ä¼ é€’å­—èŠ‚æ•°æ®
with open("file.txt", "rb") as f:
    data = f.read()
client.process_file(data)

# æ–¹å¼2ï¼šä¼ é€’æ–‡ä»¶è·¯å¾„ï¼ˆè‡ªåŠ¨è¯»å–ï¼‰
client.process_file("file.txt")
```

### ä¸‹è½½æ–‡ä»¶
```python
# æœåŠ¡å™¨ç«¯è¿”å› bytes ç±»å‹ä¼šè‡ªåŠ¨ä½œä¸ºæ–‡ä»¶ä¸‹è½½
@app.path("get_file")
def get_file() -> bytes:
    with open("large_file.zip", "rb") as f:
        return f.read()
```

## æœåŠ¡å‘ç°

FastRPC æä¾›äº†è‡ªåŠ¨çš„æœåŠ¡å‘ç°åŠŸèƒ½ï¼š

```python
# è·å–æ‰€æœ‰å¯ç”¨çš„å‡½æ•°
client = FastRpcClient()
print("å¯ç”¨å‡½æ•°:", client.get_funs())

# è¾“å‡ºç¤ºä¾‹ï¼š
# {
#   "echo_int": {
#     "params": {"text": "int"},
#     "return": "int"
#   },
#   "echo_str": {
#     "params": {"text": "str"},
#     "return": "str"
#   }
# }
```

## é”™è¯¯å¤„ç†

æœåŠ¡å™¨ç«¯ä¼šè‡ªåŠ¨éªŒè¯å‚æ•°ç±»å‹ï¼Œå¦‚æœç±»å‹ä¸åŒ¹é…ä¼šè¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

```python
# å¦‚æœä¼ é€’é”™è¯¯ç±»å‹çš„å‚æ•°
try:
    client.echo_int("not_a_number")
except Exception as e:
    print("é”™è¯¯:", e)
```

## é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰é”™è¯¯å¤„ç†

```python
from fastapi import HTTPException

@app.path("secure_operation")
def secure_operation(token: str, data: dict) -> dict:
    if token != "secret":
        raise HTTPException(status_code=401, detail="Invalid token")
    return {"processed": True, "data": data}
```

### ç»„åˆå¤šä¸ª RPC è°ƒç”¨

```python
# å®¢æˆ·ç«¯å¯ä»¥é“¾å¼è°ƒç”¨å¤šä¸ªå‡½æ•°
result1 = client.get_user_data(user_id=123)
result2 = client.process_data(result1)
final_result = client.save_result(result2)
```

## æ€§èƒ½å»ºè®®

1. **é‡ç”¨å®¢æˆ·ç«¯è¿æ¥**ï¼šåˆ›å»ºä¸€æ¬¡å®¢æˆ·ç«¯å®ä¾‹å¹¶é‡å¤ä½¿ç”¨
2. **æ‰¹é‡å¤„ç†**ï¼šå¯¹äºå¤§é‡æ•°æ®ï¼Œè€ƒè™‘ä½¿ç”¨æ‰¹é‡å¤„ç†å‡½æ•°
3. **æ–‡ä»¶å‹ç¼©**ï¼šä¼ è¾“å¤§æ–‡ä»¶æ—¶è€ƒè™‘å‹ç¼©
4. **è¿æ¥æ± **ï¼šå®¢æˆ·ç«¯é»˜è®¤ä½¿ç”¨ requests.Session ä¿æŒè¿æ¥

## å¼€å‘æŒ‡å—

### å®‰è£…å¼€å‘ç‰ˆæœ¬

```bash
git clone https://github.com/yourusername/fastrpc.git
cd fastrpc
pip install -e .
```

### è¿è¡Œæµ‹è¯•

```bash
# å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨
python examples/server.py

# è¿è¡Œå®¢æˆ·ç«¯æµ‹è¯•
python examples/client.py
```

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ LICENSE æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## æ›´æ–°æ—¥å¿—
### v0.1.2
- åŠ é€Ÿæœ¬åœ°æ–‡ä»¶ä¼ è¾“

### v0.1.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ä¼ è¾“
- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½
- è‡ªåŠ¨æœåŠ¡å‘ç°

## æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼š
- æäº¤ https://github.com/yourusername/fastrpc/issues
- å‘é€é‚®ä»¶è‡³: your.email@example.com

## ç›¸å…³é¡¹ç›®

- https://fastapi.tiangolo.com/ - ç°ä»£ã€å¿«é€Ÿçš„ Web æ¡†æ¶
- https://docs.python-requests.org/ - ä¼˜é›…çš„ HTTP å®¢æˆ·ç«¯
- https://www.uvicorn.org/ - å¿«é€Ÿçš„ ASGI æœåŠ¡å™¨

---

äº«å—ä½¿ç”¨ FastRPCï¼ ğŸš€
