import{l as W,am as _,w as q,r as a,a7 as G,u as K,a8 as H,f as $,j as u,W as M,T as N,P as X,X as J,a1 as Q}from"./index.BTj4XZUf.js";import{u as Y}from"./uniqueId.BkmntDB0.js";import{I as Z}from"./InputInstructions.Dj-242_o.js";import{u as tt}from"./useBasicWidgetState.BV8gvTc2.js";import{u as et,a as ot,b as it}from"./useUpdateUiValue.BDO8Lk1N.js";import{u as at,T as st}from"./useTextInputAutoExpand.CGClga90.js";import"./FormClearHelper.BaLOtzQI.js";import"./inputUtils.CptNuJwn.js";import"./base-input.fUoO5PcK.js";const rt=(e,t)=>{let i="auto";if(e.heightConfig?.useStretch)i="100%";else if(e.heightConfig?.pixelHeight&&e.heightConfig.pixelHeight>0){const s=W(t.labelVisibility?.value)===_.Collapsed?2:30,l=e.heightConfig.pixelHeight-s;i=`${Math.max(0,l)}px`}return i},lt=q("div",{target:"e1r0q00f0"})({height:"100%",display:"flex",flexDirection:"column"}),S=(e,t)=>e.getStringValue(t)??t.default??null,nt=e=>e.default??null,dt=e=>e.value??null,ut=(e,t,i,s)=>{t.setStringValue(e,i.value,{fromUi:i.fromUi},s)},ct=({disabled:e,element:t,widgetMgr:i,fragmentId:s,outerElement:l})=>{const h=a.useRef(Y("text_area_")).current,{width:y,elementRef:I}=G(),[r,g]=a.useState(!1),[V,x]=a.useState(!1),n=l.heightConfig?.useContent??!1,v=l.heightConfig?.useStretch??!1,A=rt(l,t),C=a.useRef(null),[d,p]=a.useState(()=>S(i,t)??null),F=a.useCallback(()=>{p(t.default??null),g(!0)},[t]),[R,f]=tt({getStateFromWidgetMgr:S,getDefaultStateFromProto:nt,getCurrStateFromProto:dt,updateWidgetMgrState:ut,element:t,widgetMgr:i,fragmentId:s,onFormCleared:F});et(R,d,p,r);const o=K(),{height:L,maxHeight:P,updateScrollHeight:T}=at({textareaRef:C,dependencies:[t.placeholder]}),m=a.useCallback(()=>{g(!1),f({value:d,fromUi:!0})},[d,f]),k=a.useCallback(()=>{r&&m(),x(!1)},[r,m]),z=a.useCallback(()=>{x(!0)},[]),B=a.useCallback(()=>{n&&T()},[n,T]),D=ot({formId:t.formId,maxChars:t.maxChars,setDirty:g,setUiValue:p,setValueWithSource:f,additionalAction:B}),E=it(t.formId,m,r,i,s,!0),{placeholder:U,formId:b}=t,w=H({formId:b})?i.allowFormEnterToSubmit(b):r,j=V&&y>o.breakpoints.hideWidgetDetails;return $(lt,{className:"stTextArea","data-testid":"stTextArea",ref:I,children:[u(J,{label:t.label,disabled:e,labelVisibility:W(t.labelVisibility?.value),htmlFor:h,children:t.help&&u(M,{children:u(N,{content:t.help,placement:X.TOP_RIGHT})})}),u(st,{inputRef:n?C:void 0,value:d??"",placeholder:U,onBlur:k,onFocus:z,onChange:D,onKeyDown:E,"aria-label":t.label,disabled:e,id:h,overrides:{Input:{style:{fontWeight:o.fontWeights.normal,lineHeight:o.lineHeights.inputWidget,height:n?L:A,maxHeight:n?P:"",minHeight:o.sizes.largestElementHeight,resize:v?"none":"vertical",paddingRight:o.spacing.md,paddingLeft:o.spacing.md,paddingBottom:o.spacing.md,paddingTop:o.spacing.md,"::placeholder":{color:o.colors.fadedText60}}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:({$isFocused:O})=>{const c=Q(o.colors,O);return{borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth,borderTopColor:c,borderRightColor:c,borderBottomColor:c,borderLeftColor:c,flexGrow:1}}}}}),j&&u(Z,{dirty:r,value:d??"",maxLength:t.maxChars,type:"multiline",inForm:H({formId:b}),allowEnterToSubmit:w})]})},Ht=a.memo(ct);export{Ht as default};
