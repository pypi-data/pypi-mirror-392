============================= test session starts ==============================
platform linux -- Python 3.12.6, pytest-8.4.2, pluggy-1.5.0 -- /home/damien/.pyenv/versions/3.12.6/bin/python3.12
cachedir: .pytest_cache
rootdir: /home/damien/Liatrio/repos/slash-command-manager
configfile: pyproject.toml
plugins: cov-7.0.0, xdist-3.6.1, anyio-4.11.0
collecting ... collected 79 items

tests/test_cli.py::test_cli_list_agents PASSED                           [  1%]
tests/test_cli.py::test_cli_dry_run_flag PASSED                          [  2%]
tests/test_cli.py::test_cli_generates_files_for_single_agent PASSED      [  3%]
tests/test_cli.py::test_cli_generates_files_for_multiple_agents PASSED   [  5%]
tests/test_cli.py::test_cli_handles_invalid_agent_key PASSED             [  6%]
tests/test_cli.py::test_cli_handles_missing_prompts_directory PASSED     [  7%]
tests/test_cli.py::test_cli_explicit_path_shows_specific_directory_error PASSED [  8%]
tests/test_cli.py::test_cli_shows_summary PASSED                         [ 10%]
tests/test_cli.py::test_cli_respects_prompts_dir_option PASSED           [ 11%]
tests/test_cli.py::test_cli_prompts_for_overwrite_without_yes PASSED     [ 12%]
tests/test_cli.py::test_cli_honors_yes_flag_for_overwrite PASSED         [ 13%]
tests/test_cli.py::test_cli_reports_backup_creation PASSED               [ 15%]
tests/test_cli.py::test_cli_interactive_agent_selection_selects_all PASSED [ 16%]
tests/test_cli.py::test_cli_interactive_agent_selection_partial_selection PASSED [ 17%]
tests/test_cli.py::test_cli_interactive_agent_selection_cancels_on_no_selection PASSED [ 18%]
tests/test_cli.py::test_cli_interactive_agent_selection_bypassed_with_yes_flag PASSED [ 20%]
tests/test_cli.py::test_cli_no_agents_detected_exit_code PASSED          [ 21%]
tests/test_cli.py::test_cli_exit_code_user_cancellation PASSED           [ 22%]
tests/test_cli.py::test_cli_cleanup_command PASSED                       [ 24%]
tests/test_cli.py::test_cli_cleanup_deletes_files PASSED                 [ 25%]
tests/test_cli.py::test_cli_cleanup_cancels_on_no_confirmation PASSED    [ 26%]
tests/test_cli.py::test_cli_cleanup_deletes_backup_files PASSED          [ 27%]
tests/test_cli.py::test_cli_cleanup_excludes_backups_when_requested PASSED [ 29%]
tests/test_config.py::test_command_format_defines_markdown_and_toml PASSED [ 30%]
tests/test_config.py::test_agent_config_is_frozen_dataclass PASSED       [ 31%]
tests/test_config.py::test_agent_config_has_expected_field_types[key-str] PASSED [ 32%]
tests/test_config.py::test_agent_config_has_expected_field_types[display_name-str] PASSED [ 34%]
tests/test_config.py::test_agent_config_has_expected_field_types[command_dir-str] PASSED [ 35%]
tests/test_config.py::test_agent_config_has_expected_field_types[command_format-CommandFormat] PASSED [ 36%]
tests/test_config.py::test_agent_config_has_expected_field_types[command_file_extension-str] PASSED [ 37%]
tests/test_config.py::test_agent_config_has_expected_field_types[detection_dirs-tuple] PASSED [ 39%]
tests/test_config.py::test_supported_agents_is_tuple_sorted_by_key PASSED [ 40%]
tests/test_config.py::test_supported_agents_match_expected_configuration PASSED [ 41%]
tests/test_config.py::test_supported_agents_include_all_markdown_and_toml_formats PASSED [ 43%]
tests/test_config.py::test_detection_dirs_cover_command_directory_roots PASSED [ 44%]
tests/test_detection.py::test_detect_agents_returns_empty_when_no_matching_directories PASSED [ 45%]
tests/test_detection.py::test_detect_agents_identifies_configured_directories PASSED [ 46%]
tests/test_detection.py::test_detect_agents_deduplicates_and_orders_results PASSED [ 48%]
tests/test_generators.py::test_markdown_generator_applies_agent_overrides PASSED [ 49%]
tests/test_generators.py::test_markdown_generator_replaces_arguments_placeholder PASSED [ 50%]
tests/test_generators.py::test_toml_generator_applies_agent_overrides PASSED [ 51%]
tests/test_generators.py::test_toml_generator_substitutes_argument_placeholders PASSED [ 53%]
tests/test_generators.py::test_markdown_generator_snapshot_regression PASSED [ 54%]
tests/test_generators.py::test_toml_generator_snapshot_regression PASSED [ 55%]
tests/test_prompts.py::TestFrontmatterParsing::test_parse_frontmatter_with_valid_yaml PASSED [ 56%]
tests/test_prompts.py::TestFrontmatterParsing::test_parse_frontmatter_without_frontmatter PASSED [ 58%]
tests/test_prompts.py::TestFrontmatterParsing::test_parse_frontmatter_with_invalid_yaml PASSED [ 59%]
tests/test_prompts.py::TestPromptLoading::test_register_prompts PASSED   [ 60%]
tests/test_prompts.py::TestPromptLoading::test_prompt_metadata_preserved PASSED [ 62%]
tests/test_prompts.py::TestPromptLoading::test_register_prompts_from_nonexistent_directory PASSED [ 63%]
tests/test_prompts.py::TestPromptLoading::test_prompt_returns_string_body PASSED [ 64%]
tests/test_prompts.py::TestPromptLoading::test_prompt_decorator_kwargs_use_serializable_tags PASSED [ 65%]
tests/test_validation.py::test_toml_round_trip_parsing PASSED            [ 67%]
tests/test_validation.py::test_yaml_frontmatter_parsing PASSED           [ 68%]
tests/test_validation.py::test_invalid_toml_content_caught PASSED        [ 69%]
tests/test_validation.py::test_invalid_yaml_content_caught PASSED        [ 70%]
tests/test_validation.py::test_generated_content_is_valid_before_writing PASSED [ 72%]
tests/test_writer.py::test_writer_generates_command_for_single_agent PASSED [ 73%]
tests/test_writer.py::test_writer_generates_commands_for_multiple_agents PASSED [ 74%]
tests/test_writer.py::test_writer_respects_dry_run_flag PASSED           [ 75%]
tests/test_writer.py::test_writer_creates_parent_directories PASSED      [ 77%]
tests/test_writer.py::test_writer_calls_generator_with_correct_agent PASSED [ 78%]
tests/test_writer.py::test_writer_loads_prompts_from_directory PASSED    [ 79%]
tests/test_writer.py::test_writer_handles_missing_prompts_directory PASSED [ 81%]
tests/test_writer.py::test_writer_finds_bundled_prompts PASSED           [ 82%]
tests/test_writer.py::test_find_package_prompts_dir_importlib PASSED     [ 83%]
tests/test_writer.py::test_writer_falls_back_to_package_prompts PASSED   [ 84%]
tests/test_writer.py::test_writer_handles_invalid_agent_key PASSED       [ 86%]
tests/test_writer.py::test_writer_detects_existing_files PASSED          [ 87%]
tests/test_writer.py::test_writer_cancels_on_existing_files PASSED       [ 88%]
tests/test_writer.py::test_writer_backs_up_existing_files PASSED         [ 89%]
tests/test_writer.py::test_writer_applies_overwrite_globally PASSED      [ 91%]
tests/test_writer.py::test_writer_finds_generated_markdown_files PASSED  [ 92%]
tests/test_writer.py::test_writer_finds_generated_toml_files PASSED      [ 93%]
tests/test_writer.py::test_writer_finds_backup_files PASSED              [ 94%]
tests/test_writer.py::test_writer_cleanup_deletes_generated_files PASSED [ 96%]
tests/test_writer.py::test_writer_cleanup_dry_run_does_not_delete_files PASSED [ 97%]
tests/test_writer.py::test_writer_cleanup_deletes_backup_files PASSED    [ 98%]
tests/test_writer.py::test_writer_cleanup_excludes_backups_when_requested PASSED [100%]

============================== 79 passed in 0.45s ==============================
