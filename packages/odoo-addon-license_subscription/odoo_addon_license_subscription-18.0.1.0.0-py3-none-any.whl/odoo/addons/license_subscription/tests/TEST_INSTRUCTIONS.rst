Start and end date:

- Open sale order for "Edwin Hansen" and confirm it
- Create and post an invoice
- Note the next invoice date of the sale order
- Open the licenses and check if end date is matching
- Return to sale order
- Change the next invoice date to minus 1 day
- Check if the licenses have been updated accordingly
- Check if the license start date is the date of today

Renewal:

- Note the next invoice date of the so
- Then click on renewal
- Check if validity date is next invoice date + 5 days
- Delete the renewal offer
- Change the start and next invoice date to today - 1 week
- Create a new renewal and confirm.
- Ensure that the next invoice date is today + 1 year

Renew past validity date

- Create a new sale order for "Deco Addict"
- Add product "Software License" and recurrence yearly
- Confirm the order
- Change next invoice date and start date to today - 1 year
- Create and post the invoice
- Ensure next invoice date is today
- Click renewal and change validity date to today -1 week
- Confirm the renewal
- Ensure the next invoice date is today
- Create and post the invoice
- Ensure the next invoice date is today + year

Renew and cancel:

- Create a new sale order for "Deco Addict"
- Add product "Software License" and recurrence yearly
- Set Disc. 2 and 3 with 10% and 7%
- Set customer reference "OCAD" and confirm the order
- Click on Renew
- Check if license is linked with the new order
- Cancel the new order and return to the original sale order
- Check if license is linked back

Close:

- On the sale order click on renew
- Confirm the renewal order
- Return the original order that has been locked
- Ensure no new license has been created

Price rule:

- Add fixed price discount 10% for min qty 2.0 of "Software License"
- Change discount policy to not include discount in price
- Open sale orer "S00021" and ensure there are 2.0 qty
- Renew the order and ensure that the discount is applied

Fallback:

- On the sale order click on renew
- In the draft state open the first sale order line
- Note and remove the first license
- Open the license and check if the old so line has been linked
