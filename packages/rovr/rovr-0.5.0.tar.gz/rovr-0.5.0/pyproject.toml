[project]
name = "rovr"
version = "0.5.0"
description = "A post-modern terminal file explorer"
readme = "README.md"
requires-python = ">=3.12, <3.14"
license = { text = "MIT" }
authors = [{ name = "NSPC911" }]
keywords = ["filemanager", "fs", "python", "textual", "tui"]
classifiers = [
  "Development Status :: 2 - Pre-Alpha",
  "License :: OSI Approved :: MIT License",
  "Programming Language :: Python :: 3.13",
  # "Framework :: Textual", # I highly believe textual deserves its own category
  "Topic :: Desktop Environment :: File Managers",
  "Topic :: Utilities",
]
dependencies = [
  "humanize>=4.12.3",
  "jsonschema>=4.25.0",
  "natsort>=8.4.0",
  "pathvalidate>=3.3.1",
  "pillow>=11.2.1",
  "platformdirs>=4.3.8",
  "psutil>=7.0.0",
  "rarfile>=4.2",
  "rich-click>=1.9.3",
  "send2trash>=1.8.3",
  "textual-autocomplete>=4.0.4",
  "textual-image[textual]>=0.8.2",
  "textual[syntax]>=6.0.0,<7.0.0",
  "toml>=0.10.2",
  "tree-sitter>=0.24.0",
  "ujson>=5.10.0",
]

[project.urls]
Issues = "https://github.com/NSPC911/rovr/issues"
Source = "https://github.com/NSPC911/rovr"
Documentation = "https://nspc911.github.io/rovr"

[project.scripts]
rovr = "rovr.__main__:main"

[dependency-groups]
dev = [
  "commitizen>=4.8.3",
  "json-schema-for-humans>=1.4.1",
  "poethepoet>=0.36.0",
  "ruff>=0.14.2",
  "textual-dev>=1.7.0",
  "ty>=0.0.1a24",
]

[build-system]
requires = ["uv_build>=0.9.0,<0.10.0"]
build-backend = "uv_build"

[tool.commitizen]
name = "cz_conventional_commits"
tag_format = "$version"
version_scheme = "pep440"
version_provider = "uv"
update_changelog_on_bump = true
major_version_zero = true

[tool.poe.tasks]
dev = "textual run --dev rovr.__main__:main"
run = "rovr"
log = "textual console -x WORKER -x SYSTEM -x DEBUG -x EVENT"
"gen-schema" = "docs/scripts/generate_schema.py"
"icon-test" = "docs/scripts/icon_test.py"
"gen-keys" = "docs/scripts/generate_keybinds.py"
check.sequence = [
  { cmd = "ty check" },
  { cmd = "ruff check" }
]
format = "ruff check --unsafe-fixes --fix"

[tool.ruff.lint]
select = [
  "ASYNC251",
  "ANN",
  "COM819",
  "C400",
  "DOC",
  "D404",
  "E",
  "F",
  "I",
  "N801", "N802", "N805",
  "PLE1142",
  "Q",
  "SIM",
  "TD",
  "W",
]
ignore = ["W505", "E501", "ANN002", "ANN003", "TD002", "TD003"]
preview = true

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"
preview = true

[tool.ty.rules]
possibly-missing-import = "ignore"
unresolved-reference = "ignore" # handled by ruff
unresolved-attribute = "ignore"
