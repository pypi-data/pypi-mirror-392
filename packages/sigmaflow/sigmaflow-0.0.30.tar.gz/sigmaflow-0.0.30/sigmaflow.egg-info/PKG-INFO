Metadata-Version: 2.4
Name: sigmaflow
Version: 0.0.30
Summary: SigmaFlow is a Python package designed to optimize the performance of task-flow related to LLMs or MLLMs
Home-page: https://github.com/maokangkun/SigmaFlow
Author: maokangkun
Author-email: maokangkun@pjlab.prg.cn
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: rich
Requires-Dist: openai
Requires-Dist: dotenv
Requires-Dist: ollama
Requires-Dist: pandas
Requires-Dist: Pillow
Requires-Dist: fastapi
Requires-Dist: requests
Requires-Dist: packaging
Requires-Dist: pymupdf4llm
Requires-Dist: uvicorn[standard]
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

<div align="center">
  <img src="https://raw.githubusercontent.com/maokangkun/SigmaFlow/main/assets/banner.png" alt="banner" />

  <a href='https://sigmaflows.github.io/'><img src='https://img.shields.io/badge/Project-Page-Green'></a>
  <a href="https://sigmaflow.gitbook.io/sigmaflow-docs"><img src="https://img.shields.io/static/v1?message=Docs&logo=gitbook&logoColor=ffffff&label=%20&labelColor=5c5c5c&color=3F89A1"></a>
  <a href="#"><img src="https://img.shields.io/badge/Open_Source-â¤ï¸-FDA599?"/></a>
  <a href="https://pypi.org/project/sigmaflow/"><img src="https://img.shields.io/pypi/v/sigmaflow.svg"></a>
  <img src="https://komarev.com/ghpvc/?username=maokangkun&label=Views&color=0e75b6&style=flat" alt="è®¿é—®é‡ç»Ÿè®¡" />
  <a href='https://arxiv.org/abs/xxx'><img src='https://img.shields.io/badge/arXiv-xxx-b31b1b'></a>
  [![license](https://img.shields.io/github/license/maokangkun/SigmaFlow.svg)](https://github.com/maokangkun/SigmaFlow/tree/main/LICENSE)
  [![issue resolution](https://img.shields.io/github/issues-closed-raw/maokangkun/SigmaFlow)](https://github.com/maokangkun/SigmaFlow/issues)

  <p align="center">
    ğŸ‘‹ join us on <a href="https://linluhe.github.io/group_qrcode.html" target="_blank">WeChat</a>
  </p>
</div>

# ğŸš€ SigmaFlow
SigmaFlow is a Python package designed to optimize the performance of task-flow related to LLMs/MLLMs or Multi-agent.
![comfyUI demo](https://raw.githubusercontent.com/maokangkun/SigmaFlow/main/assets/comfyUI.png)

![pipe demo](https://raw.githubusercontent.com/maokangkun/SigmaFlow/main/assets/demo_pipe.png)

![perf demo](https://raw.githubusercontent.com/maokangkun/SigmaFlow/main/assets/demo_perf.png)

## ğŸ‰ News

- [X] [2025.04.15]ğŸ¯ğŸ“¢SigmaFlow support command line use & file node! Please refer to the [example](https://github.com/maokangkun/SigmaFlow/tree/main/example/) directory.
- [X] [2025.04.01]ğŸ¯ğŸ“¢SigmaFlow first release [pypi](https://pypi.org/project/sigmaflow/)!

## Introduction
SigmaFlow is a Python package designed to optimize the performance of task-flow related to Large Language Models (LLMs) or Multimodal Large Language Models (MLLMs) or Multi-agent system. It ensures efficient parallel execution of task-flow while maintaining dependency constraints, significantly enhancing the overall performance.

SigmaFlow æ˜¯ä¸€ä¸ª Python åŒ…ï¼Œæ—¨åœ¨ä¼˜åŒ–ä¸å¤§æ¨¡å‹ (LLMs or MLLMs) ç›¸å…³ä»»åŠ¡æµçš„æ€§èƒ½ã€‚åœ¨æ»¡è¶³ä¾èµ–å…³ç³»çš„å‰æä¸‹ï¼Œç¡®ä¿ä»»åŠ¡æµçš„é«˜æ•ˆå¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œæ˜¾è‘—æé«˜æ•´ä½“æ€§èƒ½ã€‚

## Features
- Dependency Management: Handles task dependencies efficiently, ensuring correct execution order.

  ä¾èµ–ç®¡ç†ï¼šé«˜æ•ˆå¤„ç†ä»»åŠ¡ä¾èµ–å…³ç³»ï¼Œç¡®ä¿æ­£ç¡®çš„æ‰§è¡Œé¡ºåºã€‚
- Parallel Execution: Maximizes parallelism to improve performance.

  å¹¶è¡Œæ‰§è¡Œï¼šæœ€å¤§åŒ–å¹¶è¡Œæ€§ä»¥æé«˜æ€§èƒ½ã€‚
- Loop Handling: Supports tasks with loop structures.

  å¾ªç¯å¤„ç†ï¼šæ”¯æŒå¸¦æœ‰å¾ªç¯ç»“æ„çš„ä»»åŠ¡ã€‚
- Easy Integration: Simple and intuitive API for easy integration with existing projects.

  æ˜“äºé›†æˆï¼šç®€å•ç›´è§‚çš„ APIï¼Œä¾¿äºä¸ç°æœ‰é¡¹ç›®é›†æˆã€‚

## Installation
You can install SigmaFlow via pip:

ä½ å¯ä»¥é€šè¿‡ pip å®‰è£… SigmaFlowï¼š
```bash
pip install SigmaFlow

# or editable install from source
git clone https://github.com/maokangkun/SigmaFlow.git && cd SigmaFlow
pip install --no-build-isolation -e .
```

## Quick Start
Here is a basic example to get you started:

ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå…¥é—¨ï¼š

<details>
<summary>Example Code</summary>

```python
from SigmaFlow import SigmaFlow, Prompt

# set custom prompt
example_prompt = Prompt("""
...
{inp1}
xxx
""", keys=['{inp1}'])

# set api
def llm_api(inp):
    ...
    return out

def rag_api(inp):
    ...
    return out

# set input data
data = {
    'inp': 'test input text ...',
}

# set pipeline
demo_pipe = {
    'process_input': {
        'prompt': example_prompt,
        'format': {'out1': list, 'out2': str}, # check return json format
        'inp': ['inp'],
        'out': ['out1', 'out2'],
        'next': ['rag1', 'loop_A'], # specify the next pipeline
    },
    'rag1': {
        'rag_backend': rag_api2, # specific api can be set for the current pipe via 'rag_backend' or 'llm_backend'.
        'inp': ['out2'],
        'out': 'out8',
    },
    'loop_A': { # here is iterating over a list 'out1'
        'inp': 'out1',
        'pipe_in_loop': ['rag2', 'llm_process', 'rag3', 'rag4', 'llm_process2', 'llm_process3'],
        'next': ['exit'], # 'exit' is specific pipe mean to end
    },
    'rag2': {
        'inp': ['out1'],
        'out': 'out3',
    },
    'llm_process2': {
        'prompt': llm_process2_prompt,
        'format': {'xxx': str, "xxx": str},
        'inp': ['inp', 'out4', 'out8'],
        'out': 'final_out1',
    },
    ...
}

# running pipeline
pipeline = SigmaFlow(demo_pipe, llm_api, rag_api)
result, info = pipeline.run(data, core_num=4, save_pref=True)
```
</details>

Logs are stored in the `logs` folder. If `save_pref` is `true`, you can see the relevant performance report.

æ—¥å¿—å­˜å‚¨åœ¨`logs`æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœ`save_pref`ä¸º`true`ï¼Œä½ å¯ä»¥çœ‹åˆ°ç›¸å…³çš„æ€§èƒ½æŠ¥å‘Šã€‚

For a complete example, please refer to the [example](https://github.com/maokangkun/SigmaFlow/tree/main/example/) directory.

å®Œæ•´ç¤ºä¾‹è¯·å‚è€ƒexampleç›®å½•ã€‚

## Start with CLI Mode

> We have updated a more easy-to-use command to run pipeline.
```bash
sigmaflow -p example/demo_pipeline.py -i example/demo_data.json -m async
```

Command Options:
```
options:
  -h, --help            show this help message and exit
  -p PIPELINE, --pipeline PIPELINE
                        specify the pipeline to run
  -i INPUT, --input INPUT
                        specify input data
  -o OUTPUT, --output OUTPUT
                        specify output data
  -m {async,mp,seq}, --mode {async,mp,seq}
                        specify the run mode
  --split SPLIT         split the data into parts to run
  --png                 export graph as png
  --test                run test
```

## Documentation
For detailed documentation, please visit our official documentation page.

æœ‰å…³è¯¦ç»†æ–‡æ¡£ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„å®˜æ–¹æ–‡æ¡£é¡µé¢ã€‚

## Contributing
We welcome contributions from the community. Please read our contributing guide to get started.

æˆ‘ä»¬æ¬¢è¿æ¥è‡ªç¤¾åŒºçš„è´¡çŒ®ã€‚è¯·é˜…è¯»æˆ‘ä»¬çš„è´¡çŒ®æŒ‡å—å¼€å§‹ã€‚

## License
SigmaFlow is licensed under the Apache License Version 2.0. See the [LICENSE](./LICENSE) file for more details.

SigmaFlow é‡‡ç”¨ Apache License Version 2.0 è®¸å¯è¯ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[è®¸å¯è¯](./LICENSE)æ–‡ä»¶ã€‚

## Acknowledgements
Special thanks to all contributors and the open-source community for their support.

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œå¼€æºç¤¾åŒºçš„æ”¯æŒã€‚

## Contact
For any questions or issues, please open an issue on our [GitHub repository](https://github.com/maokangkun/SigmaFlow).

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–æ„è§ï¼Œè¯·åœ¨æˆ‘ä»¬çš„[GitHub ä»“åº“](https://github.com/maokangkun/SigmaFlow)æäº¤ issueã€‚

## Star History

<div align="center">
<a href="https://star-history.com/#maokangkun/SigmaFlow&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=maokangkun/SigmaFlow&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=maokangkun/SigmaFlow&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=maokangkun/SigmaFlow&type=Date" />
 </picture>
</a>
</div>

## Contribution

Thank you to all our contributors!

<a href="https://github.com/maokangkun/SigmaFlow/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=maokangkun/SigmaFlow" />
</a>

## ğŸŒŸCitation

```python
@book{Mao2025maokangkun,
	title = {maokangkun/SigmaFlow},
	url = {https://github.com/maokangkun/SigmaFlow},
	author = {Mao, Kangkun},
	date = {2025-04-01},
	year = {2025},
	month = {4},
	day = {1},
}
```
