[project]
name = "roboherd"
description = "A Fediverse bot framework"
readme = "README.md"
requires-python = ">=3.11"
dependencies = [
    "almabtrieb>=0.2",
    "apscheduler>=3.11.0",
    "click>=8.1.8",
    "cron-descriptor>=1.4.5",
    "dynaconf>=3.2.6",
    "fast-depends>=3.0.0",
    "pydantic==2.12.3",
    "tomli-w>=1.1.0",
]

dynamic = ["version"]

[project.urls]
Documentation = "https://bovine.codeberg.page/roboherd/"
Repository = "https://codeberg.org/bovine/roboherd"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.version]
path = "roboherd/version.py"

[project.scripts]
roboherd = "roboherd.__main__:main"

[project.optional-dependencies]
amqp = ["almabtrieb[amqp]>=0.2.8"]
bovine = ["bovine>=0.5.15", "markdown>=3.7"]
dev = ["aiohttp>=3.11.12", "watchfiles>=1.0.4"]
mqtt = ["almabtrieb[mqtt]>=0.2.8"]

[dependency-groups]
dev = [
    "pytest>=8.3.4",
    "pytest-asyncio>=0.25.2",
    "pytest-watcher>=0.4.3",
    "ruff>=0.9.6",
    "pyright>=1.1.394",
]
docs = [
    "mkdocs-material==9.6.20",
    "mkdocstrings-python>=1.13.0",
    "griffe-fieldz>=0.2.1",
    "mkdocs-click>=0.8.1",
    "mkdocs-material-codeberg-source-facts>=0.1.2",
]
bdd = [
    "almabtrieb[mqtt]>=0.2.9",
    "behave>=1.3.3",
    "cattle-grid[postgres]>=0.5.14",
]

[tool.pytest.ini_options]
addopts = "--doctest-modules"
asyncio_mode = "auto"
log_cli = true
log_cli_level = "INFO"
doctest_optionflags = "NORMALIZE_WHITESPACE IGNORE_EXCEPTION_DETAIL ELLIPSIS"
testpaths = ["roboherd/**/*.py"]
