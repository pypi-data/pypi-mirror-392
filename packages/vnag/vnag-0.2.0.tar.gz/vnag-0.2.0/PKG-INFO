Metadata-Version: 2.4
Name: vnag
Version: 0.2.0
Summary: VeighNa agent framework.
Author-email: Xiaoyou Chen <xiaoyou.chen@mail.vnpy.com>
License: MIT
License-File: LICENSE
Keywords: agent,ai
Classifier: Development Status :: 5 - Production/Stable
Classifier: License :: OSI Approved :: MIT License
Classifier: Natural Language :: Chinese (Simplified)
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Topic :: Office/Business :: Financial :: Investment
Requires-Python: >=3.10
Requires-Dist: anthropic
Requires-Dist: chardet
Requires-Dist: chromadb
Requires-Dist: dashscope
Requires-Dist: fastmcp
Requires-Dist: libclang
Requires-Dist: loguru
Requires-Dist: markdown-it-py
Requires-Dist: numpy
Requires-Dist: openai
Requires-Dist: pydantic
Requires-Dist: pypdf
Requires-Dist: pyside6
Requires-Dist: pyside6-addons
Requires-Dist: qdarkstyle
Requires-Dist: qdrant-client
Requires-Dist: requests
Requires-Dist: sentence-transformers
Description-Content-Type: text/markdown

# VNAG - Your Agent, Your Data.

<p align="center">
    <img src ="https://img.shields.io/badge/version-0.2.0-blueviolet.svg"/>
    <img src ="https://img.shields.io/badge/platform-windows|linux|macos-yellow.svg"/>
    <img src ="https://img.shields.io/badge/python-3.10|3.11|3.12|3.13-blue.svg" />
    <img src ="https://img.shields.io/github/license/vnpy/vnag.svg?color=orange"/>
</p>

<p align="center">
  <img src="https://vnag.oss-cn-shanghai.aliyuncs.com/vnag_0.2.0.png" width="800" alt="VNAG Screenshot">
</p>

VeighNa Agent (vnag) æ˜¯ä¸€æ¬¾ä¸“ä¸ºAI Agentå¼€å‘è€Œè®¾è®¡çš„Pythonæ¡†æ¶ï¼Œè‡´åŠ›äºä¸ºå¼€å‘è€…æä¾›ç®€æ´ã€å¼ºå¤§ä¸”æ˜“äºæ‰©å±•çš„Agentæ„å»ºå·¥å…·ã€‚ç§‰æ‰¿"Your Agent, Your Data"çš„ç†å¿µï¼Œvnagè®©æ‚¨èƒ½å¤Ÿå®Œå…¨æŒæ§è‡ªå·±çš„AI Agentå’Œæ•°æ®æµç¨‹ã€‚

## é¡¹ç›®ä»‹ç»

vnagæ˜¯VeighNaå›¢é˜Ÿæ¨å‡ºçš„å…¨æ–°AI Agentå¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨é™ä½AI Agentå¼€å‘çš„é—¨æ§›ï¼Œè®©æ›´å¤šå¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ„å»ºå±äºè‡ªå·±çš„æ™ºèƒ½åŠ©æ‰‹ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

- **ğŸ¤– å¯å®šåˆ¶æ™ºèƒ½ä½“**: è½»æ¾åˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ™ºèƒ½ä½“ï¼Œæ¯ä¸ªéƒ½å¯æ‹¥æœ‰ç‹¬ç«‹çš„è§’è‰²ï¼ˆç³»ç»Ÿæç¤ºè¯ï¼‰ã€èƒ½åŠ›ï¼ˆå·¥å…·é›†ï¼‰å’Œè¡Œä¸ºæ¨¡å¼ï¼ˆæ¨¡å‹å‚æ•°ï¼‰ã€‚
- **ğŸ”§ åŒæ ¸å·¥å…·ä½“ç³»**: åŒæ—¶æ”¯æŒç®€å•æ˜“ç”¨çš„æœ¬åœ°å‡½æ•°å·¥å…·å’ŒåŠŸèƒ½å¼ºå¤§çš„ MCP è¿œç¨‹å·¥å…·ã€‚
- **ğŸ”Œ ç»Ÿä¸€APIæ¥å£**ï¼šæ”¯æŒOpenAIå…¼å®¹çš„å„ç§å¤§æ¨¡å‹API
- **ğŸ¨ ç°ä»£åŒ–UI**ï¼šåŸºäºPySide6çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œä¸ä»…æ˜¯èŠå¤©çª—å£ï¼Œæ›´æ˜¯å¼ºå¤§çš„æ™ºèƒ½ä½“è°ƒè¯•å’Œç®¡ç†å·¥å…·ã€‚
- **ğŸ“ æ™ºèƒ½å¯¹è¯**ï¼šæ”¯æŒMarkdownæ¸²æŸ“çš„èŠå¤©ç•Œé¢
- **ğŸ’¾ æ•°æ®ç®¡æ§**ï¼šæœ¬åœ°åŒ–çš„å¯¹è¯å†å²å’Œé…ç½®ç®¡ç†
- **ğŸ§© æ˜“äºæ‰©å±•**ï¼šæ¸…æ™°çš„æ¨¡å—åŒ–æ¶æ„ï¼Œä¾¿äºäºŒæ¬¡å¼€å‘

### é€‚ç”¨åœºæ™¯

- AIèŠå¤©æœºå™¨äººå¼€å‘
- æ™ºèƒ½å®¢æœç³»ç»Ÿ
- çŸ¥è¯†é—®ç­”åŠ©æ‰‹
- ä¸ªäººAIåŠ©ç†
- ä¼ä¸šå†…éƒ¨æ™ºèƒ½å·¥å…·

## ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/vnpy/vnag.git
cd vnag
```

### 2. (æ¨è) åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

ä¸ºäº†ä¿æŒé¡¹ç›®ä¾èµ–çš„éš”ç¦»ï¼Œå¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨ Python è™šæ‹Ÿç¯å¢ƒã€‚

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (Windows)
.\venv\Scripts\activate

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (macOS/Linux)
source venv/bin/activate
```

### 3. å®‰è£…ä¾èµ–

```bash
# ä»æºç å®‰è£…é¡¹ç›®åŠå…¶ä¾èµ–
pip install -e .
```

## å¿«é€Ÿå¼€å§‹

### æ‚¨çš„ç¬¬ä¸€ä¸ª Agent (3æ­¥æå®š)

è·Ÿéšä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼Œæ‚¨å°†åœ¨3åˆ†é’Ÿå†…å¯åŠ¨ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„èŠå¤©æœºå™¨äººUIã€‚

**ç¬¬1æ­¥ï¼šå®‰è£…ä¾èµ–**

å¦‚æœæ‚¨å·²ç»å®Œæˆäº†ä¸Šä¸€ç« èŠ‚ "ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…" çš„æ“ä½œï¼Œé‚£ä¹ˆä¾èµ–å·²ç»å®‰è£…å®Œæ¯•ï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥ã€‚

**ç¬¬2æ­¥ï¼šé…ç½®APIå¯†é’¥**

vnag éœ€è¦ API å¯†é’¥æ¥ä¸å¤§æ¨¡å‹æœåŠ¡è¿›è¡Œé€šä¿¡ã€‚

1.  è¯·å‚è€ƒ "é…ç½®" ç« èŠ‚çš„è¯´æ˜ï¼Œåœ¨ `.vnag` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `connect_openai.json` æ–‡ä»¶ã€‚
2.  æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ OpenAI API Key å’Œ Base URLã€‚

**ç¬¬3æ­¥ï¼šè¿è¡ŒèŠå¤©UI**

ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
python examples/ui/run_chat_ui.py
```

ç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªç¾è§‚çš„èŠå¤©çª—å£äº†ï¼æ­å–œæ‚¨æˆåŠŸè¿è¡Œäº†ç¬¬ä¸€ä¸ª Agentï¼

è¿è¡Œåï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„ Agent ç®¡ç†ç•Œé¢ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥åˆ›å»ºå’Œé…ç½®è‡ªå·±çš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ï¼Œå®šä¹‰å®ƒçš„ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰ã€é€‰æ‹©éœ€è¦ä½¿ç”¨çš„å·¥å…·ã€å¹¶è°ƒæ•´æ¨¡å‹å‚æ•°ï¼ˆå¦‚æ¸©åº¦ï¼‰ç­‰ã€‚

### è‡ªå®šä¹‰æ‚¨çš„ Agent

vnag 0.2.0 å¼•å…¥äº† `TaskAgent` å’Œ `Profile` çš„æ¦‚å¿µï¼Œè®©æ‚¨å¯ä»¥è½»æ¾å®šä¹‰å’Œç®¡ç†å¤šä¸ªå…·æœ‰ä¸åŒåŠŸèƒ½å’Œè¡Œä¸ºçš„æ™ºèƒ½ä½“ã€‚

**æ ¸å¿ƒæ¦‚å¿µ:**

- **Agent (æ™ºèƒ½ä½“)**: ä¸€ä¸ªç‹¬ç«‹çš„æ™ºèƒ½ä½“å®ä¾‹ï¼Œæ‹¥æœ‰è‡ªå·±çš„å¯¹è¯å†å²å’Œé…ç½®ã€‚
- **Profile (é…ç½®)**: å®šä¹‰äº† Agent è¡Œä¸ºçš„é…ç½®æ¨¡æ¿ï¼ŒåŒ…æ‹¬ï¼š
  - **ç³»ç»Ÿæç¤ºè¯ (Prompt)**: è®¾å®š Agent çš„è§’è‰²å’Œè¡Œä¸ºå‡†åˆ™ã€‚
  - **å·¥å…·é›† (Tools)**: ä»æœ¬åœ°å·¥å…·å’ŒMCPå·¥å…·ä¸­é€‰æ‹© Agent å¯ä»¥ä½¿ç”¨çš„å·¥å…·ã€‚
  - **æ¨¡å‹å‚æ•°**: å¦‚ `temperature`, `max_tokens` ç­‰ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„ç”Ÿæˆè¡Œä¸ºã€‚

**ä¸¤ç§æ–¹å¼æ¥è‡ªå®šä¹‰ Agent:**

1.  **é€šè¿‡UIç•Œé¢ï¼ˆæ¨èï¼‰**:
    è¿è¡Œ `python examples/ui/run_chat_ui.py` å¯åŠ¨å›¾å½¢åŒ–ç•Œé¢ã€‚åœ¨ç•Œé¢ä¸­ï¼Œæ‚¨å¯ä»¥ç›´è§‚åœ°åˆ›å»ºå’Œç®¡ç† Profileï¼Œç„¶ååŸºäºé€‰å®šçš„ Profile åˆ›å»º Agent å®ä¾‹è¿›è¡Œå¯¹è¯ã€‚

2.  **é€šè¿‡ä»£ç **:
    `examples/agent/run_task_agent.py` è„šæœ¬è¯¦ç»†æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡ä»£ç æ¥åˆ›å»º `Profile` å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ `AgentEngine` æ¥åˆ›å»ºä¸€ä¸ª `TaskAgent` å®ä¾‹ã€‚è¿™ä¸ºæ‚¨æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥å°† vnag é›†æˆåˆ°æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ã€‚

### æ›´å¤šç¤ºä¾‹

é€šè¿‡ `examples` ç›®å½•ä¸‹çš„ä¸°å¯Œç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿäº†è§£å’ŒæŒæ¡ vnag æ¡†æ¶çš„å„é¡¹åŠŸèƒ½ã€‚

æ‰€æœ‰ç¤ºä¾‹å‡å¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç›´æ¥è¿è¡Œã€‚

### ç½‘å…³ï¼ˆGatewayï¼‰

- åŠŸèƒ½ï¼šæµ‹è¯•ä¸ä¸åŒå¤§æ¨¡å‹æä¾›å•†çš„ API è¿æ¥ã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # æµ‹è¯• OpenAI Gataway
  python examples/gateway/run_openai_gateway.py
  ```

### åˆ†æ®µå™¨ï¼ˆSegmenterï¼‰

- åŠŸèƒ½ï¼šå±•ç¤ºå¦‚ä½•å°†ä¸åŒç±»å‹çš„æ–‡æ¡£ï¼ˆMarkdown, Python, C++ï¼‰åˆ‡åˆ†ä¸ºç»“æ„åŒ–çš„æ•°æ®æ®µã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # è¿è¡Œ Markdown åˆ†æ®µå™¨
  python examples/segmenter/run_markdown_segmenter.py
  ```

### å‘é‡åº“ï¼ˆVectorï¼‰

- åŠŸèƒ½ï¼šæ¼”ç¤ºå¦‚ä½•å°†æ–‡æœ¬æ•°æ®å‘é‡åŒ–åå­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆChromaDB æˆ– Qdrantï¼‰ï¼Œå¹¶è¿›è¡Œç›¸ä¼¼åº¦æœç´¢ã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # æ·»åŠ æ•°æ®åˆ° ChromaDB å‘é‡åº“
  python examples/vector/run_chromadb_add.py

  # ä» ChromaDB å‘é‡åº“æœç´¢æ•°æ®
  python examples/vector/run_chromadb_search.py

  # æ·»åŠ æ•°æ®åˆ° Qdrant å‘é‡åº“
  python examples/vector/run_qdrant_add.py

  # ä» Qdrant å‘é‡åº“æœç´¢æ•°æ®
  python examples/vector/run_qdrant_search.py
  ```

### RAG

- åŠŸèƒ½ï¼šä¸€ä¸ªå®Œæ•´çš„ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æµç¨‹ï¼Œç»“åˆäº†åˆ†æ®µã€å…¥åº“å’Œæ£€ç´¢ç”Ÿæˆã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # è¿è¡Œä¸€ä¸ªåŸºäºCTP APIæ–‡æ¡£çš„RAGé—®ç­”
  python examples/rag/run_ctp_rag.py
  ```

### å·¥å…·è°ƒç”¨ï¼ˆToolï¼‰

- åŠŸèƒ½ï¼šæ¼”ç¤º Agent å¦‚ä½•è°ƒç”¨æœ¬åœ°æˆ–è¿œç¨‹ï¼ˆMCPï¼‰å·¥å…·ã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # è¿è¡Œæœ¬åœ°å·¥å…·è°ƒç”¨
  python examples/tool/run_local_tool.py
  ```

### Agentå¼•æ“

- åŠŸèƒ½ï¼šæ¼”ç¤ºå¦‚ä½•é€šè¿‡ä»£ç åˆ›å»ºå’Œé…ç½® `TaskAgent`ã€‚è¯¥ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å®šä¹‰ `Profile`ï¼ˆåŒ…å«ç³»ç»Ÿæç¤ºè¯ã€å·¥å…·ã€æ¨¡å‹å‚æ•°ï¼‰ï¼Œå¹¶ä½¿ç”¨ `AgentEngine` æ¥é©±åŠ¨ä¸€ä¸ªæ™ºèƒ½ä½“å®Œæˆè°ƒç”¨æœ¬åœ°å·¥å…·å’ŒMCPå·¥å…·çš„ä»»åŠ¡ã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # è¿è¡Œä»»åŠ¡å‹ Agent
  python examples/agent/run_task_agent.py
  ```

### UI ç•Œé¢

- åŠŸèƒ½ï¼šå¯åŠ¨ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å›¾å½¢åŒ–æ™ºèƒ½ä½“ç®¡ç†å’Œè°ƒè¯•ç•Œé¢ã€‚æ‚¨å¯ä»¥åœ¨æ­¤åˆ›å»ºå’Œç®¡ç†ä¸åŒçš„æ™ºèƒ½ä½“é…ç½®ï¼ˆProfileï¼‰ï¼Œå¹¶ä¸åŸºäºè¿™äº›é…ç½®åˆ›å»ºçš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰è¿›è¡Œäº¤äº’ã€‚
- ç¤ºä¾‹ï¼š
  ```bash
  # è¿è¡Œ Agent ç®¡ç†UI
  python examples/ui/run_chat_ui.py
  ```

## é…ç½®

vnag é‡‡ç”¨ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ç®¡ç†æœºåˆ¶ï¼Œæ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½å­˜æ”¾åœ¨åä¸º `.vnag` çš„éšè—ç›®å½•ä¸­ã€‚

### åŠ è½½é€»è¾‘

1.  **ä¼˜å…ˆåŠ è½½å½“å‰ç›®å½•**ï¼šç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šé¦–å…ˆæ£€æŸ¥å½“å‰å·¥ä½œè·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨ `.vnag` ç›®å½•ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šç›´æ¥åŠ è½½è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚
2.  **å¤‡é€‰ç”¨æˆ·ä¸»ç›®å½•**ï¼šå¦‚æœå½“å‰å·¥ä½œè·¯å¾„ä¸‹æ²¡æœ‰ `.vnag` ç›®å½•ï¼Œç¨‹åºä¼šè‡ªåŠ¨åœ¨æ‚¨çš„ç³»ç»Ÿç”¨æˆ·ä¸»ç›®å½•ï¼ˆHome Directoryï¼‰ä¸‹å¯»æ‰¾å¹¶ä½¿ç”¨ `.vnag` ç›®å½•ã€‚å¦‚æœè¯¥ç›®å½•ä¸å­˜åœ¨ï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ›å»ºã€‚

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥ä¸ºä¸åŒçš„é¡¹ç›®è®¾ç½®ç‹¬ç«‹çš„æœ¬åœ°é…ç½®ï¼Œæˆ–è€…é…ç½®ä¸€ä¸ªå…¨å±€å…±äº«çš„é…ç½®ã€‚

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

#### 1. ç½‘å…³è¿æ¥é…ç½®

ç”¨äºå­˜å‚¨è®¿é—®å„ç±»å¤§æ¨¡å‹ API æ‰€éœ€çš„å¯†é’¥ï¼ˆkeyï¼‰ã€åŸºåœ°å€ï¼ˆbase_urlï¼‰ç­‰ä¿¡æ¯ã€‚æ¯ä¸ªç½‘å…³å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„ JSON æ–‡ä»¶ã€‚

- **æ–‡ä»¶å**ï¼š`connect_{gateway_name}.json` (ä¾‹å¦‚: `connect_openai.json`)
- **å­˜æ”¾è·¯å¾„**ï¼š`.vnag/`

**`connect_openai.json` ç¤ºä¾‹:**
```json
{
    "api_key": "sk-YourOpenAIKey",
    "base_url": "https://api.openai.com/v1"
}
```

#### 2. MCP é…ç½®

ç”¨äºè¿æ¥ `fastmcp` å…ƒè®¡ç®—å¹³å°ï¼Œä»¥è°ƒç”¨è¿œç¨‹å·¥å…·ã€‚

- **æ–‡ä»¶å**ï¼š`mcp_config.json`
- **å­˜æ”¾è·¯å¾„**ï¼š`.vnag/`

**`mcp_config.json` ç¤ºä¾‹:**
```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "."]
    },
    "sequential-thinking": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sequential-thinking"]
    }
  }
}
```

> **æ³¨æ„**ï¼šMCP æœåŠ¡é€šè¿‡ `npx` å‘½ä»¤æ‰§è¡Œï¼Œè¿™ä¾èµ–äºæœ¬åœ°çš„ [Node.js](https://nodejs.org/) ç¯å¢ƒã€‚è¯·ç¡®ä¿æ‚¨å·²æ­£ç¡®å®‰è£… Node.jsï¼ˆå»ºè®®ä½¿ç”¨ LTS ç‰ˆæœ¬ï¼‰ã€‚

## é¡¹ç›®ç»“æ„

```
vnag/
â”œâ”€â”€ vnag/                       # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py            # ç‰ˆæœ¬ä¿¡æ¯
â”‚   â”œâ”€â”€ object.py              # æ•°æ®å¯¹è±¡ï¼ˆMessage/Requestç­‰ï¼‰
â”‚   â”œâ”€â”€ constant.py            # æšä¸¾å¸¸é‡
â”‚   â”œâ”€â”€ utility.py             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ gateway.py             # ç½‘å…³åŸºç±»
â”‚   â”œâ”€â”€ segmenter.py           # åˆ†æ®µå™¨åŸºç±»
â”‚   â”œâ”€â”€ vector.py              # å‘é‡åº“åŸºç±»
â”‚   â”œâ”€â”€ local.py               # æœ¬åœ°å·¥å…·ç®¡ç†å™¨
â”‚   â”œâ”€â”€ mcp.py                 # MCPè¿œç¨‹å·¥å…·ç®¡ç†å™¨
â”‚   â”œâ”€â”€ engine.py              # Agentå¼•æ“
â”‚   â”œâ”€â”€ gateways/              # ç½‘å…³å®ç°ï¼ˆOpenAI/Anthropic/Dashscopeï¼‰
â”‚   â”œâ”€â”€ segmenters/            # åˆ†æ®µå™¨å®ç°ï¼ˆMarkdown/Python/C++ï¼‰
â”‚   â”œâ”€â”€ vectors/               # å‘é‡åº“å®ç°ï¼ˆChromaDB/Qdrantï¼‰
â”‚   â”œâ”€â”€ tools/                 # æœ¬åœ°å·¥å…·å®ç°ç¤ºä¾‹
â”‚   â””â”€â”€ ui/                    # GUIç•Œé¢å®ç°
â”œâ”€â”€ examples/                  # åŠŸèƒ½ç¤ºä¾‹è„šæœ¬é›†åˆ
â”œâ”€â”€ pyproject.toml             # é¡¹ç›®é…ç½®
â”œâ”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ LICENSE                    # å¼€æºåè®®
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

- **`engine.py`**: Agent å¼•æ“ï¼Œè´Ÿè´£å¯¹è¯ç®¡ç†ã€å·¥å…·è°ƒç”¨ç¼–æ’å’Œä¸å¤§æ¨¡å‹äº¤äº’ã€‚
- **`gateway.py` & `gateways/`**: å®šä¹‰äº†ä¸å¤§æ¨¡å‹ API é€šä¿¡çš„ç»Ÿä¸€æ¥å£ï¼Œå¹¶æä¾›äº† OpenAIã€Anthropicã€Dashscope ç­‰å¤šç§å®ç°ã€‚
- **`segmenter.py` & `segmenters/`**: ç”¨äºå°†æ–‡æ¡£ï¼ˆå¦‚ Markdownã€Pythonã€C++ æºç ï¼‰è§£æä¸ºç»“æ„åŒ–æ•°æ®æ®µï¼Œæ˜¯ RAG çš„åŸºç¡€ã€‚
- **`vector.py` & `vectors/`**: å‘é‡æ•°æ®åº“çš„ç»Ÿä¸€æ¥å£å’Œå®ç°ï¼ˆæ”¯æŒ ChromaDB å’Œ Qdrantï¼‰ï¼Œç”¨äºå­˜å‚¨å’Œæ£€ç´¢çŸ¥è¯†ç‰‡æ®µã€‚
- **`local.py`**: æœ¬åœ°å·¥å…·ç®¡ç†å™¨ï¼Œå¯ä»¥è‡ªåŠ¨åŠ è½½å’Œæ‰§è¡Œæœ¬åœ° Python å‡½æ•°ä½œä¸ºå·¥å…·ã€‚
- **`mcp.py`**: MCPï¼ˆå…ƒè®¡ç®—å¹³å°ï¼‰å·¥å…·ç®¡ç†å™¨ï¼Œç”¨äºè¿æ¥ `fastmcp` æœåŠ¡ï¼Œå®ç°åœ¨è¿œç«¯æ‰§è¡Œæ›´å¤æ‚çš„å·¥å…·ã€‚
- **`tools/`**: æä¾›ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„æœ¬åœ°å·¥å…·ï¼Œè¯¦æƒ…è¯·è§ä¸‹æ–¹â€œå†…ç½®æœ¬åœ°å·¥å…·â€ç« èŠ‚ã€‚
- **`ui/`**: åŸºäº PySide6 çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œæä¾›ä¸€ä¸ªå¼€ç®±å³ç”¨çš„èŠå¤©åº”ç”¨ã€‚
- **`object.py`**: å®šä¹‰äº†æ¡†æ¶ä¸­æ‰€æœ‰æ ¸å¿ƒæ•°æ®å¯¹è±¡ï¼Œå¦‚ `Message`, `Request`, `ToolCall` ç­‰ã€‚
- **`examples/`**: åŒ…å«å„ä¸ªæ¨¡å—çš„ç‹¬ç«‹ç¤ºä¾‹è„šæœ¬ï¼Œæ˜¯å­¦ä¹ å’Œæµ‹è¯•æ¡†æ¶åŠŸèƒ½çš„æœ€ä½³å…¥å£ã€‚

### å†…ç½®æœ¬åœ°å·¥å…·

`vnag` åœ¨ `vnag/tools/` ç›®å½•ä¸‹æä¾›äº†ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„æœ¬åœ°å·¥å…·ï¼Œæ–¹ä¾¿ Agent ç›´æ¥è°ƒç”¨ã€‚

#### æ—¥æœŸæ—¶é—´å·¥å…· (`datetime_tools.py`)

- **get_current_date**: è·å– YYYY-MM-DD æ ¼å¼çš„å½“å‰æ—¥æœŸã€‚
- **get_current_time**: è·å– HH:MM:SS æ ¼å¼çš„å½“å‰æ—¶é—´ã€‚
- **get_current_datetime**: è·å– YYYY-MM-DD HH:MM:SS æ ¼å¼çš„å½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚
- **get_day_of_week**: è·å–ä¸­æ–‡æ ¼å¼çš„å½“å¤©æ˜ŸæœŸæ•°ï¼ˆå¦‚ï¼šæ˜ŸæœŸä¸€ï¼‰ã€‚

#### æ–‡ä»¶ç³»ç»Ÿå·¥å…· (`file_tools.py`)

> **å®‰å…¨è¯´æ˜**ï¼šæ–‡ä»¶ç³»ç»Ÿå·¥å…·çš„ä½¿ç”¨å—åˆ°æƒé™æ§åˆ¶ã€‚æ‚¨éœ€è¦åœ¨ `.vnag/file_system_tool.json` é…ç½®æ–‡ä»¶ä¸­æ˜ç¡®æŒ‡å®šå…è®¸è¯»å†™çš„è·¯å¾„ï¼Œä»¥é˜²æ­¢ Agent è®¿é—®æœªæˆæƒçš„æ–‡ä»¶ã€‚

- **list_directory**: åˆ—å‡ºæŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ã€‚
- **read_file**: è¯»å–æŒ‡å®šæ–‡ä»¶çš„æ–‡æœ¬å†…å®¹ã€‚
- **write_file**: å°†æŒ‡å®šçš„æ–‡æœ¬å†…å®¹å†™å…¥æ–‡ä»¶ï¼ˆä¼šè¦†ç›–å·²æœ‰å†…å®¹ï¼‰ã€‚

#### ç½‘ç»œå·¥å…· (`network_tools.py`)

- **ping**: æ£€æŸ¥ä¸ç›®æ ‡ä¸»æœºçš„ç½‘ç»œè¿é€šæ€§ã€‚
- **telnet**: æµ‹è¯•ç›®æ ‡ä¸»æœºä¸Šçš„ç‰¹å®šç«¯å£æ˜¯å¦å¼€æ”¾ã€‚
- **get_local_ip**: è·å–æœ¬æœºçš„å±€åŸŸç½‘ IP åœ°å€ã€‚
- **get_public_ip**: è·å–æœ¬æœºçš„å…¬ç½‘ IP åœ°å€ã€‚
- **get_mac_address**: è·å–æœ¬æœºçš„ MAC åœ°å€ã€‚

## å¼€å‘çŠ¶æ€

### å½“å‰åŠŸèƒ½ âœ…

- [x] **Agentå¼•æ“**ï¼šæ”¯æŒå¤šè½®å¯¹è¯å’Œè‡ªåŠ¨å·¥å…·è°ƒç”¨ç¼–æ’ã€‚
- [x] **LLMç½‘å…³**ï¼šå…¼å®¹ OpenAIã€Anthropicã€Dashscope APIï¼Œæ”¯æŒæµå¼è¾“å‡ºã€‚
- [x] **RAGæ”¯æŒ**ï¼š
    - [x] **åˆ†æ®µå™¨**ï¼šMarkdownï¼ˆæŒ‰æ ‡é¢˜ï¼‰ã€Pythonï¼ˆASTï¼‰ã€C++ï¼ˆlibclang ASTï¼‰ã€‚
    - [x] **å‘é‡åº“**ï¼šé›†æˆ ChromaDB å’Œ Qdrantï¼Œæ”¯æŒé«˜æ•ˆçš„æœ¬åœ°å‘é‡å­˜å‚¨å’Œæ£€ç´¢ã€‚
- [x] **å·¥å…·ç³»ç»Ÿ**ï¼š
    - [x] **æœ¬åœ°å·¥å…·**ï¼šè‡ªåŠ¨åŠ è½½ Python å‡½æ•°ä½œä¸ºå·¥å…·ã€‚
    - [x] **MCPå·¥å…·**ï¼šé€šè¿‡ `fastmcp` å®¢æˆ·ç«¯é›†æˆè¿œç¨‹å·¥å…·ã€‚
- [x] **å›¾å½¢ç•Œé¢**ï¼šåŸºäº PySide6 çš„ç°ä»£åŒ–èŠå¤© UIã€‚
- [x] **ç¤ºä¾‹è„šæœ¬**ï¼šè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„è¯¦ç»† `examples` ç¤ºä¾‹ã€‚

## å¸¸è§é—®é¢˜ (FAQ)

**Q: è¿è¡Œ `python examples/xxx.py` æŠ¥é”™ `ModuleNotFoundError: No module named 'vnag'`?**

**A:** è¿™æ˜¯å› ä¸ºæ‚¨æ²¡æœ‰æ­£ç¡®å®‰è£…é¡¹ç›®ã€‚è¯·ç¡®ä¿æ‚¨å·²ç»åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œå¹¶ä¸”**å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ**ï¼Œç„¶åæ‰§è¡Œ `pip install -e .` å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤ä¼šä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…é¡¹ç›®ï¼Œè®© Python è§£é‡Šå™¨èƒ½å¤Ÿæ‰¾åˆ° `vnag` æ¨¡å—ã€‚

**Q: ç¨‹åºå¯åŠ¨äº†ï¼Œä½†æ˜¯è¯·æ±‚å¤§æ¨¡å‹APIæ—¶æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ**

**A:** è¯·ä»”ç»†æ£€æŸ¥ `.vnag` ç›®å½•ä¸‹çš„ `connect_xxx.json` é…ç½®æ–‡ä»¶ã€‚ç¡®è®¤ `api_key` (å¯†é’¥) å’Œ `base_url` (APIåœ°å€) éƒ½å·²æ­£ç¡®å¡«å†™ã€‚åŒæ—¶ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç½‘ç»œç¯å¢ƒå¯ä»¥æ­£å¸¸è®¿é—®è¯¥ API åœ°å€ã€‚

**Q: è¿è¡ŒMCPç›¸å…³ç¤ºä¾‹æ—¶ï¼Œæç¤º `npx` ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Ÿ**

**A:** è¿™ä¸ªé”™è¯¯è¡¨ç¤ºæ‚¨çš„ç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£… Node.jsï¼Œæˆ–è€… Node.js çš„è·¯å¾„æ²¡æœ‰è¢«æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ã€‚è¯·å‚è€ƒæœ¬æ–‡æ¡£ "é…ç½®" ç« èŠ‚ä¸­çš„æç¤ºï¼Œä» [Node.jså®˜ç½‘](https://nodejs.org/) ä¸‹è½½å¹¶å®‰è£… LTS (é•¿æœŸæ”¯æŒ) ç‰ˆæœ¬ã€‚

## è´¡çŒ®ä»£ç 

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯bugæŠ¥å‘Šã€åŠŸèƒ½å»ºè®®è¿˜æ˜¯ä»£ç è´¡çŒ®ã€‚

### å¼€å‘æµç¨‹

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºæ‚¨çš„åŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/AmazingFeature`
3. æäº¤æ‚¨çš„æ›´æ”¹ï¼š`git commit -m 'Add some AmazingFeature'`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/AmazingFeature`
5. æäº¤Pull Request

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹å·¥å…·ç¡®ä¿ä»£ç è´¨é‡ï¼š

- **Ruff**ï¼šä»£ç æ ¼å¼åŒ–å’Œlinting
- **MyPy**ï¼šé™æ€ç±»å‹æ£€æŸ¥

åœ¨æäº¤ä»£ç å‰ï¼Œè¯·è¿è¡Œï¼š

```bash
# ä»£ç æ£€æŸ¥
ruff check .

# ç±»å‹æ£€æŸ¥
mypy vnag
```

### é—®é¢˜åé¦ˆ

å¦‚æœæ‚¨é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š

- åœ¨GitHubä¸Šæäº¤[Issue](https://github.com/vnpy/vnag/issues)
- å‘é€é‚®ä»¶è‡³ï¼šxiaoyou.chen@mail.vnpy.com

## ç‰ˆæƒè¯´æ˜

æœ¬é¡¹ç›®é‡‡ç”¨MITå¼€æºåè®®ï¼Œè¯¦æƒ…è¯·å‚é˜…[LICENSE](LICENSE)æ–‡ä»¶ã€‚

---

**ç«‹å³å¼€å§‹æ‚¨çš„AI Agentå¼€å‘ä¹‹æ—…ï¼ğŸš€**
