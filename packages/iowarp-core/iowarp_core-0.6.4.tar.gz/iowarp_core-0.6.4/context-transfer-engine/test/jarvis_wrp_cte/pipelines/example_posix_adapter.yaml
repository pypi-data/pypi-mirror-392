name: cte_posix_example
description: Example pipeline demonstrating WRP CTE POSIX adapter interception

# Define interceptors at pipeline level
interceptors:
  # Configure WRP adapters interceptor
  - pkg_type: wrp_adapters
    pkg_name: cte_adapters
    posix: true                          # Enable POSIX interception
    mpiio: false
    stdio: false
    vfd: false
    nvidia_gds: false
    include: ["/data.*", "/tmp/cte_cache.*"]  # Regex patterns to include
    exclude: ["/data/exclude.*"]              # Exclude specific subdirectories
    adapter_page_size: "1M"                   # 1MB page size

# Define packages
pkgs:
  # Configure CTE runtime first (Service, not Interceptor)
  - pkg_type: wrp_cte
    pkg_name: cte_runtime
    devices:
      - ["ram::cte_cache", "1GB", 1.0]
      - ["/mnt/nvme", "500GB", 0.8]
    dpe_type: "round_robin"

  # Setup message
  - pkg_type: echo
    pkg_name: setup
    msg: "Starting CTE POSIX adapter test"

  # Add your application here with the adapter interceptor
  # - pkg_type: your_application
  #   pkg_name: your_app
  #   interceptors: ["cte_adapters"]
  #   # ... application configuration
