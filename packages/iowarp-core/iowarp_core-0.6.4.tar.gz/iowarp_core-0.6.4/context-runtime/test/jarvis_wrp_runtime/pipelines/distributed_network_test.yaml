# IOWarp Distributed Networking Test Pipeline
# Purpose: Deploy the IOWarp runtime on two nodes to test Send/Recv networking
# Requirements:
#   - Two nodes accessible via hostfile
#   - chimaera_start_runtime and chimaera_stop_runtime in PATH
#   - Hostfile at $JARVIS_SHARED/hostfile

name: iowarp_distributed_network_test

pkgs:
  - pkg_type: jarvis_wrp_runtime.wrp_runtime
    pkg_name: runtime_distributed

    # Use distributed hosts from hostfile
    # The hostfile should be at $JARVIS_SHARED/hostfile
    # Format: hostname IP_address (one per line)

    # Worker thread configuration
    # Using fewer workers for testing
    sched_workers: 4
    process_reaper_workers: 1

    # Memory segment configuration
    # Smaller segments for testing
    main_segment_size: "512M"
    client_data_segment_size: "256M"
    runtime_data_segment_size: "256M"

    # Networking configuration
    port: 5555

    # Logging - use debug for detailed networking logs
    log_level: "debug"

    # Runtime configuration
    stack_size: 65536
    queue_depth: 5000
    lane_map_policy: "round_robin"
    heartbeat_interval: 1000

    # Keep runtime alive for testing
    sleep: 300  # 5 minutes
