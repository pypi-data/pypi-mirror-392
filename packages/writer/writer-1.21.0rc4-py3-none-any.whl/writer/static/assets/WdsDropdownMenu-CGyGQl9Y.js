import{d as I,c as w,o as a,f as i,D as M,x as b,be as q,G as g,K as C,y as W,S as u,g as m,t as f,b as v,J as D,_ as x,m as V,r as S,w as B,a8 as z,s as O,a6 as j,E as $,a1 as k,z as A,aq as T}from"./index-DgecPIuV.js";import{W as U}from"./WdsCheckbox-CyMfoekc.js";const F=["data-automation-key","disabled"],N={key:0,class:"WdsDropdownMenuItem__icon WdsDropdownMenuItem__icon--img"},E=["data-writer-tooltip"],G={key:0,class:"WdsDropdownMenuItem__label__shortcut"},J=["data-writer-tooltip"],K={key:2,class:"WdsDropdownMenuItem__action"},P=I({__name:"WdsDropdownMenuItem",props:{showCustomAction:{type:Boolean},selected:{type:Boolean,required:!1},option:{type:Object,required:!0},hideIcons:{type:Boolean,required:!1}},setup(e){const l=e,o=w(()=>{const n=[];return!l.hideIcons&&l.option.icon&&n.push("auto"),n.push("minmax(0, 1fr)"),(l.selected||l.showCustomAction)&&n.push("auto"),{"grid-template-columns":n.join(" ")}}),c=w(()=>{const n={};return l.option.iconColor&&(n.color=l.option.iconColor),l.option.iconBgColor&&(n["background-color"]=l.option.iconBgColor),Object.values(n).length>0?n:void 0});return(n,r)=>(a(),i("button",{class:g(["WdsDropdownMenuItem",{"WdsDropdownMenuItem--selected":e.selected,"WdsDropdownMenuItem--hideIcon":e.hideIcons,"WdsDropdownMenuItem--danger":e.option.variant==="danger"}]),style:C(o.value),"data-automation-key":e.option.value,disabled:e.option.disabled},[e.hideIcons?u("",!0):(a(),i(M,{key:0},[Array.isArray(e.option.icon)?(a(),i("div",N,[b(q,{urls:e.option.icon,"loader-max-width-px":18,"loader-max-height-px":18},null,8,["urls"])])):e.option.icon?(a(),i("div",{key:1,class:g(["WdsDropdownMenuItem__icon",{"WdsDropdownMenuItem__icon--iconColor":c.value}]),style:C(c.value)},[b(W,{name:e.option.icon},null,8,["name"])],6)):u("",!0)],64)),m("div",{class:"WdsDropdownMenuItem__label","data-writer-tooltip":e.option.label,"data-writer-tooltip-strategy":"overflow"},[m("span",null,f(e.option.label),1),e.option.shortcut?(a(),i("span",G,f(e.option.shortcut),1)):u("",!0)],8,E),e.option.detail?(a(),i("div",{key:1,class:"WdsDropdownMenuItem__detail","data-writer-tooltip":e.option.detail,"data-writer-tooltip-strategy":"overflow"},f(e.option.detail),9,J)):u("",!0),e.selected||e.showCustomAction?(a(),i("div",K,[e.selected?(a(),v(W,{key:0,name:"check"})):e.showCustomAction?D(n.$slots,"action",{key:1},void 0,!0):u("",!0)])):u("",!0)],14,F))}}),R=x(P,[["__scopeId","data-v-8fc4c139"]]),H=I({__name:"SharedLazyLoader",setup(e){const l=V("container"),o=S(!1),c=S();function n(r){var y;(y=c.value)==null||y.disconnect();const h=new IntersectionObserver(p=>{p.some(s=>s.isIntersecting)&&(h.unobserve(r),o.value=!0)});h.observe(r),c.value=h}return B(l,()=>{if(!window.IntersectionObserver)return o.value=!0;l.value&&n(l.value)},{immediate:!0}),z(()=>{var r;return(r=c.value)==null?void 0:r.disconnect()}),(r,h)=>(a(),i("div",{ref_key:"container",ref:l,class:"SharedLazyLoader"},[o.value?D(r.$slots,"content",{key:0}):D(r.$slots,"spinner",{key:1})],512))}}),Q={class:"WdsDropdownMenu"},X={key:0,class:"WdsDropdownMenu__header"},Y={key:0,class:"WdsDropdownMenu__header__multiSelect"},Z={class:"WdsDropdownMenu__header__multiSelect__count"},ee={key:1,class:"WdsDropdownMenu__header__search"},te=["disabled"],oe={class:"WdsDropdownMenu__item__label"},ne={class:"WdsDropdownMenu__itemLazyLoader"},ae=I({__name:"WdsDropdownMenu",props:{options:{type:Array,default:()=>[]},hideIcons:{type:Boolean,required:!1},enableSearch:{type:Boolean,required:!1},enableMultiSelection:{type:Boolean,required:!1},selected:{type:[Array,String],required:!1,default:()=>{}},loading:{type:Boolean,required:!1}},emits:{select:e=>typeof e=="string"||Array.isArray(e),search:e=>typeof e=="string"},setup(e,{emit:l}){const o=e,c=l,n=S(""),r=w(()=>`${(Array.isArray(o.selected)?o.selected:[o.selected]).filter(Boolean).length}/${o.options.length} selected`),h=w(()=>{if(!o.enableSearch)return o.options;const s=n.value.toLowerCase();return o.options.filter(d=>{var t;return d.label.toLowerCase().includes(s)||((t=d.detail)==null?void 0:t.toLowerCase().includes(s))})});function y(s){return Array.isArray(o.selected)?o.selected.includes(s):o.selected===s}const p=w(()=>new Set(o.options.map(s=>s.value)));function _(s){if(!o.enableMultiSelection)return c("select",s);const d=new Set(o.selected);d.has(s)?d.delete(s):d.add(s),c("select",[...d].filter(t=>p.value.has(t)))}return B(n,()=>c("search",n.value)),(s,d)=>(a(),i("div",Q,[(e.enableSearch||e.enableMultiSelection)&&!e.loading?(a(),i("div",X,[e.enableMultiSelection?(a(),i("div",Y,[m("div",Z,f(r.value),1),m("button",{class:"WdsDropdownMenu__header__multiSelect__clear",type:"button",onClick:d[0]||(d[0]=t=>s.$emit("select",[]))}," Clear all ")])):u("",!0),e.enableSearch?(a(),i("div",ee,[b(W,{name:"search"}),O(m("input",{ref:"searchInput","onUpdate:modelValue":d[1]||(d[1]=t=>n.value=t),class:"WdsDropdownMenu__header__search__input",type:"text",placeholder:"Search",autocomplete:"off",disabled:e.loading},null,8,te),[[j,n.value]])])):u("",!0)])):u("",!0),e.loading?(a(),i(M,{key:1},$(6,t=>m("button",{key:t,class:"WdsDropdownMenu__item"},[e.enableMultiSelection||!e.hideIcons?(a(),v(k,{key:0,style:{width:"20px"}})):u("",!0),m("div",oe,[b(k)])])),64)):(a(!0),i(M,{key:2},$(h.value,t=>(a(),v(H,{key:t.value},{spinner:A(()=>[m("div",ne,[b(k)])]),content:A(()=>[e.enableMultiSelection?(a(),v(U,{key:0,class:"WdsDropdownMenu__checkbox",checked:y(t.value),label:t.label,detail:t.detail,"data-automation-key":t.value,disabled:t.disabled,"model-value":y(t.value),"onUpdate:modelValue":L=>_(t.value)},null,8,["checked","label","detail","data-automation-key","disabled","model-value","onUpdate:modelValue"])):(a(),v(R,{key:1,option:t,"data-automation-key":t.value,selected:y(t.value),onClick:T(L=>_(t.value),["stop"])},null,8,["option","data-automation-key","selected","onClick"]))]),_:2},1024))),128))]))}}),se=x(ae,[["__scopeId","data-v-0806f7de"]]),de=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"}));export{se as W,R as a,de as b};
