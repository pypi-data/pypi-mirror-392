function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-Bmqi6Y0q.js","./index-hNQagJ0l.css","./BuilderEmbeddedCodeEditor-DFj2WbkS.js","./BuilderEmbeddedCodeEditor-CXloIist.css","./BuilderSidebarToolkit-C2yCxF1L.js","./WdsCheckbox-BnPwZLGG.js","./WdsCheckbox-DKvpPA4D.css","./marked.esm-273vDTCT.js","./BuilderSidebarToolkit-OFxghtWy.css","./BuilderSidebarComponentTree-CEF4OW_o.js","./useComponentDescription-CU_kHHKe.js","./BuilderSidebarComponentTree-C5AMKQcR.css","./BuilderSettings-jCemD-xF.js","./WdsDropdownMenu-CSBjwN3s.js","./WdsDropdownMenu-DdTGpUxu.css","./useKeyValueEditor-cB_0-3P5.js","./useKeyValueEditor-CsemOh8D.css","./BuilderSettings-SHVt_5Kn.css","./ComponentRenderer-BhfR3voO.js","./ComponentRenderer-72hqvEvI.css","./BuilderInsertionOverlay-CzggujVu.js","./BuilderInsertionOverlay-D2XS0ij9.css","./BuilderInsertionLabel-0WdbKcME.js","./BuilderInsertionLabel-_YS5WPfq.css","./BuilderVault-BvNx2sfy.js","./BuilderVault-Cx6oQSES.css","./BuilderJournal-DGBklYbR.js","./BuilderJournal-BnFeySHx.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as F,i as V,a as R,r as O,u as ye,c as k,o as t,f as p,g as d,x as B,y as z,A as q,G as K,R as v,S as $,_ as W,T as Le,U as xe,V as Se,X as xt,Y as De,w as ee,q as le,Z as Et,$ as it,a0 as _t,b as A,a1 as yt,D as j,s as he,v as Ee,t as U,m as ie,a2 as ht,z as L,a3 as we,a4 as Mt,a5 as gt,a6 as Lt,a7 as bt,W as ne,a8 as Be,K as Fe,L as me,a9 as Ft,aa as ot,J as re,ab as Nt,E as ue,ac as Rt,ad as Ut,ae as Ae,af as ct,ag as se,ah as Te,ai as qe,aj as at,ak as ke,al as Wt,am as Vt,an as rt,ao as ce,Q as pe,ap as kt,aq as wt,ar as St,as as zt,at as Ke,au as Ot,av as qt,aw as Bt,ax as Ne,ay as Kt,az as jt,aA as Ht,aB as Gt,aC as Yt,aD as Ct,aE as lt,aF as Zt,aG as Jt,aH as Xt,aI as Qt,aJ as ea,p as pt,aK as ta,H as aa,aL as na,aM as nt}from"./index-Bmqi6Y0q.js";import{W as oa}from"./WdsCheckbox-BnPwZLGG.js";import{marked as ra}from"./marked.esm-273vDTCT.js";const la={class:"BuilderSwitcher"},sa=F({__name:"BuilderSwitcher",setup(e){const o=V(R.core),a=V(R.builderManager);let r=O(null);const n=ye(o),s={ui:void 0,blueprints:void 0};function i(w){return w==="blueprints"||w==="ui"}function u(w){const f=a.mode.value;if(f!=w){switch(i(f)&&o.activePageId.value&&(s[f]=o.activePageId.value),r.value=w,w){case"ui":n.track("nav_ui_opened");break;case"preview":n.track("nav_preview_opened");break;case"blueprints":n.track("nav_blueprints_opened");break;case"vault":n.track("nav_vault_opened");break;case"journal":n.track("nav_journal_opened");break}a.mode.value=w,i(w)&&s[w]&&o.getComponentById(s[w])&&o.setActivePageId(s[w]),(w=="preview"||f=="blueprints"||w=="blueprints")&&a.setSelection(null)}}const c=k(()=>a.getMode());return(w,f)=>(t(),p("div",la,[d("button",{"data-automation-action":"set-mode-ui",class:K({active:c.value=="ui"}),type:"button",onClick:f[0]||(f[0]=y=>u("ui"))},[B(z,{name:"frame"}),f[5]||(f[5]=q(" Interface "))],2),d("button",{"data-automation-action":"set-mode-blueprints",class:K({active:c.value=="blueprints"}),type:"button",onClick:f[1]||(f[1]=y=>u("blueprints"))},[B(z,{name:"wds-blueprints"}),f[6]||(f[6]=q(" Blueprints "))],2),v(o).isWriterCloudApp.value?(t(),p("button",{key:0,class:K({active:c.value=="vault"}),"data-automation-action":"set-mode-vault",type:"button",onClick:f[2]||(f[2]=y=>u("vault"))},[B(z,{name:"key-round"}),f[7]||(f[7]=q(" Vault "))],2)):$("",!0),d("button",{class:K({active:c.value=="preview"}),"data-automation-action":"set-mode-preview",type:"button",onClick:f[3]||(f[3]=y=>u("preview"))},[B(z,{name:"view"}),f[8]||(f[8]=q(" Preview "))],2),v(o).isWriterCloudApp.value&&v(o).featureFlags.value.includes("journal")?(t(),p("button",{key:1,class:K({active:c.value=="journal"}),"data-automation-action":"set-mode-journal",type:"button",onClick:f[4]||(f[4]=y=>u("journal"))},[B(z,{name:"scroll-text"}),f[9]||(f[9]=q(" Journal "))],2)):$("",!0)]))}}),ia=W(sa,[["__scopeId","data-v-18cb2923"]]),ua={class:"BuilderStateExplorer"},da=F({__name:"BuilderStateExplorer",setup(e){const o=V(R.core);return(a,r)=>(t(),p("div",ua,[B(Le,{data:v(o).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),ca=W(da,[["__scopeId","data-v-45c6b03e"]]),pa=F({__name:"WdsStateDot",props:{state:{type:String,required:!0}},setup(e){return(o,a)=>(t(),p("div",{class:K(["WdsStateDotState",`WdsStateDotState--${e.state}`])},null,2))}}),$t=W(pa,[["__scopeId","data-v-4eacfc04"]]);function va(e,o){let a;return()=>{a&&clearTimeout(a),a=setTimeout(e,o)}}function fa(e){const o=xe(),a=ye(e),r=it(),{pushToast:n}=Se(),{writerApi:s,apiBaseUrl:i}=xt({signal:o.signal}),u=k(()=>e.getComponentById("root")),c=O(!1),w=De(),f=De(),y=va(async()=>{e.isWriterCloudApp.value&&e.mode.value==="edit"&&!C.value&&s.updateApplicationMetadata(e.writerOrgId.value,e.writerAppId.value,{name:S.value}),await e.sendComponentUpdate()},1e3),S=k({get:()=>u.value.content.appName,set:b=>{u.value.content.appName!==b&&(u.value.content.appName=b,y())}});ee(()=>u.value.content.appName,y),ee(f,()=>{var P;const b=(P=f.value)==null?void 0:P.name;b!==void 0&&(S.value=b)});const l=k(()=>{var D,E;const b=(E=(D=f.value.writer)==null?void 0:D.teamIds)==null?void 0:E[0];if(!b)return;const P=`/organization/${e.writerOrgId.value}/team/${b}/framework/${e.writerAppId.value}`;return new URL(P,i)}),h=k(()=>{if(!(!e.writerOrgId.value||!e.writerAppId.value))return new URL(`/aistudio/organization/${e.writerOrgId.value}/agent/${e.writerAppId.value}/deploy`,i)}),C=k(()=>{var b;return(b=f.value)!=null&&b.lastDeployedAt?new Date(f.value.lastDeployedAt):void 0}),m=k(()=>!!(e.isWriterCloudApp.value&&f.value)),g=k(()=>{var b;return((b=f.value)==null?void 0:b.status)==="deployed"});ee(e.writerApplication,I,{immediate:!0}),le(()=>{document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await I()},{signal:o.signal})});async function I(){if(e.writerApplication.value)try{f.value=await s.fetchApplicationDeployment(e.writerOrgId.value,e.writerAppId.value)}catch(b){r.error("Failed to fetch deployment information",b),f.value=void 0}}async function _(){if(e.writerApplication.value){if(!g.value){const b=`/aistudio/organization/${e.writerOrgId.value}/agent/${e.writerAppId.value}/deploy`,P=new URL(b,i);window.open(P,"_blank");return}c.value=!0,w.value=void 0;try{await s.publishApplication(e.writerOrgId.value,e.writerAppId.value,{applicationVersionId:f.value.applicationVersion.id,applicationVersionDataId:f.value.applicationVersionData.id}),await I();const b=l.value?{label:"See it live",func:()=>window.open(l.value,"_blank"),icon:"open_in_new"}:void 0;n({type:"success",message:"agent deployed",action:b}),a.track("deployment_succeeded")}catch(b){a.track("deployment_failed",{error:String(b)}),w.value=b,r.error("Deploy failed",b),n({type:"error",message:"deploy failed"})}finally{c.value=!1}}}return{name:S,canDeploy:m,writerDeployUrl:h,hasBeenPublished:g,publishApplication:_,isDeploying:Et(c),lastDeployedAt:C}}const ma=["data-writer-tooltip"],_a=["src","alt"],ya={key:1,class:"SharedWriterAvatar__initials"},ha=F({__name:"SharedWriterAvatar",props:{userId:{type:Number,required:!0},showTooltip:{type:Boolean,required:!1}},setup(e){const o=e,a=k(()=>o.userId),r=O(!1),{user:n,isLoading:s}=_t(a),i=k(()=>{var f;return((f=n.value)==null?void 0:f.avatar)??""}),u=k(()=>{var f;return(((f=n.value)==null?void 0:f.firstName)??"?").at(0)}),c=k(()=>{if(!(!o.showTooltip||!n.value))return`${n.value.firstName??""} ${n.value.lastName??""}`}),w=k(()=>n.value?`Avatar of ${n.value.firstName??""} ${n.value.lastName??""}`:`Avatar of the user ID ${a.value}`);return(f,y)=>(t(),p("div",{class:"SharedWriterAvatar","data-writer-tooltip":c.value},[v(s)||i.value&&!r.value?(t(),A(yt,{key:0,class:"SharedWriterAvatar__loader"})):$("",!0),v(s)?$("",!0):(t(),p(j,{key:1},[i.value?he((t(),p("img",{key:0,src:i.value,alt:w.value,class:"SharedWriterAvatar__img",onLoad:y[0]||(y[0]=S=>r.value=!0)},null,40,_a)),[[Ee,r.value]]):(t(),p("div",ya,U(u.value),1))],64))],8,ma))}}),ut=W(ha,[["__scopeId","data-v-d974552d"]]),ga=["data-writer-tooltip"],ba={key:0,class:"profile"},ka={key:1,class:"profile"},wa=F({__name:"BuilderHeaderConnected",setup(e){const o=V(R.collaborationManager),a=k(()=>o.connectedProfiles.value.length),r=k(()=>{var s;return(s=o.connectedProfiles.value)==null?void 0:s[0]}),n=k(()=>"Also editing: "+o.connectedProfiles.value.map(i=>i.displayName).join(", "));return(s,i)=>a.value>0?(t(),p("div",{key:0,class:"BuilderHeaderConnected","data-writer-tooltip":n.value,"data-writer-tooltip-placement":"bottom"},[a.value==1?(t(),p("div",ba,[B(ut,{"user-id":r.value.userId},null,8,["user-id"])])):$("",!0),a.value>1?(t(),p("div",ka," +"+U(a.value),1)):$("",!0)],8,ga)):$("",!0)}}),Sa=W(wa,[["__scopeId","data-v-a13cab91"]]),Ba=F({__name:"BuilderHeaderMoreDropdown",setup(e){const o=k(()=>[{label:"Import agent .zip file",value:"import",icon:"upload"},{label:"Download agent .zip file",value:"export",icon:"download"},{label:r.preventTasks.value.has("stayAwake")?"Turn off stay awake mode":"Prevent session to expire",value:"awake",icon:"coffee"}]),a=V(R.core),r=V(R.socketTimeout),n=ie("exportInput"),s=ye(a),i=Se(),u=O(!1),c=O(!1),w=O(!1),f=k(()=>[{disabled:u.value,desc:"Cancel",fn:()=>{w.value=!1,c.value=!1}},{disabled:!w.value,loading:u.value,desc:"Import",fn:S}]);async function y(){if(s.track("nav_export_clicked"),!n.value)return;const h=await fetch("./api/export");if(!h.ok)throw new Error("Failed to connect to export API");const C=await h.blob(),m=window.URL.createObjectURL(C),g=document.createElement("a");g.href=m,g.download="export.zip",document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(m)}async function S(){if(s.track("nav_import_clicked"),!n.value)return;const h=n.value.files[0];if(h){u.value=!0;try{const C=new FormData;if(C.append("file",h),!(await fetch("./api/import",{method:"POST",body:C})).ok)throw new Error("Failed to connect to import API");c.value=!1,i.pushToast({type:"success",message:"Project imported successfully."})}catch(C){i.pushToast({type:"error",message:"Failed to import the project: "+(C instanceof Error?C.message:String(C))})}finally{u.value=!1}}}async function l(h){switch(h){case"export":try{await y()}catch(C){i.pushToast({message:`Failed to export the project: ${C}`,type:"error"})}break;case"import":n.value.value="",n.value.click();break;case"awake":r==null||r.togglePreventTaskId("stayAwake")}}return(h,C)=>(t(),p(j,null,[B(ht,{class:"BuilderHeaderMoreDropdown","trigger-variant":"secondary",options:o.value,onSelect:l},null,8,["options"]),he(d("input",{ref_key:"exportInput",ref:n,type:"file",accept:".zip,application/zip",onChange:C[0]||(C[0]=m=>c.value=!0)},null,544),[[Ee,!1]]),c.value?(t(),A(we,{key:0,actions:f.value,title:"Are you sure you want to continue?",description:"Your current work will be replaced with the agent in the zip file. This includes replacement of current pages, blueprints, local scripts, and custom assets.",size:"normal"},{default:L(()=>[B(oa,{modelValue:w.value,"onUpdate:modelValue":C[1]||(C[1]=m=>w.value=m),label:"Yes, I want to replace the current agent with the imported file"},null,8,["modelValue"])]),_:1},8,["actions"])):$("",!0)],64))}}),Ca=W(Ba,[["__scopeId","data-v-ce6b22fb"]]);function $a(e){const o=Se();let a;function r(i){a?o.pushToast({id:a,...i}):a=o.pushToast(i)}ee(e.syncHealth,(i,u)=>{switch(i){case"idle":return r({type:"loading",message:"Connecting to the server",closable:!1,delayMs:1/0});case"connected":return r({message:u==="suspended"?"The server has restarted":"The connection to the server has been restored.",type:"success"});case"offline":return r({type:"loading",message:"Connection was lost due to a network issue or an ongoing update. Please hang tight!",closable:!1,delayMs:1/0});case"suspended":return r({message:"Restarting the server...",type:"loading",closable:!1,delayMs:1/0})}});const n=k(()=>{let i="";switch(e.syncHealth.value){case"offline":i+="Offline. Not syncing.";break;case"connected":i+="Online. Syncing...";break;case"idle":i+="Sync not initialised.";break;case"suspended":i+="Sync suspended.";break}return e.featureFlags.value.length>0&&(i+=` Feature flags: ${e.featureFlags.value.join(", ")}`),i}),s=k(()=>{switch(e.syncHealth.value){case"offline":case"suspended":case"idle":return"error";default:return"deployed"}});return{syncHealthStatus:n,stateDotState:s}}const Ia={class:"BuilderHeader"},Aa={class:"BuilderHeader__logo"},Pa=["href"],Ta={key:1,src:gt,alt:"Writer Framework logo"},Da=["disabled"],xa={class:"BuilderHeader__toolbar"},Ea={class:"BuilderHeader__toolbar__deployBtn"},Ma=F({__name:"BuilderHeader",setup(e){const o=V(R.core),a=V(R.socketTimeout),r=O(!1),n=O(!1),s=ye(o),i=Se(),u=Mt(),{stateDotState:c,syncHealthStatus:w}=$a(o),f=k(()=>a==null?void 0:a.preventTasks.value.has("stayAwake"));function y(){a==null||a.togglePreventTaskId("stayAwake")}const{canDeploy:S,isDeploying:l,publishApplication:h,hasBeenPublished:C,lastDeployedAt:m,writerDeployUrl:g,name:I}=fa(o),_=new Intl.DateTimeFormat(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});async function b(){s.track("nav_deploy_clicked"),C.value?P.value=!0:await h()}const P=O(!1),D=[{desc:"Cancel",fn:()=>P.value=!1},{desc:"Yes, deploy changes",fn:async()=>{P.value=!1,await h()}}],E=k(()=>m.value?`Editor Last saved ${_.format(m.value)}`:void 0),M=k(()=>C.value===!0?"Deploy changes":(C.value===!1,"Configure deployment"));function N(){s.track("nav_state_explorer_opened"),r.value=!0}function Y(){n.value=!0}async function X(){try{await u.copy(location.href)}catch{i.pushToast({type:"error",message:"Could not copy link."})}}return(J,Z)=>(t(),p("div",Ia,[d("div",Aa,[v(g)?(t(),p("a",{key:0,href:v(g).toString(),target:"_blank",class:"BuilderHeader__goBack"},Z[3]||(Z[3]=[d("img",{src:gt,alt:"Writer Framework logo"},null,-1)]),8,Pa)):(t(),p("img",Ta)),Z[4]||(Z[4]=d("hr",null,null,-1)),v(o).isWriterCloudApp.value?he((t(),p("input",{key:2,"onUpdate:modelValue":Z[0]||(Z[0]=de=>bt(I)?I.value=de:null),type:"text",disabled:!!v(m),class:"BuilderHeader__logo__appTitle"},null,8,Da)),[[Lt,v(I)]]):$("",!0)]),B(ia,{class:"BuilderHeader__switcher"}),d("div",xa,[Z[6]||(Z[6]=d("hr",null,null,-1)),B(ne,{variant:"secondary",size:"smallIcon","data-writer-tooltip":"State Explorer","data-writer-tooltip-placement":"bottom",onClick:N},{default:L(()=>[B(z,{name:"compass"})]),_:1}),B(ne,{variant:"secondary",size:"smallIcon","data-writer-tooltip":"Invite collaborators","data-writer-tooltip-placement":"bottom",onClick:Y},{default:L(()=>[B(z,{name:"share-2"})]),_:1}),B(Ca),v(S)?(t(),A(ne,{key:0,size:"small",loading:v(l),"data-writer-tooltip":E.value,"data-writer-tooltip-placement":"bottom","data-automation-key":"deploy",onClick:b},{default:L(()=>[d("span",Ea,U(M.value),1),P.value?(t(),A(we,{key:0,title:"Are you sure you want to deploy these changes?",size:"normal",actions:D},{default:L(()=>Z[5]||(Z[5]=[d("p",{class:"BuilderHeader__toolbar__deployModal__text"}," This will replace the current live version of this agent everywhere it is currently deployed. ",-1)])),_:1})):$("",!0)]),_:1},8,["loading","data-writer-tooltip"])):$("",!0),B(Sa),B($t,{state:v(c),"data-writer-tooltip":v(w),"data-writer-tooltip-placement":"left"},null,8,["state","data-writer-tooltip"]),f.value?(t(),A(ne,{key:1,variant:"secondary",size:"smallIcon","data-writer-tooltip":"Turn off stay awake mode that prevents the session from expiring.","data-writer-tooltip-placement":"left",onClick:y},{default:L(()=>[B(z,{name:"coffee"})]),_:1})):$("",!0),r.value?(t(),A(we,{key:2,title:"State Explorer","display-close-button":"",onClose:Z[1]||(Z[1]=de=>r.value=!1)},{default:L(()=>[B(ca)]),_:1})):$("",!0),n.value?(t(),A(we,{key:3,title:"Share edit link with collaborators",description:"All AI Studio builders in your org can edit this agent with you in real time. Copy the link below to point them directly to editing this agent.","display-close-button":"",actions:[{desc:"Close",fn:()=>n.value=!1},{desc:v(u).copied.value?"Copied":"Copy edit link",fn:X,icon:v(u).copied.value?"check":"clipboard",disabled:v(u).copied.value}],onClose:Z[2]||(Z[2]=de=>n.value=!1)},null,8,["actions"])):$("",!0)])]))}}),La=W(Ma,[["__scopeId","data-v-c8b6a875"]]),Fa={class:"text"},Na=200,Ra=4,Ua=F({__name:"BuilderTooltip",setup(e){const o=ie("rootEl"),a=O(!1),r=O(null);let n=null,s=null;const i=O("top"),u=O({top:0,left:0});async function c(){if(!n||(r.value=n.dataset.writerTooltip,!r.value))return;const l=n.dataset.writerTooltipGap?parseInt(n.dataset.writerTooltipGap):Ra;if(a.value=w(n),!a.value)return;await me();const{x:h,y:C,width:m,height:g}=n.getBoundingClientRect(),{width:I,height:_}=o.value.getBoundingClientRect();switch(i.value){case"top":u.value.top=C-_-l,u.value.left=h+m/2-I/2;break;case"right":u.value.top=C+g/2-_/2,u.value.left=h+m+l;break;case"left":u.value.left=h-I-l,u.value.top=C+g/2-_/2;break;case"bottom":u.value.top=C+g+l,u.value.left=h+m/2-I/2;break}}function w(l){return l.getAttribute("data-writer-tooltip-strategy")==="overflow"?l.scrollWidth>l.clientWidth:!0}function f(l){const C=l.target.closest("[data-writer-tooltip]");if(C)n!==C&&(a.value=!1);else{a.value=!1,n=null;return}n=C,i.value=n.dataset.writerTooltipPlacement??"top",setTimeout(()=>y(C),Na)}async function y(l){l===n&&(s==null||s.disconnect(),s=new MutationObserver(c),s.observe(n,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement","data-writer-tooltip-strategy"]}),c())}const S=k(()=>{const{top:l,left:h}=u.value;return{top:`${l}px`,left:`${h}px`}});return le(()=>{document.documentElement.addEventListener("mouseover",f)}),Be(()=>{document.documentElement.removeEventListener("mouseover",f),s==null||s.disconnect()}),(l,h)=>he((t(),p("div",{ref_key:"rootEl",ref:o,class:"BuilderTooltip",style:Fe(S.value)},[d("div",{class:K(["arrow",i.value])},null,2),d("div",Fa,U(r.value),1)],4)),[[Ee,a.value]])}}),Wa=W(Ua,[["__scopeId","data-v-7ba01c7c"]]),Va=""+new URL("art-paper-D70v1WMA.svg",import.meta.url).href,za={class:"BuilderPanel__collapser"},Oa={class:"BuilderPanel__title"},qa={class:"BuilderPanel__titleCompanion"},Ka=["data-order"],ja={key:0,class:"BuilderPanel__contents__leftPanel"},Ha={class:"BuilderPanel__actions"},Ga={class:"BuilderPanel__actionsCompanion"},Ya=F({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{},enableLeftPanel:{type:Boolean},enableDropFile:{type:Boolean},maxFileSizeLimit:{}},emits:{openned:e=>typeof e=="boolean",filesDrop:e=>Array.isArray(e)&&e.length>0},setup(e,{expose:o,emit:a}){const r=V(R.builderManager),n=["code","log"],s=e,i=k(()=>{if(typeof s.maxFileSizeLimit=="number")return`Files can be up to ${Ft(s.maxFileSizeLimit)}`}),u=a,c=ie("mainContents");o({mainContents:c});const w=k(()=>s.enableDropFile&&f.value),f=O(!1);function y(_,b){s.enableDropFile&&(_.preventDefault(),f.value=b)}function S(_){_.preventDefault(),f.value=!1}function l(_){s.enableDropFile&&_.length>0&&u("filesDrop",_)}const h=k(()=>!r.openPanels.value.has(s.panelId)),C=k(()=>n.indexOf(s.panelId));function m(_){if(r.openPanels.value.has(_)){r.openPanels.value.delete(_),u("openned",!1);return}r.openPanels.value.add(_),u("openned",!0)}function g(_){const b=Ut(_);if(b&&_.key==s.keyboardShortcutKey.toLowerCase()){_.preventDefault(),m(s.panelId);return}s.actions.forEach(P=>{if(!P.keyboardShortcut)return;const{key:D,modifierKey:E}=P.keyboardShortcut;D.toLowerCase()==_.key&&(!b&&E||(_.preventDefault(),P.callback()))})}function I(_){if(!_)return"";let b=" (";return _.modifierKey&&(b+=ot()),b+=_.key,b+=")",b}return le(async()=>{document.addEventListener("keydown",g)}),Be(()=>{document.removeEventListener("keydown",g)}),(_,b)=>(t(),p("div",{class:K(["BuilderPanel",{collapsed:h.value}])},[d("div",za,[B(ne,{variant:"neutral",size:"small","data-automation-action":"toggle-panel","data-automation-key":_.panelId,"data-writer-tooltip":`Toggle ${_.name} (${v(ot)()}${_.keyboardShortcutKey})`,onClick:b[0]||(b[0]=P=>m(_.panelId))},{default:L(()=>[B(z,{name:h.value?"chevron-right":"chevron-up"},null,8,["name"]),d("span",Oa,U(_.name),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),d("div",qa,[re(_.$slots,"titleCompanion",{},void 0,!0)]),h.value?$("",!0):(t(),A(Rt,{key:0,to:_.contentsTeleportEl},[d("div",{style:Fe({order:C.value}),"data-order":C.value,class:K(["BuilderPanel__contents",{"BuilderPanel__contents--leftPanel":_.enableLeftPanel,"BuilderPanel__contents--dropingFile":w.value}]),onDrop:S,onDragover:b[1]||(b[1]=P=>y(P,!0)),onDragleave:b[2]||(b[2]=P=>y(P,!1))},[w.value?(t(),A(Nt,{key:0,multiple:"",label:"Drop files here",restrictions:i.value,onDrop:l},null,8,["restrictions"])):(t(),p(j,{key:1},[_.enableLeftPanel?(t(),p("div",ja,[re(_.$slots,"leftPanel",{},void 0,!0)])):$("",!0),d("div",Ha,[d("div",Ga,[re(_.$slots,"actionsCompanion",{},void 0,!0)]),(t(!0),p(j,null,ue(_.actions,(P,D)=>(t(),A(ne,{key:D,"data-writer-tooltip":P.name+I(P.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:P.isDisabled,onClick:P.callback},{default:L(()=>[B(z,{name:P.icon},null,8,["name"])]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),d("div",{ref_key:"mainContents",ref:c,class:"BuilderPanel__mainContents"},[re(_.$slots,"default",{},void 0,!0)],512)],64))],46,Ka)],8,["to"]))],2))}}),It=W(Ya,[["__scopeId","data-v-5ccf1c14"]]),st=150;function Za(e){const o=O(structuredClone(Ae(e.sourceFiles.value)));ee(e.sourceFiles,(g,I)=>{let _=!1,b=structuredClone(Ae(o.value));const P=i(I).map(a);for(const D of ct(g)){const E=se(D,I),M=se(D,g);if(Te(M))continue;if(E===void 0||qe(M)){b=at(D,b,structuredClone(Ae(M))),_=!0;continue}if(!ke(E))continue;const N=!E.complete&&M.complete,Y=E.complete&&M.complete;if(!N&&!Y)continue;const X=a(D);if(P.includes(X))continue;const J=se(D,b);ke(J)&&(_=!0,J.complete=!0,J.content=M.content)}for(const D of Wt(b))se(D,g)===void 0&&(b=Vt(D,b),_=!0);_&&(o.value=b)});function a(g){return g.join("/")}const r=De(),n=k(()=>Array.from(ct(o.value))),s=k(()=>i(e.sourceFiles.value));function i(g){return n.value.filter(I=>{const _=se(I,o.value);if(qe(_))return!1;if(!ke(_))return!0;const b=se(I,g);return ke(b)?!_.complete||!b.complete?!1:_.content!==b.content:!0})}const u=k(()=>{if(r.value!==void 0)return se(r.value,o.value)}),c=k({get(){return ke(u.value)?u.value.content:""},set(g){if(r.value===void 0)return;const I=se(r.value,o.value);ke(I)&&(I.content=g)}});function w(g=1){const I=`new-file-${g}.txt`;return se([I],o.value)?w(g+1):I}async function f(){const g=w();o.value=at([g],Ae(o.value)),l([g]),await e.sendCreateSourceFileRequest([g])}const y=k(()=>{var I;return(I=r.value)!=null&&I.length?r.value.at(-1).split(".").at(-1):""}),S=k(()=>{switch(y.value){case"py":return"python";case"js":case"mjs":return"javascript";case"ts":return"typescript";case"md":case"markdown":return"markdown";default:return y.value}});function l(g){r.value=g,ke(u.value)&&!u.value.complete&&e.requestSourceFileLoading(g)}async function h(g){if(!(!r.value||!u.value)&&(u.value.type==="file"&&await e.sendCodeSaveRequest(c.value,r.value),g)){const I=[...Ae(r.value)];r.value=void 0;try{await e.sendRenameSourceFileRequest(I,g)}catch(_){throw r.value=I,_}l(g)}}function C(g){return new Promise((I,_)=>{const b=new FileReader;b.addEventListener("loadend",P=>{const D=P.target.result;if(D instanceof ArrayBuffer){const E=String.fromCharCode.apply(null,new Uint8Array(D));return I(E)}I(D.split(",")[1])}),b.addEventListener("error",()=>{_()}),b.readAsDataURL(g)})}async function m(g){const I=st*1024*1024;if(g.size>I)throw Error(`Cannot upload file bigger than ${st}mb`);const _=[g.name];if(se(_,e.sourceFiles.value))throw Error(`The file ${g.name} already exists`);o.value=at(_,Ae(o.value),{type:"binary",uploading:!0});const b=await C(g);await e.sendFileUploadRequest(_,b)}return{code:c,sourceFileDraft:o,fileOpen:u,filepathOpen:r,pathsUnsaved:s,openedFileLanguage:S,save:h,upload:m,openFile:l,openNewFile:f,getNewFilename:w}}const Ja={class:"BuilderTree"},Xa=["draggable","data-automation-key","aria-expanded"],Qa=["data-writer-tooltip"],en={key:1,class:"BuilderTree__main__dropdown"},tn=F({__name:"BuilderTree",props:rt({name:{type:String,required:!0},query:{type:String,required:!1,default:void 0},variant:{type:String,required:!1,default:void 0},noNestedSpace:{type:Boolean,required:!1},dataAutomationKey:{type:String,required:!1,default:void 0},hasChildren:{type:Boolean},draggable:{type:Boolean},matched:{type:Boolean},selected:{type:Boolean},disabled:{type:Boolean},dropdownOptions:{type:Array,required:!1,default:void 0},disableCollapse:{type:Boolean,required:!1}},{collapsed:{type:Boolean,required:!1,default:!1},collapsedModifiers:{}}),emits:rt({expandBranch:()=>!0,select:e=>!!e,dragover:e=>!!e,dragstart:e=>!!e,dragend:e=>!!e,drop:e=>!!e,dropdownSelect:e=>typeof e=="string"},["update:collapsed"]),setup(e,{expose:o,emit:a}){const r=ce({loader:()=>pe(()=>import("./index-Bmqi6Y0q.js").then(S=>S.bp),__vite__mapDeps([0,1]),import.meta.url)}),n=e,s=a;o({expand:f,toggleCollapse:y});const i=kt(e,"collapsed"),u=O(!1),c=k(()=>!n.matched),w=k(()=>!n.hasChildren);function f(){i.value=!1,s("expandBranch")}function y(S){S??(S=!i.value),S!==i.value&&(i.value=S)}return(S,l)=>(t(),p("div",Ja,[d("div",{class:K(["BuilderTree__main",{selected:e.selected,notMatched:c.value,childless:w.value}]),tabindex:"0",draggable:e.draggable,"data-automation-key":e.dataAutomationKey,"aria-expanded":!i.value,onMouseenter:l[2]||(l[2]=h=>u.value=!0),onMouseleave:l[3]||(l[3]=h=>u.value=!1),onClick:l[4]||(l[4]=h=>S.$emit("select",h)),onKeydown:l[5]||(l[5]=St(h=>S.$emit("select",h),["enter"])),onDragover:l[6]||(l[6]=h=>S.$emit("dragover",h)),onDragstart:l[7]||(l[7]=h=>S.$emit("dragstart",h)),onDragend:l[8]||(l[8]=h=>S.$emit("dragend",h)),onDrop:l[9]||(l[9]=h=>S.$emit("drop",h))},[e.hasChildren&&!e.disableCollapse?(t(),A(ne,{key:0,class:"BuilderTree__main__collapser",variant:"neutral",size:"icon",disabled:e.disabled,onClick:l[0]||(l[0]=wt(h=>y(void 0),["stop"]))},{default:L(()=>[B(z,{name:i.value?"chevron-down":"chevron-up"},null,8,["name"])]),_:1},8,["disabled"])):$("",!0),re(S.$slots,"nameLeft",{},void 0,!0),d("span",{class:K(["BuilderTree__main__name",{"BuilderTree__main__name--disabled":e.disabled,"BuilderTree__main__name--root":e.variant==="root"}]),"data-writer-tooltip":e.name,"data-writer-tooltip-strategy":"overflow"},U(e.name),11,Qa),re(S.$slots,"nameRight",{},void 0,!0),e.dropdownOptions&&u.value?(t(),p("div",en,[B(v(r),{options:e.dropdownOptions,"trigger-custom-size":"16px",onSelect:l[1]||(l[1]=h=>S.$emit("dropdownSelect",h))},null,8,["options"])])):$("",!0)],42,Xa),B(zt,null,{default:L(()=>[he(d("div",{class:K(["BuilderTree__children",{"BuilderTree__children--noNestedSpace":e.noNestedSpace}])},[re(S.$slots,"children",{},void 0,!0)],2),[[Ee,!i.value&&e.hasChildren]])]),_:3})]))}}),an=W(tn,[["__scopeId","data-v-8c085d0a"]]),nn=["width","height","viewBox","aria-valuenow"],on=["r","cx","cy","stroke","stroke-width"],rn=["r","cx","cy","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],ln=F({__name:"WdsProgressLinear",props:{progress:{type:Number,required:!1,default:100},sizePx:{type:Number,required:!1,default:12},strokeWidth:{type:Number,required:!1,default:2}},setup(e){const o=e,a=k(()=>o.sizePx/2),r=k(()=>o.sizePx/2-o.strokeWidth/2),n=k(()=>2*Math.PI*r.value),s=k(()=>n.value*((100-o.progress)/100)),i=k(()=>`0 0 ${o.sizePx} ${o.sizePx}`);return(u,c)=>(t(),p("svg",{width:e.sizePx,height:e.sizePx,viewBox:i.value,style:{transform:"rotate(-90deg)"},role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"},[d("circle",{r:r.value,cx:a.value,cy:a.value,fill:"transparent",stroke:v(Ke).Blue1,"stroke-width":e.strokeWidth},null,8,on),d("circle",{r:r.value,cx:a.value,cy:a.value,fill:"transparent",stroke:v(Ke).Blue5,"stroke-width":e.strokeWidth,"stroke-dasharray":n.value,"stroke-dashoffset":s.value},null,8,rn)],8,nn))}}),sn=F({__name:"BuilderCodePanelFileUploading",props:{timeMs:{type:Number,required:!0}},setup(e){const o=e,a=O(0);return le(()=>{let r;const n=s=>{r||(r=s);const i=s-r;a.value=Math.min(i/o.timeMs*100,100),a.value<100&&requestAnimationFrame(n)};requestAnimationFrame(n)}),(r,n)=>(t(),A(ln,{class:"BuilderCodePanelFileUploading",progress:a.value,"size-px":12,"stroke-width":2},null,8,["progress"]))}}),un=W(sn,[["__scopeId","data-v-449f2dac"]]),vt=[{label:"Delete",value:"delete",icon:"trash-2"}],dn=F({__name:"BuilderCodePanelSourceFilesTree",props:{sourceFiles:{type:Object,required:!0},path:{type:Array,default:()=>[]},pathActive:{type:Array,default:()=>[]},pathsUnsaved:{type:Array,default:()=>[]},displayAddFileButton:{type:Boolean}},emits:{select:e=>Array.isArray(e),delete:e=>Array.isArray(e),addFile:()=>!0},setup(e,{emit:o}){const a=e,r=o;function n(l){return l.join("/")}const s=k(()=>n(a.pathActive)),i=k(()=>a.pathsUnsaved.map(n)),u=k(()=>Te(a.sourceFiles)?Object.entries(a.sourceFiles.children).sort((l,h)=>l[0].localeCompare(h[0])):[]);function c(l){const h=se([...a.path,l],a.sourceFiles);return qe(h)&&h.uploading}function w(l){const h=n([...a.path,l]);return i.value.includes(h)}function f(l){return n([...a.path,l])===s.value}function y(l){if(!Te(a.sourceFiles)||c(l))return;const h=a.sourceFiles.children[l];Te(h)||r("select",[...a.path,l])}function S(l,h){l==="delete"&&r("delete",[...a.path,h])}return(l,h)=>(t(),p("div",null,[(t(!0),p(j,null,ue(u.value,([C,m])=>(t(),A(an,{key:C,name:C,matched:"","has-children":v(Te)(m),selected:f(C),disabled:c(C),"right-click-options":vt,"dropdown-options":v(Te)(m)||v(qe)(m)?vt:void 0,onSelect:g=>y(C),onDropdownSelect:g=>S(g,C)},Ot({children:L(()=>[B(At,{"source-files":m,"path-active":e.pathActive,"paths-unsaved":e.pathsUnsaved,path:[...e.path,C],onSelect:h[0]||(h[0]=g=>l.$emit("select",g)),onDelete:h[1]||(h[1]=g=>l.$emit("delete",g))},null,8,["source-files","path-active","paths-unsaved","path"])]),_:2},[c(C)||w(C)?{name:"nameLeft",fn:L(()=>[c(C)?(t(),A(un,{key:0,"time-ms":2e3})):w(C)?(t(),A($t,{key:1,state:"newDraft"})):$("",!0)]),key:"0"}:void 0]),1032,["name","has-children","selected","disabled","dropdown-options","onSelect","onDropdownSelect"]))),128))]))}}),At=W(dn,[["__scopeId","data-v-13c86c55"]]),cn=["disabled"],pn={class:"WdsButtonLink__text"},vn=F({__name:"WdsButtonLink",props:{variant:{type:String,default:"primary"},weight:{type:String,default:"default"},leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},text:{type:String,required:!0},disabled:{type:Boolean}},setup(e){const o=e,a=k(()=>[`WdsButtonLink--variant-${o.variant}`,`WdsButtonLink--weight-${o.weight}`]);return(r,n)=>(t(),p("button",{class:K(["WdsButtonLink",a.value]),disabled:e.disabled,type:"button"},[e.leftIcon?(t(),A(z,{key:0,name:e.leftIcon},null,8,["name"])):$("",!0),d("span",pn,U(e.text),1),e.rightIcon?(t(),A(z,{key:1,name:e.rightIcon},null,8,["name"])):$("",!0)],10,cn))}}),Pt=W(vn,[["__scopeId","data-v-f2cbc67f"]]),fn={class:"BuilderCodePanelFileUploadBtn"},mn=F({__name:"BuilderCodePanelFileUploadBtn",emits:{selected:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:o}){const a=ie("input"),r=o;function n(){const{files:s}=a.value;s instanceof FileList&&s.length>0&&(r("selected",Array.from(s)),a.value.value="")}return(s,i)=>(t(),p("form",fn,[he(d("input",{ref_key:"input",ref:a,type:"file",multiple:"",onChange:n},null,544),[[Ee,!1]]),B(Pt,{"left-icon":"upload",text:"Upload",onClick:i[0]||(i[0]=u=>v(a).click())})]))}}),ft="You have unsaved changes. Are you sure you want to leave?";function _n(e){const o=O(!1),a=O(null);function r(){o.value=!0,e==null||e.preventTasks.value.add("codeUnsaved")}function n(){o.value=!1,e==null||e.preventTasks.value.delete("codeUnsaved")}function s(u){if(o.value)return u.preventDefault(),u.returnValue=ft,ft}le(()=>{a.value=s,window.addEventListener("beforeunload",a.value)}),Be(()=>{a.value&&window.removeEventListener("beforeunload",a.value)});const i=xe();return le(()=>{window.addEventListener("beforeunload",s,{signal:i.signal})}),{enablePrevention:r,disablePrevention:n}}function yn(){const e=De(!1),o=De(null),a=(i,u)=>{e.value=!0,o.value={action:i,description:u}};return{showModal:e,executePendingAction:()=>{o.value&&(o.value.action(),o.value=null),e.value=!1},cancelPendingAction:()=>{o.value=null,e.value=!1},checkUnsavedChanges:(i,u,c)=>i?(a(u,c),!0):!1}}function hn(e){const o=xe();function a(n,s){switch(s){case"ctrl":return n.ctrlKey&&!n.metaKey;case"cmd":return n.metaKey&&!n.ctrlKey;case"alt":return n.altKey;case"shift":return n.shiftKey;default:return!n.ctrlKey&&!n.metaKey&&!n.altKey&&!n.shiftKey}}function r(n){for(const s of e){const i=n.key.toLowerCase()===s.key.toLowerCase(),u=a(n,s.modifier);if(i&&u){s.preventDefault!==!1&&n.preventDefault(),s.handler();return}}}le(()=>{document.addEventListener("keydown",r,{signal:o.signal})})}const gn={class:"UnsavedChangesModal__content"},bn={class:"UnsavedChangesModal__icon"},kn={class:"UnsavedChangesModal__message"},wn=F({__name:"UnsavedChangesModal",props:{filename:{type:String,required:!0},isSaving:{type:Boolean,required:!1}},emits:{save:()=>!0,cancel:()=>!0},setup(e,{emit:o}){const a=e,r=o,n=k(()=>[{desc:"Cancel",fn:()=>r("cancel")},{desc:"Save",fn:()=>r("save"),disabled:a.isSaving}]);return(s,i)=>(t(),A(we,{title:"Unsaved Changes",description:"You have unsaved changes. What would you like to do?",actions:n.value,"display-close-button":"",onClose:i[0]||(i[0]=u=>r("cancel"))},{default:L(()=>[d("div",gn,[d("div",bn,[B(z,{name:"alert-triangle"})]),d("div",kn,[d("p",null,[i[1]||(i[1]=q(" The file ")),d("strong",null,U(e.filename),1),i[2]||(i[2]=q(" has unsaved changes. "))]),i[3]||(i[3]=d("p",null,"Your changes will be lost if you don't save them.",-1))])])]),_:1},8,["actions"]))}}),Sn=W(wn,[["__scopeId","data-v-bda871b9"]]),Bn={class:"BuilderCodePanel__tree"},Cn={class:"BuilderCodePanel__tree__actions"},$n={key:1,class:"BuilderCodePanel__noPreview"},In={class:"BuilderCodePanel__actionsCompanion"},An=F({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(e){const o=ce({loader:()=>pe(()=>import("./index-Bmqi6Y0q.js").then(T=>T.bp),__vite__mapDeps([0,1]),import.meta.url)}),a=ce({loader:()=>pe(()=>import("./BuilderEmbeddedCodeEditor-DFj2WbkS.js").then(T=>T.B),__vite__mapDeps([2,0,1,3]),import.meta.url)}),r=V(R.core),n=V(R.builderManager),s=[{label:"Rename file",value:"rename",icon:"pencil"},{label:"Delete file",value:"delete",icon:"trash-2",variant:"danger"}],i=ye(r),{sourceFileDraft:u,openFile:c,upload:w,openNewFile:f,code:y,openedFileLanguage:S,filepathOpen:l,fileOpen:h,pathsUnsaved:C,save:m}=Za(r),g=V(R.socketTimeout),{enablePrevention:I,disablePrevention:_}=_n(g),{showModal:b,checkUnsavedChanges:P,executePendingAction:D,cancelPendingAction:E}=yn();async function M(T){await Promise.all(T.map(N))}async function N(T){try{await w(T),X({type:"success",message:`File ${T.name} uploaded`})}catch(H){X({type:"error",message:H.message})}}const Y=k(()=>{var T;return(T=h.value)==null?void 0:T.type}),{pushToast:X}=Se(),J=it();function Z(T){const H=new AbortController;le(()=>{document.addEventListener("keydown",async oe=>{const et=oe.metaKey||oe.ctrlKey,tt=oe.key==="s"||oe.key==="S";!et||!tt||(oe.preventDefault(),await T())},{signal:H.signal})}),Be(()=>H.abort())}Z(async()=>{await Ce()}),hn([{key:"w",modifier:"ctrl",handler:Ve},{key:"w",modifier:"cmd",handler:Ve}]);const de=ie("filenameEl"),ge=O(""),ve=O(!1),_e=k(()=>{var T;return((T=l.value)==null?void 0:T.join("/"))??""}),je=k(()=>_e.value!=="main.py"),Re=k(()=>_e.value!==ge.value),He=k(()=>ve.value||_e.value==="main.py"),fe=k(()=>{if(Re.value)return!1;if(l.value===void 0)return!0;const T=C.value.map(oe=>oe.join("/")).includes(_e.value),H=l.value&&!se(l.value,r.sourceFiles.value);return!T&&!H});ee(l,()=>{var T;ge.value=((T=l.value)==null?void 0:T.join("/"))??""}),ee(r.sessionTimestamp,()=>{ve.value=!1}),qt(()=>{fe.value?_():I()}),ee(()=>n.openPanels.value.has("code"),(T,H)=>{H&&!T&&ze()});function Ge(T){T&&(i.track("nav_code_opened"),l.value===void 0&&c(["main.py"]))}async function Ue(){var T;_e.value!=="main.py"&&(await me(),(T=de.value)==null||T.focus())}async function Ye(T){switch(T){case"rename":return Ue();case"delete":await Me(l.value)}}async function We(){await f(),Ue()}async function Me(T){await r.sendDeleteSourceFileRequest(T),X({type:"success",message:"The file was deleted"}),l.value.join("/").startsWith(T.join("/"))&&c(["main.py"])}async function Ce(){if(l.value===void 0)return X({type:"error",message:"There is no file open"});if(fe.value)return X({type:"info",message:"There are no file changes to save"});ve.value=!0;const T=Re.value?ge.value.split("/"):void 0;if(T){const H=Qe(T);if(H)return X({type:"error",message:H})}try{await m(T),X({type:"success",message:"The file was saved"}),i.track("nav_code_file_updated",{path:l.value})}catch(H){J.error("The file hasn't been saved.",H),X({type:"error",message:"The file hasn't been saved"});return}finally{ve.value=!1}}async function Ze(){await Ce(),D()}function Je(){E()}async function Xe(T){P(!fe.value,()=>c(T),"switch file")||c(T)}async function Q(T){P(!fe.value,()=>Me(T),"delete file")||await Me(T)}function Ve(){P(!fe.value,()=>n.openPanels.value.delete("code"),"close panel")||n.openPanels.value.delete("code")}function ze(){P(!fe.value,()=>{},"close panel")&&me(()=>{n.openPanels.value.add("code")})}function Qe(T){return T[0]===""?"Path should not have a leading slash":T[0]===".wf"?".wf is reserved for Writer Framework":T.some(H=>H==="")?"Invalid path":null}return(T,H)=>(t(),p(j,null,[B(It,{"panel-id":"code",name:"Code","contents-teleport-el":T.contentsTeleportEl,actions:[],scrollable:!1,"enable-left-panel":"","keyboard-shortcut-key":"J",class:"BuilderCodePanel","enable-drop-file":"","max-file-size-limit":v(st)*1e3*1e3,onFilesDrop:M,onOpenned:Ge},{leftPanel:L(()=>[d("div",Bn,[B(At,{"path-active":v(l),"paths-unsaved":v(C),"source-files":v(u),onAddFile:We,onSelect:Xe,onDelete:Q},null,8,["path-active","paths-unsaved","source-files"]),d("div",Cn,[B(Pt,{"left-icon":"plus",text:"Add file",onClick:We}),B(mn,{onSelected:M})])])]),actionsCompanion:L(()=>[d("div",In,[B(Bt,{ref_key:"filenameEl",ref:de,modelValue:ge.value,"onUpdate:modelValue":H[1]||(H[1]=oe=>ge.value=oe),disabled:!je.value,class:"BuilderCodePanel__actionsCompanion__filename",autofocus:"",variant:"ghost",onKeydown:St(Ce,["enter"])},null,8,["modelValue","disabled"]),B(ne,{variant:"primary",size:"small",disabled:ve.value||fe.value,class:"BuilderCodePanel__actionsCompanion__saveBtn",onClick:Ce},{default:L(()=>[B(z,{name:"save"}),H[3]||(H[3]=q(" Save file "))]),_:1},8,["disabled"]),B(v(o),{disabled:He.value,options:s,onSelect:Ye},null,8,["disabled"])])]),default:L(()=>[Y.value==="file"?(t(),A(v(a),{key:0,modelValue:v(y),"onUpdate:modelValue":H[0]||(H[0]=oe=>bt(y)?y.value=oe:null),variant:"full",language:v(S),disabled:ve.value},null,8,["modelValue","language","disabled"])):$("",!0),Y.value==="binary"?(t(),p("div",$n,H[2]||(H[2]=[d("img",{class:"BuilderCodePanel__noPreview__img",src:Va},null,-1),d("p",{class:"BuilderCodePanel__noPreview__title"},"Canâ€™t Preview File",-1),d("p",{class:"BuilderCodePanel__noPreview__desc"}," Non-text files are not available to view here ",-1)]))):$("",!0)]),_:1},8,["contents-teleport-el","max-file-size-limit"]),v(b)?(t(),A(Sn,{key:0,filename:_e.value,"is-saving":ve.value,onSave:Ze,onCancel:Je},null,8,["filename","is-saving"])):$("",!0)],64))}}),Pn=W(An,[["__scopeId","data-v-deaca6f9"]]),Tn={class:"BuiderLogBlueprintExecutionTrace"},Dn={key:0,class:"trace"},xn={class:"type"},En={key:0},Mn={key:1},Ln={class:"main"},Fn={key:0},Nn={key:1},Rn={key:2},Un={key:3},Wn={class:"details"},Vn={class:"data","data-automation-key":"result"},zn={key:1,class:"nothing"},On={class:"data","data-automation-key":"return-value"},qn={class:"environment"},Kn={class:"data"},jn={key:1,class:"nothing"},Hn={class:"callStack"},Gn={class:"eyebrow"},Yn=F({__name:"BuilderLogBlueprintExecutionTrace",props:{executionItem:{}},emits:["closeModal"],setup(e,{emit:o}){const a=V(R.core),r=V(R.builderManager),n=ye(a),s=o,{goToComponentParentPage:i}=Ne(a,r),u=e,c=k(()=>{var S;const y=((S=u.executionItem.executionEnvironment)==null?void 0:S.call_stack)??[];return Object.fromEntries(y.map(l=>[l,a.getComponentById(l)]))}),w=k(()=>{var y;return((y=u.executionItem.executionEnvironment)==null?void 0:y.trace)??[]});le(()=>{n.track("blueprints_logs_trace_opened")});async function f(y){s("closeModal"),r.setMode("blueprints"),await me(),i(y),await me(),r.setSelection(y,void 0,"log")}return(y,S)=>{var l,h,C;return t(),p("div",Tn,[w.value.length>0?(t(),p("div",Dn,[(t(!0),p(j,null,ue(w.value,(m,g)=>(t(),p("div",{key:g,class:"traceEntry"},[d("div",xn,[m.type=="functionCall"?(t(),p("span",En,"âš¡ï¸")):$("",!0),m.type=="reasoning"?(t(),p("span",Mn,"ðŸ§ ")):$("",!0)]),d("div",Ln,[m.thought?(t(),p("div",Fn,[S[0]||(S[0]=d("strong",null,"Thought.",-1)),q(" "+U(m.thought),1)])):$("",!0),m.action?(t(),p("div",Nn,[S[1]||(S[1]=d("strong",null,"Action.",-1)),q(" "+U(m.action),1)])):$("",!0),m.name?(t(),p("div",Rn,U(m.name),1)):$("",!0),m.parameters?(t(),p("div",Un,[B(Le,{"hide-root":!0,data:m.parameters,"initial-depth":1,class:"data"},null,8,["data"])])):$("",!0)])]))),128))])):$("",!0),d("div",Wn,[d("div",null,[S[2]||(S[2]=d("h3",null,"Result",-1)),S[3]||(S[3]=d("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),d("div",Vn,[(l=y.executionItem)!=null&&l.result?(t(),A(Le,{key:0,data:y.executionItem.result,"initial-depth":1},null,8,["data"])):(t(),p("div",zn,"No result."))])]),d("div",null,[S[4]||(S[4]=d("h3",null,"Return value",-1)),S[5]||(S[5]=d("p",null," The value being returned, which is used to determine the result of 'Run blueprint' blocks and 'Chat completion' tool calls. ",-1)),d("div",On,[(h=y.executionItem)!=null&&h.returnValue?(t(),A(Le,{key:0,data:y.executionItem.returnValue,"initial-depth":1},null,8,["data"])):(t(),p(j,{key:1},[q(" No return value. ")],64))])])]),d("div",qn,[S[6]||(S[6]=d("h3",null,"Execution environment",-1)),S[7]||(S[7]=d("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),d("div",Kn,[(C=y.executionItem)!=null&&C.executionEnvironment?(t(),A(Le,{key:0,data:y.executionItem.executionEnvironment,"initial-depth":1},null,8,["data"])):(t(),p("div",jn,"Empty execution environment."))])]),d("div",Hn,[S[8]||(S[8]=d("h3",null,"Call stack",-1)),(t(!0),p(j,null,ue(c.value,(m,g)=>{var I,_,b;return t(),p("div",{key:g,class:K(["component",{active:g==y.executionItem.componentId}])},[d("div",null,[d("div",Gn,[g==y.executionItem.componentId?(t(),p(j,{key:0},[q(" This block Â· ")],64)):$("",!0),q(" "+U(((I=v(a).getComponentDefinition(m==null?void 0:m.type))==null?void 0:I.name)??"Unavailable component")+" Â· Id: "+U(g),1)]),q(" "+U(((_=m==null?void 0:m.content)==null?void 0:_.alias)??((b=v(a).getComponentDefinition(m==null?void 0:m.type))==null?void 0:b.name)??"Unavailable component"),1)]),m?(t(),A(ne,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:P=>f(g)},{default:L(()=>[B(z,{name:"square-dashed-mouse-pointer"})]),_:2},1032,["onClick"])):$("",!0)],2)}),128))])])}}}),Zn=W(Yn,[["__scopeId","data-v-f98f57c8"]]),Jn={class:"BuilderListItem"},Xn=["viewBox"],Qn=["d","stroke"],eo=["d","stroke"],to={class:"BuilderListItem__content"},ao=F({__name:"BuilderListItem",props:{isLast:{type:Boolean,required:!1},height:{type:Number,required:!1,default:1e3},color:{type:String,required:!1,default:Ke.Blue2},colorLast:{type:String,required:!1,default:Ke.Blue2}},setup(e){const o=e,a=k(()=>o.height/2),r=k(()=>`0 0 17 ${o.height}`),n=k(()=>["M1 0",`V${a.value-8}`,`C1 ${a.value-4}.4183 4.58172 ${a.value} 9 ${a.value}`,"H17"].join(" ")),s=k(()=>[`M1 ${a.value-8}`,`V${o.height}`].join(" "));return(i,u)=>(t(),p("div",Jn,[(t(),p("svg",{viewBox:r.value,fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMax meet",class:"BuilderListItem__anchor"},[e.isLast?$("",!0):(t(),p("path",{key:0,d:s.value,stroke:e.colorLast,"stroke-width":"1"},null,8,Qn)),d("path",{d:n.value,stroke:e.color,"stroke-width":"1"},null,8,eo)],8,Xn)),d("div",to,[re(i.$slots,"default",{},void 0,!0)])]))}}),no=W(ao,[["__scopeId","data-v-33f3edcd"]]),oo={class:"BuilderLogBlueprintExecution"},ro={class:"name"},lo={key:0},so={class:"eyebrow"},io={class:"outcome"},uo={class:"result"},co={class:"time"},po={key:0,class:"message markdown"},vo=F({__name:"BuilderLogBlueprintExecution",props:{executionLog:{}},setup(e){const o=V(R.core),a=V(R.builderManager),{goToComponentParentPage:r}=Ne(o,a),n=e,s=O(null),i={in_progress:5,error:4,success:3,stopped:2,skipped:1,none:0},u=k(()=>({summary:[...n.executionLog.summary.filter(y=>!!y.outcome).filter(y=>(i[y.outcome]??i.success)>1).map(y=>({...y,component:o.getComponentById(y.componentId),componentDef:o.getComponentById(y.componentId)?o.getComponentDefinition(o.getComponentById(y.componentId).type):void 0}))]}));async function c(f){a.setMode("blueprints"),await me(),r(f),await me(),a.setSelection(f,void 0,"log")}function w(f){return f<0?"N/A":f<.1?"< 0.1s":`${f.toFixed(2)}s`}return(f,y)=>{const S=Kt("dompurify-html");return t(),p("div",oo,[(t(!0),p(j,null,ue(u.value.summary,(l,h)=>(t(),A(no,{key:h,"is-last":h+1===u.value.summary.length},{default:L(()=>{var C,m,g,I,_,b,P,D,E,M,N,Y;return[d("div",{class:K(["itemWrapper",{"itemWrapper--first":h===0,"itemWrapper--last":h+1===u.value.summary.length}])},[d("div",{class:K(["item",{selected:v(a).isComponentIdSelected(l.componentId)}])},[d("div",ro,[(m=(C=l.component)==null?void 0:C.content)!=null&&m.alias?(t(),p("div",lo,[d("div",so,U(((g=l.componentDef)==null?void 0:g.name)??"Unavailable component"),1),q(" "+U((_=(I=l.component)==null?void 0:I.content)==null?void 0:_.alias),1)])):(t(),p(j,{key:1},[q(U(((b=l.componentDef)==null?void 0:b.name)??"Unavailable component"),1)],64)),l.component?(t(),A(ne,{key:2,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:X=>c(l.componentId)},{default:L(()=>[B(z,{name:"square-dashed-mouse-pointer"})]),_:2},1032,["onClick"])):$("",!0)]),d("div",io,[l.outcome!=="in_progress"?(t(),p(j,{key:0},[d("div",{class:K(["ball",(E=(D=(P=l.componentDef)==null?void 0:P.outs)==null?void 0:D[l.outcome])==null?void 0:E.style])},null,2),q(" "+U(((Y=(N=(M=l.componentDef)==null?void 0:M.outs)==null?void 0:N[l.outcome])==null?void 0:Y.name)??l.outcome),1)],64)):(t(),p(j,{key:1},[y[1]||(y[1]=d("div",{class:"ballContainer"},[d("div",{class:"ball inProgress"})],-1)),y[2]||(y[2]=q(" In progress... "))],64))]),d("div",uo,[s.value==h?(t(),A(we,{key:0,title:"Trace",size:"wide",actions:[{desc:"Done",fn:()=>s.value=null}]},{default:L(()=>[B(Zn,{"execution-item":l,onCloseModal:y[0]||(y[0]=()=>s.value=null)},null,8,["execution-item"])]),_:2},1032,["actions"])):$("",!0),l.result||l.returnValue||l.executionEnvironment?(t(),A(ne,{key:1,variant:"special",size:"small",onClick:()=>s.value=h},{default:L(()=>[B(z,{name:"file-search-2"}),y[3]||(y[3]=q(" Trace "))]),_:2},1032,["onClick"])):$("",!0)]),d("div",co,U(w(l.executionTimeInSeconds)),1),l.message?he((t(),p("div",po,null,512)),[[S,v(ra).parse(l.message)]]):$("",!0)],2)],2)]}),_:2},1032,["is-last"]))),128))])}}}),fo=W(vo,[["__scopeId","data-v-a691c27b"]]),mo={class:"BuilderLogIndicator"},_o={key:0,class:"number error"},yo={class:"icon"},ho={key:1,class:"number info"},go={class:"icon"},bo=F({__name:"BuilderLogIndicator",setup(e){const o=V(R.builderManager),a=k(()=>o.getLogEntries().reduce((r,n)=>(n.type in r||(r[n.type]=0),r[n.type]++,r),{}));return(r,n)=>(t(),p("div",mo,[a.value.error>0?(t(),p("div",_o,[d("div",yo,[B(z,{name:"triangle-alert"})]),q(" "+U(a.value.error??0),1)])):$("",!0),a.value.info>0?(t(),p("div",ho,[d("div",go,[B(z,{name:"info"})]),q(" "+U(a.value.info??0),1)])):$("",!0)]))}}),ko=W(bo,[["__scopeId","data-v-f0898ae9"]]),wo={key:0,class:"entries"},So={class:"icon"},Bo={class:"title"},Co={class:"time"},$o={class:"content"},Io={key:0,class:"codeContainer"},Ao={key:1,class:"emptyMessage"},Po=F({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(e){const o=V(R.core),a=V(R.builderManager),r=ie("panel"),n=ye(o);async function s(w){w&&(n.track("nav_logs_opened"),await me(),await c())}const i=[{icon:"trash-2",name:"Clear log",callback:()=>{a.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],u=k(()=>a.getLogEntries());async function c(){var h;const w=(h=r.value)==null?void 0:h.mainContents;if(!w)return;const f=w.querySelector(".item.selected");if(!f)return;const y=w.getBoundingClientRect(),S=f.getBoundingClientRect(),l=w.scrollTop+(S.top-y.top)-(y.height/2-S.height/2);w.scrollTo({top:l,behavior:"smooth"})}return ee(a.selection,async()=>{await me(),await c()}),(w,f)=>(t(),A(It,{ref_key:"panel",ref:r,"panel-id":"log",name:"Log","contents-teleport-el":w.contentsTeleportEl,actions:i,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel",onOpenned:s},{titleCompanion:L(()=>[B(ko)]),default:L(()=>[u.value.length>0?(t(),p("div",wo,[(t(!0),p(j,null,ue(u.value,(y,S)=>(t(),p(j,{key:S},[d("div",{class:K(["entry",y.type])},[d("div",So,[B(z,{name:y.type==="error"?"triangle-alert":"info"},null,8,["name"])]),d("div",Bo,U(y.title)+U(y.repeated>0?` Â· Repeated ${y.repeated} times`:""),1),d("div",Co,U(y.timestampReceived.toLocaleTimeString()),1),d("div",$o,[q(U(y.message)+" ",1),y.code?(t(),p("div",Io,[d("code",null,U(y.code),1)])):$("",!0)])],2),y.blueprintExecution?(t(),A(fo,{key:0,"execution-log":y.blueprintExecution},null,8,["execution-log"])):$("",!0)],64))),128))])):$("",!0),u.value.length==0?(t(),p("div",Ao,f[0]||(f[0]=[d("div",null,[q(" Exceptions and other relevant messages will be shown here."),d("br"),q("Also, you can include print statements in event handlers to create log entries. ")],-1)]))):$("",!0)]),_:1},8,["contents-teleport-el"]))}}),To=W(Po,[["__scopeId","data-v-5bf9ec81"]]),Do={class:"switches"},xo=F({__name:"BuilderPanelSwitcher",setup(e){const o=V(R.builderManager),a=ie("screenEl");return(r,n)=>(t(),p("div",{class:K(["BuilderPanelSwitcher",{openPanels:v(o).openPanels.value.size>0}])},[d("div",{ref_key:"screenEl",ref:a,class:"screen"},null,512),d("div",Do,[B(Pn,{"contents-teleport-el":v(a)},null,8,["contents-teleport-el"]),B(To,{"contents-teleport-el":v(a)},null,8,["contents-teleport-el"])])],2))}}),Eo=W(xo,[["__scopeId","data-v-93f8be10"]]),Mo=["href"],Lo=["disabled"],Fo=F({__name:"BuilderSidebarButton",props:{icon:{type:String,required:!0},active:{type:Boolean},disabled:{type:Boolean},href:{type:String,required:!1,default:void 0}},setup(e){return(o,a)=>e.href?(t(),p("a",{key:0,class:"BuilderSidebarButton",href:e.href},[B(z,{name:e.icon},null,8,["name"])],8,Mo)):(t(),p("button",{key:1,class:K(["BuilderSidebarButton",{"BuilderSidebarButton--active":e.active}]),role:"button",disabled:e.disabled},[B(z,{name:e.icon},null,8,["name"])],10,Lo))}}),Pe=W(Fo,[["__scopeId","data-v-044cd21a"]]),No={class:"BuilderSidebarVersion"},Ro={class:"BuilderSidebarVersion__capsule"},Uo=F({__name:"BuilderSidebarVersion",props:{version:{type:String,required:!0}},setup(e){return(o,a)=>(t(),p("span",No,[d("span",Ro," BETA "+U(e.version),1)]))}}),Wo=W(Uo,[["__scopeId","data-v-bbae565d"]]),Vo={key:0,class:"BuilderSidebarPanel__inputContainer"},zo={class:"BuilderSidebarPanel__footer"},Oo=F({__name:"BuilderSidebarPanel",props:rt({hideSearchBar:{type:Boolean,required:!1},placeholder:{type:String,required:!1,default:""},searchCount:{type:Number,required:!1,default:void 0}},{modelValue:{type:String,required:!1,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=kt(e,"modelValue"),a=e,r=k(()=>{if(a.searchCount!==void 0)return`${a.searchCount} result${a.searchCount===1?"":"s"}`}),n=O(!1);function s(i){i.target instanceof HTMLElement&&(n.value=i.target.scrollTop>0)}return(i,u)=>(t(),p("div",{class:K(["BuilderSidebarPanel",{"BuilderSidebarPanel--mainScrollSeparator":n.value}])},[e.hideSearchBar?$("",!0):(t(),p("div",Vo,[B(Bt,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=c=>o.value=c),class:"searchInput","left-icon":"search","data-automation-action":"search",placeholder:e.placeholder,"right-text":r.value,"right-icon":o.value?"x":void 0,onRightIconClick:u[1]||(u[1]=c=>o.value="")},null,8,["modelValue","placeholder","right-text","right-icon"])])),d("div",{class:"BuilderSidebarPanel__main",onScroll:s},[re(i.$slots,"default",{},void 0,!0)],32),d("div",zo,[re(i.$slots,"footer",{},void 0,!0)])],2))}}),qo=W(Oo,[["__scopeId","data-v-fcaea8d5"]]),Ko=["data-note-id"],jo={class:"BuilderSidebarNote__header"},Ho={class:"BuilderSidebarNote__header__avatar"},Go={class:"BuilderSidebarNote__header__avatar__type"},Yo={class:"BuilderSidebarNote__header__info"},Zo={key:1},Jo={key:0,class:"BuilderSidebarNote__header__actions"},Xo={key:0,class:"BuilderSidebarNote__content"},Qo={key:0},er=F({__name:"BuilderSidebarNote",props:{component:{type:Object,required:!0},excerpt:{type:Boolean}},emits:{select:()=>!0,edit:()=>!0,delete:()=>!0},setup(e,{emit:o}){const a=e,{user:r}=jt(),n=o,s=V(R.notesManager),{createdAtFormatted:i,type:u,content:c,createdBy:w}=s.useNoteInformation(k(()=>a.component)),{user:f,isLoading:y,error:S}=_t(w),l=k(()=>y.value||S.value),h=k(()=>c.value.length<100?c.value:`${c.value.slice(0,100)}...`),C=k(()=>c.value.split(`
`)),m=k(()=>f.value?[f.value.firstName,f.value.lastName].filter(Boolean).join(" "):""),g=k(()=>{var _;if(((_=r.value)==null?void 0:_.id)===w.value)return[{value:"edit",label:"Edit",icon:"pencil"},{value:"delete",label:"Delete",icon:"trash-2",variant:"danger"}]});function I(_){switch(_){case"edit":return n("edit");case"delete":return n("delete")}}return(_,b)=>(t(),p("div",{class:"BuilderSidebarNote","data-note-id":e.component.id,tabindex:"0",onClick:b[0]||(b[0]=P=>_.$emit("select"))},[d("div",jo,[d("div",Ho,[d("div",Go,[v(u)==="blueprints"?(t(),A(z,{key:0,name:"wds-blueprints"})):v(u)==="ui"?(t(),A(z,{key:1,name:"frame"})):$("",!0)]),B(ut,{"user-id":v(w)},null,8,["user-id"])]),d("div",Yo,[l.value?(t(),A(yt,{key:0,class:"BuilderSidebarNote__header__info__loader"})):(t(),p("p",Zo,U(m.value),1)),d("p",null,U(v(i)),1)]),g.value?(t(),p("div",Jo,[B(ht,{options:g.value,"trigger-custom-size":"16px",onSelect:I},null,8,["options"])])):$("",!0)]),v(c)?(t(),p("div",Xo,[e.excerpt?(t(),p("p",Qo,U(h.value),1)):(t(!0),p(j,{key:1},ue(C.value,(P,D)=>(t(),p("p",{key:D},U(P),1))),128))])):$("",!0)],8,Ko))}}),mt=W(er,[["__scopeId","data-v-4129b8b4"]]),tr={},ar={class:"BuilderSidebarNotesEmpty"};function nr(e,o){return t(),p("div",ar,o[0]||(o[0]=[Ht('<svg width="77" height="77" viewBox="0 0 77 77" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-98d925a1><circle cx="38.5" cy="38.5" r="38.5" fill="#E4E9FF" data-v-98d925a1></circle><path d="M54 44.3333C54 45.2763 53.6254 46.1807 52.9586 46.8475C52.2918 47.5143 51.3874 47.8889 50.4444 47.8889H29.1111L22 55V26.5556C22 25.6126 22.3746 24.7082 23.0414 24.0414C23.7082 23.3746 24.6126 23 25.5556 23H50.4444C51.3874 23 52.2918 23.3746 52.9586 24.0414C53.6254 24.7082 54 25.6126 54 26.5556V44.3333Z" fill="white" data-v-98d925a1></path><path d="M38 30.1111V40.7778V30.1111Z" fill="white" data-v-98d925a1></path><path d="M32.6667 35.4444H43.3333H32.6667Z" fill="white" data-v-98d925a1></path><path d="M38 30.1111V40.7778M32.6667 35.4444H43.3333M54 44.3333C54 45.2763 53.6254 46.1807 52.9586 46.8475C52.2918 47.5143 51.3874 47.8889 50.4444 47.8889H29.1111L22 55V26.5556C22 25.6126 22.3746 24.7082 23.0414 24.0414C23.7082 23.3746 24.6126 23 25.5556 23H50.4444C51.3874 23 52.2918 23.3746 52.9586 24.0414C53.6254 24.7082 54 25.6126 54 26.5556V44.3333Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" data-v-98d925a1></path></svg><h5 data-v-98d925a1>No Notes</h5><p data-v-98d925a1>Click anywhere on a blueprint or interface to add a note</p>',3)]))}const or=W(tr,[["render",nr],["__scopeId","data-v-98d925a1"]]),rr={class:"BuilderSidebarNoteForm"},lr=F({__name:"BuilderSidebarNoteForm",props:{component:{type:Object,required:!0},autofocus:{type:Boolean}},emits:{submit:e=>typeof e=="string"},setup(e){const o=e,a=V(R.notesManager),r=O(a.getNoteContent(o.component));return(n,s)=>(t(),p("div",rr,[B(Gt,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i),class:"BuilderSidebarNoteForm__input",autofocus:e.autofocus},null,8,["modelValue","autofocus"]),B(ne,{class:"BuilderSidebarNoteForm__submit",variant:"secondary",size:"smallIcon",disabled:!r.value,onClick:s[1]||(s[1]=i=>n.$emit("submit",r.value))},{default:L(()=>[B(z,{name:"send"})]),_:1},8,["disabled"])]))}}),sr=W(lr,[["__scopeId","data-v-157847b0"]]),ir={key:0,class:"BuilderSidebarNotes__note"},ur={key:2,class:"BuilderSidebarNotes__notes"},dr=F({__name:"BuilderSidebarNotes",setup(e){const o=V(R.core),a=V(R.builderManager),{selectedNote:r,selectNote:n,selectedNoteMode:s,selectedNoteId:i,getAllNotes:u,searchNotes:c,deleteNote:w,hoveredNoteId:f,useNoteInformation:y}=V(R.notesManager),{createAndInsertComponent:S}=Ne(o,a),l=Yt({componentId:i,fieldKey:"content"}),h=O(""),C=k(()=>Array.from(u()).toSorted(I)),m=k(()=>Array.from(c(h.value)).toSorted(I)),g=k(()=>!!(r.value||C.value.length===0));function I(P,D){const E=y(P).createdAt.value,M=y(D).createdAt.value;return new Date(M).getTime()-new Date(E).getTime()}function _(P){return y(P).state.value}function b(P){o.getComponentById(i.value)?l.value=P:S(r.value.type,r.value.parentId,void 0,{content:{...r.value.content,content:P},x:r.value.x,y:r.value.y}),n(void 0)}return(P,D)=>(t(),A(qo,{modelValue:h.value,"onUpdate:modelValue":D[4]||(D[4]=E=>h.value=E),class:"BuilderSidebarNotes","hide-search-bar":g.value},{default:L(()=>[v(r)?(t(),p("div",ir,[v(s)==="edit"?(t(),A(sr,{key:0,component:v(r),autofocus:"",onSubmit:b},null,8,["component"])):(t(),A(mt,{key:1,component:v(r),onGoBack:D[0]||(D[0]=E=>v(n)(void 0)),onEdit:D[1]||(D[1]=E=>v(n)(v(i),"edit")),onDelete:D[2]||(D[2]=E=>v(w)(v(i)))},null,8,["component"]))])):m.value.length===0?(t(),A(or,{key:1})):(t(),p("div",ur,[(t(!0),p(j,null,ue(m.value,E=>(t(),A(mt,{key:E.id,component:E,class:K(["BuilderSidebarNotes__notes__note",{"BuilderSidebarNotes__notes__note--hover":_(E)==="hover"}]),excerpt:"",onSelect:M=>v(n)(E.id,"show"),onEdit:M=>v(n)(E.id,"edit"),onDelete:M=>v(w)(E.id),onMouseenter:M=>f.value=E.id,onMouseleave:D[3]||(D[3]=M=>f.value=void 0)},null,8,["component","class","onSelect","onEdit","onDelete","onMouseenter"]))),128))]))]),_:1},8,["modelValue","hide-search-bar"]))}}),cr=W(dr,[["__scopeId","data-v-3dc5600c"]]),pr={class:"BuilderSidebar"},vr={class:"BuilderSidebar__toolbar"},fr={key:0,class:"BuilderSidebar__toolbar__top"},mr={key:1,class:"BuilderSidebar__toolbar__center"},_r={class:"BuilderSidebar__toolbar__bottom"},yr={key:0,class:"BuilderSidebar__pane"},hr={key:1},gr=F({__name:"BuilderSidebar",emits:{activePaneChanged:e=>e===void 0||typeof e=="string"},setup(e,{emit:o}){const a=ce({loader:()=>pe(()=>import("./BuilderSidebarToolkit-C2yCxF1L.js"),__vite__mapDeps([4,0,1,5,6,7,8]),import.meta.url)}),r=ce({loader:()=>pe(()=>import("./BuilderSidebarComponentTree-CEF4OW_o.js"),__vite__mapDeps([9,0,1,10,5,6,7,11]),import.meta.url)});function n(M){return typeof M=="string"&&["layers","add"].includes(M)}const s=V(R.core),i=V(R.builderManager),u=V(R.notesManager),c=o,w=k(()=>S()),{undo:f,redo:y,getUndoRedoSnapshot:S}=Ne(s,i),l=k(()=>i.mode.value==="preview"),h="1.21.0rc7",C=Ct("activePane",n),m=O(l.value?void 0:C.value),g=k(()=>m.value!=="notes"?!1:u.selectedNoteId.value!==void 0);function I(){m.value==="notes"&&u.selectNote(void 0)}ee(m,()=>{u.isAnnotating.value=m.value==="notes"},{immediate:!0}),ee(l,()=>{l.value&&m.value}),ee(u.selectedNoteId,()=>{u.selectedNoteId.value&&(m.value="notes")});const _=k(()=>({layers:i.mode.value==="ui"?"Interface Layers":"Blueprint Layers",add:"Add block",notes:"Notes"})),b=ot();async function P(M){if(!(!(lt()?M.metaKey:M.ctrlKey)||M.target.closest("textarea, input, select")))switch(M.key){case"l":M.preventDefault(),m.value="layers";break;case"Enter":M.preventDefault(),m.value="add";break}}const D=new AbortController;le(()=>{document.addEventListener("keydown",P,{signal:D.signal})}),Be(()=>D.abort());function E(M){m.value=m.value===M?void 0:M,C.value=m.value,u.selectNote(void 0),c("activePaneChanged",M)}return(M,N)=>(t(),p("div",pr,[d("div",vr,[l.value?$("",!0):(t(),p("div",fr,[N[6]||(N[6]=d("hr",null,null,-1)),B(Pe,{icon:"layers","data-writer-tooltip-placement":"right","data-writer-tooltip":`${_.value.layers} (${v(b)}L)`,active:m.value==="layers","data-automation-action":"sidebar-layers",onClick:N[0]||(N[0]=Y=>E("layers"))},null,8,["data-writer-tooltip","active"]),B(Pe,{icon:"wds-blocks","data-writer-tooltip-placement":"right","data-writer-tooltip":`${_.value.add} (${v(b)}Enter)`,active:m.value==="add","data-automation-action":"sidebar-add",onClick:N[1]||(N[1]=Y=>E("add"))},null,8,["data-writer-tooltip","active"]),v(s).isWriterCloudApp.value?(t(),A(Pe,{key:0,icon:"message-square","data-writer-tooltip-placement":"right","data-writer-tooltip":`${_.value.notes}`,active:m.value==="notes","data-automation-action":"sidebar-notes",onClick:N[2]||(N[2]=Y=>E("notes"))},null,8,["data-writer-tooltip","active"])):$("",!0)])),l.value?$("",!0):(t(),p("div",mr,[N[7]||(N[7]=d("hr",null,null,-1)),B(Pe,{icon:"undo-2","data-automation-key":"undo","data-writer-tooltip-placement":"right","data-writer-tooltip":`Undo (${v(b)}Z)`,disabled:!w.value.isUndoAvailable,onClick:N[3]||(N[3]=Y=>v(f)())},null,8,["data-writer-tooltip","disabled"]),B(Pe,{"data-automation-key":"redo","data-writer-tooltip-placement":"right","data-writer-tooltip":`Redo (${v(b)}Y)`,icon:"redo-2",disabled:!w.value.isRedoAvailable,onClick:N[4]||(N[4]=Y=>v(y)())},null,8,["data-writer-tooltip","disabled"])])),d("div",_r,[v(h)?(t(),A(Wo,{key:0,version:v(h)},null,8,["version"])):$("",!0),N[8]||(N[8]=d("hr",null,null,-1)),B(Pe,{target:"_blank",href:"https://dev.writer.com/agent-builder/overview",icon:"circle-question-mark","data-writer-tooltip-placement":"right","data-writer-tooltip":"Docs"})])]),m.value&&!l.value?(t(),p("div",yr,[d("div",{class:K(["BuilderSidebar__pane__header",{"BuilderSidebar__pane__header--goBack":g.value}])},[g.value?(t(),p(j,{key:0},[B(ne,{variant:"neutral",size:"smallIcon",onClick:I},{default:L(()=>[B(z,{name:"arrow-left"})]),_:1}),N[9]||(N[9]=d("h2",null,"Back",-1))],64)):(t(),p("h2",hr,U(_.value[m.value]),1)),B(ne,{variant:"neutral",size:"smallIcon",onClick:N[5]||(N[5]=Y=>m.value=void 0)},{default:L(()=>[B(z,{name:"arrow-left-to-line"})]),_:1})],2),m.value==="add"?(t(),A(v(a),{key:0})):$("",!0),m.value==="layers"?(t(),A(v(r),{key:1})):$("",!0),m.value==="notes"?(t(),A(cr,{key:2})):$("",!0)])):$("",!0)]))}}),br=W(gr,[["__scopeId","data-v-bf0b63b3"]]),kr={class:"WdsToast__icon"},wr=F({__name:"WdsToast",props:{type:{type:String,required:!0},message:{type:String,required:!0},closable:{type:Boolean},action:{type:Object,required:!1,default:void 0}},emits:{close:()=>!0},setup(e){const o=e,a=k(()=>{switch(o.type){case"info":return"info";case"success":return"check";case"error":return"x";default:return"circle-question-mark"}});return(r,n)=>(t(),p("div",{class:K(["WdsToast",`WdsToast--${e.type}`])},[d("div",kr,[e.type==="loading"?(t(),A(Zt,{key:0,size:18,color:"white"})):e.type==="info"?(t(),p(j,{key:1},[q("i")],64)):(t(),A(z,{key:2,name:a.value},null,8,["name"]))]),d("p",null,U(e.message),1),e.action?(t(),p("button",{key:0,class:"WdsToast__action",onClick:n[0]||(n[0]=(...s)=>e.action.func&&e.action.func(...s))},[q(U(e.action.label)+" ",1),e.type==="info"?(t(),p(j,{key:0},[q("i")],64)):(t(),A(z,{key:1,name:e.action.icon},null,8,["name"]))])):$("",!0),e.closable?(t(),A(ne,{key:1,class:"WdsToast__close",variant:"neutral",size:"smallIcon",onClick:n[1]||(n[1]=s=>r.$emit("close"))},{default:L(()=>[B(z,{name:"x"})]),_:1})):$("",!0)],2))}}),Sr=W(wr,[["__scopeId","data-v-aa18760d"]]),Br={class:"BuilderToasts"},Cr=F({__name:"BuilderToasts",setup(e){const{toasts:o,removeToast:a}=Se();return(r,n)=>(t(),p("div",Br,[B(Jt,{name:"list",tag:"div"},{default:L(()=>[(t(!0),p(j,null,ue(v(o),s=>(t(),A(Sr,{key:s.id,class:"BuilderToasts__toast",closable:s.closable,message:s.message,type:s.type,action:s.action,onClick:i=>s.closable!==!1?v(a)(s.id):void 0},null,8,["closable","message","type","action","onClick"]))),128))]),_:1})]))}}),$r=W(Cr,[["__scopeId","data-v-a5d06336"]]),Ir=200,Ar=36,Pr=F({__name:"BuilderInstanceTracker",props:{instancePath:{},matchSize:{type:Boolean},verticalOffsetPixels:{},isOffBoundsAllowed:{type:Boolean},preventSettingsBarOverlap:{type:Boolean}},setup(e,{expose:o}){const a=e,{instancePath:r,matchSize:n,verticalOffsetPixels:s,isOffBoundsAllowed:i,preventSettingsBarOverlap:u}=Xt(a),c=De({});let w=0;const f=ie("rootEl");function y(m){const g=document.querySelector(".ComponentRenderer"),{top:I,left:_}=m.getBoundingClientRect(),{clientHeight:b}=document.body,{clientWidth:P}=g,{left:D}=g.getBoundingClientRect(),E=document.querySelector(".BuilderSettings"),{left:M}=(E==null?void 0:E.getBoundingClientRect())||{left:1/0};let{clientHeight:N,clientWidth:Y}=(n!=null&&n.value?m:f.value)??{};if(N===void 0||Y===void 0)return;let X=s!=null&&s.value?s.value:0,J=_,Z=I+X;if(i.value||(J=Math.max(D,J),J=Math.min(D+P-Y,J),Z=Math.max(Ar,Z),Z=Math.min(b-N,Z)),u.value){let de=0;J+Y>M&&(de=Math.max(J-(M-Y),0)),J-=de}c.value={display:"block",top:`${Z}px`,left:`${J}px`,width:`${Y}px`,height:`${N}px`}}function S(){c.value={display:"none"}}function l(){let m=document.querySelector(`.ComponentRenderer [data-writer-instance-path="${r.value}"]`);if(!m){S();return}const g=getComputedStyle(m);if(!g){S();return}if(g.display=="contents"&&(m=m.querySelector("[data-writer-id]")),!m){S();return}y(m)}function h(){w=requestAnimationFrame(async()=>{l(),!C.signal.aborted&&(await new Promise(m=>setTimeout(m,Ir)),h())})}const C=xe();return o({refresh:l}),le(async()=>{window.addEventListener("scroll",l,{signal:C.signal}),h()}),Be(()=>{cancelAnimationFrame(w)}),(m,g)=>(t(),p("div",{ref_key:"rootEl",ref:f,class:"BuilderInstanceTracker",style:Fe(c.value)},[re(m.$slots,"default",{},void 0,!0)],4))}}),Oe=W(Pr,[["__scopeId","data-v-c3e9e555"]]),Tr={ref:"rootEl",class:"BuilderCollaborationTracker"},Dr={class:"bubble"},xr={class:"main"},Er=F({__name:"BuilderCollaborationTracker",setup(e){const o=V(R.collaborationManager);function a(r){return!(Qt(r).length<=2)}return(r,n)=>(t(),p("div",Tr,[(t(!0),p(j,null,ue(v(o).connectedUsersByInstancePath.value,(s,i)=>(t(),p(j,{key:i},[a(i)?(t(),A(Oe,{key:0,"is-off-bounds-allowed":!1,"instance-path":i,"vertical-offset-pixels":-32,class:"instanceTracker"},{default:L(()=>[d("div",Dr,[d("div",xr,[(t(!0),p(j,null,ue(s,u=>(t(),A(ut,{key:u,"show-tooltip":!0,"user-id":u},null,8,["user-id"]))),128))]),n[0]||(n[0]=d("div",{class:"triangle"},null,-1))])]),_:2},1032,["instance-path"])):$("",!0)],64))),128))],512))}}),Mr=W(Er,[["__scopeId","data-v-15c19d63"]]),Lr={class:"ShareResizeVertical__top"},Fr={class:"ShareResizeVertical__divider"},Nr={class:"ShareResizeVertical__bottom"},Rr=F({__name:"ShareResizeVertical",props:{initialBottomSize:{type:Number,required:!0},disabled:{type:Boolean,required:!1}},setup(e){const o=e,a=ie("root"),r=xe(),n=ea(o,"initialBottomSize");let s=O(n.value);ee(n,()=>s.value=n.value);const i=k(()=>({gridTemplateRows:`minmax(0px, 1fr) 1px ${s.value}px`}));function u(){if(!a.value)return;document.addEventListener("mousemove",w,{signal:r.signal}),document.addEventListener("mouseup",f,{signal:r.signal});const c=a.value.getBoundingClientRect();function w(y){s.value=c.bottom-y.clientY}function f(){document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",w)}}return(c,w)=>(t(),p("div",{ref_key:"root",ref:a,class:"ShareResizeVertical",style:Fe(i.value)},[d("div",Lr,[re(c.$slots,"top",{},void 0,!0)]),d("div",Fr,[e.disabled?$("",!0):(t(),p("div",{key:0,class:"ShareResizeVertical__divider__hand",onMousedown:wt(u,["prevent"])},null,32))]),d("div",Nr,[re(c.$slots,"bottom",{},void 0,!0)])],4))}}),Ur=W(Rr,[["__scopeId","data-v-0de30584"]]),Wr=F({__name:"BuilderAppSocketTimeoutModal",setup(e){const o=V(R.socketTimeout),a=k(()=>[{desc:"Prevent session to expire",loading:o.reconnecting.value,fn:()=>{o.preventTasks.value.add("stayAwake"),o.reconnect()}},{desc:"Reconnect",loading:o.reconnecting.value,fn:()=>{o.reconnect()}}]),r=`Youâ€™ve been disconnected because you were inactive for ${o.timeoutMin} minutes. Click below to reconnect and pick up where you left off.`;return(n,s)=>v(o).socketClosed.value?(t(),A(we,{key:0,title:"Session Expired",description:r,actions:a.value},null,8,["actions"])):$("",!0)}}),Vr=4e3;function zr(e,o){const a=o*60*1e3,r=it();let n;const s=O(!1),i=O(!1),u=Ct("useSocketTimeout_preventTasks",_=>Array.isArray(_)&&_.every(b=>typeof b=="string")),c=O(new Set),w=k(()=>c.value.size>0);function f(_){c.value.has(_)?c.value.delete(_):c.value.add(_)}const y=new Set(["collaborationPing","listResources","keepAlive"]),S=k(()=>{for(const _ of e.frontendMessageMap.value.values())if(!y.has(_.type))return!0;return!1}),l=k(()=>!w.value&&!S.value),h=xe();function C(){return!l.value||document.visibilityState!=="hidden"?!1:(m(),r.log(`[SocketTimeout] planning timeout in ${o}min`),n=setTimeout(()=>{l.value&&(r.warn(`[SocketTimeout] Closing socket after ${o} minutes of inactivity (tab hidden)`),e.stopSync(Vr),s.value=!0,r.info("[SocketTimeout] Socket closed"))},a),!0)}function m(){n&&(r.log("[SocketTimeout] canceling timeout "),clearTimeout(n),n=void 0)}ee(l,()=>{l.value?document.visibilityState==="hidden"&&C():m()}),ee(c,()=>{u.value=[...c.value]},{deep:!0});async function g(){r.info("[SocketTimeout] Attempting to reconnect socket..."),i.value=!0;try{await e.init(),s.value=!1,r.info("[SocketTimeout] Socket reconnected successfully")}catch(_){r.error("[SocketTimeout] Failed to reconnect socket, reloading page",_),window.location.reload()}finally{i.value=!1}}function I(){document.visibilityState==="visible"?m():l.value&&C()}return le(()=>{u&&(c.value=new Set(u.value)),document.addEventListener("visibilitychange",I,{signal:h.signal})}),{timeoutMin:o,socketClosed:s,reconnecting:i,prevent:w,preventTasks:c,togglePreventTaskId:f,onVisibilityChange:I,clearSchedule:m,schedule:C,reconnect:g}}const Or={class:"builderMain"},qr=F({__name:"BuilderApp",setup(e){pt(R.isAutogenModalShown,O(!1));const o=ce({loader:()=>pe(()=>import("./BuilderSettings-jCemD-xF.js").then(x=>x.b),__vite__mapDeps([12,0,1,10,13,5,6,14,15,16,17]),import.meta.url)}),a=ce({loader:()=>pe(()=>import("./ComponentRenderer-BhfR3voO.js"),__vite__mapDeps([18,0,1,19]),import.meta.url)}),r=ce({loader:()=>pe(()=>import("./BuilderInsertionOverlay-CzggujVu.js"),__vite__mapDeps([20,0,1,21]),import.meta.url)}),n=ce({loader:()=>pe(()=>import("./BuilderInsertionLabel-0WdbKcME.js"),__vite__mapDeps([22,0,1,23]),import.meta.url)}),s=ce({loader:()=>pe(()=>import("./BuilderVault-BvNx2sfy.js"),__vite__mapDeps([24,15,0,1,16,25]),import.meta.url)}),i=ce({loader:()=>pe(()=>import("./BuilderJournal-DGBklYbR.js"),__vite__mapDeps([26,0,1,27]),import.meta.url)}),u=V(R.core),c=V(R.builderManager),w=V(R.notesManager),f=V(R.collaborationManager),y=ye(u),S=Se();pt(R.socketTimeout,zr(u,10));const l=ie("noteEl"),h=ie("rendererEl"),C=ie("rendererWrapperEl");function m(){if(l.value!=null&&typeof l.value[Symbol.iterator]=="function")for(const te of l.value)te.refresh()}const{candidateId:g,candidateInstancePath:I,isCandidacyConfirmed:_,dropComponent:b,assignInsertionCandidacy:P,removeInsertionCandidacy:D}=na(u),{createAndInsertComponent:E,undo:M,redo:N,moveComponent:Y,moveComponentUp:X,moveComponentDown:J,cutComponent:Z,isPasteAllowed:de,isCopyAllowed:ge,isCutAllowed:ve,isDeleteAllowed:_e,isGoToParentAllowed:je,isGoToChildAllowed:Re,isGoToNextSiblingAllowed:He,isGoToPrevSiblingAllowed:fe,pasteComponent:Ge,copyComponent:Ue,removeComponentsSubtree:Ye,goToParent:We,goToChild:Me,goToNextSibling:Ce,goToPrevSibling:Ze,moveComponentToParent:Je,moveComponentInsideNextSibling:Xe}=Ne(u,c,y),Q=c.mode,Ve=c.firstSelectedId,ze=k(()=>c.openPanels.value.size>0),Qe=k(()=>Array.from(w.getNotes(u.activePageId.value)).map(x=>({...x,parentInstancePath:w.useNoteInformation(x).parentInstancePath.value})).filter(x=>x.parentInstancePath!==void 0));async function T(x){if(x.key=="Escape"){c.setSelection(null);return}const te=lt()?x.metaKey:x.ctrlKey;if(x.target.closest("textarea, input, select, [contenteditable]"))return;if(x.key=="z"&&te){x.preventDefault(),M();return}if(x.key=="y"&&te){x.preventDefault(),N();return}if(!c.isSingleSelectionActive.value||!c.firstSelectedItem.value)return;const{componentId:G,instancePath:$e}=c.firstSelectedItem.value;if(x.key==(lt()?"Backspace":"Delete")){const be=c.selection.value.filter(Ie=>_e(Ie.componentId)).map(Ie=>Ie.componentId);Ye(...be);return}if(te)if(x.shiftKey)switch(x.key){case"ArrowDown":x.preventDefault(),He(G)&&Ce(G);break;case"ArrowUp":x.preventDefault(),fe(G)&&Ze(G);break;case"ArrowLeft":x.preventDefault(),je(G)&&We(G,$e);break;case"ArrowRight":x.preventDefault(),Re(G)&&Me(G);break}else switch(x.key){case"ArrowDown":x.preventDefault(),J(G);break;case"ArrowUp":x.preventDefault(),X(G);break;case"ArrowLeft":x.preventDefault(),Je(G);break;case"ArrowRight":x.preventDefault(),Xe(G);break;case"v":if(!de(G))return;try{await Ge(G)}catch(be){S.pushToast({type:"error",message:String(be)})}break;case"c":ge(G)&&Ue(G);break;case"x":ve(G)&&Z(G);break}}function H(x){Q.value!=="preview"&&P(x)}function oe(x){if(Q.value==="preview")return;c.setSelection(null);const te=b(x);if(!te)return;const{draggedType:ae,draggedId:G,parentId:$e,position:be}=te;G?Y(G,$e,be):E(ae,$e,be)}function et(x){if(Q.value==="preview"||x.target.closest("[data-writer-unselectable]"))return;if(Q.value==="blueprints"&&c.selectionStatus.value===nt.Multiple){const Ie=x.target.closest("[data-writer-id]");if(Ie&&c.isComponentIdSelected(Ie.dataset.writerId)){x.preventDefault(),x.stopPropagation();return}}const ae=x.target.closest("[data-writer-id]");if(!ae)return;const G=ae.dataset.writerId,$e=ae.dataset.writerInstancePath;c.isComponentIdSelected(G)&&c.selectionStatus.value!==nt.Multiple||w.isAnnotating.value||(x.preventDefault(),x.stopPropagation(),c.handleSelectionFromEvent(x,G,$e,"click"))}function tt(){c.isSettingsBarCollapsed.value=!1}const Tt=x=>{if(Q.value==="preview")return;const te=x.target.closest("[data-writer-id]");if(!te)return;const ae=te.dataset.writerId;if(!ae)return;const{type:G}=u.getComponentById(ae);c.selectionStatus.value===nt.Multiple&&(c.setSelection(ae,void 0,"click"),c.isSettingsBarCollapsed.value=!0),x.dataTransfer.setData(`application/json;writer=${G},${ae}`,"{}")};function Dt(x){c.setSelection(null),D(x)}const dt=new AbortController;return ee(c.selection,()=>{f&&(f.updateOutgoingPing({action:"select",selection:c.selection.value}),f.sendCollaborationPing())}),le(()=>{document.addEventListener("keydown",T,{signal:dt.signal})}),Be(()=>{dt.abort()}),(x,te)=>(t(),p("div",{class:"BuilderApp",tabindex:"-1",style:Fe(v(aa))},[d("div",{class:K(["mainGrid",{openPanels:v(c).openPanels.value.size>0}])},[B(La,{class:"builderHeader"}),he(B(br,{class:"sidebar",onActivePaneChanged:m},null,512),[[Ee,v(Q)==="ui"||v(Q)==="blueprints"]]),B(Ur,{"initial-bottom-size":ze.value?440:48,disabled:!ze.value,class:K({"mainGrid--fullWidth":v(Q)==="preview"||v(Q)==="vault"||v(Q)==="journal"})},{top:L(()=>[d("div",Or,[v(Q)==="vault"?(t(),A(v(s),{key:0})):v(Q)==="journal"?(t(),A(v(i),{key:1})):(t(),p("div",{key:2,ref_key:"rendererWrapperEl",ref:C,class:K(["rendererWrapper",{addNoteCursor:v(w).isAnnotating.value&&v(c).mode.value!=="preview"}]),onScroll:m},[B(v(a),{ref_key:"rendererEl",ref:h,class:K(["componentRenderer",{settingsOpen:v(c).isSingleSelectionActive}]),onDragover:H,onDragstart:Tt,onDragend:Dt,onDrop:oe,onClickCapture:et,onDblclick:tt},null,8,["class"])],34)),v(c).isSingleSelectionActive?(t(),A(v(o),{key:v(Ve)??"noneSelected"})):$("",!0)])]),bottom:L(()=>[B(Eo,{class:"panelSwitcher"})]),_:1},8,["initial-bottom-size","disabled","class"])],2),v(Q)!=="preview"?(t(),p(j,{key:0},[B(Mr,{class:"collaborationTracker"}),v(g)&&!v(_)?(t(),p(j,{key:0},[(t(),A(Oe,{key:v(I),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":v(I),"match-size":!0},{default:L(()=>[B(v(r))]),_:1},8,["instance-path"])),(t(),A(Oe,{key:v(I),class:"insertionLabelTracker","instance-path":v(I),"vertical-offset-pixels":-48},{default:L(()=>[B(v(n),null,{default:L(()=>[q(U(v(u).getComponentDefinition(v(u).getComponentById(v(g)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):$("",!0)],64)):$("",!0),v(Q)==="ui"?(t(!0),p(j,{key:1},ue(Qe.value,ae=>(t(),A(Oe,{key:ae.id,ref_for:!0,ref_key:"noteEl",ref:l,class:"BuilderApp__noteTracker","is-off-bounds-allowed":!0,"instance-path":ae.parentInstancePath,"match-size":!0},{default:L(()=>[B(ta,{class:"BuilderApp__noteTracker__note","component-id":ae.id},null,8,["component-id"])]),_:2},1032,["instance-path"]))),128)):$("",!0),te[0]||(te[0]=d("div",{id:"modal"},null,-1)),B(Wr),B(Wa,{id:"tooltip"}),B($r)],4))}}),Kr=W(qr,[["__scopeId","data-v-0f703578"]]),Yr=Object.freeze(Object.defineProperty({__proto__:null,default:Kr},Symbol.toStringTag,{value:"Module"}));export{qo as B,Pt as W,an as a,no as b,Yr as c};
