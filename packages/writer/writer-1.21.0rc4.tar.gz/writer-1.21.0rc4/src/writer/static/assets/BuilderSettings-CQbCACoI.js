function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-UtxHROf7.js","./index-DgecPIuV.js","./index-hNQagJ0l.css","./useComponentDescription-DJw_NOhU.js","./WdsDropdownMenu-CGyGQl9Y.js","./WdsCheckbox-CyMfoekc.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-DdTGpUxu.css","./useKeyValueEditor-Dq03nDCH.js","./useKeyValueEditor-CsemOh8D.css","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-YStZIqB0.js","./BuilderEmbeddedCodeEditor-CXloIist.css","./BuilderGraphSelect-zv41Lj6H.js","./useListResources-BG7PFm3E.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-DTRKvnlW.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-CZbsOukX.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-ClaoyKKQ.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-C1uvLWEi.js","./BuilderApp-RTZyH7vY.js","./marked.esm-273vDTCT.js","./BuilderApp-D9r9uAjq.css","./useBlueprintRun-BOZavx3x.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as I,aV as Ce,R as v,$ as Le,aW as tt,C as nt,d as D,i as R,a as W,r as N,o as s,b as T,au as ot,z as O,x,W as X,aq as oe,y as z,ax as we,an as ue,ap as ye,aJ as q,at as de,f as B,D as j,g as C,S as E,E as H,_ as U,ao as Q,Q as Z,m as K,q as ie,G as re,aX as Ne,K as ze,s as pe,a6 as lt,aO as at,w as me,aY as it,a8 as Je,aP as st,L as le,aZ as rt,a_ as ut,J as Ge,A as ae,t as J,aC as G,a$ as ge,Z as dt,b0 as Ie,a7 as fe,a3 as Oe,l as Ee,aw as ee,v as ke,b1 as Te,b2 as ct,X as pt,a1 as Pe,b3 as Ve,b4 as P,b5 as vt,b6 as mt,b7 as ft,b8 as yt,aI as Ye,F as Y,a4 as He,u as Me,b9 as Xe,ba as Fe,aM as ve,aU as gt,bb as _t,bc as bt,bd as ht,a2 as kt}from"./index-DgecPIuV.js";import{u as Qe}from"./useComponentDescription-DJw_NOhU.js";import{a as Be,W as St}from"./WdsDropdownMenu-CGyGQl9Y.js";import{W as te,u as It}from"./useKeyValueEditor-Dq03nDCH.js";import{W as qe}from"./WdsCheckbox-CyMfoekc.js";function*Bt(e,r){const l=new Set;function*d(i){var o;if(l.has(i))return;l.add(i);const a=e.getComponentById(i);if(a)for(const g of e.getComponentsNested(a.parentId))(o=g.outs)!=null&&o.some(f=>f.toNodeId===i)&&(yield g,yield*d(g.id))}yield*d(r)}function Ct(e,r=void 0,l=Le()){const d=I(()=>new Set(Ce(e.userStateInitial.value))),i=I(()=>{try{return xt(e,d.value)}catch(g){return l.error("Cannot compute blueprintsSetStates",g),{}}}),a=I(()=>{try{return Et(e,d.value)}catch(g){return l.error("Cannot compute bindings",g),{}}}),o=I(()=>{try{return wt(e,v(r))}catch(g){return l.error("Cannot compute blueprintsResults",g),{}}});return{blueprintsSetStates:i,bindings:a,blueprintsResults:o}}function wt(e,r,l=new Set){var i;const d={};for(const a of Bt(e,r)){const o=a.type,g=e.getComponentDefinition(a.type);if(!g||!(a.type&&!tt.has(o)&&a.type.startsWith("blueprints_")&&((i=g==null?void 0:g.outs)==null?void 0:i.success)!==void 0))continue;const p=`results.${a.id}`;p&&!l.has(p)&&(d[p]??(d[p]={components:[]}),d[p].components.push(a))}return d}function Et(e,r=new Set){var d;const l={};for(const i of nt)for(const a of e.getComponentsNested(i)){const o=(d=a.binding)==null?void 0:d.stateRef;o&&!r.has(o)&&(l[o]??(l[o]={components:[]}),l[o].components.push(a))}return l}function xt(e,r=new Set){var i;function*l(){for(const a of e.getComponentsNested("blueprints_root"))a.type==="blueprints_setstate"&&a.content&&(yield a)}const d={};for(const a of l()){const o=(i=a.content)==null?void 0:i.element;!o||typeof o!="string"||r.has(o)||(d[o]??(d[o]={components:[]}),d[o].components.push(a))}return d}const xe=D({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(e){const r=e,l=R(W.core),d=R(W.builderManager),i=N(!1),a=I(()=>l.getComponentById(r.componentId)),{name:o,possibleImageUrls:g,previewText:f}=Qe(l,a),p=I(()=>({icon:g.value,label:r.path,detail:f.value||o.value,value:r.path})),{goToComponentParentPage:S}=we(l,d);async function h(){await S(r.componentId),d.setSelection(r.componentId)}return(u,m)=>(s(),T(Be,{class:"BuilderStateSelectorDropdownItemComponent",option:p.value,selected:e.selected,"show-custom-action":"",onMousemove:m[1]||(m[1]=y=>i.value=!0),onMouseout:m[2]||(m[2]=y=>i.value=!1)},ot({_:2},[i.value?{name:"action",fn:O(()=>[x(X,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:oe(h,["prevent"]),onMousemove:m[0]||(m[0]=y=>i.value=!0)},{default:O(()=>[x(z,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),$t={class:"BuilderStateSelectorDropdown"},Tt={key:1,class:"BuilderStateSelectorDropdown__empty"},Vt={key:2,class:"BuilderStateSelectorDropdown__section"},Ft={key:3,class:"BuilderStateSelectorDropdown__section"},Ot={key:4,class:"BuilderStateSelectorDropdown__section"},Mt={key:5,class:"BuilderStateSelectorDropdown__section"},qt={key:6,class:"BuilderStateSelectorDropdown__section"},At=D({__name:"BuilderStateSelectorDropdown",props:ue({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const r=e,l=R(W.core),d=R(W.secretsManager),i=ye(e,"modelValue"),a=Ct(l,q(r,"componentId")),o=I(()=>{const y=[];for(const _ of Ce(l.userStateInitial.value))r.query&&!_.includes(r.query)||y.push({value:_,label:_,icon:"code",iconBgColor:de.Green2});return y.sort((_,w)=>_.label.localeCompare(w.label))}),g=I(()=>{if(r.hideSecrets)return[];const y=[];for(const _ of Ce(d.secrets.value)){const w=`vault.${_}`;r.query&&!w.includes(r.query)||y.push({value:`vault.${_}`,label:_,icon:"key-round",iconBgColor:de.Yellow2})}return y.sort((_,w)=>_.label.localeCompare(w.label))}),f=I(()=>h(a.bindings.value)),p=I(()=>h(a.blueprintsSetStates.value)),S=I(()=>r.hideBlueprintResults?[]:h(a.blueprintsResults.value));function h(y){return Object.entries(y).map(([_,{components:w}])=>{for(const M of w)if(M.id!==r.componentId)return{componentId:M.id,path:_}}).filter(_=>!(!_||r.query&&!_.path.includes(r.query)))}const u=I(()=>!r.allowCreate||!r.query||r.query.endsWith(".")?!1:!(o.value.some(_=>_.value===r.query)||g.value.some(_=>_.value===r.query)||S.value.some(_=>_.path===r.query)||f.value.some(_=>_.path===r.query))),m=I(()=>!!(o.value.length||p.value.length||f.value.length||S.value.length||g.value.length));return(y,_)=>(s(),B("div",$t,[u.value?(s(),B(j,{key:0},[_[1]||(_[1]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),x(Be,{option:{value:e.query,label:e.query,icon:"plus",iconBgColor:v(de).Blue4,iconColor:v(de).White},onClick:_[0]||(_[0]=oe(w=>i.value=e.query,["stop"]))},null,8,["option"])],64)):m.value?E("",!0):(s(),B("div",Tt," No result ")),p.value.length?(s(),B("div",Vt,[_[2]||(_[2]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(s(!0),B(j,null,H(p.value,w=>(s(),T(xe,{key:w.path,path:w.path,"component-id":w.componentId,selected:w.path===i.value,onClick:oe(M=>i.value=w.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):E("",!0),f.value.length?(s(),B("div",Ft,[_[3]||(_[3]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(s(!0),B(j,null,H(f.value,w=>(s(),T(xe,{key:w.path,path:w.path,"component-id":w.componentId,selected:w.path===i.value,onClick:oe(M=>i.value=w.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):E("",!0),!e.hideBlueprintResults&&S.value.length?(s(),B("div",Ot,[_[4]||(_[4]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(s(!0),B(j,null,H(S.value,w=>(s(),T(xe,{key:w.path,path:w.path,"component-id":w.componentId,selected:w.path===i.value,onClick:oe(M=>i.value=w.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):E("",!0),!e.hideSecrets&&g.value.length?(s(),B("div",Mt,[_[5]||(_[5]=C("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(s(!0),B(j,null,H(g.value,w=>(s(),T(Be,{key:w.value,option:w,selected:w.value===i.value,onClick:oe(M=>i.value=w.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):E("",!0),o.value.length?(s(),B("div",qt,[_[6]||(_[6]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(s(!0),B(j,null,H(o.value,w=>(s(),T(Be,{key:w.value,option:w,selected:w.value===i.value,onClick:oe(M=>i.value=w.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):E("",!0)]))}}),Dt=U(At,[["__scopeId","data-v-d28f7ad6"]]),Rt=D({__name:"BuilderTemplateInputTemplate",props:ue({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0,input:e=>!!e},["update:modelValue"]),setup(e,{expose:r,emit:l}){const d=Q({loader:()=>Z(()=>import("./BuilderTemplateEditor-UtxHROf7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)}),i=ye(e,"modelValue"),a=e,o=l;r({focus:u,getSelection:h,value:i,setSelectionEnd:S,setSelectionStart:p});const g=K("input");ie(()=>{a.autofocus&&u()});async function f(m){i.value=m,o("input",{target:{value:m}})}function p(m){var y;(y=g.value)==null||y.setSelectionStart(m)}function S(m){var y;(y=g.value)==null||y.setSelectionEnd(m)}function h(){var m;return(m=g.value)==null?void 0:m.getSelection()}function u(){var m;(m=g.value)==null||m.focus()}return(m,y)=>(s(),T(Ne,{"left-icon":e.leftIcon,"right-icon":e.rightIcon,invalid:e.invalid,variant:e.variant,class:re(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!e.multiline,"BuilderTemplateInputTemplate--multiline":e.multiline}]),onRightIconClick:y[0]||(y[0]=_=>m.$emit("rightIconClick")),onClick:u},{default:O(()=>[x(v(d),{ref_key:"input",ref:g,class:"BuilderTemplateInputTemplate__input",multiline:e.multiline,"model-value":i.value,"onUpdate:modelValue":f},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Wt=U(Rt,[["__scopeId","data-v-2789dd2e"]]),Pt={class:"BuilderTemplateInputState__content"},Ut=D({__name:"BuilderTemplateInputState",props:ue({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0},["update:modelValue"]),setup(e,{expose:r}){r({focus:u,setSelectionStart:p,setSelectionEnd:S,getSelection:h});const l=R(W.core),d=K("input"),i=ye(e,"modelValue"),a=N(!1),o=I(()=>!i.value&&!a.value),g=I(()=>new Set(Ce(l.userStateInitial.value))),f=I(()=>({opacity:o.value?0:void 0,backgroundColor:g.value.has(i.value)?de.Green2:de.Gray1}));function p(m){d.value&&(d.value.selectionStart=m)}function S(m){d.value&&(d.value.selectionEnd=m)}function h(){var m,y;return{selectionStart:(m=d.value)==null?void 0:m.selectionStart,selectionEnd:(y=d.value)==null?void 0:y.selectionEnd}}function u(){var m;(m=d.value)==null||m.focus()}return(m,y)=>(s(),T(Ne,{class:"BuilderTemplateInputState","left-icon":o.value?"at-sign":void 0,"right-icon":e.rightIcon,onRightIconClick:y[3]||(y[3]=_=>m.$emit("rightIconClick")),onClick:y[4]||(y[4]=_=>v(d).focus())},{default:O(()=>[C("div",Pt,[C("div",{class:"BuilderTemplateInputState__content__tag",style:ze(f.value)},[y[5]||(y[5]=C("span",null,"@",-1)),pe(C("input",{ref_key:"input",ref:d,"onUpdate:modelValue":y[0]||(y[0]=_=>i.value=_),type:"text",onFocus:y[1]||(y[1]=_=>a.value=!0),onBlur:y[2]||(y[2]=_=>a.value=!1)},null,544),[[lt,i.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),Kt=U(Ut,[["__scopeId","data-v-f03927da"]]);function jt(e,r){const l=e.lastIndexOf("@");if(l!==-1){let d=l;const a=e.slice(l).indexOf("{");return a!==-1&&(d+=a+1),e.indexOf("}",d)!==-1?e.substring(0,l)+`@{${r}}`:e.slice(0,l)+`@{${r}}`}return e+`@{${r}}`}function Lt(e){const r=e.lastIndexOf("@");if(r===-1)return"";const l=e.slice(r);return l.includes("}")||l.includes(`
`)||!l.startsWith("@{")&&l.includes(" ")?"":l.replace(/^@{?/,"")}function Nt(e,r){return function(d){var f;if(!e.value)return;let i=0;if(d.key==="ArrowDown"?i=1:d.key==="ArrowUp"&&(i=-1),i===0)return;const a=Array.from(e.value.querySelectorAll("button")).filter(p=>!p.hasAttribute("disabled")&&p.offsetParent!==null);let o=i===1?a[0]:a.at(-1);const g=a.indexOf(document.activeElement);g!==-1&&(o=a[g+i]),o?(o.focus(),d.preventDefault()):(f=r==null?void 0:r.nextFocusNotFound)==null||f.call(r)}}const zt=D({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(e,{expose:r,emit:l}){const d=e,i=l,a=K("root"),o=K("input"),g=K("dropdown"),f=N(),{floatingStyles:p,update:S}=at(a,g,{placement:"bottom-start",middleware:[rt(),ut({apply({rects:t,elements:n}){Object.assign(n.floating.style,{minWidth:`${t.reference.width}px`,maxWidth:`${t.reference.width}px`})}})],strategy:"fixed"});h();function h(){let t;function n(){t&&t(),t=void 0}me(g,()=>{n(),g.value&&(t=it(o,g.value,S))}),Je(()=>n())}r({focus:()=>{var t;return(t=o.value)==null?void 0:t.focus()}});const u=I(()=>d.options?Object.entries(d.options).reduce((t,[n,F])=>(n.includes(d.value)&&t.push({value:n,label:F}),t),[]):[]),m=Nt(g,{nextFocusNotFound:()=>{var t;f.value=void 0,(t=o.value)==null||t.focus()}});function y(){u.value.length>0&&(f.value="static")}const _=I(()=>{var k,V;if(d.type==="state")return d.value;let t=((k=o.value)==null?void 0:k.value)??"";if(!t)return"";const{selectionStart:n}=((V=o.value)==null?void 0:V.getSelection())??{},F=t.slice(0,n);return Lt(F)}),w=st(a);me(w,async()=>{w.value||(await le(),setTimeout(()=>{f.value=void 0},300))});async function M(t){var A,L;let n=((A=o.value)==null?void 0:A.value)??"";const{selectionStart:F,selectionEnd:k}=((L=o.value)==null?void 0:L.getSelection())??{};let V=F??n.length;if(d.type==="template"){const be=n.slice(0,F),he=n.slice(k).replace(/^(\})+/,""),ce=jt(be,t);n=`${ce}${he}`,V=ce.length}else n=t,V=t.length;i("input",{target:{value:n}}),i("update:value",n),o.value&&(o.value.focus(),f.value=void 0,await le(),o.value.setSelectionStart(V))}async function $(t){i("input",{target:{value:t}}),i("update:value",t),o.value&&(o.value.focus(),f.value=void 0,await le(),o.value.setSelectionStart(t.length))}function b(t){c({target:{value:t}})}function c(t){var A;let n=String(t.target.value??"");if(i("input",t),i("update:value",n),d.type==="state"){f.value="template";return}if(u.value.some(L=>L.value.includes(n))){f.value="static";return}const{selectionStart:F}=((A=o.value)==null?void 0:A.getSelection())??{},k=n.slice(0,F),V=!!k.match(/@\{([^}{@]*)$/)||k.endsWith("@")||!!_.value;f.value=V?"template":void 0}return(t,n)=>(s(),B("div",{ref_key:"root",ref:a,class:"BuilderTemplateInput",onKeydown:n[2]||(n[2]=oe((...F)=>v(m)&&v(m)(...F),["stop"]))},[e.type==="template"?(s(),T(Wt,{key:0,ref_key:"input",ref:o,"model-value":d.value,placeholder:d.placeholder,list:d.options?`list-${d.inputId}`:void 0,invalid:e.error!==void 0,autofocus:e.autofocus,readonly:e.readonly,multiline:e.multiline,onInput:c,onClick:y},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):E("",!0),e.type==="state"?(s(),T(Kt,{key:1,ref_key:"input",ref:o,"right-icon":f.value?"chevron-up":"chevron-down","model-value":d.value,onRightIconClick:n[0]||(n[0]=F=>f.value=f.value?void 0:"template"),"onUpdate:modelValue":b,onClick:n[1]||(n[1]=F=>v(o).focus())},null,8,["right-icon","model-value"])):E("",!0),f.value?(s(),B("div",{key:2,ref_key:"dropdown",ref:g,class:"BuilderTemplateInput__dropdown",style:ze(v(p))},[f.value==="template"?(s(),T(Dt,{key:0,"hide-secrets":e.type==="state","hide-blueprint-results":e.type==="state","allow-create":e.type==="state",query:_.value,"component-id":e.componentId,"onUpdate:modelValue":M},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):u.value.length?(s(),T(St,{key:1,options:u.value,onSelect:$},null,8,["options"])):E("",!0)],4)):E("",!0)],544))}}),ne=U(zt,[["__scopeId","data-v-8594b4ef"]]),Jt=["disabled","data-writer-tooltip"],Gt={key:0,class:"WdsTab__indicator"},Yt=D({__name:"WdsTab",props:{disabled:{type:[Boolean,String],default:void 0},selected:{type:Boolean},variant:{type:String,required:!0}},emits:{click:()=>!0},setup(e){const r=e,l=I(()=>typeof r.disabled=="string"?r.disabled:void 0);return(d,i)=>(s(),B("button",{class:re(["WdsTab",{"WdsTab--disabled":e.disabled,"WdsTab--selected":e.selected,"WdsTab--variant-bar":e.variant==="bar","WdsTab--variant-chip":e.variant==="chip"}]),type:"button",disabled:!!e.disabled,"data-writer-tooltip":l.value,onClick:i[0]||(i[0]=a=>d.$emit("click"))},[Ge(d.$slots,"default",{},void 0,!0),e.variant==="bar"?(s(),B("div",Gt)):E("",!0)],10,Jt))}}),Ht=U(Yt,[["__scopeId","data-v-db73c62c"]]),Xt=D({__name:"WdsTabs",props:ue({tabs:{type:Array,required:!0},variant:{type:String,default:"chip"}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const r=ye(e,"modelValue");return(l,d)=>(s(),B("div",{class:re(["WdsTabs",{"WdsTabs--variant-bar":e.variant==="bar","WdsTabs--variant-chip":e.variant==="chip"}])},[(s(!0),B(j,null,H(e.tabs,i=>(s(),T(Ht,{key:i.value,value:i.value,variant:e.variant,disabled:i.disabled,selected:i.value===r.value,onClick:a=>r.value=i.value},{default:O(()=>[ae(J(i.label),1)]),_:2},1032,["value","variant","disabled","selected","onClick"]))),128))],2))}}),se=U(Xt,[["__scopeId","data-v-6e6e5572"]]),_e=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Qt=["data-automation-key"],Zt={key:0,class:"main"},en={key:0,class:"pickerContainer"},tn=D({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(b=>b.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=K("rootEl"),d=K("pickerEl"),i=K("freehandInputEl"),a=[{key:"start",label:"Left",match:b=>b=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:b=>b=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:b=>b=="end",default:"end",icon:"align-right"}],o=[{key:"start",label:"Top",match:b=>b=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:b=>b=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:b=>b=="end",default:"end",icon:"arrow-down-to-line"}],g={pick:d,css:i,default:null},f=e,p=G({componentId:q(f,"componentId"),fieldKey:q(f,"fieldKey")}),S=I(()=>f.direction=="vertical"?o:f.direction=="horizontal"?a:o),h=I(()=>S.value.map(b=>({value:b.key,label:b.label,icon:b.icon}))),u=I(()=>{const b=p.value;for(const c in S.value)if(b&&S.value[c].match(b))return S.value[c].key;return null}),y=N((()=>{if(!p.value)return"default";for(const b in S.value)if(S.value[b].match(p.value))return"pick";return"css"})()),_=()=>{var c;const b=(c=g[y.value])==null?void 0:c.value;b&&(b.focus(),typeof b.selectionStart=="number"&&(b.selectionStart=b.selectionEnd=b.value.length))},w=async b=>{y.value!=b&&(y.value=b,await le(),_(),b==="default"&&(p.value=""))},M=b=>{for(const c in S.value)S.value[c].key==b&&(p.value=S.value[c].default)},$=b=>{p.value=b.target.value};return ie(()=>{l.value.addEventListener("focus",_)}),ge(()=>{l.value.removeEventListener("focus",_)}),(b,c)=>(s(),B("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":f.fieldKey},[x(se,{tabs:v(_e),"model-value":y.value,"onUpdate:modelValue":w},null,8,["tabs","model-value"]),y.value=="pick"||y.value=="css"?(s(),B("div",Zt,[y.value=="pick"?(s(),B("div",en,[x(v(r),{ref_key:"pickerEl",ref:d,"model-value":u.value,options:h.value,"onUpdate:modelValue":M},null,8,["model-value","options"])])):E("",!0),y.value=="css"?(s(),T(ne,{key:1,ref_key:"freehandInputEl",ref:i,value:v(p),error:e.error,onInput:$},null,8,["value","error"])):E("",!0)])):E("",!0)],8,Qt))}}),Ue=U(tn,[["__scopeId","data-v-6a36fb0b"]]),nn=["data-automation-key"],on={key:0,class:"main"},ln={key:0,class:"pickerContainer"},an=["value"],sn=D({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=K("rootEl"),l=K("pickerEl"),d=K("freehandInputEl"),i={pick:l,css:d,default:null},a=e,o=G({componentId:q(a,"componentId"),fieldKey:q(a,"fieldKey")}),f=N((()=>{const u=o.value;return u?/#[A-Fa-f0-9]{6}/.test(u)?"pick":"css":"default"})()),p=()=>{var m;const u=(m=i[f.value])==null?void 0:m.value;u&&(u.focus(),typeof u.selectionStart=="number"&&(u.selectionStart=u.selectionEnd=u.value.length))},S=async u=>{f.value!=u&&(f.value=u,await le(),p(),u==="default"&&(o.value=""))},h=u=>o.value=u.target.value;return ie(()=>{r.value.addEventListener("focus",p)}),ge(()=>{r.value.removeEventListener("focus",p)}),(u,m)=>(s(),B("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":e.fieldKey},[x(se,{tabs:v(_e),"model-value":f.value,"onUpdate:modelValue":S},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(s(),B("div",on,[f.value=="pick"?(s(),B("div",ln,[C("input",{ref_key:"pickerEl",ref:l,type:"color",value:v(o),onInput:h},null,40,an)])):E("",!0),f.value=="css"?(s(),T(ne,{key:1,ref_key:"freehandInputEl",ref:d,value:v(o),error:e.error,onInput:h},null,8,["value","error"])):E("",!0)])):E("",!0)],8,nn))}}),rn=U(sn,[["__scopeId","data-v-5432e5c5"]]);function $e(e){return typeof e=="string"&&e.startsWith("@{")&&e.endsWith("}")}function Ze({fieldViewModel:e}){const r=N($e(e.value)),l=N({binding:$e(e.value)?e.value:"",noneBinding:r.value?"":e.value});function d(){r.value?($e(e.value)&&(l.value.binding=e.value),e.value=l.value.noneBinding,r.value=!1):(l.value.noneBinding=e.value,e.value=l.value.binding,r.value=!0)}return{isBindingMode:dt(r),toggleBindingMode:d}}const un=["data-automation-key"],dn=D({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Ie.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(e){const r=R(W.core),l=e,d=G({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey"),defaultValue:q(l,"defaultValue")}),i=I(()=>`${l.componentId}-${l.fieldKey}`),a={uiComponents:()=>{const u=r.getComponents(void 0,{sortedByPosition:!0}).filter(y=>r.isChildOf("root",y.id)),m={};return u.forEach(y=>{m[y.id]=y.id}),m},uiComponentsWithEvents:()=>r.getComponents(void 0,{sortedByPosition:!0}).filter(u=>r.isChildOf("root",u.id)).filter(u=>!!r.getComponentDefinition(u.type).events).reduce((u,m)=>(u[m.id]=m.id,u),{}),eventTypes:(u,m)=>{var $;const y=($=u.getComponentById(m).content)==null?void 0:$.refComponentId,_=r.getComponentById(y);if(!_)return{};const w=u.getComponentDefinition(_.type);return Object.fromEntries(Object.keys(w.events??{}).map(b=>[b,b]))}},o=I(()=>{const u=r.getComponentById(l.componentId),y=r.getComponentDefinition(u.type).fields[l.fieldKey];return y.options?typeof y.options=="function"?y.options(r,l.componentId):typeof y.options=="string"?a==null?void 0:a[y.options](r,l.componentId):y.options:{}}),g=I(()=>["state","state-template"].includes(l.type)?"state":"template"),f=I(()=>h(d.value)),p=u=>{d.value=S(u.target.value)};function S(u){return typeof u!="string"?"":l.type==="state-template"?`@{${u}}`:u}function h(u){return typeof u!="string"?"":l.type==="state-template"?u.replace(/^@{/,"").replace(/}$/,""):u}return(u,m)=>(s(),B("div",{class:"BuilderFieldsText","data-automation-key":l.fieldKey},[e.fieldControl==v(Ie).Text?(s(),T(ne,{key:0,class:"content","component-id":e.componentId,"input-id":i.value,value:f.value,placeholder:e.defaultValue,type:g.value,options:o.value,error:e.error,autofocus:e.autofocus,onInput:p},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):e.fieldControl==v(Ie).Textarea?(s(),T(ne,{key:1,multiline:"",variant:"text",class:"content","input-id":i.value,"component-id":e.componentId,value:f.value,placeholder:e.defaultValue,type:g.value,error:e.error,autofocus:e.autofocus,onInput:p},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):E("",!0)],8,un))}}),Ae=U(dn,[["__scopeId","data-v-aa053130"]]),cn=["data-automation-key"],pn=D({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(e){const r=e,l=G({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),{isBindingMode:d,toggleBindingMode:i}=Ze({fieldViewModel:l}),a=I({get:()=>l.value==="yes",set:o=>{l.value=o?"yes":"no"}});return(o,g)=>v(d)?(s(),T(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":v(d),label:e.label,unit:e.unit,hint:e.hint,error:e.error,"data-automation-key":r.fieldKey,"onUpdate:isBindingEnabled":v(i)},{default:O(()=>[x(Ae,{type:"state-template","component-id":e.componentId,"field-key":e.fieldKey,error:e.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(s(),B("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":r.fieldKey},[x(qe,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=f=>a.value=f),label:e.label,detail:e.hint,invalid:!!e.error},null,8,["modelValue","label","detail","invalid"]),x(X,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:v(i)},{default:O(()=>[x(z,{name:"at-sign"})]),_:1},8,["onClick"])],8,cn))}}),vn=U(pn,[["__scopeId","data-v-d540f2ac"]]),mn={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},fn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},yn=D({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:e=>typeof e=="string",close:()=>!0},setup(e,{emit:r}){const l=Q({loader:()=>Z(()=>import("./BuilderEmbeddedCodeEditor-YStZIqB0.js").then(M=>M.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),d=e,{mode:i,assistedEntries:a,freehandValue:o,isValid:g,currentValue:f,addAssistedEntry:p,updateAssistedEntryValue:S,updateAssistedEntryKey:h,removeAssistedEntry:u,getAssistedEntryError:m}=It(d.data),y=r,_=I(()=>[{desc:"Save",fn:()=>y("submit",f.value),disabled:d.data===f.value||!g.value}]),w=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(M,$)=>(s(),T(Oe,{title:"Category key values","display-close-button":"",actions:_.value,onClose:$[2]||($[2]=b=>M.$emit("close"))},{titleActions:O(()=>[x(se,{modelValue:v(i),"onUpdate:modelValue":$[0]||($[0]=b=>fe(i)?i.value=b:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:w},null,8,["modelValue"])]),default:O(()=>[v(i)==="freehand"?(s(),T(v(l),{key:0,modelValue:v(o),"onUpdate:modelValue":$[1]||($[1]=b=>fe(o)?o.value=b:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):E("",!0),v(i)==="assisted"?(s(),B("div",mn,[v(i)==="assisted"?(s(),B("div",fn,[$[3]||($[3]=C("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),$[4]||($[4]=C("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(s(!0),B(j,null,H(v(a),(b,c)=>(s(),B(j,{key:c},[x(te,{error:v(m)(c)},{default:O(()=>[x(ne,{placeholder:"Type a key...",value:b.key,error:v(m)(c),"onUpdate:value":t=>v(h)(c,t)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),x(te,null,{default:O(()=>[x(ne,{placeholder:"Type a value...",value:b.value,"onUpdate:value":t=>v(S)(c,t)},null,8,["value","onUpdate:value"])]),_:2},1024),C("div",null,[x(X,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:t=>v(u)(c)},{default:O(()=>[x(z,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):E("",!0),x(X,{variant:"special",size:"small",onClick:v(p)},{default:O(()=>[x(z,{name:"plus"}),$[5]||($[5]=ae(" Add a pair "))]),_:1},8,["onClick"])])):E("",!0)]),_:1},8,["actions"]))}}),gn=U(yn,[["__scopeId","data-v-4e74be91"]]),_n=["data-automation-key"],bn={class:"BuilderFieldsKeyValue__toolbar"},hn={key:1,class:"BuilderFieldsKeyValue__listEmpty"},kn={key:2,class:"BuilderFieldsKeyValue__list"},Sn=["data-writer-tooltip"],In=["data-writer-tooltip"],Bn=D({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=e,l=G({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),d=R(W.core),i=R(W.secretsManager),{getEvaluatedFields:a}=Ee(d,i),o=N(!1),g=I(()=>{var S;return((S=a(r.instancePath))==null?void 0:S[r.fieldKey].value)??{}}),f=I(()=>l.value||JSON.stringify(g.value));function p(S){o.value=!1,l.value=S}return(S,h)=>(s(),B("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":r.fieldKey},[C("div",bn,[x(X,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:h[0]||(h[0]=u=>o.value=!0)},{default:O(()=>[x(z,{name:"pencil"})]),_:1})]),o.value?(s(),T(gn,{key:0,data:f.value,onSubmit:p,onClose:h[1]||(h[1]=u=>o.value=!1)},null,8,["data"])):E("",!0),Object.keys(g.value).length===0?(s(),B("div",hn,[h[4]||(h[4]=C("p",null,"There are no key value categories defined",-1)),x(X,{variant:"special",size:"small",onClick:h[2]||(h[2]=u=>o.value=!0)},{default:O(()=>[x(z,{name:"pencil"}),h[3]||(h[3]=ae(" Edit "))]),_:1})])):(s(),B("ul",kn,[(s(!0),B(j,null,H(g.value,(u,m)=>(s(),B("li",{key:m,class:"BuilderFieldsKeyValue__list__item"},[C("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":m,"data-writer-tooltip-strategy":"overflow"},J(m),9,Sn),C("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":u,"data-writer-tooltip-strategy":"overflow"},J(u||"<empty value>"),9,In)]))),128))]))],8,_n))}}),Cn=U(Bn,[["__scopeId","data-v-43bf3550"]]),wn=D({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(e){const r=e,l=G({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey"),defaultValue:q(r,"defaultValue")}),d=i=>{l.value=i.target.value};return(i,a)=>(s(),T(ne,{class:"BuilderFieldsObject","data-automation-key":r.fieldKey,multiline:"",variant:"code",value:v(l),placeholder:e.defaultValue,error:e.error,onInput:d},null,8,["data-automation-key","value","placeholder","error"]))}}),En=U(wn,[["__scopeId","data-v-efbda4e8"]]),xn=["data-automation-key"],$n={key:0,class:"main"},Tn={key:0,class:"pickerContainer"},Vn={class:"BuilderFieldsPadding__options"},Fn=D({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(t=>t.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=K("rootEl"),d=K("pickerEl"),i=K("freehandInputEl"),a=K("fixedEl"),o=[{key:"all_sides",label:"All sides",match:t=>t.split(" ").length==1&&t.endsWith("px"),default:()=>m.value?m.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:t=>t.split(" ").length==2&&t.endsWith("px"),default:()=>m.value?m.value[2]+" "+m.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:t=>t.split(" ").length==4&&t.endsWith("px"),default:()=>m.value?[m.value[3],m.value[1],m.value[2],m.value[0]].join(" "):"0px 0px 0px 0px"}],g={pick:d,css:i,default:null},f=e,p=G({componentId:q(f,"componentId"),fieldKey:q(f,"fieldKey")}),S=I(()=>o.map(t=>({value:t.key,label:t.label,icon:"panel-top-dashed"}))),h=I(()=>{const t=p.value;for(const n in o)if(t&&o[n].match(t))return o[n].key;return null}),u=I(()=>{const t=m.value;return t?[t[0].substring(0,t[0].length-2),t[1].substring(0,t[1].length-2),t[2].substring(0,t[2].length-2),t[3].substring(0,t[3].length-2)]:["0","0","0","0"]}),m=I(()=>{const t=p.value;if(t){const n=t.split(" ");if(n.length==1&&n[0].endsWith("px"))return[n[0],n[0],n[0],n[0]];if(n.length==2&&n[0].endsWith("px")&&n[0].endsWith("px"))return[n[1],n[1],n[0],n[0]];if(n.length==4&&n[0].endsWith("px")&&n[1].endsWith("px")&&n[2].endsWith("px")&&n[3].endsWith("px"))return[n[3],n[1],n[0],n[2]]}else return null;return null}),_=N((()=>{if(!p.value)return"default";for(const t in o)if(o[t].match(p.value))return"pick";return"css"})()),w=()=>{var n;const t=(n=g[_.value])==null?void 0:n.value;t&&(t.focus(),typeof t.selectionStart=="number"&&(t.selectionStart=t.selectionEnd=t.value.length))},M=async t=>{_.value!=t&&(_.value=t,await le(),w(),t==="default"&&(p.value=""))},$=t=>{for(const n in o)o[n].key==t&&(p.value=o[n].default());le(()=>{var n;(n=a.value)==null||n.focus()})},b=t=>{p.value=t.target.value},c=(t,n,F)=>{const k=Number(t),V=p.value;if(n=="all_sides")p.value=k+"px";else if(n=="XY sides"){const A=V.split(" ");F=="x"?A[1]=k+"px":F=="y"&&(A[0]=k+"px"),p.value=A.join(" ")}else if(n=="Per side"){const A=V.split(" ");F=="top"?A[0]=k+"px":F=="right"?A[1]=k+"px":F=="bottom"?A[2]=k+"px":F=="left"&&(A[3]=k+"px"),p.value=A.join(" ")}};return ie(()=>{l.value.addEventListener("focus",w)}),ge(()=>{l.value.removeEventListener("focus",w)}),(t,n)=>(s(),B("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":f.fieldKey},[x(se,{tabs:v(_e),"model-value":_.value,"onUpdate:modelValue":M},null,8,["tabs","model-value"]),_.value=="pick"||_.value=="css"?(s(),B("div",$n,[_.value=="pick"?(s(),B("div",Tn,[x(v(r),{ref_key:"pickerEl",ref:d,"model-value":h.value,options:S.value,"onUpdate:modelValue":$},null,8,["model-value","options"]),C("div",Vn,[h.value=="all_sides"?(s(),B(j,{key:0},[n[7]||(n[7]=C("i",null,"All",-1)),x(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value[0],"onUpdate:modelValue":n[0]||(n[0]=F=>c(F,h.value))},null,8,["model-value"]),n[8]||(n[8]=C("div",null,"px",-1))],64)):E("",!0),h.value=="XY sides"?(s(),B(j,{key:1},[n[9]||(n[9]=C("i",null,"X",-1)),x(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[1]||(n[1]=F=>c(F,h.value,"x"))},null,8,["model-value"]),n[10]||(n[10]=C("div",null,"px",-1)),n[11]||(n[11]=C("i",null,"Y",-1)),x(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[2]||(n[2]=F=>c(F,h.value,"y"))},null,8,["model-value"]),n[12]||(n[12]=C("div",null,"px",-1))],64)):E("",!0),h.value=="Per side"?(s(),B(j,{key:2},[n[13]||(n[13]=C("i",null,"Left",-1)),x(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[3]||(n[3]=F=>c(F,h.value,"left"))},null,8,["model-value"]),n[14]||(n[14]=C("div",null,"px",-1)),n[15]||(n[15]=C("i",null,"Right",-1)),x(ee,{type:"number","model-value":u.value[1],"onUpdate:modelValue":n[4]||(n[4]=F=>c(F,h.value,"right"))},null,8,["model-value"]),n[16]||(n[16]=C("div",null,"px",-1)),n[17]||(n[17]=C("i",null,"Top",-1)),x(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[5]||(n[5]=F=>c(F,h.value,"top"))},null,8,["model-value"]),n[18]||(n[18]=C("div",null,"px",-1)),n[19]||(n[19]=C("i",null,"Bottom",-1)),x(ee,{type:"number","model-value":u.value[3],"onUpdate:modelValue":n[6]||(n[6]=F=>c(F,h.value,"bottom"))},null,8,["model-value"]),n[20]||(n[20]=C("div",null,"px",-1))],64)):E("",!0)])])):E("",!0),_.value=="css"?(s(),T(ne,{key:1,ref_key:"freehandInputEl",ref:i,value:v(p),error:e.error,onInput:b},null,8,["value","error"])):E("",!0)])):E("",!0)],8,xn))}}),On=U(Fn,[["__scopeId","data-v-e122e664"]]),Mn=["data-automation-key"],qn={key:0,class:"main"},An={key:0,class:"pickerContainer"},Dn={class:"param"},Rn={class:"header"},Wn=["value"],Pn={class:"param"},Un={class:"header"},Kn=["value"],jn={class:"param"},Ln={class:"header"},Nn=["value"],zn={class:"param"},Jn={class:"header"},Gn=["value"],Yn={class:"param"},Hn=["value"],Xn=D({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=K("rootEl"),l=K("freehandInputEl"),d=K("paramOffsetXEl"),i=K("paramOffsetYEl"),a=K("paramBlurRadiusEl"),o=K("paramSpreadRadiusEl"),g=K("paramColorEl"),f={pick:d,css:l,default:null},p=e,S=G({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),h=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,m=N((()=>{const b=S.value;return b?h.test(b)?"pick":"css":"default"})()),y=()=>{var c;const b=(c=f[m.value])==null?void 0:c.value;b&&(b.focus(),typeof b.selectionStart=="number"&&(b.selectionStart=b.selectionEnd=b.value.length))},_=async b=>{m.value!=b&&(m.value=b,await le(),y(),b==="default"&&(S.value=""))},w=()=>{const b=d.value.value,c=i.value.value,t=a.value.value,n=o.value.value,F=g.value.value,k=`${b}px ${c}px ${t}px ${n}px ${F}`;S.value=k},M=b=>{S.value=b.target.value},$=I(()=>{const b=S.value.match(h);return(b==null?void 0:b.groups)??{}});return ie(()=>{r.value.addEventListener("focus",y)}),ge(()=>{r.value.removeEventListener("focus",y)}),(b,c)=>{var t,n,F,k,V,A,L,be,he,ce,De,Re,We;return s(),B("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":p.fieldKey},[x(se,{tabs:v(_e),"model-value":m.value,"onUpdate:modelValue":_},null,8,["tabs","model-value"]),m.value=="pick"||m.value=="css"?(s(),B("div",qn,[m.value=="pick"?(s(),B("div",An,[C("div",Dn,[C("div",Rn,[c[0]||(c[0]=C("div",{class:"name"},"Offset X",-1)),pe(C("div",{class:"value"},J((t=$.value)==null?void 0:t.offsetX)+"px ",513),[[ke,(n=$.value)==null?void 0:n.offsetX]])]),C("input",{ref_key:"paramOffsetXEl",ref:d,type:"range",min:"0",max:"32",value:(F=$.value)==null?void 0:F.offsetX,onInput:w},null,40,Wn)]),C("div",Pn,[C("div",Un,[c[1]||(c[1]=C("div",{class:"name"},"Offset Y",-1)),pe(C("div",{class:"value"},J((k=$.value)==null?void 0:k.offsetY)+"px ",513),[[ke,(V=$.value)==null?void 0:V.offsetY]])]),C("input",{ref_key:"paramOffsetYEl",ref:i,type:"range",min:"0",max:"32",value:(A=$.value)==null?void 0:A.offsetY,onInput:w},null,40,Kn)]),C("div",jn,[C("div",Ln,[c[2]||(c[2]=C("div",{class:"name"},"Blur radius",-1)),pe(C("div",{class:"value"},J((L=$.value)==null?void 0:L.blurRadius)+"px ",513),[[ke,(be=$.value)==null?void 0:be.blurRadius]])]),C("input",{ref_key:"paramBlurRadiusEl",ref:a,type:"range",min:"0",max:"32",value:(he=$.value)==null?void 0:he.blurRadius,onInput:w},null,40,Nn)]),C("div",zn,[C("div",Jn,[c[3]||(c[3]=C("div",{class:"name"},"Spread radius",-1)),pe(C("div",{class:"value"},J((ce=$.value)==null?void 0:ce.spreadRadius)+"px ",513),[[ke,(De=$.value)==null?void 0:De.spreadRadius]])]),C("input",{ref_key:"paramSpreadRadiusEl",ref:o,type:"range",min:"-16",max:"32",value:(Re=$.value)==null?void 0:Re.spreadRadius,onInput:w},null,40,Gn)]),C("div",Yn,[c[4]||(c[4]=C("div",{class:"header"},[C("div",{class:"name"},"Color")],-1)),C("input",{ref_key:"paramColorEl",ref:g,type:"color",value:(We=$.value)==null?void 0:We.color,onInput:w},null,40,Hn)])])):E("",!0),m.value=="css"?(s(),T(ne,{key:1,ref_key:"freehandInputEl",ref:l,value:v(S),error:e.error,onInput:M},null,8,["value","error"])):E("",!0)])):E("",!0)],8,Mn)}}}),Qn=U(Xn,[["__scopeId","data-v-c59dcd63"]]),Zn=["data-automation-key"],eo={key:0,class:"main"},to={key:0,class:"pickerContainer"},no={key:0,class:"fixedContainer"},oo=D({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(c=>c.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=K("rootEl"),d=K("pickerEl"),i=K("freehandInputEl"),a=K("fixedEl"),o=[{key:"fixed",label:"Fixed",match:c=>c.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:c=>c=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:c=>c=="100%",default:"100%"}],g={pick:d,css:i,default:null},f=e,p=G({componentId:q(f,"componentId"),fieldKey:q(f,"fieldKey")}),S=I(()=>o.map(c=>({value:c.key,label:c.label,icon:"move-horizontal"}))),h=I(()=>{const c=p.value;for(const t in o)if(c&&o[t].match(c))return o[t].key;return null}),u=I(()=>{const c=p.value;if(c){if(c.endsWith("px"))return c.substring(0,c.length-2)}else return null;return null}),y=N((()=>{if(!p.value)return"default";for(const c in o)if(o[c].match(p.value))return"pick";return"css"})()),_=()=>{var t;const c=(t=g[y.value])==null?void 0:t.value;c&&(c.focus(),typeof c.selectionStart=="number"&&(c.selectionStart=c.selectionEnd=c.value.length))},w=async c=>{y.value!=c&&(y.value=c,await le(),_(),c==="default"&&(p.value=""))},M=c=>{for(const t in o)if(o[t].key==c){const n=o[t].default;p.value=n}c=="fixed"&&le(()=>{a.value.focus()})},$=c=>{p.value=c.target.value},b=c=>{p.value=`${c}px`};return ie(()=>{l.value.addEventListener("focus",_)}),ge(()=>{l.value.removeEventListener("focus",_)}),(c,t)=>(s(),B("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":f.fieldKey},[x(se,{tabs:v(_e),"model-value":y.value,"onUpdate:modelValue":w},null,8,["tabs","model-value"]),y.value=="pick"||y.value=="css"?(s(),B("div",eo,[y.value=="pick"?(s(),B("div",to,[x(v(r),{ref_key:"pickerEl",ref:d,"model-value":h.value,options:S.value,"onUpdate:modelValue":M},null,8,["model-value","options"]),h.value=="fixed"?(s(),B("div",no,[x(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value,invalid:e.error!==void 0,"onUpdate:modelValue":b},null,8,["model-value","invalid"]),t[0]||(t[0]=C("div",null,"px",-1))])):E("",!0)])):E("",!0),y.value=="css"?(s(),T(ne,{key:1,ref_key:"freehandInputEl",ref:i,value:v(p),onInput:$},null,8,["value"])):E("",!0)])):E("",!0)],8,Zn))}}),lo=U(oo,[["__scopeId","data-v-55a31bea"]]),ao=["data-automation-key"],io={class:"tools"},so=["onClick"],ro={class:"toolName"},uo={class:"addToolForm"},co=D({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(e){const r=Q({loader:()=>Z(()=>import("./BuilderGraphSelect-zv41Lj6H.js"),__vite__mapDeps([13,1,2,14,15]),import.meta.url)}),l=Q({loader:()=>Z(()=>import("./BuilderEmbeddedCodeEditor-YStZIqB0.js").then(c=>c.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),i={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"",binding:!1,includeDomains:"",excludeDomains:"",includeRawContent:!1},a=N(i),o=I(()=>{switch(a.value.type){case"function":return!a.value.code;case"graph":return!a.value.graphIds;case"web_search":return!1;default:return!0}}),g=I({get:()=>a.value.graphIds.split(",").filter(c=>!c.startsWith("@{")),set(c){a.value={...a.value,graphIds:c.join(",")}}}),f=I({get:()=>{const c=Te.exec(a.value.graphIds);return(c==null?void 0:c[1])??""},set(c){a.value={...a.value,graphIds:`@{${c}}`}}}),p=e,S=G({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),h=I(()=>{try{return JSON.parse(S.value)}catch{return{}}});function u(){a.value={...i,isShown:!0}}function m(){const{type:c,code:t,graphIds:n,includeDomains:F,excludeDomains:k,includeRawContent:V}=a.value;if(c=="function")return{...JSON.parse(t),type:c};if(c=="graph"){const A=n.split(",").map(L=>L.trim());return{type:c,graph_ids:A}}if(c=="web_search"){const A={type:c};return F.trim()&&(A.include_domains=F.split(",").map(L=>L.trim()).filter(L=>L)),k.trim()&&(A.exclude_domains=k.split(",").map(L=>L.trim()).filter(L=>L)),V&&(A.include_raw_content=V),A}throw"Unexpected tool type."}function y(c){let t=[];const{originalName:n,name:F}=c;return F||t.push("The name cannot be empty."),Object.keys(h.value).includes(F)&&!(n||n==F)&&t.push("An existing tool with the specified name already exists."),t}function _(){const c=y(a.value);if(c.length>0){c.forEach(alert);return}let t;try{t=m()}catch{alert("Incorrect tool definition");return}const{originalName:n,name:F}=a.value;let k={...h.value};if(n&&n!==F){const{[n]:V,...A}=k;k=A}k[F]=t,S.value=JSON.stringify(k),a.value.isShown=!1}function w(c,t){var F,k,V,A;const{type:n}=t;if(n=="function")return{isShown:!0,type:"function",binding:!1,originalName:c,name:c,graphIds:"",code:JSON.stringify(t,void 0,2),includeDomains:"",excludeDomains:"",includeRawContent:!1};if(n=="graph"){const L=Te.test(((F=t.graph_ids)==null?void 0:F.at(0))??"");return{isShown:!0,type:"graph",originalName:c,name:c,binding:L,graphIds:((k=t.graph_ids)==null?void 0:k.join(","))??"",code:"",includeDomains:"",excludeDomains:"",includeRawContent:!1}}if(n=="web_search")return{isShown:!0,type:"web_search",originalName:c,name:c,graphIds:"",binding:!1,code:"",includeDomains:((V=t.include_domains)==null?void 0:V.join(", "))??"",excludeDomains:((A=t.exclude_domains)==null?void 0:A.join(", "))??"",includeRawContent:t.include_raw_content??!1};throw"Unexpected tool type;"}function M(c){var n;const t=(n=h.value)==null?void 0:n[c];t&&(a.value=w(c,t))}function $(c){const{[c]:t,...n}={...h.value};S.value=JSON.stringify(n)}const b=I(()=>[{desc:"cancel",fn:()=>a.value.isShown=!1},{desc:"Save",disabled:o.value,fn:_}]);return(c,t)=>(s(),B("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":p.fieldKey},[C("div",io,[(s(!0),B(j,null,H(h.value,(n,F)=>(s(),B("div",{key:F,class:"tool",onClick:k=>M(F)},[C("div",ro,J(F),1),x(X,{variant:"primary",size:"smallIcon",class:"delete",onClick:oe(k=>$(F),["stop"])},{default:O(()=>[x(z,{name:"trash-2"})]),_:2},1032,["onClick"])],8,so))),128))]),x(X,{size:"small",onClick:u},{default:O(()=>[x(z,{name:"plus"}),t[9]||(t[9]=ae(" Add tool "))]),_:1}),a.value.isShown?(s(),T(Oe,{key:0,actions:b.value,title:"Add tool","allow-overflow":""},{default:O(()=>[C("div",uo,[x(te,{label:"Tool type"},{default:O(()=>[x(ct,{modelValue:a.value.type,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.type=n)},{default:O(()=>t[10]||(t[10]=[C("option",{value:"function"},"Function",-1),C("option",{value:"graph"},"Knowledge graph",-1),C("option",{value:"web_search"},"Web search",-1)])),_:1},8,["modelValue"])]),_:1}),x(te,{label:"Tool name"},{default:O(()=>[x(ee,{modelValue:a.value.name,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),a.value.type=="function"?(s(),T(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:O(()=>[x(v(l),{modelValue:a.value.code,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.code=n),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):E("",!0),a.value.type=="graph"?(s(),T(te,{key:1,"is-binding-enabled":a.value.binding,"onUpdate:isBindingEnabled":t[5]||(t[5]=n=>a.value.binding=n),label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas.","is-binding-button-shown":""},{default:O(()=>[a.value.binding?(s(),T(ne,{key:0,type:"state",value:f.value,"onUpdate:value":t[3]||(t[3]=n=>f.value=n)},null,8,["value"])):(s(),T(v(r),{key:1,modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=n=>g.value=n),"enable-multi-selection":""},null,8,["modelValue"]))]),_:1},8,["is-binding-enabled"])):E("",!0),a.value.type=="web_search"?(s(),T(te,{key:2,label:"Include domains (optional)",hint:"Comma-separated list of domains to search within (e.g., wikipedia.org, docs.python.org)"},{default:O(()=>[x(ee,{modelValue:a.value.includeDomains,"onUpdate:modelValue":t[6]||(t[6]=n=>a.value.includeDomains=n),placeholder:"domain1.com, domain2.org"},null,8,["modelValue"])]),_:1})):E("",!0),a.value.type=="web_search"?(s(),T(te,{key:3,label:"Exclude domains (optional)",hint:"Comma-separated list of domains to exclude from results"},{default:O(()=>[x(ee,{modelValue:a.value.excludeDomains,"onUpdate:modelValue":t[7]||(t[7]=n=>a.value.excludeDomains=n),placeholder:"spam.com, ads.net"},null,8,["modelValue"])]),_:1})):E("",!0),a.value.type=="web_search"?(s(),T(te,{key:4,label:"Include raw content",hint:"Include full page content in search results"},{default:O(()=>[x(qe,{modelValue:a.value.includeRawContent,"onUpdate:modelValue":t[8]||(t[8]=n=>a.value.includeRawContent=n),label:"Include raw content"},null,8,["modelValue"])]),_:1})):E("",!0)])]),_:1},8,["actions"])):E("",!0)],8,ao))}}),po=U(co,[["__scopeId","data-v-9b70cc0d"]]),vo=["data-automation-key"],mo={class:"availableMcpTools"},fo={class:"sectionHeader"},yo={key:0,class:"errorState"},go={key:1,class:"loadingState"},_o={key:2,class:"emptyState"},bo=["onClick"],ho={class:"iconContainer"},ko=["src","alt"],So={class:"appName"},Io={key:1,class:"selectedCount"},Bo={key:0,class:"mcpFunctionsList"},Co=["data-writer-tooltip"],wo=["onClick"],Eo={class:"functionName"},xo={key:0,class:"functionDescription"},$o=D({__name:"BuilderFieldsToolsWithMcp",props:{componentId:{},fieldKey:{}},setup(e){const r=R(W.core),l=Le(),{writerApi:d}=pt(),i=N([]),a=N(!1),o=N(void 0),g=N(new Set),f=I(()=>{var b;const $={};for(const c of i.value){const t=c.appName||"Unknown App";$[t]||($[t]={functions:[],logo:(b=c.connector)==null?void 0:b.logo}),$[t].functions.push(c)}return $}),p=I(()=>{const $={};for(const[b,c]of Object.entries(f.value))$[b]=c.functions.filter(t=>u(t)).length;return $});function S($){g.value.has($)?g.value.delete($):g.value.add($)}function h($){return`${$.appName}_${$.functionName}`.replace(/[^a-zA-Z0-9_]/g,"_")}function u($){return h($)in M.value}function m($,b){const c=h($);if(b){const t={type:"mcp",appId:$.appId,functionName:$.functionName,function:$.function};w.value=JSON.stringify({...M.value,[c]:t})}else{const{[c]:t,...n}=M.value;w.value=JSON.stringify(n)}}async function y(){const $=r.writerOrgId.value;if(!$){o.value=new Error("No organization ID available");return}a.value=!0,o.value=void 0;try{const b=r.writerAppId.value;i.value=await d.fetchMcpTools($,b)}catch(b){const c=b instanceof Error?b:new Error(String(b));o.value=c,i.value=[]}finally{a.value=!1}}ie(()=>{y()});const _=e,w=G({componentId:q(_,"componentId"),fieldKey:q(_,"fieldKey")}),M=I(()=>{try{return JSON.parse(w.value)}catch($){return l.error($),{}}});return($,b)=>(s(),B("div",{class:"BuilderFieldsToolsWithMcp colorTransformer","data-automation-key":_.fieldKey},[C("div",mo,[C("div",fo,[b[2]||(b[2]=C("div",{class:"sectionTitle"},"Available MCP Tools",-1)),x(X,{size:"small",variant:"secondary",loading:a.value,onClick:b[0]||(b[0]=c=>y())},{default:O(()=>[x(z,{name:"refresh-cw"}),b[1]||(b[1]=ae(" Refresh "))]),_:1},8,["loading"])]),o.value?(s(),B("div",yo,[ae(" Error loading MCP tools: "+J(o.value.message)+" ",1),b[3]||(b[3]=C("br",null,null,-1)),b[4]||(b[4]=C("small",null,"Check console for details",-1))])):a.value&&i.value.length===0?(s(),B("div",go,[(s(),B(j,null,H(3,c=>C("div",{key:c,class:"loadingSkeleton"},[x(Pe,{style:{width:"200px","margin-bottom":"8px"}}),x(Pe,{style:{width:"150px"}})])),64))])):i.value.length===0?(s(),B("div",_o,b[5]||(b[5]=[ae(" No MCP tools available "),C("br",null,null,-1),C("small",null,"Make sure you have connected MCP applications with enabled functions",-1)]))):(s(),B("div",{key:3,class:re(["mcpToolsList",{loading:a.value}])},[(s(!0),B(j,null,H(f.value,(c,t)=>(s(),B("div",{key:t,class:re(["mcpAppGroup",{expanded:g.value.has(t)}])},[C("div",{class:re(["mcpAppHeader",{expanded:g.value.has(t)}]),onClick:n=>S(t)},[C("div",ho,[x(z,{name:g.value.has(t)?"minus":"plus",class:"expandIcon"},null,8,["name"])]),c.logo?(s(),B("img",{key:0,src:c.logo,alt:`${t} logo`,class:"appLogo"},null,8,ko)):E("",!0),C("span",So,J(t),1),p.value[t]>0?(s(),B("span",Io,J(p.value[t])+" selected ",1)):E("",!0)],10,bo),g.value.has(t)?(s(),B("div",Bo,[(s(!0),B(j,null,H(c.functions,n=>{var F,k;return s(),B("div",{key:`${n.appId}-${n.functionName}`,class:"mcpFunctionItem","data-writer-tooltip":(F=n.function)==null?void 0:F.description,"data-writer-tooltip-placement":"left"},[x(qe,{class:"functionCheckbox","model-value":u(n),"onUpdate:modelValue":V=>m(n,V)},null,8,["model-value","onUpdate:modelValue"]),C("div",{class:"functionInfo",onClick:V=>m(n,!u(n))},[C("div",Eo,J(n.functionName),1),(k=n.function)!=null&&k.description?(s(),B("div",xo,J(n.function.description),1)):E("",!0)],8,wo)],8,Co)}),128))])):E("",!0)],2))),128))],2))])],8,vo))}}),To=U($o,[["__scopeId","data-v-c8204108"]]),Vo=D({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0}},setup(e){const r=Q({loader:()=>Z(()=>import("./BuilderEmbeddedCodeEditor-YStZIqB0.js").then(i=>i.B),__vite__mapDeps([11,1,2,12]),import.meta.url)}),l=e,d=G({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey")});return(i,a)=>(s(),T(v(r),{modelValue:v(d),"onUpdate:modelValue":a[0]||(a[0]=o=>fe(d)?d.value=o:null),language:e.inputLanguage,variant:e.isExpanded?"half-screen":"minimal",class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),Ke=U(Vo,[["__scopeId","data-v-6379f7e6"]]),Fo=["data-automation-key"],Oo=D({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(p=>p.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=R(W.core),d=R(W.builderManager),i=e,a=G({componentId:q(i,"componentId"),fieldKey:q(i,"fieldKey")}),o=I(()=>{const p=new Set;for(const u of l.getComponents("blueprints_root"))u.content.key&&p.add(u.content.key);const S=[...p].sort((u,m)=>u.localeCompare(m)).map(u=>({value:u,label:u,icon:"wds-blueprints"})),h=[{value:"",label:"(No blueprint)",icon:"block"},...S];if(!h.some(u=>u.value===a.value)){const u=a.value;h.push({value:u,label:u})}return h}),g=I(()=>{const p=l.getComponents("blueprints_root").find(S=>S.content.key===a.value);return p==null?void 0:p.id});function f(){g.value&&(d.setSelection(g.value,null,"click"),l.setActivePageId(g.value))}return(p,S)=>(s(),B("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":i.fieldKey},[x(v(r),{modelValue:v(a),"onUpdate:modelValue":S[0]||(S[0]=h=>fe(a)?a.value=h:null),options:o.value},null,8,["modelValue","options"]),g.value?(s(),T(X,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:f},{default:O(()=>[x(z,{name:"square-dashed-mouse-pointer"})]),_:1})):E("",!0)],8,Fo))}}),Mo=U(Oo,[["__scopeId","data-v-f1beb9af"]]),qo=["data-automation-key"],Ao=D({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const r=R(W.core),l=e,d=I(()=>r.getComponentById(l.componentId)),i=I(()=>{var a;return((a=d.value)==null?void 0:a.parentId)??""});return(a,o)=>(s(),B("div",{class:"BuilderFieldsBlueprintId","data-automation-key":l.fieldKey},[x(ee,{"model-value":i.value,disabled:""},null,8,["model-value"])],8,qo))}}),Do=U(Ao,[["__scopeId","data-v-23c33b8b"]]),Ro=["data-automation-key"],Wo=D({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(o=>o.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=R(W.core),d=e,i=G({componentId:q(d,"componentId"),fieldKey:q(d,"fieldKey")}),a=I(()=>{const o=l.userFunctions.value.map(f=>f.name).sort((f,p)=>f.localeCompare(p)).map(f=>({value:f,label:f,icon:"wds-function"})),g=[{value:"",label:"(No handler)",icon:"ban"},...o];if(!g.some(f=>f.value===i.value)){const f=i.value;g.push({value:f,label:f})}return g});return(o,g)=>(s(),B("div",{class:"BuilderFieldsHandler","data-automation-key":d.fieldKey},[x(v(r),{modelValue:v(i),"onUpdate:modelValue":g[0]||(g[0]=f=>fe(i)?i.value=f:null),options:a.value},null,8,["modelValue","options"])],8,Ro))}}),Po=["data-automation-key"],Uo=["href","data-writer-tooltip"],Ko=D({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(e){const r=Q({loader:()=>Z(()=>import("./BuilderApplicationSelect-DTRKvnlW.js"),__vite__mapDeps([16,1,2,14,17]),import.meta.url)}),l=Q({loader:()=>Z(()=>import("./BuilderGraphSelect-zv41Lj6H.js"),__vite__mapDeps([13,1,2,14,15]),import.meta.url)}),d=Q({loader:()=>Z(()=>import("./BuilderModelSelect-CZbsOukX.js"),__vite__mapDeps([18,1,2,14,19]),import.meta.url)}),i=e,a=G({componentId:q(i,"componentId"),fieldKey:q(i,"fieldKey")}),{isBindingMode:o,toggleBindingMode:g}=Ze({fieldViewModel:a}),f=G({componentId:q(i,"componentId"),fieldKey:"appInputs"}),p=K("selectorEl"),S=I(()=>{switch(i.resourceType){case"model":return d;case"graph":return l;case"application":return r;default:throw new Error(`Unexpected resourceType: ${i.resourceType}`)}}),h=I(()=>{switch(i.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),u=I(()=>{var M,$;if(Array.isArray(m.value))return;const _=m.value;if(!_)return;const w=($=(M=p.value)==null?void 0:M.selectedData)==null?void 0:$.organization_id;if(w)switch(i.resourceType){case"graph":{const b=new URLSearchParams({graphId:_});return`https://app.writer.com/aistudio/organization/${w}/knowledge-graph?${b}`}case"application":return`https://app.writer.com/aistudio/organization/${w}/app/${_}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),m=I({get(){if(i.enableMultiSelection){const _=a.value||"[]";try{return JSON.parse(_)}catch{return[]}}return a.value},set(_){a.value=i.enableMultiSelection?JSON.stringify(_):String(_)}});function y(_){i.resourceType!=="application"||!_||!_.inputs||typeof _.inputs!="object"||(f.value=JSON.stringify(_.inputs))}return(_,w)=>(s(),T(te,{"is-binding-button-shown":e.isBindingButtonShown,"is-binding-enabled":v(o),label:e.label,unit:e.unit,hint:e.hint,error:e.error,"data-automation-key":e.fieldKey,"onUpdate:isBindingEnabled":v(g)},{default:O(()=>[C("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":e.fieldKey},[v(o)?(s(),T(Ae,{key:0,type:"state-template","component-id":e.componentId,"field-key":e.fieldKey,error:e.error,"default-value":""},null,8,["component-id","field-key","error"])):(s(),T(Ve(S.value),{key:1,ref_key:"selectorEl",ref:p,modelValue:m.value,"onUpdate:modelValue":w[0]||(w[0]=M=>m.value=M),"enable-multi-selection":e.enableMultiSelection,onSelectedData:y},null,40,["modelValue","enable-multi-selection"])),u.value?(s(),B("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:u.value,target:"_blank","data-writer-tooltip":h.value},[x(z,{name:"external-link"})],8,Uo)):E("",!0)],8,Po)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),Se=U(Ko,[["__scopeId","data-v-59e28cc4"]]),jo=["data-automation-key"],Lo=D({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(u=>u.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=R(W.core),d=R(W.builderManager),i=e,a=G({componentId:q(i,"componentId"),fieldKey:q(i,"fieldKey")});function*o(){yield l.getComponentById("root"),yield*l.getComponentsNested("root")}const g=I(()=>{const u=[];for(const m of o()){const y=l.getComponentDefinition(m==null?void 0:m.type);if(!(y!=null&&y.events)||Object.keys(y.events).length===0)continue;const{name:_,previewText:w,possibleImageUrls:M}=Qe(l,m),$=M.value,b=m.id;u.push({value:b,label:w.value||_.value,detail:w.value?_.value:void 0,icon:$})}return u}),f=I({get:()=>a.value,set(u){a.value=String(u)}}),p=I(()=>{let u=f.value;for(;u;){const m=l.getComponentById(u);if(m.type==="page")return m.id;u=m.parentId}}),S=I(()=>l.getComponentById(f.value));function h(){!f.value||!S.value||(p.value&&(d.mode.value="ui",l.setActivePageId(p.value)),d.setSelection(f.value,null,"click"))}return(u,m)=>(s(),B("div",{class:"BuilderFieldsComponentId","data-automation-key":i.fieldKey},[x(v(r),{modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=y=>f.value=y),options:g.value,"enable-search":""},null,8,["modelValue","options"]),f.value?(s(),T(X,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!S.value,onClick:h},{default:O(()=>[x(z,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):E("",!0)],8,jo))}}),No=U(Lo,[["__scopeId","data-v-fcce992f"]]),zo=["data-automation-key"],Jo=D({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(e){const r=Q({loader:()=>Z(()=>import("./index-DgecPIuV.js").then(p=>p.bo),__vite__mapDeps([1,2]),import.meta.url)}),l=R(W.core),d=e,i=G({componentId:q(d,"componentId"),fieldKey:q(d,"fieldKey")}),a=I(()=>l.getComponentById(d.componentId)),o=I(()=>{var p;return l.getComponentDefinition((p=a.value)==null?void 0:p.type)}),g=I(()=>{var m,y;const p=(y=Object.entries(((m=o.value)==null?void 0:m.fields)??{}).find(([,_])=>_.type===P.ComponentId))==null?void 0:y.at(0);if(p===void 0)return[];const S=a.value.content[String(p)],h=l.getComponentById(S),u=l.getComponentDefinition(h==null?void 0:h.type);return u!=null&&u.events?Object.keys(u.events).map(_=>({value:_,label:_})):[]}),f=I({get:()=>i.value,set(p){i.value=String(p)}});return(p,S)=>(s(),B("div",{class:"BuilderFieldsComponentEventType","data-automation-key":d.fieldKey},[g.value.length?(s(),T(v(r),{key:0,modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=h=>f.value=h),options:g.value,"hide-icons":""},null,8,["modelValue","options"])):(s(),T(ee,{key:1,modelValue:f.value,"onUpdate:modelValue":S[1]||(S[1]=h=>f.value=h)},null,8,["modelValue"]))],8,zo))}});function Go(e,r,l){const{getEvaluatedFields:d}=Ee(e,l);function i(p){return!!Te.exec(p)}const a=I(()=>{var p;return(p=r.value.at(-1))==null?void 0:p.componentId}),o=I(()=>{if(a.value!==void 0)return e.getComponentById(a.value)}),g=I(()=>{var p,S;return(p=o.value)!=null&&p.type?((S=e.getComponentDefinition(o.value.type))==null?void 0:S.fields)??{}:{}}),f=I(()=>d(r.value));return I(()=>Object.entries(g.value).reduce((p,[S,h])=>{var y;const u=((y=o.value.content)==null?void 0:y[S])??"";if(i(u))return p;const m=f.value[S].value;return p[S]=Yo(e,a.value,h,m),p},{}))}function Yo(e,r,l,d){let i=l.validator;if(i===void 0&&typeof l.options=="object"&&l.options!==null&&Object.keys(l.options).length>0?i=vt(Object.keys(l.options)):typeof i=="function"&&(i=i(e,r)),i===void 0)return;const a=mt(i);if(!(a(d)||a.errors===void 0))return Xo(a.errors)}function Ho(e){var l;if(e.keyword==="format"&&Object.values(ft).includes(e.params.format))return yt[e.params.format].errorMessage;let r="";return e.instancePath&&(r+=`${e.instancePath} `),r+=e.message,Array.isArray((l=e.params)==null?void 0:l.allowedValues)&&(r+=`: ${e.params.allowedValues.join(", ")}`),r}function Xo(e){return e.map(Ho).join(`
`)}const Qo={key:0,class:"BuilderSettingsProperties"},Zo=["inert"],el=D({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(e){const r=R(W.core),l=R(W.builderManager),d=R(W.secretsManager),i=N(new Set),a=I(()=>{var t,n;return Ye((n=(t=l.firstSelectedItem)==null?void 0:t.value)==null?void 0:n.instancePath)}),o=I(()=>r.getComponentById(l.firstSelectedId.value)),g=I(()=>{var t;return r.getComponentDefinition((t=o.value)==null?void 0:t.type)}),{getEvaluatedFields:f}=Ee(r,d),p=I(()=>f(a.value)),S=I(()=>{var n;const t=Object.entries(((n=g.value)==null?void 0:n.fields)??{}).filter(([F,k])=>k.isArtifactField?!1:k.enabled===void 0?!0:k.enabled({evaluatedFields:p.value}));return Object.fromEntries(t)});function h(t){return t.type===P.Code||t.type===P.JSONInput||t.type===P.Object||t.control===Ie.Textarea}const u=Go(r,a,d),m=N(Y.General),y=Object.freeze({[Y.General]:"Configure",[Y.Style]:"Style",[Y.Tools]:"Tools"}),_=I(()=>w.value.map(t=>({label:y[t]??t,value:t}))),w=I(()=>[Y.General,Y.Style,Y.Tools].filter(t=>{var n;return(n=M.value[t])==null?void 0:n.length})),M=I(()=>{const t={[Y.General]:[],[Y.Style]:[],[Y.Tools]:[]};return Object.entries(S.value).forEach(([n,F])=>{const k=F.category||Y.General;t[k]&&t[k].push([n,F])}),{[Y.General]:$(t[Y.General]),[Y.Style]:$(t[Y.Style]),[Y.Tools]:$(t[Y.Tools])}});function $(t){return t.map((n,F)=>[n,F]).sort(([n,F],[k,V])=>{const A=n[1].order??0;return(k[1].order??0)-A||F-V}).map(([n])=>n)}function b(t){i.value.add(t)}function c(t){i.value.delete(t)}return(t,n)=>v(l).isSingleSelectionActive?(s(),B("div",Qo,[w.value.length>1?(s(),T(se,{key:0,modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=F=>m.value=F),variant:"bar",tabs:_.value},null,8,["modelValue","tabs"])):E("",!0),(s(!0),B(j,null,H(w.value.length>1?[m.value]:w.value,F=>(s(),B("div",{key:F,inert:e.isReadOnly,class:"BuilderSettingsProperties__category"},[(s(!0),B(j,null,H(M.value[F],([k,V])=>(s(),B("div",{key:k,class:"BuilderSettingsProperties__category__field"},[V.type===v(P).Boolean?(s(),T(vn,{key:0,"field-key":k,"component-id":o.value.id,label:V.name??k,hint:V.desc,unit:V.type,error:v(u)[k]},null,8,["field-key","component-id","label","hint","unit","error"])):V.type===v(P).WriterGraphId?(s(),T(Se,{key:1,"is-binding-button-shown":"","field-key":k,"component-id":o.value.id,label:V.name??k,hint:V.desc,unit:V.type,error:v(u)[k],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):V.type===v(P).WriterGraphIds?(s(),T(Se,{key:2,"is-binding-button-shown":"","field-key":k,"component-id":o.value.id,label:V.name??k,hint:V.desc,unit:V.type,error:v(u)[k],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):V.type===v(P).WriterAppId?(s(),T(Se,{key:3,"field-key":k,"component-id":o.value.id,label:V.name??k,hint:V.desc,unit:V.type,error:v(u)[k],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):V.type===v(P).WriterModelId?(s(),T(Se,{key:4,"field-key":k,"component-id":o.value.id,label:V.name??k,hint:V.desc,unit:V.type,error:v(u)[k],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(s(),T(te,{key:5,label:F==="Tools"?void 0:V.name??k,hint:V.desc,unit:V.type,error:v(u)[k],"is-expansible":h(V),onExpand:A=>b(k),onShrink:A=>c(k)},{default:O(()=>[V.type==v(P).Color?(s(),T(rn,{key:0,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).Shadow?(s(),T(Qn,{key:1,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).KeyValue?(s(),T(Cn,{key:2,"field-key":k,"component-id":o.value.id,"instance-path":a.value,error:v(u)[k]},null,8,["field-key","component-id","instance-path","error"])):E("",!0),V.type==v(P).Text||V.type==v(P).Number||V.type==v(P).Binding||V.type==v(P).IdKey?(s(),T(Ae,{key:3,type:V.type==v(P).Binding?"state":"template","field-key":k,"field-control":V.control,"component-id":o.value.id,"default-value":V.default,error:v(u)[k]},null,8,["type","field-key","field-control","component-id","default-value","error"])):E("",!0),V.type==v(P).BlueprintId?(s(),T(Do,{key:4,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):E("",!0),V.type==v(P).BlueprintKey?(s(),T(Mo,{key:5,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):E("",!0),V.type==v(P).Handler?(s(),T(Wo,{key:6,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):E("",!0),V.type==v(P).Object?(s(),T(En,{key:7,"field-key":k,"component-id":o.value.id,"default-value":V.default,error:v(u)[k]},null,8,["field-key","component-id","default-value","error"])):E("",!0),V.type==v(P).JSONInput?(s(),T(Ke,{key:8,"field-key":k,"component-id":o.value.id,"is-expanded":i.value.has(k),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):E("",!0),V.type==v(P).Width?(s(),T(lo,{key:9,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).HAlign?(s(),T(Ue,{key:10,direction:"horizontal","field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).VAlign?(s(),T(Ue,{key:11,direction:"vertical","field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).Padding?(s(),T(On,{key:12,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).Tools&&o.value.type==="blueprints_writerchatreplywithtoolconfig"?(s(),T(To,{key:13,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):V.type==v(P).Tools?(s(),T(po,{key:14,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):E("",!0),V.type==v(P).Code?(s(),T(Ke,{key:15,"field-key":k,"component-id":o.value.id,"is-expanded":i.value.has(k),"input-language":"python"},null,8,["field-key","component-id","is-expanded"])):E("",!0),V.type==v(P).ComponentId?(s(),T(No,{key:16,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0),V.type==v(P).ComponentEventType?(s(),T(Jo,{key:17,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):E("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"]))]))),128))],8,Zo))),128))])):E("",!0)}}),tl=U(el,[["__scopeId","data-v-7a2e8e5b"]]),nl={},ol={class:"WdsTitle"};function ll(e,r){return s(),B("h2",ol,[Ge(e.$slots,"default",{},void 0,!0)])}const et=U(nl,[["render",ll],["__scopeId","data-v-3b68d589"]]),al=["inert"],il="Connect the result of this block to a dynamic variable you can use across this agent",sl=D({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(e){const r=R(W.core),l=R(W.builderManager),d=R(W.secretsManager),i=we(r,l),{getEvaluatedFields:a}=Ee(r,d),o=I(()=>{var h,u;return Ye((u=(h=l.firstSelectedItem)==null?void 0:h.value)==null?void 0:u.instancePath)}),g=I(()=>r.getComponentById(l.firstSelectedId.value)),f=I(()=>a(o.value)),p=I(()=>{const h=r.getComponentDefinition(g.value.type);return h?Object.entries(h.events).filter(([,y])=>y.bindable?y.enabled===void 0?!0:y.enabled({evaluatedFields:f.value}):!1).map(([y])=>y)[0]:void 0});function S(h){i.setBinding(l.firstSelectedId.value,h,p.value)}return me(p,()=>{var u;if(!p.value)return;const h=(u=g.value)==null?void 0:u.binding;h!=null&&h.stateRef&&p.value!==h.eventType&&S(h.stateRef)}),(h,u)=>v(l).isSingleSelectionActive?(s(),B("div",{key:0,inert:e.isReadOnly,class:"BuilderSettingsBinding"},[x(et,null,{default:O(()=>u[1]||(u[1]=[ae("Binding")])),_:1}),x(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:il},{default:O(()=>{var m;return[x(ne,{type:"state",value:(m=g.value.binding)==null?void 0:m.stateRef,"component-id":v(l).firstSelectedId.value,onInput:u[0]||(u[0]=y=>S(y.target.value))},null,8,["value","component-id"])]}),_:1})],8,al)):E("",!0)}}),rl=U(sl,[["__scopeId","data-v-f92e4a05"]]),ul=["inert"],dl={class:"main"},cl={class:"flexRow"},pl=["checked"],vl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',ml=D({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(e){const r=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],l=I({get(){const g=o.value.visible;return(g==null?void 0:g.expression)==="custom"?"custom":g===void 0||g.expression===!0?"yes":"no"},set(g){var f,p;g==="custom"?a(o.value.id,"custom",(f=o.value.visible)==null?void 0:f.binding,(p=o.value.visible)==null?void 0:p.reversed):a(o.value.id,g==="yes")}}),d=R(W.core),i=R(W.builderManager),{setVisibleValue:a}=we(d,i),o=I(()=>d.getComponentById(i.firstSelectedId.value));return(g,f)=>v(i).isSingleSelectionActive?(s(),B("div",{key:0,inert:e.isReadOnly,class:"BuilderSettingsVisibility"},[x(et,null,{default:O(()=>f[3]||(f[3]=[ae("Visibility")])),_:1}),C("div",dl,[x(se,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=p=>l.value=p),tabs:r},null,8,["modelValue"]),typeof o.value.visible<"u"&&o.value.visible.expression==="custom"?(s(),T(te,{key:0,hint:vl},{default:O(()=>[x(ne,{value:o.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:f[1]||(f[1]=p=>v(a)(o.value.id,"custom",p.target.value,o.value.visible.reversed))},null,8,["value"]),C("div",cl,[C("input",{type:"checkbox",checked:o.value.visible.reversed,onInput:f[2]||(f[2]=p=>v(a)(o.value.id,"custom",o.value.visible.binding,p.target.checked))},null,40,pl),f[4]||(f[4]=C("span",null,"Reverse",-1))])]),_:1})):E("",!0)])],8,ul)):E("",!0)}}),fl=U(ml,[["__scopeId","data-v-c4316bf1"]]),je={apiTriggerDetails:Q({loader:()=>Z(()=>import("./BuilderSettingsArtifactAPITriggerDetails-ClaoyKKQ.js"),__vite__mapDeps([20,1,2,8,9,3,4,5,6,7,21]),import.meta.url)})},yl={class:"BuilderSettingsMain"},gl={key:0,class:"BuilderSettingsMain__description"},_l={key:1,class:"BuilderSettingsMain__warning cmc-warning"},bl={class:"BuilderSettingsMain__section"},hl={class:"BuilderSettingsMain__componentId"},kl=D({__name:"BuilderSettingsMain",setup(e){const r=Q({loader:()=>Z(()=>import("./BuilderSettingsHandlers-C1uvLWEi.js"),__vite__mapDeps([22,1,2,23,5,6,24,25,26,3,4,7,8,9,27]),import.meta.url)}),l=R(W.core),d=R(W.builderManager),i=I(()=>l.getComponentById(d.firstSelectedId.value)),a=I(()=>i.value.isCodeManaged),o=I(()=>d.isSingleSelectionActive.value?!g.value.toolkit||g.value.toolkit=="core":!1),g=I(()=>{const{type:y}=i.value;return l.getComponentDefinition(y)});me(i,y=>{y||d.setSelection(null)});const{copy:f,copied:p}=He();function S(){f(d.firstSelectedId.value)}const h=I(()=>{var y;return Object.values(((y=g.value)==null?void 0:y.events)??{}).some(_=>_.bindable)}),u=I(()=>{var y;return(((y=g.value)==null?void 0:y.settingsArtifacts)??[]).filter(_=>_.position!=="bottom")}),m=I(()=>{var y;return(((y=g.value)==null?void 0:y.settingsArtifacts)??[]).filter(_=>_.position==="bottom")});return(y,_)=>(s(),B("div",yl,[g.value.description?(s(),B("p",gl,J(g.value.description),1)):E("",!0),a.value?(s(),B("p",_l,[C("span",null,[x(z,{name:"triangle-alert"})]),_[0]||(_[0]=C("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):E("",!0),C("div",bl,[x(tl,{"is-read-only":a.value},null,8,["is-read-only"]),(s(!0),B(j,null,H(u.value,w=>(s(),T(Ve(v(je)[w.key]),{key:w.key,inert:a.value},null,8,["inert"]))),128)),o.value?(s(),B(j,{key:0},[h.value?(s(),T(rl,{key:0,"is-read-only":a.value},null,8,["is-read-only"])):E("",!0),x(v(r),{"is-read-only":a.value},null,8,["is-read-only"]),x(fl,{"is-read-only":a.value},null,8,["is-read-only"])],64)):E("",!0),(s(!0),B(j,null,H(m.value,w=>(s(),T(Ve(v(je)[w.key]),{key:w.key,inert:a.value},null,8,["inert"]))),128))]),_[1]||(_[1]=C("div",{class:"BuilderSettingsMain__spacer"},null,-1)),C("div",hl,[C("p",{class:"BuilderSettingsMain__componentId__text",onClick:S},J(v(d).firstSelectedId.value),1),x(X,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":v(p)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:S},{default:O(()=>[x(z,{name:v(p)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),Sl=U(kl,[["__scopeId","data-v-aa8c395b"]]),Il=["data-writer-id"],Bl=D({__name:"BuilderSettingsActions",setup(e){const r=R(W.core),l=R(W.builderManager),d=Me(r),{dropdownOptions:i,handleDropdownSelect:a}=Xe(r,l,d);function o(){a(Fe.Delete)}const g=I(()=>{const p=i.value.find(S=>S.value===Fe.Delete);return p?p.disabled:!0}),f=l.firstSelectedId;return(p,S)=>(s(),B("div",{class:"BuilderSettingsActions","data-writer-id":v(f)},[v(l).selectionStatus.value===v(ve).Multiple?(s(),T(X,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:S[0]||(S[0]=h=>v(l).setSelection(null))},{default:O(()=>[x(z,{name:"x"})]),_:1})):E("",!0),x(X,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:g.value,onClick:o},{default:O(()=>[x(z,{name:"trash-2"})]),_:1},8,["disabled"])],8,Il))}}),Cl=U(Bl,[["__scopeId","data-v-08efde31"]]),wl=["id"],El=["value"],xl=D({__name:"BuilderSettingsAddComponentModal",props:ue({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(e){const r=R(W.core),l=R(W.builderManager),d=gt(),i=Me(r),{createAndInsertComponent:a}=we(r,l,i),o=e,g=I(()=>r.getContainableTypes(o.selectedId).reduce((h,u)=>(h[u]=r.getComponentDefinition(u),h),{})),f=ye(e,"isOpen");function p(){f.value=!1}function S(h){const u=h.target.value;if(!u)return;const m=Object.entries(g.value).find(([_,w])=>w.name==u);if(!m)return;const y=m[0];a(y,o.selectedId),p()}return(h,u)=>f.value?(s(),T(Oe,{key:0,title:"Add child component","display-close-button":"",onClose:p},{default:O(()=>[x(ee,{type:"text",list:v(d),placeholder:"Component...",onChange:S},null,8,["list"]),C("datalist",{id:v(d)},[(s(!0),B(j,null,H(g.value,(m,y)=>(s(),B("option",{key:y,value:m.name},J(m.name),9,El))),128))],8,wl)]),_:1})):E("",!0)}});function $l(e,r=500){const l=N(0);let d=null;function i(){e.value&&(l.value=e.value.clientHeight)}return ie(()=>{i(),d=setInterval(i,r)}),Je(()=>{d&&clearInterval(d)}),l}const Tl={key:0,class:"BuilderSettings__collapser"},Vl={key:1,class:"BuilderSettings__titleBar"},Fl={class:"BuilderSettings__titleBar__title"},Ol={class:"BuilderSettings__titleBar__actions"},Ml=["data-writer-tooltip"],ql=D({__name:"BuilderSettings",setup(e){_t(b=>({baa1d07a:v(l).getMode()=="blueprints"?"82px":"20px","1e1ab0af":a.value}));const r=R(W.core),l=R(W.builderManager),d=K("root"),i=$l(d,1e3),a=I(()=>{if(!i.value)return"unset";const b=i.value-42;return b>0?`${b}px`:"unset"}),{component:o,definition:g}=bt(r,l.firstSelectedId),f=ht(o,g),{copy:p,copied:S}=He();function h(){p(f.value)}const u=Me(r),m=N(!1),{dropdownOptions:y,handleDropdownSelect:_}=Xe(r,l,u,{[Fe.Add]:()=>m.value=!0}),w=I(()=>l.selectionStatus.value===ve.Multiple?!0:l.isSettingsBarCollapsed.value),M=I(()=>l.selection.value.length);function $(){l.isSettingsBarCollapsed.value=!l.isSettingsBarCollapsed.value}return me(o,b=>{b||l.setSelection(null)}),(b,c)=>v(l).selectionStatus.value!==v(ve).None?(s(),B("div",{key:0,ref_key:"root",ref:d,class:re(["BuilderSettings",{"BuilderSettings--collapsed":w.value}])},[v(l).isSingleSelectionActive.value?(s(),B("div",Tl,[w.value?(s(),T(X,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:$},{default:O(()=>[x(z,{name:"settings"})]),_:1})):(s(),T(X,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:$},{default:O(()=>[x(z,{name:"arrow-right-to-line"})]),_:1}))])):E("",!0),v(l).isSingleSelectionActive?(s(),B("div",Vl,[C("p",Fl,J(v(g).name),1),C("div",Ol,[v(f)?(s(),T(X,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":v(S)?"Copied!":"Copy result variable",onClick:oe(h,["prevent"])},{default:O(()=>[x(z,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):E("",!0),x(kt,{class:"BuilderSettings__titleBar__actions__more","data-automation-action":"settings-actions-dropdown",options:v(y),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:v(_)},null,8,["options","onSelect"])])])):E("",!0),v(l).selectionStatus.value===v(ve).Multiple?(s(),B("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${M.value} components selected`},[C("p",null,J(M.value),1)],8,Ml)):E("",!0),w.value&&v(l).selectionStatus.value===v(ve).Multiple?(s(),T(Cl,{key:3,class:"BuilderSettings__actions"})):E("",!0),x(Sl,{class:"BuilderSettings__main",inert:w.value},null,8,["inert"]),v(l).isSingleSelectionActive.value?(s(),T(xl,{key:4,"is-open":m.value,"onUpdate:isOpen":c[0]||(c[0]=t=>m.value=t),"selected-id":v(l).firstSelectedId.value},null,8,["is-open","selected-id"])):E("",!0)],2)):E("",!0)}}),Al=U(ql,[["__scopeId","data-v-6a0c1c16"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Al},Symbol.toStringTag,{value:"Module"}));export{Ke as B,et as W,se as a,Kl as b,Ct as u};
