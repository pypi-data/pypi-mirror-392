import{c as d,o,w as e,a as t,e as b,t as a,l as g,F as p,s as D,k as s,C as w,n as P,b as T,h as x,f,m as v,g as U,_ as G,B as z,j as L}from"./index-WQ41F5VK.js";import{u as Q}from"./permissions-TImOfY3I.js";import{a as H}from"./accounts-CaYgxMST.js";import{p as J}from"./parameters-CxHnQU2I.js";import{c as A,V,a as C}from"./VCard-B7MvPr5E.js";import{a as K}from"./VSelect-Okzuwz-S.js";import{V as W}from"./VDataTable-uO4iY3PI.js";import{V as $,c as F,a as M}from"./VAvatar-BKSHKr1K.js";import{V as X}from"./VTextField-fWt9fUJr.js";import{u as Y}from"./language.store-DuvIgs5v.js";import{V as _,a as i}from"./VRow-CVWfiMs5.js";import{V as Z,a as ee}from"./VToolbar-DYf0Nubr.js";import"./tag-D-paBiFC.js";import"./VInput-quQSdtEy.js";import"./VProgressCircular-DN4UW8ON.js";import"./VMenu--sryJ9Uc.js";import"./ssrBoot-B5vxBC28.js";import"./VCheckboxBtn-p4bo2BTE.js";import"./VSelectionControl-DMlq6-TE.js";import"./VTable-C1FqhNBY.js";import"./filter-BH0Tmqu3.js";import"./languages-CE73-P-v.js";/* empty css              */const te={class:"headline"},ae={__name:"AccountAliases",props:{account:{type:Object,default:null}},setup(l){return(r,m)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[b("span",te,a(r.$gettext("Aliases")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),g(p,null,D(l.account.aliases,c=>(o(),d(K,{key:c,class:"mr-2 mt-2"},{default:e(()=>[s(a(c),1)]),_:2},1024))),128))]),_:1})]),_:1}))}},N="senderaddresses",B={getAll(){return w.get(`${N}/`)},getAllForMailbox(l){return w.get(`${N}/`,{params:{mailbox:l}})},create(l){return w.post(`${N}/`,l)},delete(l){return w.delete(`${N}/${l}/`)}},le={class:"headline"},ne={key:0},oe={__name:"AccountSenderAddresses",props:{account:{type:Object,default:null}},setup(l){const r=P(),{$gettext:m}=T(),c=l,n=x([]),y=x(!1),u=x(""),j=[{title:m("Address"),key:"address"},{title:"",key:"actions",align:"end",sortable:!1}];function E(){n.value.push({}),y.value=!0}function R(){B.getAllForMailbox(c.account.mailbox.pk).then(h=>{n.value=h.data})}function I(){const h={address:u.value,mailbox:c.account.mailbox.pk};B.create(h).then(()=>{R(),u.value=null,y.value=!1,r.displayNotification({msg:m("Sender address added")})})}function O(h){B.delete(h.pk).then(()=>{R(),r.displayNotification({msg:m("Sender address deleted")})})}return R(),(h,S)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[b("span",le,a(f(m)("Sender addresses")),1)]),_:1}),t(V,null,{default:e(()=>[t(W,{headers:j,items:n.value,"no-data-text":f(m)("No sender address defined for this account")},{"item.address":e(({item:k})=>[k.pk?(o(),g("span",ne,a(k.address),1)):(o(),d(X,{key:1,modelValue:u.value,"onUpdate:modelValue":S[0]||(S[0]=q=>u.value=q),label:f(m)("Specify an email address")},{append:e(()=>[u.value?(o(),d($,{key:0,icon:"mdi-content-save",color:"primary",variant:"text",onClick:I})):v("",!0)]),_:1},8,["modelValue","label"]))]),"item.actions":e(({item:k})=>[k.pk?(o(),d($,{key:0,icon:"mdi-delete-outline",color:"red",title:f(m)("Remove this address"),variant:"text",onClick:q=>O(k)},null,8,["title","onClick"])):v("",!0)]),bottom:e(()=>S[1]||(S[1]=[])),_:2},1032,["items","no-data-text"]),y.value?v("",!0):(o(),d($,{key:0,size:"small",color:"primary",variant:"outlined",onClick:E},{default:e(()=>[t(F,{size:"small",icon:"mdi-plus"}),s(" "+a(f(m)("Add sender address")),1)]),_:1}))]),_:1})]),_:1}))}},se={class:"headline"},ue={__name:"AccountSummary",props:{account:{type:Object,default:null}},async setup(l){let r,m;const c=Y();return[r,m]=U(()=>c.getLanguages()),await r,m(),(n,y)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[b("span",se,a(n.$gettext("General information")),1)]),_:1}),t(V,null,{default:e(()=>[t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Creation date")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[s(a(n.$date(l.account.date_joined)),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Last login date")),1)]),_:1}),l.account.last_login?(o(),d(i,{key:0,cols:"6"},{default:e(()=>[s(a(n.$date(l.account.last_login)),1)]),_:1})):(o(),d(i,{key:1,cols:"6"},{default:e(()=>[s(a(n.$gettext("Never logged-in")),1)]),_:1}))]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Full name")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[s(a(l.account.first_name)+" "+a(l.account.last_name),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Role")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[s(a(l.account.role),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Language")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[s(a(f(c).getLanguageLabel(l.account.language)),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Secondary email")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[s(a(l.account.secondary_email),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Phone number")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[s(a(l.account.phone_number),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Enabled")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[t(F,{color:l.account.is_active?"success":"error",icon:l.account.is_active?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),_:1})]),_:1}),l.account.mailbox?(o(),g(p,{key:0},[t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Quota")),1)]),_:1}),l.account.mailbox.quota==="0"?(o(),d(i,{key:0,cols:"6"},{default:e(()=>[s(a(n.$gettext("Unlimited")),1)]),_:1})):(o(),d(i,{key:1,cols:"6"},{default:e(()=>[t(M,{color:l.account.mailbox.quota_usage<80?"primary":"warning","model-value":l.account.mailbox.quota_usage,height:"25",class:"white--text"},{default:e(({value:u})=>[s(a(Math.ceil(u))+"% ("+a(l.account.mailbox.quota)+" "+a(n.$gettext("MB"))+") ",1)]),_:1},8,["color","model-value"])]),_:1}))]),_:1}),l.account.mailbox.message_limit!==null&&l.account.mailbox.message_limit!==void 0?(o(),d(_,{key:0},{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Daily sending limit")),1)]),_:1}),t(i,{cols:"6"},{default:e(()=>[l.account.mailbox.message_limit===0?(o(),g(p,{key:0},[s(a(n.$gettext("Sending forbidden")),1)],64)):(o(),d(M,{key:1,color:l.account.mailbox.sent_messages_in_percent<80?"primary":"warning","model-value":l.account.mailbox.sent_messages_in_percent,height:"25",class:"white--text"},{default:e(({value:u})=>[s(a(Math.ceil(u))+"% ("+a(l.account.mailbox.message_limit)+" "+a(n.$gettext("messages"))+") ",1)]),_:1},8,["color","model-value"]))]),_:1})]),_:1})):v("",!0)],64)):v("",!0)]),_:1})]),_:1}))}},ce={class:"headline"},ie={key:1},de={class:"text-disabled"},re={__name:"DomainAdminDomains",props:{account:{type:Object,default:null}},setup(l){const{$gettext:r}=T();return(m,c)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[b("span",ce,a(f(r)("Administered domains")),1)]),_:1}),t(V,null,{default:e(()=>[l.account.domains!==void 0&&l.account.domains.length?(o(!0),g(p,{key:0},D(l.account.domains,n=>(o(),d(_,{key:n},{default:e(()=>[t(i,{cols:"12"},{default:e(()=>[s(a(n),1)]),_:2},1024)]),_:2},1024))),128)):(o(),g("div",ie,a(f(r)("No domain managed")),1)),b("div",de,a(f(r)("Add/Remove from the domain page")),1)]),_:1})]),_:1}))}},me={class:"headline"},fe={__name:"ResourcesView",props:{resources:{type:Array,default:null}},setup(l){const{$gettext:r}=T(),m=n=>n.name==="quota"?r("No quota"):r("Creation denied");function c(n){return n<50?"primary":n<80?"warning":"error"}return(n,y)=>(o(),d(C,null,{default:e(()=>[t(A,null,{default:e(()=>[b("span",me,a(f(r)("Resources usage")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),g(p,null,D(l.resources,u=>(o(),g("div",{key:u.name,class:"mt-4"},[u.max_value===-1?(o(),g(p,{key:0},[s(a(u.label)+" ("+a(f(r)("Unlimited"))+") ",1)],64)):u.max_value===0?(o(),g(p,{key:1},[s(a(u.label)+" ("+a(m(u))+") ",1)],64)):(o(),g(p,{key:2},[s(a(u.label)+" ("+a(Math.ceil(u.usage))+"%) ",1),t(M,{"model-value":u.usage,color:c(u.usage)},null,8,["model-value","color"])],64))]))),128))]),_:1})]),_:1}))}},_e={__name:"AccountView",setup(l){const r=z(),{canSetRole:m}=Q(),c=x({pk:r.params.id}),n=x({});function y(){H.get(r.params.id).then(u=>{c.value=u.data})}return m.value&&J.getGlobalApplication("limits").then(u=>{n.value=u.data}),y(),(u,j)=>(o(),g(p,null,[t(Z,{flat:""},{default:e(()=>[t(ee,null,{default:e(()=>[s(a(u.$gettext("Account"))+" "+a(c.value.username)+" ",1),t($,{color:"primary",icon:"mdi-circle-edit-outline",to:{name:"AccountEdit",params:{id:c.value.pk}}},null,8,["to"]),t($,{color:"primary",icon:"mdi-reload",onClick:y})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{cols:"6"},{default:e(()=>[t(ue,{account:c.value},null,8,["account"]),c.value.role===f(L).DOMAIN_ADMIN?(o(),d(re,{key:0,class:"mt-2",account:c.value},null,8,["account"])):v("",!0)]),_:1}),t(i,{cols:"6"},{default:e(()=>[n.value.params&&n.value.params.enable_admin_limits&&c.value.role!==f(L).USER&&c.value.role!==f(L).SUPER_ADMIN?(o(),d(fe,{key:0,resources:c.value.resources},null,8,["resources"])):v("",!0),c.value.aliases?(o(),d(ae,{key:1,class:"mt-2",account:c.value},null,8,["account"])):v("",!0),c.value.mailbox?(o(),d(oe,{key:2,class:"mt-2",account:c.value},null,8,["account"])):v("",!0)]),_:1})]),_:1})],64))}},Fe=G(_e,[["__scopeId","data-v-388d62f6"]]);export{Fe as default};
