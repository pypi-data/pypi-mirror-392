import{_ as me}from"./ConfirmDialog-BemItW2F.js";import{_ as pe,b as ne,l as A,o as S,s as F,F as T,e as v,t as f,f as _,c as C,w as c,x as U,m as re,a as l,k as x,I as R,J as $,K as ve,i as b,L as fe,y as ye,M as P,N as Ve,O as Se,v as J,P as be,Q as oe,R as ke,S as Z,T as ge,U as he,V as _e,h as M,W as xe,X as we,Y as Ie}from"./index-WQ41F5VK.js";import{a as j,V as ie}from"./VRow-CVWfiMs5.js";import{u as Ce}from"./logos-DYp82smF.js";import{V as W,e as ee,f as Pe,R as te,u as $e,g as Be,c as We,b as Ae,m as Te,h as Le,i as je,j as Fe}from"./VAvatar-BKSHKr1K.js";import{u as D}from"./tag-D-paBiFC.js";import{V as ae,m as Re,a as le,b as De}from"./VWindowItem-mmufRveK.js";import{V as Ne}from"./VContainer-CmyIOuWp.js";import{V as se,m as Ee}from"./VSheet-iS_sxEl7.js";import{d as ze}from"./VMenu--sryJ9Uc.js";const Ge={class:"subtitle mt-4 d-flex"},Oe={class:"text-h6"},Me=["onClick"],Ue={class:"text-grey"},He={__name:"CreationSummary",props:{sections:{type:Array,default:()=>[]}},emits:["modify-step"],setup(e,{emit:y}){const{$gettext:t}=ne(),a=y;function u(n){return n.length?n.join(", "):t("Empty")}return(n,o)=>(S(!0),A(T,null,F(e.sections,(d,p)=>(S(),A(T,{key:p},[v("div",Ge,[v("span",Oe,f(d.title),1),v("a",{href:"#",class:"edit-link ml-auto",onClick:s=>a("modify-step",p+1)},f(_(t)("Modify")),9,Me)]),(S(!0),A(T,null,F(d.items,(s,m)=>(S(),C(ie,{key:m,dense:""},{default:c(()=>[s.value!==void 0?U(n.$slots,`item.${s.name}`,{key:0,item:s,displayList:u},()=>[l(j,null,{default:c(()=>[v("span",Ue,f(s.key),1)]),_:2},1024),s.type==="yesno"?(S(),C(j,{key:0,class:"text-right"},{default:c(()=>[x(f(n.$yesno(s.value)),1)]),_:2},1024)):s.type==="list"?(S(),C(j,{key:1,class:"text-right"},{default:c(()=>[x(f(u(s.value)),1)]),_:2},1024)):(S(),C(j,{key:2,class:"text-right"},{default:c(()=>[x(f(s.value),1)]),_:2},1024))],!0):re("",!0)]),_:2},1024))),128))],64))),128))}},Ye=pe(He,[["__scopeId","data-v-6e743e1a"]]),K=Symbol.for("vuetify:v-stepper"),ue=$({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),Je=R()({name:"VStepperActions",props:ue(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,y){let{emit:t,slots:a}=y;const{t:u}=ve();function n(){t("click:prev")}function o(){t("click:next")}return D(()=>{const d={onClick:n},p={onClick:o};return v("div",{class:"v-stepper-actions"},[l(ee,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:u(e.prevText),variant:"text"}}},{default:()=>{var s;return[((s=a.prev)==null?void 0:s.call(a,{props:d}))??l(W,d,null)]}}),l(ee,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:u(e.nextText),variant:"tonal"}}},{default:()=>{var s;return[((s=a.next)==null?void 0:s.call(a,{props:p}))??l(W,p,null)]}})])}),{}}}),ce=Pe("v-stepper-header"),Ke=$({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:P,default:"$complete"},editable:Boolean,editIcon:{type:P,default:"$edit"},error:Boolean,errorIcon:{type:P,default:"$error"},icon:P,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Qe=$({...Ke(),...Te()},"VStepperItem"),H=R()({name:"VStepperItem",directives:{vRipple:te},props:Qe(),emits:{"group:selected":e=>!0},setup(e,y){let{slots:t}=y;const a=$e(e,K,!0),u=b(()=>(a==null?void 0:a.value.value)??e.value),n=b(()=>e.rules.every(I=>I()===!0)),o=b(()=>!e.disabled&&e.editable),d=b(()=>!e.disabled&&e.editable),p=b(()=>e.error||!n.value),s=b(()=>e.complete||e.rules.length>0&&n.value),m=b(()=>p.value?e.errorIcon:s.value?e.completeIcon:a.isSelected.value&&e.editable?e.editIcon:e.icon),w=b(()=>({canEdit:d.value,hasError:p.value,hasCompleted:s.value,title:e.title,subtitle:e.subtitle,step:u.value,value:e.value}));return D(()=>{var r,i,h;const I=(!a||a.isSelected.value||s.value||d.value)&&!p.value&&!e.disabled,L=!!(e.title!=null||t.title),V=!!(e.subtitle!=null||t.subtitle);function k(){a==null||a.toggle()}return fe(v("button",{class:ye(["v-stepper-item",{"v-stepper-item--complete":s.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":p.value},a==null?void 0:a.selectedClass.value]),disabled:!e.editable,type:"button",onClick:k},[o.value&&Be(!0,"v-stepper-item"),l(Ae,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:I?e.color:void 0,size:24},{default:()=>{var g;return[((g=t.icon)==null?void 0:g.call(t,w.value))??(m.value?l(We,{icon:m.value},null):u.value)]}}),v("div",{class:"v-stepper-item__content"},[L&&v("div",{key:"title",class:"v-stepper-item__title"},[((r=t.title)==null?void 0:r.call(t,w.value))??e.title]),V&&v("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((i=t.subtitle)==null?void 0:i.call(t,w.value))??e.subtitle]),(h=t.default)==null?void 0:h.call(t,w.value)])]),[[te,e.ripple&&e.editable,null]])}),{}}}),Xe=$({...be(Re(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),de=R()({name:"VStepperWindow",props:Xe(),emits:{"update:modelValue":e=>!0},setup(e,y){let{slots:t}=y;const a=Ve(K,null),u=Se(e,"modelValue"),n=b({get(){var o;return u.value!=null||!a?u.value:(o=a.items.value.find(d=>a.selected.value.includes(d.id)))==null?void 0:o.value},set(o){u.value=o}});return D(()=>{const o=ae.filterProps(e);return l(ae,J({_as:"VStepperWindow"},o,{modelValue:n.value,"onUpdate:modelValue":d=>n.value=d,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),t)}),{}}}),qe=$({...De()},"VStepperWindowItem"),Y=R()({name:"VStepperWindowItem",props:qe(),setup(e,y){let{slots:t}=y;return D(()=>{const a=le.filterProps(e);return l(le,J({_as:"VStepperWindowItem"},a,{class:["v-stepper-window-item",e.class],style:e.style}),t)}),{}}}),Ze=$({altLabels:Boolean,bgColor:String,completeIcon:P,editIcon:P,editable:Boolean,errorIcon:P,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,..._e()},"Stepper"),et=$({...Ze(),...je({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...Ee(),...he(ue(),["prevText","nextText"])},"VStepper"),tt=R()({name:"VStepper",props:et(),emits:{"update:modelValue":e=>!0},setup(e,y){let{slots:t}=y;const{items:a,next:u,prev:n,selected:o}=Le(e,K),{displayClasses:d,mobile:p}=oe(e),{completeIcon:s,editIcon:m,errorIcon:w,color:I,editable:L,prevText:V,nextText:k}=ke(e),r=b(()=>e.items.map((g,z)=>{const N=Z(g,e.itemTitle,g),G=Z(g,e.itemValue,z+1);return{title:N,value:G,raw:g}})),i=b(()=>a.value.findIndex(g=>o.value.includes(g.id))),h=b(()=>e.disabled?e.disabled:i.value===0?"prev":i.value===a.value.length-1?"next":!1);return ge({VStepperItem:{editable:L,errorIcon:w,completeIcon:s,editIcon:m,prevText:V,nextText:k},VStepperActions:{color:I,disabled:h,prevText:V,nextText:k}}),D(()=>{const g=se.filterProps(e),z=!!(t.header||e.items.length),N=e.items.length>0,G=!e.hideActions&&!!(N||t.actions);return l(se,J(g,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":p.value},d.value,e.class],style:e.style}),{default:()=>{var Q,X;return[z&&l(ce,{key:"stepper-header"},{default:()=>[r.value.map((B,E)=>{let{raw:O,...q}=B;return v(T,null,[!!E&&l(ze,null,null),l(H,q,{default:t[`header-item.${q.value}`]??t.header,icon:t.icon,title:t.title,subtitle:t.subtitle})])})]}),N&&l(de,{key:"stepper-window"},{default:()=>[r.value.map(B=>l(Y,{value:B.value},{default:()=>{var E,O;return((E=t[`item.${B.value}`])==null?void 0:E.call(t,B))??((O=t.item)==null?void 0:O.call(t,B))}}))]}),(Q=t.default)==null?void 0:Q.call(t,{prev:n,next:u}),G&&(((X=t.actions)==null?void 0:X.call(t,{next:u,prev:n}))??l(Je,{key:"stepper-actions","onClick:prev":n,"onClick:next":u},t))]}})}),{prev:n,next:u}}}),at={class:"d-flex justify-center inner fill-height"},lt={class:"mb-5 text-h5"},st={class:"text-grey-darken-1"},nt={class:"d-flex justify-end mt-4"},rt={class:"text-center text-h3"},ot={class:"d-flex justify-center mt-8"},St={__name:"CreationForm",props:{title:{type:String,default:""},steps:{type:Array,default:()=>[]},summarySections:{type:Array,default:()=>[]},getVFormRef:{type:Function,default:null},formGetter:{type:Function,default:null},validateObject:{type:Function,default:null}},emits:["close","create","validationError"],setup(e,{expose:y,emit:t}){const{smAndDown:a}=oe(),{creationFormLogoPath:u}=Ce(),n=e,o=M(1),d=M(!1),p=M(),s=t,{$gettext:m}=ne();async function w(){await p.value.open(m("Warning"),m("If you close this form now, your modifications won't be saved. Do you confirm?"),{color:"warning",agreeLabel:m("Yes"),cancelLabel:m("No")})&&s("close")}async function I(V,k){const r=n.getVFormRef(n.steps[V-1]);if(r!==void 0){const{valid:i}=await r.validate();if(!i)return;if(n.validateObject)try{await n.validateObject(V)}catch(h){s("validationError",V,h.response.data);return}}o.value=k}function L(){d.value=!0,s("create")}return y({working:d}),(V,k)=>(S(),A("div",at,[l(tt,{modelValue:o.value,"onUpdate:modelValue":k[1]||(k[1]=r=>o.value=r),mobile:!_(a),class:"vertical-overflow"},{default:c(()=>[l(_(me),{ref_key:"confirm",ref:p},null,512),l(ce,{class:"align-center px-10"},{default:c(()=>[l(Fe,{src:_(u),"max-width":"190",class:"hidden-sm-and-down"},null,8,["src"]),(S(!0),A(T,null,F(e.steps,(r,i)=>(S(),C(H,{key:r.name,color:"primary",value:i+1,complete:o.value>i+1},{default:c(()=>[x(f(r.title),1)]),_:2},1032,["value","complete"]))),128)),l(H,{value:e.steps.length+1},{default:c(()=>[x(f(_(m)("Summary")),1)]),_:1},8,["value"]),l(W,{icon:"mdi-close",color:"primary",size:_(a)?"small":"x-large",variant:"text",onClick:w},null,8,["size"])]),_:1}),l(de,{class:"mt-4 d-flex justify-center"},{default:c(()=>[(S(!0),A(T,null,F(e.steps,(r,i)=>(S(),C(Y,{key:r.name,value:i+1,class:"flex-grow-1 ma-10"},{default:c(()=>[l(Ne,{fluid:""},{default:c(()=>[l(ie,{align:"center",justify:"center"},{default:c(()=>[l(j,{cols:"8",align:"start"},{default:c(()=>[v("div",lt,[v("span",st,f(e.title),1),x(" / "+f(r.title),1)]),U(V.$slots,`form.${r.name}`,{step:r,currentStep:i+1})]),_:2},1024)]),_:2},1024)]),_:2},1024),v("div",nt,[i+1>1?(S(),C(W,{key:0,class:"mr-10",variant:"text",onClick:h=>o.value=i},{default:c(()=>[x(f(_(m)("Back")),1)]),_:2},1032,["onClick"])):re("",!0),l(W,{color:"primary",size:"large",onClick:h=>I(i+1,i+2)},{default:c(()=>[x(f(_(m)("Next")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["value"]))),128)),l(Y,{value:e.steps.length+1,class:"flex-grow-0"},{default:c(()=>[v("div",rt,f(_(m)("Summary")),1),l(Ye,{sections:e.summarySections,onModifyStep:k[0]||(k[0]=r=>o.value=r)},xe({_:2},[F(V.$slots,(r,i)=>({name:i,fn:c(h=>[U(V.$slots,i,we(Ie(h)))])}))]),1032,["sections"]),v("div",ot,[l(W,{color:"primary",size:"large",loading:d.value,onClick:L},{default:c(()=>[x(f(_(m)("Confirm and create")),1)]),_:1},8,["loading"])])]),_:3},8,["value"])]),_:3})]),_:3},8,["modelValue","mobile"])]))}};export{St as _};
