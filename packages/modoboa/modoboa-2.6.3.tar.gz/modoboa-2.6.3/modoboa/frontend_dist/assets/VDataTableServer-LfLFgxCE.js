import{c as $,a as ee,o as ae,b as te,u as oe,p as le,d as re,q as se,f as de,g as ue,h as ne,i as ie,r as S,j as V,k as x,s as ce,l as me,t as ge}from"./VDataTable-uO4iY3PI.js";import{I as ve,J as be,R as pe,i as g,a7 as o,T as Pe,a as s,v as w,e as i,F as B,ak as fe}from"./index-WQ41F5VK.js";import{V as I}from"./VTable-C1FqhNBY.js";import{d as he}from"./VMenu--sryJ9Uc.js";import{u as ye}from"./tag-D-paBiFC.js";const De=be({itemsLength:{type:[Number,String],required:!0},...ge(),...me(),...ce()},"VDataTableServer"),Be=ve()({name:"VDataTableServer",props:De(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,k){let{attrs:R,slots:a}=k;const{groupBy:d}=$(e),{sortBy:l,multiSort:F,mustSort:G}=ee(e),{page:u,itemsPerPage:c}=ae(e),{disableSort:H}=pe(e),E=g(()=>parseInt(e.itemsLength,10)),{columns:v,headers:N}=te(e,{groupBy:d,showSelect:o(()=>e.showSelect),showExpand:o(()=>e.showExpand)}),{items:n}=oe(e,v),{toggleSort:b}=le({sortBy:l,multiSort:F,mustSort:G,page:u}),{opened:_,isGroupOpen:C,toggleGroup:L,extractRows:q}=re({groupBy:d,sortBy:l,disableSort:H}),{pageCount:O,setItemsPerPage:j}=se({page:u,itemsPerPage:c,itemsLength:E}),{flatItems:p}=de(n,d,_),{isSelected:A,select:J,selectAll:W,toggleSelect:z,someSelected:K,allSelected:M}=ue(e,{allItems:n,currentPage:n}),{isExpanded:Q,toggleExpand:U}=ne(e),P=g(()=>q(n.value));ie({page:u,itemsPerPage:c,sortBy:l,groupBy:d,search:o(()=>e.search)}),fe("v-data-table",{toggleSort:b,sortBy:l}),Pe({VDataTableRows:{hideNoData:o(()=>e.hideNoData),noDataText:o(()=>e.noDataText),loading:o(()=>e.loading),loadingText:o(()=>e.loadingText)}});const t=g(()=>({page:u.value,itemsPerPage:c.value,sortBy:l.value,pageCount:O.value,toggleSort:b,setItemsPerPage:j,someSelected:K.value,allSelected:M.value,isSelected:A,select:J,selectAll:W,toggleSelect:z,isExpanded:Q,toggleExpand:U,isGroupOpen:C,toggleGroup:L,items:P.value.map(m=>m.raw),internalItems:P.value,groupedItems:p.value,columns:v.value,headers:N.value}));ye(()=>{const m=S.filterProps(e),X=V.filterProps(e),Y=x.filterProps(e),Z=I.filterProps(e);return s(I,w({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Z,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var r;return(r=a.top)==null?void 0:r.call(a,t.value)},default:()=>{var r,f,h,y,D,T;return a.default?a.default(t.value):i(B,null,[(r=a.colgroup)==null?void 0:r.call(a,t.value),!e.hideDefaultHeader&&i("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[s(V,X,a)]),(f=a.thead)==null?void 0:f.call(a,t.value),!e.hideDefaultBody&&i("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(h=a["body.prepend"])==null?void 0:h.call(a,t.value),a.body?a.body(t.value):s(x,w(R,Y,{items:p.value}),a),(y=a["body.append"])==null?void 0:y.call(a,t.value)]),(D=a.tbody)==null?void 0:D.call(a,t.value),(T=a.tfoot)==null?void 0:T.call(a,t.value)])},bottom:()=>a.bottom?a.bottom(t.value):!e.hideDefaultFooter&&i(B,null,[s(he,null,null),s(S,m,{prepend:a["footer.prepend"]})])})})}});export{Be as V};
