import{a as E}from"./aliases-CbIEbmJ9.js";import{E as h}from"./EmailField-BXU27oIO.js";import{r as $,V as C}from"./VForm-CxFPdkZa.js";import{d as B}from"./domains-DGdr9Equ.js";import{V as A}from"./VSwitch-BYsITk7O.js";import{V as D,a as S}from"./VSelect-Okzuwz-S.js";import{V as R}from"./VAvatar-BKSHKr1K.js";import{V as U}from"./VTextField-fWt9fUJr.js";import{V as T}from"./VTextarea-CVJNAf81.js";import{i as _,h as m,c as b,o as d,w as p,m as N,l as x,a as o,e as f,F as g,t as u,f as r,b as j,A as q,s as G,k as M}from"./index-WQ41F5VK.js";const L={class:"m-label"},O={class:"m-label"},P={class:"m-label"},z={class:"m-label"},le={__name:"AliasGeneralForm",props:{modelValue:{type:Object,default:null}},setup(y,{expose:k}){const n=y,e=_(()=>n.modelValue),s=m([]),c=m();function i(){e.value.address!=null&&navigator.clipboard.writeText(e.value.address)}async function V(){e.value.domain!=null&&E.getRandomAddress().then(t=>{e.value.address=`${t.data.address}@${e.value.domain.name}`})}return B.getDomains().then(t=>{s.value=t.data}),k({vFormRef:c}),(t,a)=>(d(),b(C,{ref_key:"vFormRef",ref:c},{default:p(()=>[e.value.pk?N("",!0):(d(),b(A,{key:0,modelValue:e.value.random,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.random=l),label:t.$gettext("Random address"),color:"primary"},null,8,["modelValue","label"])),e.value.random?(d(),x(g,{key:2},[f("label",O,u(t.$gettext("Domain")),1),o(D,{modelValue:e.value.domain,"onUpdate:modelValue":[a[2]||(a[2]=l=>e.value.domain=l),V],items:s.value,"item-title":"name","return-object":"",variant:"outlined",density:"compact",rules:[r($).required]},{append:p(()=>[o(R,{variant:"flat",icon:"mdi-reload",onClick:V})]),_:1},8,["modelValue","items","rules"]),o(U,{modelValue:e.value.address,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.address=l),label:t.$gettext("Generated address"),variant:"outlined",readonly:""},{"append-inner":p(()=>[o(R,{variant:"flat",icon:"mdi-clipboard-outline",onClick:i})]),_:1},8,["modelValue","label"])],64)):(d(),x(g,{key:1},[f("label",L,u(t.$gettext("Email address")),1),o(r(h),{ref:"address",modelValue:e.value.address,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.address=l),type:"email",variant:"outlined",density:"compact",rules:[r($).required]},null,8,["modelValue","rules"])],64)),o(A,{modelValue:e.value.enabled,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.enabled=l),label:t.$gettext("Enabled"),color:"primary"},null,8,["modelValue","label"]),f("label",P,u(t.$gettext("Expire at")),1),o(U,{modelValue:e.value.expire,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.expire=l),variant:"outlined",density:"compact"},null,8,["modelValue"]),f("label",z,u(t.$gettext("Description")),1),o(T,{modelValue:e.value.description,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.description=l),rows:"2",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1},512))}},te={__name:"AliasRecipientForm",props:{modelValue:{type:Array,default:()=>[]},modelModifiers:{}},emits:["update:modelValue"],setup(y,{expose:k}){const{$gettext:n}=j(),e=q(y,"modelValue"),s=m(""),c=m(),i=m();async function V(){e.value.push(s.value),s.value="",i.value.resetValidation()}function t(l){e.value.splice(l,1)}const a=[()=>e.value.length>0||n("Please add at least one recipient.")];return k({vFormRef:i}),(l,F)=>(d(),b(C,{ref_key:"vFormRef",ref:i},{default:p(()=>[o(r(h),{ref_key:"recipientField",ref:c,modelValue:s.value,"onUpdate:modelValue":F[0]||(F[0]=v=>s.value=v),placeholder:r(n)("Start typing a name here..."),hint:r(n)("Alias(es) of this mailbox. To create a catchall alias, just enter the domain name (@domain.tld)."),"persistent-hint":"","allow-add":"",rules:a,onDomainSelected:V},null,8,["modelValue","placeholder","hint"]),(d(!0),x(g,null,G(e.value,(v,w)=>(d(),b(S,{key:v,class:"mr-2 mt-2",closable:"","onClick:close":H=>t(w)},{default:p(()=>[M(u(v),1)]),_:2},1032,["onClick:close"]))),128))]),_:1},512))}};export{te as _,le as a};
