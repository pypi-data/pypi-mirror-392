# Test Environment Configuration
# This file is used for running tests
# Copy to .env.test and modify as needed

# Application
ENVIRONMENT=testing
DEBUG=False
SECRET_KEY=test-secret-key-change-in-production

{% if framework == 'Flask-Restx' -%}
# Flask
FLASK_ENV=testing
FLASK_DEBUG=False
FLASK_TESTING=True
{% elif framework == 'FastAPI' -%}
# FastAPI
FASTAPI_ENV=testing
{% elif framework == 'Django-DjangoORM' -%}
# Django
DJANGO_SETTINGS_MODULE={{ name }}.settings.test
DJANGO_SECRET_KEY=test-secret-key-change-in-production
{% endif -%}

# Database - Tests use SQLite in-memory by default
{% if database == 'PostgreSQL' -%}
# For PostgreSQL integration tests (optional)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/test_{{ name }}_db
DATABASE_NAME=test_{{ name }}_db
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_ENGINE=django.db.backends.postgresql
{% elif database == 'MySQL' -%}
# For MySQL integration tests (optional)
DATABASE_URL=mysql://root:root@localhost:3306/test_{{ name }}_db
DATABASE_NAME=test_{{ name }}_db
DATABASE_HOST=localhost
DATABASE_PORT=3306
DATABASE_USER=root
DATABASE_PASSWORD=root
DATABASE_ENGINE=django.db.backends.mysql
{% elif database == 'SQLite' -%}
# SQLite test database (or use :memory:)
DATABASE_URL=sqlite:///:memory:
DATABASE_NAME=:memory:
DATABASE_ENGINE=django.db.backends.sqlite3
{% endif -%}

{% if auth_enabled -%}
# JWT - Use different secret for tests
JWT_SECRET_KEY=test-secret-key-not-for-production-use-only
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=86400
{% endif -%}

# Logging
LOG_LEVEL=ERROR
LOG_TO_FILE=False

# Testing
TESTING=True
PYTEST_TIMEOUT=30
TEST_PARALLEL=False
TEST_RUNNER=pytest

# Cache (disabled for tests)
CACHE_TYPE=simple
CACHE_DISABLED=True

# Email (use console backend for tests)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# Security (relaxed for tests)
ALLOWED_HOSTS=localhost,127.0.0.1,testserver
CSRF_COOKIE_SECURE=False
SESSION_COOKIE_SECURE=False

# Performance
DATABASE_CONN_MAX_AGE=0
