---
device: Neural DSP Quad Cortex
manufacturer: Neural DSP
firmware_version: CorOS 3.2.1
version: 1.0.0
default_channel: 1
midi_din: true
midi_usb: true
documentation: https://support.neuraldsp.com/hc/en-us/articles/360014480320-MIDI-Specification
midi_pc_calculator: https://support.neuraldsp.com/help/quad-cortex-midi-pc-calculator
---

/*
 * ============================================================================
 * NEURAL DSP QUAD CORTEX - MML DEVICE LIBRARY
 * ============================================================================
 *
 * IMPORTANT NOTES AND KNOWN ISSUES:
 *
 * 1. SCENE SWITCHING LATENCY (CorOS 2.0+):
 *    - MIDI scene changes via CC#43 have ~100-130ms latency
 *    - Workaround: Send scene change messages 1/16 note early in DAW
 *    - Or use -50ms track delay on MIDI tracks
 *    - Enable "Ignore Duplicate PC" setting for best results
 *
 * 2. MIDI THRU IS BROKEN:
 *    - When enabled, device stops sending its own MIDI messages
 *    - Only passes through incoming data (violates MIDI spec)
 *    - Workaround: Keep MIDI Thru OFF and use external MIDI merger
 *
 * 3. PRESET/SETLIST LOADING REQUIRES SPECIFIC TIMING:
 *    - Must send CC#0 (Bank MSB) first
 *    - Wait minimum 100ms
 *    - Send CC#32 (Bank LSB) for setlist
 *    - Send Program Change
 *    - Wait before sending scene selection if needed
 *
 * 4. EXPRESSION PEDAL MIDI LATENCY:
 *    - CC#1/CC#2 have noticeable lag compared to physical pedals
 *    - Not recommended for real-time wah or volume control via MIDI
 *    - Use physical expression pedals connected to EXP 1/2 jacks instead
 *
 * 5. RAPID MIDI MESSAGES CAN FREEZE DEVICE:
 *    - Avoid sending rapid successive CC messages
 *    - Add minimum 100ms delays between messages
 *    - Especially critical for expression CC values
 *
 * 6. CONNECTION RECOMMENDATIONS:
 *    - MIDI DIN cables are more reliable than USB MIDI
 *    - Disconnect USB when using DIN to prevent conflicts
 *    - Turn off MIDI Thru when using with DAWs
 *
 * 7. DAW INTEGRATION:
 *    - Disable MIDI Timecode (MTC) in DAW to prevent random preset changes
 *    - Disable MIDI Chase for CC messages
 *    - Enable "Ignore Duplicate PC" in Quad Cortex MIDI Settings
 *    - Use specific MIDI channels, not "All"
 *
 * ============================================================================
 */


# ============================================================================
# PRESET AND SETLIST MANAGEMENT
# ============================================================================

/*
 * The Quad Cortex uses a three-message sequence for preset loading:
 * 1. CC#0 (Bank MSB) - selects preset group (0=presets 0-127, 1=presets 128-256)
 * 2. CC#32 (Bank LSB) - selects setlist (0-11 for 12 setlists)
 * 3. Program Change (0-127) - selects specific preset within group
 *
 * Example: To load Preset 17A in Setlist 5:
 *   CC#0 = 1 (second group of 128 presets)
 *   CC#32 = 5 (Setlist 6, counting from 0)
 *   PC = 0 (Preset A in that setlist)
 *
 * Use the official MIDI PC Calculator for correct preset addressing:
 * https://support.neuraldsp.com/help/quad-cortex-midi-pc-calculator
 */

@alias qc_bank_group {ch} {group:0-1} "Select preset bank group (0=presets 0-127, 1=presets 128-256)"
  - cc {ch}.0.{group}
@end

@alias qc_setlist {ch} {setlist:0-11} "Select setlist (0-11 for 12 setlists)"
  - cc {ch}.32.{setlist}
@end

@alias qc_preset {ch} {preset:0-127} "Load preset within selected group (0-127)"
  - pc {ch}.{preset}
@end

/*
 * CRITICAL: This macro includes required 100ms delays between messages
 * for reliable preset loading. Do not remove these delays or loading
 * may fail or load wrong presets.
 */
@alias qc_load_preset {ch} {group} {setlist} {preset} "Complete preset load sequence with timing delays"
  - cc {ch}.0.{group}
  [+100ms]
  - cc {ch}.32.{setlist}
  [+100ms]
  - pc {ch}.{preset}
@end

/*
 * Simplified aliases for common preset ranges.
 * Most users work within first 128 presets (group 0).
 */
@alias qc_load_preset_simple {ch} {setlist} {preset} "Load preset from first group (0-127)"
  - cc {ch}.0.0
  [+100ms]
  - cc {ch}.32.{setlist}
  [+100ms]
  - pc {ch}.{preset}
@end

/*
 * Named preset positions within a setlist (A-H = 0-7, I-P = 8-15, etc.)
 * Each setlist has 16 preset slots arranged in 4 banks of 4 presets.
 */
@alias qc_preset_a {ch} "Load Preset A (first preset in setlist)"
  - pc {ch}.0
@end

@alias qc_preset_b {ch} "Load Preset B"
  - pc {ch}.1
@end

@alias qc_preset_c {ch} "Load Preset C"
  - pc {ch}.2
@end

@alias qc_preset_d {ch} "Load Preset D"
  - pc {ch}.3
@end

@alias qc_preset_e {ch} "Load Preset E"
  - pc {ch}.4
@end

@alias qc_preset_f {ch} "Load Preset F"
  - pc {ch}.5
@end

@alias qc_preset_g {ch} "Load Preset G"
  - pc {ch}.6
@end

@alias qc_preset_h {ch} "Load Preset H"
  - pc {ch}.7
@end


# ============================================================================
# SCENE CONTROL
# ============================================================================

/*
 * CC#43 controls scene selection (A-H = values 0-7).
 *
 * IMPORTANT: Scene switching via MIDI has ~100-130ms latency in CorOS 2.0+
 * This is a known bug/limitation that makes backing track sync difficult.
 *
 * Workarounds:
 * - Send scene change messages 1/16 note or more EARLY in your DAW
 * - Use -50ms track delay compensation on MIDI tracks
 * - Enable "Ignore Duplicate PC" in Quad Cortex MIDI Settings
 *
 * Note: CC#43 works in ANY mode (Preset, Scene, or Stomp), not just Scene Mode.
 * This enables "8x8 hybrid mode" when in Stomp Mode.
 */

@alias qc_scene {ch} {scene:0-7} "Switch to scene (0=A through 7=H)"
  - cc {ch}.43.{scene}
@end

@alias qc_scene_a {ch} "Scene A"
  - cc {ch}.43.0
@end

@alias qc_scene_b {ch} "Scene B"
  - cc {ch}.43.1
@end

@alias qc_scene_c {ch} "Scene C"
  - cc {ch}.43.2
@end

@alias qc_scene_d {ch} "Scene D"
  - cc {ch}.43.3
@end

@alias qc_scene_e {ch} "Scene E"
  - cc {ch}.43.4
@end

@alias qc_scene_f {ch} "Scene F"
  - cc {ch}.43.5
@end

@alias qc_scene_g {ch} "Scene G"
  - cc {ch}.43.6
@end

@alias qc_scene_h {ch} "Scene H"
  - cc {ch}.43.7
@end

/*
 * Preset + Scene combo for complete state recall.
 * Includes timing delay after preset load before scene change.
 */
@alias qc_load_preset_scene {ch} {setlist} {preset} {scene} "Load preset and switch to specific scene"
  - cc {ch}.0.0
  [+100ms]
  - cc {ch}.32.{setlist}
  [+100ms]
  - pc {ch}.{preset}
  [+100ms]
  - cc {ch}.43.{scene}
@end


# ============================================================================
# FOOTSWITCH CONTROL (STOMP MODE)
# ============================================================================

/*
 * CC#35-42 control footswitches A-H in Stomp Mode.
 *
 * IMPORTANT BEHAVIOR: Any CC value TOGGLES the footswitch state rather than
 * requiring specific on/off values. This simplifies MIDI programming.
 *
 * Values 0-63 = typically bypass, 64-127 = typically active, but behavior
 * depends on what's assigned to each footswitch.
 *
 * Footswitches control whichever effect blocks are assigned to them in
 * the preset. Cannot directly address individual blocks via MIDI unless
 * they're first assigned to footswitches.
 */

@alias qc_stomp_a {ch} {state:0-127} "Toggle Footswitch A"
  - cc {ch}.35.{state}
@end

@alias qc_stomp_b {ch} {state:0-127} "Toggle Footswitch B"
  - cc {ch}.36.{state}
@end

@alias qc_stomp_c {ch} {state:0-127} "Toggle Footswitch C"
  - cc {ch}.37.{state}
@end

@alias qc_stomp_d {ch} {state:0-127} "Toggle Footswitch D"
  - cc {ch}.38.{state}
@end

@alias qc_stomp_e {ch} {state:0-127} "Toggle Footswitch E"
  - cc {ch}.39.{state}
@end

@alias qc_stomp_f {ch} {state:0-127} "Toggle Footswitch F"
  - cc {ch}.40.{state}
@end

@alias qc_stomp_g {ch} {state:0-127} "Toggle Footswitch G"
  - cc {ch}.41.{state}
@end

@alias qc_stomp_h {ch} {state:0-127} "Toggle Footswitch H"
  - cc {ch}.42.{state}
@end

# Explicit on/off aliases using standard MIDI threshold (64)
@alias qc_stomp_a_on {ch} "Activate Footswitch A"
  - cc {ch}.35.127
@end

@alias qc_stomp_a_off {ch} "Bypass Footswitch A"
  - cc {ch}.35.0
@end

@alias qc_stomp_b_on {ch} "Activate Footswitch B"
  - cc {ch}.36.127
@end

@alias qc_stomp_b_off {ch} "Bypass Footswitch B"
  - cc {ch}.36.0
@end

@alias qc_stomp_c_on {ch} "Activate Footswitch C"
  - cc {ch}.37.127
@end

@alias qc_stomp_c_off {ch} "Bypass Footswitch C"
  - cc {ch}.37.0
@end

@alias qc_stomp_d_on {ch} "Activate Footswitch D"
  - cc {ch}.38.127
@end

@alias qc_stomp_d_off {ch} "Bypass Footswitch D"
  - cc {ch}.38.0
@end

@alias qc_stomp_e_on {ch} "Activate Footswitch E"
  - cc {ch}.39.127
@end

@alias qc_stomp_e_off {ch} "Bypass Footswitch E"
  - cc {ch}.39.0
@end

@alias qc_stomp_f_on {ch} "Activate Footswitch F"
  - cc {ch}.40.127
@end

@alias qc_stomp_f_off {ch} "Bypass Footswitch F"
  - cc {ch}.40.0
@end

@alias qc_stomp_g_on {ch} "Activate Footswitch G"
  - cc {ch}.41.127
@end

@alias qc_stomp_g_off {ch} "Bypass Footswitch G"
  - cc {ch}.41.0
@end

@alias qc_stomp_h_on {ch} "Activate Footswitch H"
  - cc {ch}.42.127
@end

@alias qc_stomp_h_off {ch} "Bypass Footswitch H"
  - cc {ch}.42.0
@end


# ============================================================================
# EXPRESSION PEDALS
# ============================================================================

/*
 * CC#1 and CC#2 control Expression Pedals 1 and 2.
 *
 * WARNING: MIDI-controlled expression has significant latency compared to
 * physical expression pedals. Not recommended for real-time wah or volume
 * control via external MIDI controllers.
 *
 * For best results:
 * - Use physical expression pedals connected to EXP 1/2 jacks on device
 * - If using MIDI, avoid rapid CC value changes (causes system freeze)
 * - Add delays between expression updates (minimum 50-100ms)
 *
 * Expression pedals can control any parameter assigned to them in the preset.
 */

@alias qc_exp1 {ch} {value:0-127} "Expression Pedal 1 (WARNING: Has latency via MIDI)"
  - cc {ch}.1.{value}
@end

@alias qc_exp2 {ch} {value:0-127} "Expression Pedal 2 (WARNING: Has latency via MIDI)"
  - cc {ch}.2.{value}
@end

@alias qc_exp1_percent {ch} {percent:0-100} "Expression Pedal 1 in percentage (0-100%)"
  {midi_val = int(${percent} * 127 / 100)}
  - cc {ch}.1.{midi_val}
@end

@alias qc_exp2_percent {ch} {percent:0-100} "Expression Pedal 2 in percentage (0-100%)"
  {midi_val = int(${percent} * 127 / 100)}
  - cc {ch}.2.{midi_val}
@end

# ============================================================================
# EXPRESSION MODULATION (ADVANCED)
# ============================================================================

/*
 * Advanced expression control using MMD's modulation features.
 * These demonstrate smooth, musical parameter changes with curves, waves,
 * and envelopes. Due to Quad Cortex's MIDI latency, these work best for
 * pre-programmed automation rather than real-time control.
 */

# Smooth expression swells using Bezier curves
@alias qc_exp1_swell {ch} {start_val:0-127} {end_val:0-127} "Smooth EXP1 swell with ease-in-out curve"
  - cc {ch}.1.curve({start_val}, {end_val}, ease-in-out)
@end

@alias qc_exp2_swell {ch} {start_val:0-127} {end_val:0-127} "Smooth EXP2 swell with ease-in-out curve"
  - cc {ch}.2.curve({start_val}, {end_val}, ease-in-out)
@end

# Expression fade-in with exponential curve (natural swell)
@alias qc_exp1_fade_in {ch} "EXP1 fade in from 0 to 127 with exponential curve"
  - cc {ch}.1.curve(0, 127, ease-out)
@end

# Expression fade-out with logarithmic curve (natural decay)
@alias qc_exp1_fade_out {ch} "EXP1 fade out from 127 to 0 with logarithmic curve"
  - cc {ch}.1.curve(127, 0, ease-in)
@end

# Expression vibrato using wave modulation (LFO)
@alias qc_exp1_vibrato {ch} {center:0-127} {freq} {depth:0-100} "EXP1 vibrato with sine wave (freq: 0.1-10.0 Hz)"
  - cc {ch}.1.wave(sine, {center}, freq={freq}, depth={depth})
@end

@alias qc_exp2_vibrato {ch} {center:0-127} {freq} {depth:0-100} "EXP2 vibrato with sine wave (freq: 0.1-10.0 Hz)"
  - cc {ch}.2.wave(sine, {center}, freq={freq}, depth={depth})
@end

# Expression tremolo effect (volume modulation)
@alias qc_exp1_tremolo {ch} {center=64} {freq} {depth:20-80} "EXP1 tremolo effect (freq: 2.0-8.0 Hz)"
  - cc {ch}.1.wave(sine, {center}, freq={freq}, depth={depth})
@end

# Expression envelope (ADSR) for dynamic swells
@alias qc_exp1_envelope {ch} "EXP1 ADSR envelope for dynamic swells"
  - cc {ch}.1.envelope(adsr, attack=0.5, decay=0.3, sustain=0.7, release=1.0)
@end

@alias qc_exp2_envelope {ch} "EXP2 ADSR envelope for dynamic swells"
  - cc {ch}.2.envelope(adsr, attack=0.5, decay=0.3, sustain=0.7, release=1.0)
@end

# Expression attack-release envelope (AR) for percussive effects
@alias qc_exp1_ar {ch} {attack} {release} "EXP1 AR envelope (attack: 0.01-2.0s, release: 0.1-3.0s)"
  - cc {ch}.1.envelope(ar, attack={attack}, release={release})
@end


# ============================================================================
# GLOBAL FUNCTIONS
# ============================================================================

/*
 * Tempo control via CC#44.
 * Range is 0-127 which maps to BPM values (specific mapping not documented).
 * For precise tempo control, use MIDI Clock synchronization instead.
 */
@alias qc_tempo {ch} {value:0-127} "Set tempo (0-127, use MIDI Clock for precise BPM)"
  - cc {ch}.44.{value}
@end

@alias qc_tempo_bpm {ch} {bpm:40-300} "Set tempo in BPM (40-300 BPM range)"
  {midi_val = int((${bpm} - 40) * 127 / 260)}
  - cc {ch}.44.{midi_val}
@end

/*
 * Tuner control via CC#45.
 * Standard threshold: 0-63 = OFF, 64-127 = ON
 */
@alias qc_tuner {ch} {state=off:0,on:127} "Tuner control"
  - cc {ch}.45.{state}
@end

@alias qc_tuner_on {ch} "Enable tuner"
  - cc {ch}.45.127
@end

@alias qc_tuner_off {ch} "Disable tuner"
  - cc {ch}.45.0
@end

/*
 * Gig View control via CC#46.
 * Opens/closes the simplified Gig View interface.
 */
@alias qc_gig_view {ch} {state=close:0,open:127} "Gig View control"
  - cc {ch}.46.{state}
@end

@alias qc_gig_view_open {ch} "Open Gig View"
  - cc {ch}.46.127
@end

@alias qc_gig_view_close {ch} "Close Gig View"
  - cc {ch}.46.0
@end

/*
 * Mode switching via CC#47.
 * Values: 0=Preset Mode, 1=Scene Mode, 2=Stomp Mode
 *
 * Mode switching is fast enough for temporary mode changes mid-performance.
 * Example: Send mode change, execute command, return to original mode.
 */
@alias qc_mode {ch} {mode=preset:0,scene:1,stomp:2} "Switch operating mode"
  - cc {ch}.47.{mode}
@end

@alias qc_mode_preset {ch} "Switch to Preset Mode"
  - cc {ch}.47.0
@end

@alias qc_mode_scene {ch} "Switch to Scene Mode"
  - cc {ch}.47.1
@end

@alias qc_mode_stomp {ch} "Switch to Stomp Mode"
  - cc {ch}.47.2
@end

/*
 * Ignore Duplicate PC toggle via CC#62.
 * When enabled, prevents preset reload on identical PC messages.
 * STRONGLY RECOMMENDED to enable for DAW/multi-controller setups.
 */
@alias qc_ignore_duplicate_pc {ch} {state=off:0,on:127} "Toggle Ignore Duplicate PC"
  - cc {ch}.62.{state}
@end

@alias qc_ignore_duplicate_pc_on {ch} "Enable Ignore Duplicate PC"
  - cc {ch}.62.127
@end

@alias qc_ignore_duplicate_pc_off {ch} "Disable Ignore Duplicate PC"
  - cc {ch}.62.0
@end


# ============================================================================
# LOOPER X CONTROL
# ============================================================================

/*
 * Comprehensive Looper X control via CC#48-61.
 * Added in CorOS 1.3.0 (February 2022).
 *
 * CRITICAL: The looper must be opened via CC#48 for MIDI commands to work!
 * Manually opening the looper UI disables MIDI control.
 *
 * Many looper functions use momentary mode requiring:
 * - Press: Send CC value 64-127
 * - Release: Send CC value 0-63
 *
 * Your MIDI controller must support momentary button messages for these.
 */

@alias qc_looper_open {ch} "Open Looper X (always opens in Performance mode)"
  - cc {ch}.48.127
@end

@alias qc_looper_close {ch} "Close Looper X"
  - cc {ch}.48.0
@end

@alias qc_looper_duplicate {ch} "Duplicate/Stop Duplicate (toggle)"
  - cc {ch}.49.127
@end

@alias qc_looper_oneshot {ch} "Enable/disable One Shot mode (toggle)"
  - cc {ch}.50.127
@end

@alias qc_looper_halfspeed {ch} "Enable/disable Half Speed (toggle)"
  - cc {ch}.51.127
@end

/*
 * Punch In/Out - MOMENTARY MODE REQUIRED
 * Send 64-127 to punch in/out, send 0-63 to punch out only
 */
@alias qc_looper_punch_in {ch} "Punch In/Out (momentary - send 127 then 0)"
  - cc {ch}.52.127
@end

@alias qc_looper_punch_out {ch} "Punch Out only"
  - cc {ch}.52.0
@end

/*
 * Record/Overdub/Stop - MOMENTARY MODE REQUIRED
 * Send 64-127 to record/overdub/stop, send 0-63 to stop
 */
@alias qc_looper_record {ch} "Record/Overdub/Stop (momentary - send 127 then 0)"
  - cc {ch}.53.127
@end

@alias qc_looper_stop {ch} "Stop recording/overdub"
  - cc {ch}.53.0
@end

@alias qc_looper_play {ch} "Play/Stop (toggle)"
  - cc {ch}.54.127
@end

@alias qc_looper_reverse {ch} "Enable/disable Reverse (toggle)"
  - cc {ch}.55.127
@end

@alias qc_looper_undo {ch} "Undo/Redo (toggle)"
  - cc {ch}.56.127
@end

@alias qc_looper_duplicate_mode {ch} {mode=free:0,sync:1} "Set duplicate mode"
  - cc {ch}.57.{mode}
@end

/*
 * Quantize setting: 0=OFF, 1-8=1-8 Beats, 9=16 Beats
 */
@alias qc_looper_quantize {ch} {quant=off:0,beat1:1,beat2:2,beat3:3,beat4:4,beat5:5,beat6:6,beat7:7,beat8:8,beat16:9} "Set quantize mode"
  - cc {ch}.58.{quant}
@end

@alias qc_looper_clock_start {ch} {state=off:0,on:1} "MIDI Clock Start"
  - cc {ch}.59.{state}
@end

@alias qc_looper_mode {ch} {mode=perform:0,params:1} "Switch looper mode"
  - cc {ch}.60.{mode}
@end

/*
 * Routing Mode: 0-13 (Grid → I/Os → Multi Out)
 * Specific mapping not fully documented
 */
@alias qc_looper_routing {ch} {routing:0-13} "Set looper routing mode"
  - cc {ch}.61.{routing}
@end

/*
 * Complete looper workflow macros
 */
@alias qc_looper_start_recording {ch} "Open looper and start recording"
  - cc {ch}.48.127
  [+100ms]
  - cc {ch}.53.127
  [+50ms]
  - cc {ch}.53.0
@end

@alias qc_looper_play_loop {ch} "Switch looper to play mode"
  - cc {ch}.54.127
@end

@alias qc_looper_close_and_stop {ch} "Stop looper and close"
  - cc {ch}.53.0
  [+50ms]
  - cc {ch}.48.0
@end


# ============================================================================
# ADVANCED WORKFLOW MACROS
# ============================================================================

/*
 * Complete song section change with preset, scene, and expression setup
 */
@alias qc_song_section {ch} {setlist} {preset} {scene} {exp1_value} "Load preset, scene, and set expression"
  - cc {ch}.0.0
  [+100ms]
  - cc {ch}.32.{setlist}
  [+100ms]
  - pc {ch}.{preset}
  [+150ms]
  - cc {ch}.43.{scene}
  [+50ms]
  - cc {ch}.1.{exp1_value}
@end

/*
 * Scene change with smooth expression transition to mask latency
 * Uses curve modulation to create smooth transition that helps hide
 * the ~100-130ms scene switching latency issue (CorOS 2.0+)
 */
@alias qc_scene_with_swell {ch} {scene:0-7} "Scene change with expression swell to mask latency"
  # Start expression fade out
  - cc {ch}.1.curve(127, 0, ease-in)

  # Wait 50ms then send scene change (will have latency)
  [+50ms]
  - cc {ch}.43.{scene}

  # Wait for scene switch latency, then fade back in
  [+150ms]
  - cc {ch}.1.curve(0, 127, ease-out)
@end

/*
 * Temporary mode switch for single command execution
 * Useful for hybrid control schemes
 */
@alias qc_temp_stomp_mode {ch} {stomp} {return_mode} "Temporarily switch to stomp mode, toggle stomp, return"
  - cc {ch}.47.2
  [+50ms]
  - cc {ch}.{stomp:35-42}.127
  [+50ms]
  - cc {ch}.47.{return_mode:0-2}
@end

/*
 * Emergency all-off: disable all footswitches
 * Useful for song endings or emergency cutoffs
 */
@alias qc_all_stomps_off {ch} "Bypass all footswitches A-H"
  - cc {ch}.35.0
  - cc {ch}.36.0
  - cc {ch}.37.0
  - cc {ch}.38.0
  - cc {ch}.39.0
  - cc {ch}.40.0
  - cc {ch}.41.0
  - cc {ch}.42.0
@end

/*
 * Dual scene setup for verse/chorus switching
 *
 * NOTE: These aliases are temporarily commented out because @define with
 * parameter references ({param}) is not yet supported in alias bodies.
 * See: CLAUDE.md "Remaining Work" - @define in Aliases
 */
// @alias qc_verse_chorus_setup {ch} {verse_scene} {chorus_scene} "Quick verse/chorus scene switching"
//   @define VERSE_SCENE {verse_scene}
//   @define CHORUS_SCENE {chorus_scene}
//
//   # Use these in your timeline:
//   # - qc_to_verse {ch}
//   # - qc_to_chorus {ch}
// @end
//
// @alias qc_to_verse {ch} "Switch to verse scene (set with qc_verse_chorus_setup)"
//   - cc {ch}.43.${VERSE_SCENE}
// @end
//
// @alias qc_to_chorus {ch} "Switch to chorus scene (set with qc_verse_chorus_setup)"
//   - cc {ch}.43.${CHORUS_SCENE}
// @end


# ============================================================================
# DAW OPTIMIZATION SETTINGS
# ============================================================================

/*
 * Recommended initialization sequence for DAW-based automation.
 * Run this at the start of your project to configure optimal MIDI behavior.
 */
@alias qc_daw_init {ch} "Initialize Quad Cortex for DAW control"
  # Enable Ignore Duplicate PC (critical for DAW use)
  - cc {ch}.62.127
  [+200ms]

  # Set to Stomp Mode for maximum flexibility
  - cc {ch}.47.2
  [+100ms]

  # Close Gig View for full control
  - cc {ch}.46.0
  [+100ms]

  # Disable tuner
  - cc {ch}.45.0
@end


# ============================================================================
# SAFE EXPRESSION AUTOMATION (PREVENTS RAPID MIDI FREEZE)
# ============================================================================

/*
 * The Quad Cortex can freeze when receiving rapid successive CC messages.
 * These helpers use loops with enforced 100ms delays to prevent this issue.
 *
 * WARNING: Do NOT use rapid CC automation without proper spacing!
 * These aliases enforce safe timing automatically.
 */

@alias qc_exp1_step_automation {ch} "Safe 4-step expression automation with enforced delays"
  - cc {ch}.1.0
  [+100ms]
  - cc {ch}.1.42
  [+100ms]
  - cc {ch}.1.85
  [+100ms]
  - cc {ch}.1.127
@end

@alias qc_exp2_step_automation {ch} "Safe 4-step expression automation for EXP2"
  - cc {ch}.2.0
  [+100ms]
  - cc {ch}.2.42
  [+100ms]
  - cc {ch}.2.85
  [+100ms]
  - cc {ch}.2.127
@end

@alias qc_exp1_safe_ramp {ch} {start:0-127} {end:0-127} "Safe expression ramp with 100ms steps"
  {step1 = int(${start} + (${end} - ${start}) * 0.25)}
  {step2 = int(${start} + (${end} - ${start}) * 0.5)}
  {step3 = int(${start} + (${end} - ${start}) * 0.75)}

  - cc {ch}.1.{start}
  [+100ms]
  - cc {ch}.1.{step1}
  [+100ms]
  - cc {ch}.1.{step2}
  [+100ms]
  - cc {ch}.1.{step3}
  [+100ms]
  - cc {ch}.1.{end}
@end

/*
 * Looper workflow with safe timing to prevent freeze
 */
@alias qc_looper_safe_workflow {ch} "Complete looper workflow with safe timing"
  # Open looper
  - cc {ch}.48.127
  [+150ms]

  # Start recording (momentary: send 127 then 0)
  - cc {ch}.53.127
  [+100ms]
  - cc {ch}.53.0

  # Wait for user to record (this would be manual in practice)
  # Then stop and play
  [+4000ms]
  - cc {ch}.53.127
  [+100ms]
  - cc {ch}.53.0
  [+100ms]
  - cc {ch}.54.127
@end


# ============================================================================
# PERFORMANCE TIPS AND BEST PRACTICES
# ============================================================================

/*
 * TIMING RECOMMENDATIONS:
 * - Always use 100ms delays between Bank/Setlist/PC messages
 * - Add 50-100ms before scene changes after preset loads
 * - Add 50ms minimum between expression pedal updates
 * - For DAW use, place MIDI events 1/16 note early or use -50ms track delay
 *
 * RELIABILITY RECOMMENDATIONS:
 * - Enable "Ignore Duplicate PC" in device settings
 * - Use MIDI DIN cables instead of USB for live performance
 * - Turn off MIDI Thru on the device
 * - Keep firmware updated but test thoroughly before gigs
 * - Add 100ms spacing between all CC messages to avoid system freeze
 * - Use the "safe" expression automation aliases above to prevent freeze
 *
 * MODE STRATEGY:
 * - Stay in Stomp Mode for maximum flexibility
 * - Use CC#43 for scene changes even while in Stomp Mode
 * - Creates "8x8 hybrid" control (8 stomps × 8 scenes)
 * - Use temporary mode switching for specific needs
 *
 * EXPRESSION PEDAL STRATEGY:
 * - Connect physical expression pedals directly to device
 * - Avoid MIDI CC#1/CC#2 for real-time wah/volume control
 * - Use MIDI expression for slow parameter changes only
 * - Always include timing delays between expression updates
 * - Use qc_exp1_safe_ramp and similar helpers for automation
 */
