import{b as h,av as c}from"./index-CKSmRzt-.js";import"./index-bhUlIv2p.js";class l{constructor(e){this.name=h.NAME_SHADOWGENERATOR,this.scene=e}register(){this.scene._gatherRenderTargetsStage.registerStep(h.STEP_GATHERRENDERTARGETS_SHADOWGENERATOR,this,this._gatherRenderTargets)}rebuild(){}serialize(e){e.shadowGenerators=[];const t=this.scene.lights;for(const o of t){if(o.doNotSerialize)continue;const n=o.getShadowGenerators();if(n){const a=n.values();for(let s=a.next();s.done!==!0;s=a.next()){const r=s.value;r.doNotSerialize||e.shadowGenerators.push(r.serialize())}}}}addFromContainer(e){}removeFromContainer(e,t){}dispose(){}_gatherRenderTargets(e){const t=this.scene;if(this.scene.shadowsEnabled)for(let o=0;o<t.lights.length;o++){const n=t.lights[o],a=n.getShadowGenerators();if(n.isEnabled()&&n.shadowEnabled&&a){const s=a.values();for(let r=s.next();r.done!==!0;r=s.next()){const d=r.value.getShadowMap();t.textures.indexOf(d)!==-1&&e.push(d)}}}}}c._SceneComponentInitialization=i=>{let e=i._getComponent(h.NAME_SHADOWGENERATOR);e||(e=new l(i),i._addComponent(e))};export{l as ShadowGeneratorSceneComponent};
//# sourceMappingURL=shadowGeneratorSceneComponent-B73ESz2j.js.map
