{"version":3,"file":"KHR_node_visibility-DP0_8BFr.js","sources":["../../../../node_modules/.pnpm/@babylonjs+loaders@8.36.1_@babylonjs+core@8.36.1_babylonjs-gltf2interface@8.36.1/node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_node_visibility.js"],"sourcesContent":["import { registerGLTFExtension, unregisterGLTFExtension } from \"../glTFLoaderExtensionRegistry.js\";\nimport { AddObjectAccessorToKey } from \"./objectModelMapping.js\";\nconst NAME = \"KHR_node_visibility\";\n// object model extension for visibility\nAddObjectAccessorToKey(\"/nodes/{}/extensions/KHR_node_visibility/visible\", {\n    get: (node) => {\n        const tn = node._babylonTransformNode;\n        if (tn && tn.isVisible !== undefined) {\n            return tn.isVisible;\n        }\n        return true;\n    },\n    set: (value, node) => {\n        node._primitiveBabylonMeshes?.forEach((mesh) => {\n            mesh.inheritVisibility = true;\n        });\n        if (node._babylonTransformNode) {\n            node._babylonTransformNode.isVisible = value;\n        }\n        node._primitiveBabylonMeshes?.forEach((mesh) => {\n            mesh.isVisible = value;\n        });\n    },\n    getTarget: (node) => node._babylonTransformNode,\n    getPropertyName: [() => \"isVisible\"],\n    type: \"boolean\",\n});\n/**\n * Loader extension for KHR_node_visibility\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class KHR_node_visibility {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = loader.isExtensionUsed(NAME);\n    }\n    onReady() {\n        if (!this._loader) {\n            return;\n        }\n        const nodes = this._loader.gltf.nodes;\n        if (nodes) {\n            for (const node of nodes) {\n                const babylonTransformNode = node._babylonTransformNode;\n                if (babylonTransformNode) {\n                    babylonTransformNode.inheritVisibility = true;\n                    if (node.extensions && node.extensions.KHR_node_visibility && node.extensions.KHR_node_visibility.visible === false) {\n                        babylonTransformNode.isVisible = false;\n                    }\n                }\n            }\n        }\n    }\n    dispose() {\n        delete this._loader;\n    }\n}\nunregisterGLTFExtension(NAME);\nregisterGLTFExtension(NAME, true, (loader) => new KHR_node_visibility(loader));\n//# sourceMappingURL=KHR_node_visibility.js.map"],"names":["NAME","AddObjectAccessorToKey","node","tn","value","mesh","KHR_node_visibility","loader","nodes","babylonTransformNode","unregisterGLTFExtension","registerGLTFExtension"],"mappings":"kIAEA,MAAMA,EAAO,sBAEbC,EAAuB,mDAAoD,CACvE,IAAMC,GAAS,CACX,MAAMC,EAAKD,EAAK,sBAChB,OAAIC,GAAMA,EAAG,YAAc,OAChBA,EAAG,UAEP,EACX,EACA,IAAK,CAACC,EAAOF,IAAS,CAClBA,EAAK,yBAAyB,QAASG,GAAS,CAC5CA,EAAK,kBAAoB,EAC7B,CAAC,EACGH,EAAK,wBACLA,EAAK,sBAAsB,UAAYE,GAE3CF,EAAK,yBAAyB,QAASG,GAAS,CAC5CA,EAAK,UAAYD,CACrB,CAAC,CACL,EACA,UAAYF,GAASA,EAAK,sBAC1B,gBAAiB,CAAC,IAAM,WAAW,EACnC,KAAM,SACV,CAAC,EAKM,MAAMI,CAAoB,CAI7B,YAAYC,EAAQ,CAIhB,KAAK,KAAOP,EACZ,KAAK,QAAUO,EACf,KAAK,QAAUA,EAAO,gBAAgBP,CAAI,CAC9C,CACA,SAAU,CACN,GAAI,CAAC,KAAK,QACN,OAEJ,MAAMQ,EAAQ,KAAK,QAAQ,KAAK,MAChC,GAAIA,EACA,UAAWN,KAAQM,EAAO,CACtB,MAAMC,EAAuBP,EAAK,sBAC9BO,IACAA,EAAqB,kBAAoB,GACrCP,EAAK,YAAcA,EAAK,WAAW,qBAAuBA,EAAK,WAAW,oBAAoB,UAAY,KAC1GO,EAAqB,UAAY,IAG7C,CAER,CACA,SAAU,CACN,OAAO,KAAK,OAChB,CACJ,CACAC,EAAwBV,CAAI,EAC5BW,EAAsBX,EAAM,GAAOO,GAAW,IAAID,EAAoBC,CAAM,CAAC","x_google_ignoreList":[0]}