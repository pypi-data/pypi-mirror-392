import{p as i,d as me,t as ke,i as Z,a as Be,b as se,c as ze,s as Te}from"./i18n-5O2R8uRh.js";import{p as ve,R as pe,l as be,d as b,a as ye,f as R,t as oe,b as x,c as we,g as u,i as t,m as re,h as U,Q as d,s as S,k as ie,e as C,U as J,V as N,$ as Ie,j as p,r as z,W as Pe,X as De,_ as Ee}from"./index-bhUlIv2p.js";import{b as M}from"./misc-BSG2QtlE.js";import{U as _e}from"./Upload-DUNHTCuE.js";/* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";import{B as Fe}from"./BlockLabel-B0lD-lMe.js";import{I as fe}from"./IconButton-CbXWacxl.js";import{C as Ue}from"./Clear-DimAkCP_.js";import{F as Ce}from"./File-Dm1qMDFE.js";import{U as Re}from"./Upload-CzlAHTb6.js";import{I as Le}from"./IconButtonWrapper-DsFz-pKX.js";/* empty css                                             */import{h as Se}from"./html-BYxzblBS.js";import{p as We}from"./event-modifiers-CdEA5IGF.js";import{D as Ye}from"./DownloadLink-BGikjoQ1.js";const he=L=>{let n=["B","KB","MB","GB","PB"],r=0;for(;L>1024;)L/=1024,r++;let h=n[r];return L.toFixed(1)+"&nbsp;"+h};var je=R('<span class="drag-handle svelte-al0bnp">⋮⋮</span>'),qe=R("<!>&nbsp;&#8675;",1),Ge=R('<td class="svelte-al0bnp"><button class="label-clear-button svelte-al0bnp" aria-label="Remove this file">×</button></td>'),Ke=R('<tr><td class="filename svelte-al0bnp"><!> <span class="stem svelte-al0bnp"> </span> <span class="ext svelte-al0bnp"> </span></td><td class="download svelte-al0bnp"><!></td><!></tr>'),Me=R('<div class="file-preview-holder svelte-al0bnp"><table class="file-preview svelte-al0bnp"><tbody class="svelte-al0bnp"></tbody></table></div>');function Oe(L,n){ve(n,!1);const r=re(),h=pe();let c=i(n,"value",12),y=i(n,"selectable",12,!1),m=i(n,"height",12,void 0),T=i(n,"i18n",12),v=i(n,"allow_reordering",12,!1),_=re(null),g=re(null);function W(a,l){p(_,l),a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",l.toString()))}function Y(a,l){if(a.preventDefault(),l===t(r).length-1){const e=a.currentTarget.getBoundingClientRect(),s=e.top+e.height/2;p(g,a.clientY>s?t(r).length:l)}else p(g,l);a.dataTransfer&&(a.dataTransfer.dropEffect="move")}function j(a){(!a.dataTransfer?.dropEffect||a.dataTransfer.dropEffect==="none")&&(p(_,null),p(g,null))}function I(a,l){if(a.preventDefault(),t(_)===null||t(_)===l)return;const e=Array.isArray(c())?[...c()]:[c()],[s]=e.splice(t(_),1);e.splice(t(g)===t(r).length?t(r).length:l,0,s);const F=Array.isArray(c())?e:e[0];h("change",F),p(_,null),p(g,null)}function O(a){const l=a.lastIndexOf(".");return l===-1?[a,""]:[a.slice(0,l),a.slice(l)]}function P(a,l){const e=a.currentTarget;(a.target===e||e&&e.firstElementChild&&a.composedPath().includes(e.firstElementChild))&&h("select",{value:t(r)[l].orig_name,index:l})}function Q(a){const l=t(r).splice(a,1);p(r,[...t(r)]),c(t(r)),h("delete",l[0]),h("change",t(r))}function ae(a){h("download",a)}const D=typeof window<"u";be(()=>b(c()),()=>{p(r,(Array.isArray(c())?c():[c()]).map(a=>{const[l,e]=O(a.orig_name??"");return{...a,filename_stem:l,filename_ext:e}}))}),ye();var E={get value(){return c()},set value(a){c(a),u()},get selectable(){return y()},set selectable(a){y(a),u()},get height(){return m()},set height(a){m(a),u()},get i18n(){return T()},set i18n(a){T(a),u()},get allow_reordering(){return v()},set allow_reordering(a){v(a),u()}};me();var q=Me();let V;var X=U(q),$=U(X);return ke($,7,()=>t(r),a=>a.url,(a,l,e)=>{var s=Ke();let F;var A=U(s),f=U(A);{var ue=o=>{var w=je();x(o,w)};Z(f,o=>{b(v()),t(r),d(()=>v()&&t(r).length>1)&&o(ue)})}var G=S(f,2),ee=U(G,!0);z(G);var te=S(G,2),le=U(te,!0);z(te),z(A);var k=S(A),H=U(k);{var ne=o=>{{let w=N(()=>(t(l),d(()=>D&&window.__is_colab__?null:t(l).orig_name)));Ye(o,{get href(){return t(l),d(()=>t(l).url)},get download(){return t(w)},$$events:{click:()=>ae(t(l))},children:(K,de)=>{var ce=qe(),Ae=J(ce);Se(Ae,()=>(t(l),b(he),d(()=>t(l).size!=null?he(t(l).size):"(size unknown)"))),Pe(),x(K,ce)},$$slots:{default:!0}})}},ge=o=>{var w=Ie();oe(K=>ie(w,K),[()=>(b(T()),d(()=>T()("file.uploading")))]),x(o,w)};Z(H,o=>{t(l),d(()=>t(l).url)?o(ne):o(ge,!1)})}z(k);var B=S(k);{var xe=o=>{var w=Ge(),K=U(w);z(w),C("click",K,()=>{Q(t(e))}),C("keydown",K,de=>{de.key==="Enter"&&Q(t(e))}),x(o,w)};Z(B,o=>{t(r),d(()=>t(r).length>1)&&o(xe)})}z(s),oe(()=>{F=Be(s,1,"file svelte-al0bnp",null,F,{selectable:y(),dragging:t(_)===t(e),"drop-target":t(g)===t(e)||t(e)===t(r).length-1&&t(g)===t(r).length}),se(s,"data-drop-target",(t(g),t(r),b(t(e)),d(()=>t(g)===t(r).length&&t(e)===t(r).length-1||t(g)===t(e)+1?"after":"before"))),se(s,"draggable",(b(v()),t(r),d(()=>v()&&t(r).length>1))),se(A,"aria-label",(t(l),d(()=>t(l).orig_name))),ie(ee,(t(l),d(()=>t(l).filename_stem))),ie(le,(t(l),d(()=>t(l).filename_ext)))}),C("click",s,o=>{P(o,t(e))}),C("dragstart",s,o=>W(o,t(e))),C("dragenter",s,We(function(o){M.call(this,n,o)})),C("dragover",s,o=>Y(o,t(e))),C("drop",s,o=>I(o,t(e))),C("dragend",s,j),x(a,s)}),z($),z(X),z(q),oe(()=>V=ze(q,"",V,{"max-height":m()?typeof m()=="number"?m()+"px":m():"auto"})),x(L,q),we(E)}var Qe=R("<!> <!>",1),Ve=R("<!> <!>",1),Xe=R("<!> <!>",1);function dt(L,n){ve(n,!1);let r=i(n,"value",12),h=i(n,"label",12),c=i(n,"show_label",12,!0),y=i(n,"file_count",12,"single"),m=i(n,"file_types",12,null),T=i(n,"selectable",12,!1),v=i(n,"root",12),_=i(n,"height",12,void 0),g=i(n,"i18n",12),W=i(n,"max_file_size",12,null),Y=i(n,"upload",12),j=i(n,"stream_handler",12),I=i(n,"uploading",12,!1),O=i(n,"allow_reordering",12,!1),P=i(n,"upload_promise",12,null);async function Q({detail:e}){Array.isArray(r())?r([...r(),...Array.isArray(e)?e:[e]]):r()?r([r(),...Array.isArray(e)?e:[e]]):r(e),await Ee(),D("change",r()),D("upload",e)}function ae(){r(null),D("change",null),D("clear")}const D=pe();let E=re(!1);be(()=>t(E),()=>{D("drag",t(E))}),ye();var q={get value(){return r()},set value(e){r(e),u()},get label(){return h()},set label(e){h(e),u()},get show_label(){return c()},set show_label(e){c(e),u()},get file_count(){return y()},set file_count(e){y(e),u()},get file_types(){return m()},set file_types(e){m(e),u()},get selectable(){return T()},set selectable(e){T(e),u()},get root(){return v()},set root(e){v(e),u()},get height(){return _()},set height(e){_(e),u()},get i18n(){return g()},set i18n(e){g(e),u()},get max_file_size(){return W()},set max_file_size(e){W(e),u()},get upload(){return Y()},set upload(e){Y(e),u()},get stream_handler(){return j()},set stream_handler(e){j(e),u()},get uploading(){return I()},set uploading(e){I(e),u()},get allow_reordering(){return O()},set allow_reordering(e){O(e),u()},get upload_promise(){return P()},set upload_promise(e){P(e),u()}};me();var V=Xe(),X=J(V);{let e=N(()=>!r()),s=N(()=>h()||"File");Fe(X,{get show_label(){return c()},get Icon(){return Ce},get float(){return t(e)},get label(){return t(s)}})}var $=S(X,2);{var a=e=>{var s=Ve(),F=J(s);Le(F,{children:(f,ue)=>{var G=Qe(),ee=J(G);{var te=k=>{{let H=N(()=>(b(g()),d(()=>g()("common.upload"))));fe(k,{get Icon(){return Re},get label(){return t(H)},children:(ne,ge)=>{_e(ne,{icon_upload:!0,get filetype(){return m()},get file_count(){return y()},get max_file_size(){return W()},get root(){return v()},get stream_handler(){return j()},get upload(){return Y()},get upload_promise(){return P()},set upload_promise(B){P(B)},get dragging(){return t(E)},set dragging(B){p(E,B)},get uploading(){return I()},set uploading(B){I(B)},$$events:{load:Q,error(B){M.call(this,n,B)}},$$legacy:!0})},$$slots:{default:!0}})}};Z(ee,k=>{b(y()),b(r()),d(()=>!(y()==="single"&&(Array.isArray(r())?r().length>0:r()!==null)))&&k(te)})}var le=S(ee,2);{let k=N(()=>(b(g()),d(()=>g()("common.clear"))));fe(le,{get Icon(){return Ue},get label(){return t(k)},$$events:{click:H=>{D("clear"),H.stopPropagation(),ae()}}})}x(f,G)},$$slots:{default:!0}});var A=S(F,2);Oe(A,{get i18n(){return g()},get selectable(){return T()},get value(){return r()},get height(){return _()},get allow_reordering(){return O()},$$events:{select(f){M.call(this,n,f)},change(f){M.call(this,n,f)},delete(f){M.call(this,n,f)}}}),x(e,s)},l=e=>{_e(e,{get filetype(){return m()},get file_count(){return y()},get max_file_size(){return W()},get root(){return v()},get stream_handler(){return j()},get upload(){return Y()},get height(){return _()},get upload_promise(){return P()},set upload_promise(s){P(s)},get dragging(){return t(E)},set dragging(s){p(E,s)},get uploading(){return I()},set uploading(s){I(s)},$$events:{load:Q,error(s){M.call(this,n,s)}},children:(s,F)=>{var A=De(),f=J(A);Te(f,n,"default",{},null),x(s,A)},$$slots:{default:!0},$$legacy:!0})};Z($,e=>{b(r()),d(()=>r()&&(Array.isArray(r())?r().length>0:!0))?e(a):e(l,!1)})}return x(L,V),we(q)}export{dt as F,Oe as a};
//# sourceMappingURL=FileUpload-pMqcjcv7.js.map
