{"version":3,"file":"Index-DhHw2pCY.js","sources":["../../../../js/multimodaltextbox/shared/utils.ts","../../../../js/multimodaltextbox/shared/MultimodalTextbox.svelte","../../../../js/multimodaltextbox/Index.svelte"],"sourcesContent":["import { tick } from \"svelte\";\n\ninterface Value {\n\tlines: number;\n\tmax_lines: number;\n\ttext: string;\n}\n\nexport async function resize(\n\ttarget: HTMLTextAreaElement | HTMLInputElement,\n\tlines: number,\n\tmax_lines: number\n): Promise<void> {\n\tawait tick();\n\tif (lines === max_lines) return;\n\n\tconst computed_styles = window.getComputedStyle(target);\n\tconst padding_top = parseFloat(computed_styles.paddingTop);\n\tconst padding_bottom = parseFloat(computed_styles.paddingBottom);\n\tconst line_height = parseFloat(computed_styles.lineHeight);\n\n\tlet max =\n\t\tmax_lines === undefined\n\t\t\t? false\n\t\t\t: padding_top + padding_bottom + line_height * max_lines;\n\tlet min = padding_top + padding_bottom + lines * line_height;\n\n\ttarget.style.height = \"1px\";\n\n\tlet scroll_height;\n\tif (max && target.scrollHeight > max) {\n\t\tscroll_height = max;\n\t} else if (target.scrollHeight < min) {\n\t\tscroll_height = min;\n\t} else {\n\t\tscroll_height = target.scrollHeight;\n\t}\n\n\ttarget.style.height = `${scroll_height}px`;\n}\n\nexport function text_area_resize(\n\t_el: HTMLTextAreaElement,\n\t_value: Value\n): any | undefined {\n\tif (_value.lines === _value.max_lines) return;\n\t_el.style.overflowY = \"scroll\";\n\n\tfunction handle_input(event: Event): void {\n\t\tresize(event.target as HTMLTextAreaElement, _value.lines, _value.max_lines);\n\t}\n\t_el.addEventListener(\"input\", handle_input);\n\n\tif (!_value.text.trim()) return;\n\tresize(_el, _value.lines, _value.max_lines);\n\n\treturn {\n\t\tdestroy: () => _el.removeEventListener(\"input\", handle_input)\n\t};\n}\n","<script lang=\"ts\">\n\timport {\n\t\tonMount,\n\t\tbeforeUpdate,\n\t\tafterUpdate,\n\t\tcreateEventDispatcher,\n\t\ttick\n\t} from \"svelte\";\n\timport { text_area_resize, resize } from \"../shared/utils\";\n\timport { BlockTitle } from \"@gradio/atoms\";\n\timport { Upload } from \"@gradio/upload\";\n\timport { Image } from \"@gradio/image/shared\";\n\timport type { I18nFormatter } from \"js/core/src/gradio_helper\";\n\timport type { FileData, Client } from \"@gradio/client\";\n\timport type { WaveformOptions } from \"@gradio/audio\";\n\timport {\n\t\tClear,\n\t\tFile,\n\t\tMusic,\n\t\tPaperclip,\n\t\tVideo,\n\t\tArrowUp,\n\t\tSquare,\n\t\tMicrophone\n\t} from \"@gradio/icons\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { BaseInteractiveAudio as InteractiveAudio } from \"@gradio/audio\";\n\timport type { InputHTMLAttributes } from \"./types\";\n\n\texport let value: { text: string; files: FileData[] } = {\n\t\ttext: \"\",\n\t\tfiles: []\n\t};\n\n\texport let value_is_output = false;\n\texport let lines = 1;\n\texport let i18n: I18nFormatter;\n\texport let placeholder = \"Type here...\";\n\texport let disabled = false;\n\texport let label: string;\n\texport let info: string | undefined = undefined;\n\texport let show_label = true;\n\texport let max_lines: number;\n\texport let submit_btn: string | boolean | null = null;\n\texport let stop_btn: string | boolean | null = null;\n\texport let rtl = false;\n\texport let autofocus = false;\n\texport let text_align: \"left\" | \"right\" | undefined = undefined;\n\texport let autoscroll = true;\n\texport let root: string;\n\texport let file_types_string: string | null = null;\n\texport let max_file_size: number | null = null;\n\texport let upload: Client[\"upload\"];\n\texport let stream_handler: Client[\"stream\"];\n\texport let file_count: \"single\" | \"multiple\" | \"directory\" = \"multiple\";\n\texport let max_plain_text_length = 1000;\n\texport let waveform_settings: Record<string, any>;\n\texport let waveform_options: WaveformOptions = {\n\t\tshow_recording_waveform: true\n\t};\n\texport let sources_string:\n\t\t| \"upload\"\n\t\t| \"upload,microphone\"\n\t\t| \"microphone\"\n\t\t| \"microphone,upload\" = \"upload\";\n\texport let active_source: \"microphone\" | null = null;\n\texport let html_attributes: InputHTMLAttributes | null = null;\n\texport let upload_promise: Promise<any> | null = null;\n\n\tlet upload_component: Upload;\n\tlet el: HTMLTextAreaElement | HTMLInputElement;\n\tlet can_scroll: boolean;\n\tlet previous_scroll_top = 0;\n\tlet user_has_scrolled_up = false;\n\texport let dragging = false;\n\tlet uploading = false;\n\t// value can be null in multimodalchatinterface when loading a deep link\n\tlet oldValue = value?.text ?? \"\";\n\tlet recording = false;\n\n\t$: sources = sources_string\n\t\t.split(\",\")\n\t\t.map((s) => s.trim())\n\t\t.filter((s) => s === \"upload\" || s === \"microphone\") as (\n\t\t| \"upload\"\n\t\t| \"microphone\"\n\t)[];\n\t$: file_types = file_types_string\n\t\t? file_types_string.split(\",\").map((s) => s.trim())\n\t\t: null;\n\t$: dispatch(\"drag\", dragging);\n\t$: show_upload =\n\t\tsources &&\n\t\tsources.includes(\"upload\") &&\n\t\t!(file_count === \"single\" && value.files.length > 0);\n\tlet mic_audio: FileData | null = null;\n\n\tlet full_container: HTMLDivElement;\n\n\t$: if (oldValue !== value.text) {\n\t\tdispatch(\"change\", value);\n\t\toldValue = value.text;\n\t}\n\n\t$: if (value === null) value = { text: \"\", files: [] };\n\t$: (value, el && lines !== max_lines && resize(el, lines, max_lines));\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: typeof value;\n\t\tsubmit: undefined;\n\t\tstop: undefined;\n\t\tblur: undefined;\n\t\tselect: SelectData;\n\t\tinput: undefined;\n\t\tfocus: undefined;\n\t\tdrag: boolean;\n\t\tupload: FileData[] | FileData;\n\t\tclear: undefined;\n\t\tload: FileData[] | FileData;\n\t\terror: string;\n\t\tstart_recording: undefined;\n\t\tpause_recording: undefined;\n\t\tstop_recording: undefined;\n\t}>();\n\n\tbeforeUpdate(() => {\n\t\tcan_scroll = el && el.offsetHeight + el.scrollTop > el.scrollHeight - 100;\n\t});\n\n\tconst scroll = (): void => {\n\t\tif (can_scroll && autoscroll && !user_has_scrolled_up) {\n\t\t\tel.scrollTo(0, el.scrollHeight);\n\t\t}\n\t};\n\n\tasync function handle_change(): Promise<void> {\n\t\tdispatch(\"change\", value);\n\t\tif (!value_is_output) {\n\t\t\tdispatch(\"input\");\n\t\t}\n\t}\n\n\tonMount(() => {\n\t\tif (autofocus && el !== null) {\n\t\t\tel.focus();\n\t\t}\n\t});\n\n\tconst after_update = (): void => {\n\t\tif (can_scroll && autoscroll) {\n\t\t\tscroll();\n\t\t}\n\t\tif (autofocus && el) {\n\t\t\tel.focus();\n\t\t}\n\t};\n\n\tafterUpdate(after_update);\n\n\tfunction handle_select(event: Event): void {\n\t\tconst target: HTMLTextAreaElement | HTMLInputElement = event.target as\n\t\t\t| HTMLTextAreaElement\n\t\t\t| HTMLInputElement;\n\t\tconst text = target.value;\n\t\tconst index: [number, number] = [\n\t\t\ttarget.selectionStart as number,\n\t\t\ttarget.selectionEnd as number\n\t\t];\n\t\tdispatch(\"select\", { value: text.substring(...index), index: index });\n\t}\n\n\tasync function handle_keypress(e: KeyboardEvent): Promise<void> {\n\t\tif (e.key === \"Enter\" && e.shiftKey && lines > 1) {\n\t\t\te.preventDefault();\n\t\t\tawait tick();\n\t\t\tdispatch(\"submit\");\n\t\t} else if (\n\t\t\te.key === \"Enter\" &&\n\t\t\t!e.shiftKey &&\n\t\t\tlines === 1 &&\n\t\t\tmax_lines >= 1\n\t\t) {\n\t\t\te.preventDefault();\n\t\t\tawait tick();\n\t\t\tdispatch(\"submit\");\n\t\t\tactive_source = null;\n\t\t\tadd_mic_audio_to_files();\n\t\t}\n\t}\n\n\tfunction handle_scroll(event: Event): void {\n\t\tconst target = event.target as HTMLElement;\n\t\tconst current_scroll_top = target.scrollTop;\n\t\tif (current_scroll_top < previous_scroll_top) {\n\t\t\tuser_has_scrolled_up = true;\n\t\t}\n\t\tprevious_scroll_top = current_scroll_top;\n\n\t\tconst max_scroll_top = target.scrollHeight - target.clientHeight;\n\t\tconst user_has_scrolled_to_bottom = current_scroll_top >= max_scroll_top;\n\t\tif (user_has_scrolled_to_bottom) {\n\t\t\tuser_has_scrolled_up = false;\n\t\t}\n\t}\n\n\tasync function handle_upload({\n\t\tdetail\n\t}: CustomEvent<FileData>): Promise<void> {\n\t\thandle_change();\n\t\tif (Array.isArray(detail)) {\n\t\t\tfor (let file of detail) {\n\t\t\t\tvalue.files.push(file);\n\t\t\t}\n\t\t\tvalue = value;\n\t\t} else {\n\t\t\tvalue.files.push(detail);\n\t\t\tvalue = value;\n\t\t}\n\t\tawait tick();\n\t\tdispatch(\"change\", value);\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tfunction remove_thumbnail(event: MouseEvent, index: number): void {\n\t\thandle_change();\n\t\tevent.stopPropagation();\n\t\tvalue.files.splice(index, 1);\n\t\tvalue = value;\n\t}\n\n\tfunction handle_upload_click(): void {\n\t\tupload_component.open_upload();\n\t}\n\n\tfunction handle_stop(): void {\n\t\tdispatch(\"stop\");\n\t}\n\n\tfunction add_mic_audio_to_files(): void {\n\t\tif (mic_audio) {\n\t\t\tvalue.files.push(mic_audio);\n\t\t\tvalue = value;\n\t\t\tmic_audio = null;\n\t\t}\n\t}\n\n\tfunction handle_submit(): void {\n\t\tdispatch(\"submit\");\n\t\tactive_source = null;\n\t\tadd_mic_audio_to_files();\n\t}\n\n\tasync function handle_paste(event: ClipboardEvent): Promise<void> {\n\t\tif (!event.clipboardData) return;\n\t\tconst items = event.clipboardData.items;\n\t\tconst text = event.clipboardData.getData(\"text\");\n\n\t\tif (text && text.length > max_plain_text_length) {\n\t\t\tevent.preventDefault();\n\t\t\tconst file = new window.File([text], \"pasted_text.txt\", {\n\t\t\t\ttype: \"text/plain\",\n\t\t\t\tlastModified: Date.now()\n\t\t\t});\n\t\t\tif (upload_component) {\n\t\t\t\tupload_component.load_files([file]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let index in items) {\n\t\t\tconst item = items[index];\n\t\t\tif (item.kind === \"file\" && item.type.includes(\"image\")) {\n\t\t\t\tconst blob = item.getAsFile();\n\t\t\t\tif (blob) upload_component.load_files([blob]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handle_dragenter(event: DragEvent): void {\n\t\tevent.preventDefault();\n\t\tdragging = true;\n\t}\n\n\tfunction handle_dragleave(event: DragEvent): void {\n\t\tevent.preventDefault();\n\t\tconst rect = full_container.getBoundingClientRect();\n\t\tconst { clientX, clientY } = event;\n\t\tif (\n\t\t\tclientX <= rect.left ||\n\t\t\tclientX >= rect.right ||\n\t\t\tclientY <= rect.top ||\n\t\t\tclientY >= rect.bottom\n\t\t) {\n\t\t\tdragging = false;\n\t\t}\n\t}\n\n\tfunction handle_drop(event: DragEvent): void {\n\t\tevent.preventDefault();\n\t\tdragging = false;\n\t\tif (event.dataTransfer && event.dataTransfer.files) {\n\t\t\tconst files = Array.from(event.dataTransfer.files);\n\n\t\t\tif (file_types) {\n\t\t\t\tconst valid_files = files.filter((file) => {\n\t\t\t\t\treturn file_types.some((type) => {\n\t\t\t\t\t\tif (type.startsWith(\".\")) {\n\t\t\t\t\t\t\treturn file.name.toLowerCase().endsWith(type.toLowerCase());\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn file.type.match(new RegExp(type.replace(\"*\", \".*\")));\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst invalid_files = files.length - valid_files.length;\n\t\t\t\tif (invalid_files > 0) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\"error\",\n\t\t\t\t\t\t`${invalid_files} file(s) were rejected. Accepted formats: ${file_types.join(\", \")}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (valid_files.length > 0) {\n\t\t\t\t\tupload_component.load_files(valid_files);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tupload_component.load_files(files);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"full-container\"\n\tclass:dragging\n\tbind:this={full_container}\n\ton:dragenter={handle_dragenter}\n\ton:dragleave={handle_dragleave}\n\ton:dragover|preventDefault\n\ton:drop={handle_drop}\n\trole=\"group\"\n\taria-label=\"Multimedia input field\"\n>\n\t<BlockTitle {show_label} {info} {rtl}>{label}</BlockTitle>\n\t<div class=\"input-container\">\n\t\t{#if sources && sources.includes(\"microphone\") && active_source === \"microphone\"}\n\t\t\t<InteractiveAudio\n\t\t\t\ton:change={({ detail }) => {\n\t\t\t\t\tif (detail !== null) {\n\t\t\t\t\t\tmic_audio = detail;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\ton:clear={() => {\n\t\t\t\t\tactive_source = null;\n\t\t\t\t}}\n\t\t\t\ton:start_recording={() => dispatch(\"start_recording\")}\n\t\t\t\ton:pause_recording={() => dispatch(\"pause_recording\")}\n\t\t\t\ton:stop_recording={() => dispatch(\"stop_recording\")}\n\t\t\t\tsources={[\"microphone\"]}\n\t\t\t\tclass_name=\"compact-audio\"\n\t\t\t\t{recording}\n\t\t\t\t{waveform_settings}\n\t\t\t\t{waveform_options}\n\t\t\t\t{i18n}\n\t\t\t\t{active_source}\n\t\t\t\t{upload}\n\t\t\t\t{stream_handler}\n\t\t\t\tstream_every={1}\n\t\t\t\teditable={true}\n\t\t\t\t{label}\n\t\t\t\t{root}\n\t\t\t\tloop={false}\n\t\t\t\tshow_label={false}\n\t\t\t\tbuttons={[]}\n\t\t\t\tdragging={false}\n\t\t\t/>\n\t\t{/if}\n\t\t{#if show_upload}\n\t\t\t<Upload\n\t\t\t\tbind:upload_promise\n\t\t\t\tbind:this={upload_component}\n\t\t\t\ton:load={handle_upload}\n\t\t\t\t{file_count}\n\t\t\t\tfiletype={file_types}\n\t\t\t\t{root}\n\t\t\t\t{max_file_size}\n\t\t\t\tbind:dragging\n\t\t\t\tbind:uploading\n\t\t\t\tshow_progress={false}\n\t\t\t\tdisable_click={true}\n\t\t\t\ton:error\n\t\t\t\thidden={true}\n\t\t\t\t{upload}\n\t\t\t\t{stream_handler}\n\t\t\t/>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\"input-wrapper\"\n\t\t\tclass:has-files={value.files.length > 0 || uploading}\n\t\t>\n\t\t\t{#if value.files.length > 0 || uploading || show_upload}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"thumbnails\"\n\t\t\t\t\taria-label=\"Uploaded files\"\n\t\t\t\t\tdata-testid=\"container_el\"\n\t\t\t\t>\n\t\t\t\t\t{#if show_upload}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tdata-testid=\"upload-button\"\n\t\t\t\t\t\t\tclass=\"upload-button mobile-thumbnail-add\"\n\t\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\t\ton:click={handle_upload_click}\n\t\t\t\t\t\t\taria-label=\"Upload a file\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Paperclip />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#each value.files as file, index}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"thumbnail-wrapper\"\n\t\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\t\taria-label=\"File thumbnail\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"thumbnail-item thumbnail-small\">\n\t\t\t\t\t\t\t\t{#if file.mime_type && file.mime_type.includes(\"image\")}\n\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\trestProps={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\t\t\t\t\talt: \"\",\n\t\t\t\t\t\t\t\t\t\t\tloading: \"lazy\",\n\t\t\t\t\t\t\t\t\t\t\tclass: \"thumbnail-image\"\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{:else if file.mime_type && file.mime_type.includes(\"audio\")}\n\t\t\t\t\t\t\t\t\t<Music />\n\t\t\t\t\t\t\t\t{:else if file.mime_type && file.mime_type.includes(\"video\")}\n\t\t\t\t\t\t\t\t\t<Video />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<File />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"delete-button\"\n\t\t\t\t\t\t\t\t\ton:click={(event) => remove_thumbnail(event, index)}\n\t\t\t\t\t\t\t\t\taria-label=\"Remove file\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Clear />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/each}\n\t\t\t\t\t{#if uploading}\n\t\t\t\t\t\t<div class=\"loader\" role=\"status\" aria-label=\"Uploading\"></div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"input-row\">\n\t\t\t\t<textarea\n\t\t\t\t\tdata-testid=\"textbox\"\n\t\t\t\t\tuse:text_area_resize={{\n\t\t\t\t\t\ttext: value.text,\n\t\t\t\t\t\tlines: lines,\n\t\t\t\t\t\tmax_lines: max_lines\n\t\t\t\t\t}}\n\t\t\t\t\tclass:no-label={!show_label}\n\t\t\t\t\tdir={rtl ? \"rtl\" : \"ltr\"}\n\t\t\t\t\tbind:value={value.text}\n\t\t\t\t\tbind:this={el}\n\t\t\t\t\t{placeholder}\n\t\t\t\t\trows={lines}\n\t\t\t\t\t{disabled}\n\t\t\t\t\ton:keypress={handle_keypress}\n\t\t\t\t\ton:blur\n\t\t\t\t\ton:select={handle_select}\n\t\t\t\t\ton:focus\n\t\t\t\t\ton:scroll={handle_scroll}\n\t\t\t\t\ton:paste={handle_paste}\n\t\t\t\t\tstyle={text_align ? \"text-align: \" + text_align : \"\"}\n\t\t\t\t\tautocapitalize={html_attributes?.autocapitalize}\n\t\t\t\t\tautocorrect={html_attributes?.autocorrect}\n\t\t\t\t\tspellcheck={html_attributes?.spellcheck}\n\t\t\t\t\tautocomplete={html_attributes?.autocomplete}\n\t\t\t\t\ttabindex={html_attributes?.tabindex}\n\t\t\t\t\tenterkeyhint={html_attributes?.enterkeyhint}\n\t\t\t\t\tlang={html_attributes?.lang}\n\t\t\t\t/>\n\n\t\t\t\t{#if sources && sources.includes(\"microphone\")}\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-testid=\"microphone-button\"\n\t\t\t\t\t\tclass=\"microphone-button\"\n\t\t\t\t\t\tclass:recording\n\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tactive_source =\n\t\t\t\t\t\t\t\tactive_source !== \"microphone\" ? \"microphone\" : null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\taria-label=\"Record audio\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Microphone />\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if submit_btn}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"submit-button\"\n\t\t\t\t\t\tclass:padded-button={submit_btn !== true}\n\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\ton:click={handle_submit}\n\t\t\t\t\t\taria-label=\"Submit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if submit_btn === true}\n\t\t\t\t\t\t\t<ArrowUp />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{submit_btn}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t\t{#if stop_btn}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"stop-button\"\n\t\t\t\t\t\tclass:padded-button={stop_btn !== true}\n\t\t\t\t\t\ton:click={handle_stop}\n\t\t\t\t\t\taria-label=\"Stop\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if stop_btn === true}\n\t\t\t\t\t\t\t<Square fill={\"none\"} stroke_width={2.5} />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{stop_btn}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.full-container {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding: var(--block-padding);\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.full-container.dragging {\n\t\tborder-color: var(--color-accent);\n\t\tborder-radius: calc(var(--radius-sm) - var(--size-px));\n\t}\n\n\t.full-container.dragging::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tpointer-events: none;\n\t}\n\n\t.input-container {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tflex-direction: column;\n\t\tgap: 0;\n\t}\n\n\t.input-wrapper {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tflex-direction: column;\n\t\tgap: 0;\n\t\tbackground: var(--block-background-fill);\n\t\tborder-radius: var(--radius-xl);\n\t\tpadding: var(--spacing-sm);\n\t\talign-items: flex-start;\n\t\tmin-height: auto;\n\t}\n\n\t.input-wrapper.has-files {\n\t\tpadding-top: var(--spacing-xs);\n\t}\n\n\t.input-row {\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tgap: var(--spacing-sm);\n\t\twidth: 100%;\n\t}\n\n\t.thumbnails {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: var(--spacing-sm);\n\t\tpadding: var(--spacing-xs) 0;\n\t\tmargin-bottom: var(--spacing-xs);\n\t\toverflow-x: auto;\n\t\toverflow-y: hidden;\n\t\tscrollbar-width: none;\n\t\t-ms-overflow-style: none;\n\t\tflex-wrap: nowrap;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tscroll-behavior: smooth;\n\t\toverflow-y: scroll;\n\t\twidth: 100%;\n\t}\n\n\t.thumbnails::-webkit-scrollbar,\n\t.thumbnails::-webkit-scrollbar-track,\n\t.thumbnails::-webkit-scrollbar-thumb {\n\t\tdisplay: none;\n\t}\n\n\t.thumbnails :global(img) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: cover;\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t.thumbnail-wrapper {\n\t\tposition: relative;\n\t\tflex-shrink: 0;\n\t}\n\n\t.thumbnail-item {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tborder: var(--size-px) solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-md);\n\t\tbackground: var(--background-fill-secondary);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tcursor: default;\n\t\tpadding: 0;\n\t}\n\n\t.thumbnail-small {\n\t\twidth: var(--size-10);\n\t\theight: var(--size-10);\n\t}\n\n\t.thumbnail-item :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.delete-button {\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: var(--button-primary-text-color);\n\t\tbackground: rgba(0, 0, 0, 0.6);\n\t\tbackdrop-filter: var(--blur-xs);\n\t\tborder-radius: var(--radius-md);\n\t\tpadding: 0;\n\t\tz-index: var(--layer-1);\n\t\topacity: 0;\n\t\ttransition: opacity 0.1s var(--easing-standard);\n\t}\n\n\t.delete-button:hover {\n\t\tbackground: rgba(0, 0, 0, 0.8);\n\t}\n\n\t.delete-button :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.thumbnail-item:hover .delete-button {\n\t\topacity: 1;\n\t}\n\n\ttextarea {\n\t\tflex-grow: 1;\n\t\toutline: none !important;\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t\tcolor: var(--body-text-color);\n\t\tfont-weight: var(--input-text-weight);\n\t\tfont-size: var(--input-text-size);\n\t\tborder: none;\n\t\tmargin: 0;\n\t\tresize: none;\n\t\tposition: relative;\n\t\tz-index: var(--layer-1);\n\t\ttext-align: left;\n\t\tmin-height: var(--size-9);\n\t}\n\n\ttextarea:disabled {\n\t\t-webkit-opacity: 1;\n\t\topacity: 1;\n\t}\n\n\ttextarea::placeholder {\n\t\tcolor: var(--input-placeholder-color);\n\t}\n\n\ttextarea[dir=\"rtl\"] {\n\t\ttext-align: right;\n\t}\n\n\ttextarea[dir=\"rtl\"] ~ .submit-button {\n\t\torder: -1;\n\t}\n\n\ttextarea[dir=\"rtl\"] ~ .submit-button :global(svg) {\n\t\ttransform: scaleX(-1);\n\t}\n\n\t.mobile-thumbnail-add,\n\t.microphone-button {\n\t\tcolor: var(--body-text-color);\n\t\tcursor: pointer;\n\t\tpadding: var(--spacing-sm);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t\tborder-radius: var(--radius-md);\n\t\ttransition:\n\t\t\tbackground 0.2s var(--easing-standard),\n\t\t\tborder-color 0.2s var(--easing-standard);\n\t}\n\n\t.mobile-thumbnail-add {\n\t\twidth: var(--size-10);\n\t\theight: var(--size-10);\n\t}\n\n\t.microphone-button {\n\t\twidth: var(--size-9);\n\t\theight: var(--size-9);\n\t}\n\n\t.mobile-thumbnail-add:hover:not(:disabled),\n\t.microphone-button:hover:not(:disabled) {\n\t\tbackground: var(--button-secondary-background-fill-hover);\n\t\tborder-color: var(--border-color-primary);\n\t}\n\n\t.mobile-thumbnail-add:disabled,\n\t.microphone-button:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\t.mobile-thumbnail-add :global(svg),\n\t.microphone-button :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.submit-button,\n\t.stop-button {\n\t\tborder: var(--size-px) solid var(--border-color-primary);\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t\twidth: var(--size-9);\n\t\theight: var(--size-9);\n\t\tborder-radius: var(--radius-md);\n\t\tz-index: var(--layer-1);\n\t\ttransition:\n\t\t\tbackground 0.2s var(--easing-standard),\n\t\t\tborder-color 0.2s var(--easing-standard);\n\t}\n\n\t.submit-button:hover:not(:disabled),\n\t.stop-button:hover:not(:disabled) {\n\t\tbackground: var(--button-secondary-background-fill-hover);\n\t}\n\n\t.submit-button:active:not(:disabled),\n\t.stop-button:active:not(:disabled) {\n\t\tbox-shadow: var(--button-shadow-active);\n\t}\n\n\t.submit-button:disabled,\n\t.stop-button:disabled {\n\t\tcursor: not-allowed;\n\t}\n\n\t.submit-button :global(svg),\n\t.stop-button :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.padded-button {\n\t\tpadding: 0 var(--spacing-lg);\n\t\twidth: auto;\n\t\tborder-radius: var(--radius-xl);\n\t}\n\n\t.loader {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tborder: var(--size-1) solid var(--border-color-primary);\n\t\tborder-top-color: var(--color-accent);\n\t\tborder-radius: var(--radius-100);\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t\tanimation: spin 1s linear infinite;\n\t\tflex-shrink: 0;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.input-wrapper {\n\t\t\tpadding: var(--spacing-xs);\n\t\t}\n\n\t\t.thumbnails {\n\t\t\tpadding: var(--spacing-xs) 0;\n\t\t\tmargin-bottom: var(--spacing-md);\n\t\t}\n\n\t\t.thumbnail-small,\n\t\t.mobile-thumbnail-add {\n\t\t\twidth: var(--size-9);\n\t\t\theight: var(--size-9);\n\t\t}\n\n\t\t.thumbnail-item:active .delete-button {\n\t\t\topacity: 1;\n\t\t}\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as BaseMultimodalTextbox } from \"./shared/MultimodalTextbox.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { Gradio, type SelectData } from \"@gradio/utils\";\n\timport MultimodalTextbox from \"./shared/MultimodalTextbox.svelte\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport { onMount, tick } from \"svelte\";\n\timport type { WaveformOptions } from \"../audio/shared/types\";\n\timport type {\n\t\tMultimodalTextboxProps,\n\t\tMultimodalTextboxEvents\n\t} from \"./types\";\n\n\tlet upload_promise = $state<Promise<any>>();\n\n\tclass MultimodalTextboxGradio extends Gradio<\n\t\tMultimodalTextboxEvents,\n\t\tMultimodalTextboxProps\n\t> {\n\t\tasync get_data() {\n\t\t\tif (upload_promise) {\n\t\t\t\tawait upload_promise;\n\t\t\t\tawait tick();\n\t\t\t}\n\t\t\tconst data = await super.get_data();\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tlet props = $props();\n\tconst gradio = new MultimodalTextboxGradio(props);\n\n\tconst value = $derived(gradio.props.value || { text: \"\", files: [] });\n\n\tlet dragging: boolean;\n\tlet active_source: \"microphone\" | null = null;\n\n\tlet color_accent = \"darkorange\";\n\n\tconst waveform_settings = {\n\t\theight: 50,\n\t\tbarWidth: 2,\n\t\tbarGap: 3,\n\t\tcursorWidth: 2,\n\t\tcursorColor: \"#ddd5e9\",\n\t\tautoplay: false,\n\t\tbarRadius: 10,\n\t\tdragToSeek: true,\n\t\tnormalize: true,\n\t\tminPxPerSec: 20,\n\t\twaveColor: \"\",\n\t\tprogressColor: \"\",\n\t\tmediaControls: false as boolean | undefined,\n\t\tsampleRate: 44100\n\t};\n\n\tonMount(() => {\n\t\tcolor_accent = getComputedStyle(document?.documentElement).getPropertyValue(\n\t\t\t\"--color-accent\"\n\t\t);\n\t\tset_trim_region_colour();\n\t\twaveform_settings.waveColor =\n\t\t\tgradio.props?.waveform_options?.waveform_color || \"#9ca3af\";\n\t\twaveform_settings.progressColor =\n\t\t\tgradio.props?.waveform_options?.waveform_progress_color || color_accent;\n\t\twaveform_settings.mediaControls =\n\t\t\tgradio.props?.waveform_options?.show_controls;\n\t\twaveform_settings.sampleRate =\n\t\t\tgradio.props?.waveform_options?.sample_rate || 44100;\n\t});\n\n\tconst trim_region_settings = {\n\t\tcolor: gradio.props?.waveform_options?.trim_region_color,\n\t\tdrag: true,\n\t\tresize: true\n\t};\n\n\tfunction set_trim_region_colour(): void {\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--trim-region-color\",\n\t\t\ttrim_region_settings.color || color_accent\n\t\t);\n\t}\n\n\t// Create const references to the callbacks so that afterUpdate in child is not called on every prop change\n\t// in the DOM. See https://github.com/gradio-app/gradio/issues/11933\n\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\tconst upload_fn = (...args: Parameters<typeof gradio.shared.client.upload>) =>\n\t\tgradio.shared.client.upload(...args);\n\tconst i18n = (s: string | null | undefined): string => gradio.i18n(s);\n\tconst stream_handler_fn = (\n\t\t...args: Parameters<typeof gradio.shared.client.stream>\n\t): EventSource => gradio.shared.client.stream(...args);\n\n\tlet sources_string = $derived(\n\t\tgradio.props.sources.join(\",\") as\n\t\t\t| \"upload\"\n\t\t\t| \"upload,microphone\"\n\t\t\t| \"microphone\"\n\t\t\t| \"microphone,upload\"\n\t);\n\n\tlet file_types_string = $derived.by(\n\t\t() => (gradio.props.file_types || []).join(\",\") || null\n\t);\n</script>\n\n<Block\n\tvisible={gradio.shared.visible}\n\telem_id={gradio.shared.elem_id}\n\telem_classes={[...(gradio.shared.elem_classes || []), \"multimodal-textbox\"]}\n\tscale={gradio.shared.scale}\n\tmin_width={gradio.shared.min_width}\n\tallow_overflow={false}\n\tpadding={false}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n>\n\t{#if gradio.shared.loading_status}\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...gradio.shared.loading_status}\n\t\t\ton:clear_status={() =>\n\t\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t\t/>\n\t{/if}\n\n\t<MultimodalTextbox\n\t\tbind:upload_promise\n\t\t{value}\n\t\tvalue_is_output\n\t\tbind:dragging\n\t\tbind:active_source\n\t\t{file_types_string}\n\t\troot={gradio.shared.root}\n\t\tlabel={gradio.shared.label || \"MultimodalTextbox\"}\n\t\tinfo={gradio.props.info}\n\t\tshow_label={gradio.shared.show_label}\n\t\tlines={gradio.props.lines}\n\t\trtl={gradio.props.rtl}\n\t\ttext_align={gradio.props.text_align}\n\t\twaveform_settings={waveform_settings as WaveformOptions}\n\t\t{i18n}\n\t\tmax_lines={!gradio.props.max_lines\n\t\t\t? gradio.props.lines + 1\n\t\t\t: gradio.props.max_lines}\n\t\tplaceholder={gradio.props.placeholder}\n\t\tsubmit_btn={gradio.props.submit_btn}\n\t\tstop_btn={gradio.props.stop_btn}\n\t\tautofocus={gradio.props.autofocus}\n\t\tautoscroll={gradio.shared.autoscroll}\n\t\tfile_count={gradio.props.file_count}\n\t\t{sources_string}\n\t\tmax_file_size={gradio.shared.max_file_size}\n\t\ton:change={(e) => (\n\t\t\t(gradio.props.value = e.detail),\n\t\t\tgradio.dispatch(\"change\", gradio.props.value)\n\t\t)}\n\t\ton:input={() => gradio.dispatch(\"input\")}\n\t\ton:submit={() => gradio.dispatch(\"submit\")}\n\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\ton:blur={() => gradio.dispatch(\"blur\")}\n\t\ton:select={(e) => gradio.dispatch(\"select\", e.detail)}\n\t\ton:focus={() => gradio.dispatch(\"focus\")}\n\t\ton:error={({ detail }) => {\n\t\t\tgradio.dispatch(\"error\", detail);\n\t\t}}\n\t\ton:start_recording={() => gradio.dispatch(\"start_recording\")}\n\t\ton:pause_recording={() => gradio.dispatch(\"pause_recording\")}\n\t\ton:stop_recording={() => gradio.dispatch(\"stop_recording\")}\n\t\ton:upload={(e) => gradio.dispatch(\"upload\", e.detail)}\n\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\tdisabled={!gradio.shared.interactive}\n\t\tupload={upload_fn}\n\t\tstream_handler={stream_handler_fn}\n\t\tmax_plain_text_length={gradio.props.max_plain_text_length}\n\t\thtml_attributes={gradio.props.html_attributes}\n\t/>\n</Block>\n"],"names":["resize","target","lines","max_lines","tick","computed_styles","padding_top","padding_bottom","line_height","max","min","scroll_height","text_area_resize","_el","_value","handle_input","event","value","$.prop","$$props","value_is_output","i18n","placeholder","disabled","label","info","show_label","submit_btn","stop_btn","rtl","autofocus","text_align","autoscroll","root","file_types_string","max_file_size","upload","stream_handler","file_count","waveform_settings","waveform_options","sources_string","active_source","html_attributes","upload_promise","upload_component","$.mutable_source","el","can_scroll","previous_scroll_top","user_has_scrolled_up","dragging","uploading","oldValue","mic_audio","dispatch","createEventDispatcher","beforeUpdate","$.get","scroll","handle_change","onMount","afterUpdate","handle_select","text","index","handle_keypress","handle_scroll","current_scroll_top","max_scroll_top","handle_upload","detail","file","remove_thumbnail","handle_upload_click","add_mic_audio_to_files","$.set","handle_submit","handle_paste","items","max_plain_text_length","item","blob","handle_dragenter","handle_dragleave","rect","full_container","clientX","clientY","handle_drop","files","valid_files","file_types","type","invalid_files","sources","s","show_upload","$$value","$$render","consequent_1","consequent_2","$.each","node_6","$.deep_read_state","$.untrack","$.event","button_1","consequent_6","$.bind_this","div","classes_1","$.set_class","div_2","$.state","props","$.rest_props","gradio","MultimodalTextboxGradio","$.derived","color_accent","set_trim_region_colour","trim_region_settings","upload_fn","args","stream_handler_fn","$0","consequent"],"mappings":"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"}