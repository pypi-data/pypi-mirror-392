const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex-DTqblEKI.css","./auto-render-sM07gZ5x.js","./katex-qrhCpa0F.js","./mermaid.core-DWJA5ZZW.js","./index-bhUlIv2p.js","./index-DcPzVlJ5.css","./i18n-5O2R8uRh.js","./i18n-DS6k9oVZ.css","./step-6CpiyZxH.js","./dispatch-kxCwF96_.js","./select-BigU4G0v.js"])))=>i.map(i=>d[i]);
import{p as H,T as q,l as N,d as U,a as K,f as X,t as Z,b as J,c as Q,i as u,m as M,g as c,aj as w,_ as W,h as Y,j as A,r as $}from"./index-bhUlIv2p.js";import{p as d,d as ee,e as te,a as ae}from"./i18n-5O2R8uRh.js";import{h as re}from"./html-BYxzblBS.js";import{A as se,c as ie}from"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";const ne=(i,a=location.href)=>{try{return!!i&&new URL(i).origin!==new URL(a).origin}catch{return!1}};function O(i){const a=new se,o=new DOMParser().parseFromString(i,"text/html");return R(o.body,"A",r=>{r instanceof HTMLElement&&"target"in r&&ne(r.getAttribute("href"),location.href)&&(r.setAttribute("target","_blank"),r.setAttribute("rel","noopener noreferrer"))}),a.sanitize(o).body.innerHTML}function R(i,a,o){i&&(i.nodeName===a||typeof a=="function")&&o(i);const r=i?.childNodes||[];for(let g=0;g<r.length;g++)R(r[g],a,o)}const D=["!--","!doctype","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","search","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],le=["g","defs","use","symbol","rect","circle","ellipse","line","polyline","polygon","path","image","text","tspan","textPath","linearGradient","radialGradient","stop","pattern","clipPath","mask","filter","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feGaussianBlur","feMerge","feMorphology","feOffset","feSpecularLighting","feTurbulence","feMergeNode","feFuncR","feFuncG","feFuncB","feFuncA","feDistantLight","fePointLight","feSpotLight","feFlood","feTile","animate","animateTransform","animateMotion","mpath","set","view","cursor","foreignObject","desc","title","metadata","switch"],oe=[...D,...le.filter(i=>!D.includes(i))];var me=X("<span><!></span>");function _e(i,a){H(a,!1);let o=d(a,"chatbot",12,!0),r=d(a,"message",12),g=d(a,"sanitize_html",12,!0),m=d(a,"latex_delimiters",28,()=>[]),p=d(a,"render_markdown",12,!0),y=d(a,"line_breaks",12,!0),k=d(a,"header_links",12,!1),b=d(a,"allow_tags",12,!1),x=d(a,"theme_mode",12,"system"),f=M(),v=M(),L=!1;const P=ie({header_links:k(),line_breaks:y(),latex_delimiters:m()||[]});function z(e){return!m()||m().length===0?!1:m().some(t=>e.includes(t.left)&&e.includes(t.right))}function E(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(e,t){if(t===!0){const n=/<\/?([a-zA-Z][a-zA-Z0-9-]*)([\s>])/g;return e.replace(n,(s,l,_)=>oe.includes(l.toLowerCase())?s:s.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}if(Array.isArray(t)){const n=t.map(l=>({open:new RegExp(`<(${l})(\\s+[^>]*)?>`,"gi"),close:new RegExp(`</(${l})>`,"gi")}));let s=e;return n.forEach(l=>{s=s.replace(l.open,_=>_.replace(/</g,"&lt;").replace(/>/g,"&gt;")),s=s.replace(l.close,_=>_.replace(/</g,"&lt;").replace(/>/g,"&gt;"))}),s}return e}function S(e){let t=e;if(p()){const n=[];m().forEach((s,l)=>{const _=E(s.left),V=E(s.right),j=new RegExp(`${_}([\\s\\S]+?)${V}`,"g");t=t.replace(j,(G,ce)=>(n.push(G),`%%%LATEX_BLOCK_${n.length-1}%%%`))}),t=P.parse(t),t=t.replace(/%%%LATEX_BLOCK_(\d+)%%%/g,(s,l)=>n[parseInt(l,10)])}return b()&&(t=C(t,b())),g()&&O&&(t=O(t)),t}async function B(e){if(m().length>0&&e&&z(e))if(!L)await Promise.all([w(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),w(()=>import("./auto-render-sM07gZ5x.js"),__vite__mapDeps([1,2]),import.meta.url)]).then(([,{default:t}])=>{L=!0,t(u(f),{delimiters:m(),throwOnError:!1})});else{const{default:t}=await w(async()=>{const{default:n}=await import("./auto-render-sM07gZ5x.js");return{default:n}},__vite__mapDeps([1,2]),import.meta.url);t(u(f),{delimiters:m(),throwOnError:!1})}if(u(f)){const t=u(f).querySelectorAll(".mermaid");if(t.length>0){await W();const{default:n}=await w(async()=>{const{default:s}=await import("./mermaid.core-DWJA5ZZW.js").then(l=>l.b7);return{default:s}},__vite__mapDeps([3,4,5,6,7,8,9,10]),import.meta.url);n.initialize({startOnLoad:!1,theme:x()==="dark"?"dark":"default",securityLevel:"antiscript"}),await n.run({nodes:Array.from(t).map(s=>s)})}}}q(async()=>{u(f)&&document.body.contains(u(f))?await B(r()):console.error("Element is not in the DOM")}),N(()=>U(r()),()=>{r()&&r().trim()?A(v,S(r())):A(v,"")}),K();var F={get chatbot(){return o()},set chatbot(e){o(e),c()},get message(){return r()},set message(e){r(e),c()},get sanitize_html(){return g()},set sanitize_html(e){g(e),c()},get latex_delimiters(){return m()},set latex_delimiters(e){m(e),c()},get render_markdown(){return p()},set render_markdown(e){p(e),c()},get line_breaks(){return y()},set line_breaks(e){y(e),c()},get header_links(){return k()},set header_links(e){k(e),c()},get allow_tags(){return b()},set allow_tags(e){b(e),c()},get theme_mode(){return x()},set theme_mode(e){x(e),c()}};ee();var h=me();let T;var I=Y(h);return re(I,()=>u(v)),$(h),te(h,e=>A(f,e),()=>u(f)),Z(()=>T=ae(h,1,"md svelte-1hf8a14",null,T,{chatbot:o(),prose:p()})),J(i,h),Q(F)}export{_e as M};
//# sourceMappingURL=MarkdownCode-B8rUXPOm.js.map
