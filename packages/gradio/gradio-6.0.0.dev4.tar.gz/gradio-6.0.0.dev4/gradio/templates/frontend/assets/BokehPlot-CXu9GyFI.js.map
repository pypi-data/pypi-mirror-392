{"version":3,"file":"BokehPlot-CXu9GyFI.js","sources":["../../../../js/plot/shared/plot_types/BokehPlot.svelte"],"sourcesContent":["<script lang=\"ts\">\n\t//@ts-nocheck\n\timport { onDestroy } from \"svelte\";\n\n\texport let value;\n\texport let bokeh_version: string | null;\n\tconst div_id = `bokehDiv-${Math.random().toString(5).substring(2)}`;\n\t$: plot = value?.plot;\n\n\tasync function embed_bokeh(_plot: Record<string, any>): void {\n\t\tif (document) {\n\t\t\tif (document.getElementById(div_id)) {\n\t\t\t\tdocument.getElementById(div_id).innerHTML = \"\";\n\t\t\t}\n\t\t}\n\t\tif (window.Bokeh) {\n\t\t\tload_bokeh();\n\t\t\tlet plotObj = JSON.parse(_plot);\n\t\t\tawait window.Bokeh.embed.embed_item(plotObj, div_id);\n\t\t}\n\t}\n\n\t$: loaded && embed_bokeh(plot);\n\n\tconst main_src = `https://cdn.bokeh.org/bokeh/release/bokeh-${bokeh_version}.min.js`;\n\n\tconst plugins_src = [\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-widgets-${bokeh_version}.min.js`,\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-tables-${bokeh_version}.min.js`,\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-gl-${bokeh_version}.min.js`,\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-api-${bokeh_version}.min.js`\n\t];\n\n\tlet loaded = false;\n\tasync function load_plugins(): HTMLScriptElement[] {\n\t\tawait Promise.all(\n\t\t\tplugins_src.map((src, i) => {\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tconst script = document.createElement(\"script\");\n\t\t\t\t\tscript.onload = resolve;\n\t\t\t\t\tscript.src = src;\n\t\t\t\t\tdocument.head.appendChild(script);\n\t\t\t\t\treturn script;\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\n\t\tloaded = true;\n\t}\n\n\tlet plugin_scripts = [];\n\n\tfunction handle_bokeh_loaded(): void {\n\t\tplugin_scripts = load_plugins();\n\t}\n\n\tfunction load_bokeh(): HTMLScriptElement {\n\t\tconst script = document.createElement(\"script\");\n\t\tscript.onload = handle_bokeh_loaded;\n\t\tscript.src = main_src;\n\t\tconst is_bokeh_script_present = document.head.querySelector(\n\t\t\t`script[src=\"${main_src}\"]`\n\t\t);\n\t\tif (!is_bokeh_script_present) {\n\t\t\tdocument.head.appendChild(script);\n\t\t} else {\n\t\t\thandle_bokeh_loaded();\n\t\t}\n\t\treturn script;\n\t}\n\n\tconst main_script = bokeh_version ? load_bokeh() : null;\n\n\tonDestroy(() => {\n\t\tif (main_script in document.children) {\n\t\t\tdocument.removeChild(main_script);\n\t\t\tplugin_scripts.forEach((child) => document.removeChild(child));\n\t\t}\n\t});\n</script>\n\n<div data-testid={\"bokeh\"} id={div_id} class=\"gradio-bokeh\" />\n\n<style>\n\t.gradio-bokeh {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n</style>\n"],"names":["value","$.prop","$$props","bokeh_version","div_id","embed_bokeh","load_bokeh","plotObj","_plot","main_src","plugins_src","loaded","load_plugins","src","i","resolve","script","plugin_scripts","handle_bokeh_loaded","main_script","plot","$.get"],"mappings":"2PAAA,yBAMaA,EAAGC,EAAAC,EAAA,QAAA,EAAA,EACLC,EAAWF,EAAAC,EAAA,gBAAA,EAAA,QAEhBE,EAAA,YAAsB,KAA0B,OAAA,EAAA,SAAA,CAAA,EAAA,UAAA,CAAA,CAAA,GAGlD,eAAAC,QACD,UACD,SAAA,eAAAD,CAAA,IACA,SAAI,eAAcA,CAAA,EAAA,UAAA,WAGjB,MAAY,CACbE,EAAA,EACD,IAAAC,EAAA,KAAA,MAAAC,CAAA,QAES,OAAI,MAAA,iBAAiBD,EAAAH,CAAA,CAE9B,CAEA,CAIC,MAAAK,+CAAkDN,EAAa,CAAA,UAG5DO,EAAc,uDACSP,EAAA,CAAA,+DAEEA,EAAA,CAAA,2DACKA,EAAA,CAAA,8DACiB,CAAA,WAG/C,IAAAQ,IAAA,EAAA,iBACAC,GAAa,OACd,QAAE,IACHF,EACA,IAAA,CAAAG,EAAAC,QAEQ,QAAIC,GAAA,CACd,MAAAC,EAAA,SAAA,cAAA,QAAA,EAEI,OAAAA,EAAA,OAAiBD,EAErBC,EAAS,IAAAH,EACR,SAAA,KAAc,aAAiB,EAChCG,CAEA,CAAA,CACC,CAAA,MAGM,EAAA,MAKNC,EAAA,CAAA,WACCC,GAAqB,CACtBD,EAAAL,EAAA,CACA,UAGKN,GAAc,CAEpB,MAAAU,EAAe,SAAA,cAAA,QAAA,EACd,OAAAA,EAAI,OAAAE,EACHF,EAAA,IAAAP,WACkC,KAAA,6BACnCA,CAAA,IAAA,qCAWA,MAAAU,EAAKhB,IAAAG,EAAA,EAAA,0HA9ELc,IAAY,GAAE,IAAA,6BAkBdT,CAAA,GAAAN,EAAAgB,EAAAD,CAAA,CAAA"}