import{f as ae,g as re,i as w,t as A,b as x,a as C,c as D,u as H,e as se}from"./i18n-5O2R8uRh.js";import{p as oe,af as z,ag as le,ah as ie,i as t,j as v,f as _,U as B,a9 as ne,s as h,b as d,c as pe,h as I,X as ue,t as y,r as b,k as de,e as g}from"./index-bhUlIv2p.js";import{B as ce}from"./Block-CWUxteKJ.js";import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";/* empty css                                                        */import{B as me}from"./BlockLabel-B0lD-lMe.js";import{E as ve}from"./Empty-5TrEX-tI.js";import{I as J}from"./Image-CR2fNVDq.js";import{G as he}from"./utils.svelte-Baqu2V3e.js";import{I as ge}from"./IconButtonWrapper-DsFz-pKX.js";import{F as _e}from"./FullscreenButton-0A34tPEK.js";import{S as fe}from"./index-D9STzgM4.js";/* empty css                                                   */import"./prism-python-Bb2K859D.js";import"./IconButton-CbXWacxl.js";import"./svelte-component-Df_c_uts.js";import"./misc-BSG2QtlE.js";import"./Maximize-Dcz8xF4p.js";import"./Clear-DimAkCP_.js";var be=_("<img/>"),$e=_('<button class="legend-item svelte-1oizopk"> </button>'),ke=_('<div class="legend svelte-1oizopk"></div>'),we=_('<div class="image-container svelte-1oizopk"><!> <img alt="the base file that is annotated"/> <!></div> <!>',1),xe=_('<!> <!> <div class="container svelte-1oizopk"><!></div>',1);function He(K,P){oe(P,!0);const N=ae(P,["$$slots","$$events","$$legacy"]),e=new he(N);let E=z(le(e.props.value)),c=z(null),F,n=z(!1),O=ne(()=>e.shared.label||e.i18n("annotated_image.annotated_image"));ie(()=>{t(E)!=e.props.value&&(v(E,e.props.value,!0),e.dispatch("change"))});function G(l){v(c,l,!0)}function M(){v(c,null)}function Q(l,S){e.dispatch("select",{value:S,index:l})}ce(K,{get visible(){return e.shared.visible},get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},padding:!1,get height(){return e.props.height},get width(){return e.props.width},allow_overflow:!1,get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},get fullscreen(){return t(n)},set fullscreen(l){v(n,l,!0)},children:(l,S)=>{var j=xe(),L=B(j);fe(L,re({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status));var U=h(L,2);me(U,{get show_label(){return e.shared.show_label},get Icon(){return J},get label(){return t(O)}});var W=h(U,2),R=I(W);{var T=p=>{ve(p,{size:"large",unpadded_box:!0,children:(f,m)=>{J(f)},$$slots:{default:!0}})},V=p=>{var f=we(),m=B(f),X=I(m);ge(X,{children:(s,o)=>{var u=ue(),r=B(u);{var i=a=>{_e(a,{get fullscreen(){return t(n)},$$events:{fullscreen:({detail:k})=>{v(n,k,!0)}}})};w(r,a=>{(e.props.buttons.includes("fullscreen")??!0)&&a(i)})}d(s,u)},$$slots:{default:!0}});var $=h(X,2);let q;var Y=h($,2);A(Y,17,()=>e.props.value?e.props.value.annotations:[],H,(s,o,u)=>{var r=be();let i;y(a=>{x(r,"alt",`segmentation mask identifying ${e.shared.label??""} within the uploaded file`),i=C(r,1,"mask fit-height svelte-1oizopk",null,i,{"fit-height":!t(n),active:t(c)==t(o).label,inactive:t(c)!=t(o).label&&t(c)!=null}),x(r,"src",t(o).image.url),D(r,a)},[()=>e.props.color_map&&t(o).label in e.props.color_map?null:`filter: hue-rotate(${Math.round(u*360/(e.props.value?.annotations.length??1))}deg);`]),d(s,r)}),b(m),se(m,s=>F=s,()=>F);var Z=h(m,2);{var ee=s=>{var o=ke();A(o,21,()=>e.props.value.annotations,H,(u,r,i)=>{var a=$e(),k=I(a,!0);b(a),y(te=>{D(a,`background-color: ${te??""}`),de(k,t(r).label)},[()=>e.props.color_map&&t(r).label in e.props.color_map?e.props.color_map[t(r).label]+"88":`hsla(${Math.round(i*360/e.props.value.annotations.length)}, 100%, 50%, 0.3)`]),g("mouseover",a,()=>G(t(r).label)),g("focus",a,()=>G(t(r).label)),g("mouseout",a,()=>M()),g("blur",a,()=>M()),g("click",a,()=>Q(i,t(r).label)),d(u,a)}),b(o),d(s,o)};w(Z,s=>{e.props.show_legend&&e.props.value&&s(ee)})}y(()=>{q=C($,1,"base-image svelte-1oizopk",null,q,{"fit-height":e.props.height&&!t(n)}),x($,"src",e.props.value?e.props.value.image.url:null)}),d(p,f)};w(R,p=>{e.props.value==null?p(T):p(V,!1)})}b(W),d(l,j)},$$slots:{default:!0}}),pe()}export{He as default};
//# sourceMappingURL=Index-x0DXAJNx.js.map
