{"version":3,"file":"Index-mDDtDeaY.js","sources":["../../../../js/image/shared/ImageUploader.svelte","../../../../js/image/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport { BlockLabel, IconButtonWrapper, IconButton } from \"@gradio/atoms\";\n\timport { Clear, Image as ImageIcon } from \"@gradio/icons\";\n\timport { FullscreenButton } from \"@gradio/atoms\";\n\timport {\n\t\ttype SelectData,\n\t\ttype I18nFormatter,\n\t\ttype ValueData\n\t} from \"@gradio/utils\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\timport Webcam from \"./Webcam.svelte\";\n\n\timport { Upload, UploadProgress } from \"@gradio/upload\";\n\timport { FileData, type Client } from \"@gradio/client\";\n\timport { SelectSource } from \"@gradio/atoms\";\n\timport Image from \"./Image.svelte\";\n\timport type { Base64File, WebcamOptions } from \"./types\";\n\n\texport let value: null | FileData | Base64File = null;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\n\ttype source_type = \"upload\" | \"webcam\" | \"clipboard\" | \"microphone\" | null;\n\n\texport let sources: source_type[] = [\"upload\", \"clipboard\", \"webcam\"];\n\texport let streaming = false;\n\texport let pending = false;\n\texport let webcam_options: WebcamOptions;\n\texport let selectable = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\texport let max_file_size: number | null = null;\n\texport let upload: Client[\"upload\"];\n\texport let stream_handler: Client[\"stream\"];\n\texport let stream_every: number;\n\texport let time_limit: number;\n\texport let show_fullscreen_button = true;\n\texport let stream_state: \"open\" | \"waiting\" | \"closed\" = \"closed\";\n\texport let upload_promise: Promise<any> | null = null;\n\n\tlet upload_input: Upload;\n\texport let uploading = false;\n\texport let active_source: source_type = null;\n\texport let fullscreen = false;\n\n\tlet files: FileData[] = [];\n\tlet upload_id: string;\n\n\tasync function handle_upload({\n\t\tdetail\n\t}: CustomEvent<FileData>): Promise<void> {\n\t\tif (!streaming) {\n\t\t\tif (detail.path?.toLowerCase().endsWith(\".svg\") && detail.url) {\n\t\t\t\tconst response = await fetch(detail.url);\n\t\t\t\tconst svgContent = await response.text();\n\t\t\t\tvalue = {\n\t\t\t\t\t...detail,\n\t\t\t\t\turl: `data:image/svg+xml,${encodeURIComponent(svgContent)}`\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvalue = detail;\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tdispatch(\"upload\");\n\t\t}\n\t}\n\n\tfunction handle_clear(): void {\n\t\tvalue = null;\n\t\tdispatch(\"clear\");\n\t\tdispatch(\"change\", null);\n\t}\n\n\tfunction handle_remove_image_click(event: MouseEvent): void {\n\t\thandle_clear();\n\t\tevent.stopPropagation();\n\t}\n\n\tasync function handle_save(\n\t\timg_blob: Blob | any,\n\t\tevent: \"change\" | \"stream\" | \"upload\"\n\t): Promise<void> {\n\t\tconsole.log(\"handle_save\", { event, img_blob });\n\t\tif (event === \"stream\") {\n\t\t\tdispatch(\"stream\", {\n\t\t\t\tvalue: { url: img_blob } as Base64File,\n\t\t\t\tis_value_data: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tupload_id = Math.random().toString(36).substring(2, 15);\n\t\tconst f_ = new File([img_blob], `image.${streaming ? \"jpeg\" : \"png\"}`);\n\t\tfiles = [\n\t\t\tnew FileData({\n\t\t\t\tpath: f_.name,\n\t\t\t\torig_name: f_.name,\n\t\t\t\tblob: f_,\n\t\t\t\tsize: f_.size,\n\t\t\t\tmime_type: f_.type,\n\t\t\t\tis_stream: false\n\t\t\t})\n\t\t];\n\t\tpending = true;\n\t\tconst f = await upload_input.load_files([f_], upload_id);\n\t\tconsole.log(\"uploaded file\", f);\n\t\tif (event === \"change\" || event === \"upload\") {\n\t\t\tvalue = f?.[0] || null;\n\t\t\tawait tick();\n\t\t\tdispatch(\"change\");\n\t\t}\n\t\tpending = false;\n\t}\n\n\t$: active_streaming = streaming && active_source === \"webcam\";\n\t$: if (uploading && !active_streaming) value = null;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange?: never;\n\t\tstream: ValueData;\n\t\tclear?: never;\n\t\tdrag: boolean;\n\t\tupload?: never;\n\t\tselect: SelectData;\n\t\tend_stream: never;\n\t}>();\n\n\texport let dragging = false;\n\n\t$: dispatch(\"drag\", dragging);\n\n\tfunction handle_click(evt: MouseEvent): void {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t}\n\n\t$: if (!active_source && sources) {\n\t\tactive_source = sources[0];\n\t}\n\n\tasync function handle_select_source(\n\t\tsource: (typeof sources)[number]\n\t): Promise<void> {\n\t\tswitch (source) {\n\t\t\tcase \"clipboard\":\n\t\t\t\tupload_input.paste_clipboard();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet image_container: HTMLElement;\n\n\tfunction on_drag_over(evt: DragEvent): void {\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = \"copy\";\n\t\t}\n\n\t\tdragging = true;\n\t}\n\n\tasync function on_drop(evt: DragEvent): Promise<void> {\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\t\tdragging = false;\n\n\t\tif (value) {\n\t\t\thandle_clear();\n\t\t\tawait tick();\n\t\t}\n\n\t\tactive_source = \"upload\";\n\t\tawait tick();\n\t\tupload_input.load_files_from_drop(evt);\n\t}\n</script>\n\n<BlockLabel {show_label} Icon={ImageIcon} label={label || \"Image\"} />\n\n<div data-testid=\"image\" class=\"image-container\" bind:this={image_container}>\n\t<IconButtonWrapper>\n\t\t{#if value?.url && !active_streaming}\n\t\t\t{#if show_fullscreen_button}\n\t\t\t\t<FullscreenButton {fullscreen} on:fullscreen />\n\t\t\t{/if}\n\t\t\t<IconButton\n\t\t\t\tIcon={Clear}\n\t\t\t\tlabel=\"Remove Image\"\n\t\t\t\ton:click={handle_remove_image_click}\n\t\t\t/>\n\t\t{/if}\n\t</IconButtonWrapper>\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<div\n\t\tclass=\"upload-container\"\n\t\tclass:reduced-height={sources.length > 1}\n\t\tstyle:width={value ? \"auto\" : \"100%\"}\n\t\ton:dragover={on_drag_over}\n\t\ton:drop={on_drop}\n\t>\n\t\t<Upload\n\t\t\tbind:upload_promise\n\t\t\thidden={value !== null || active_source === \"webcam\"}\n\t\t\tbind:this={upload_input}\n\t\t\tbind:uploading\n\t\t\tbind:dragging\n\t\t\tfiletype={active_source === \"clipboard\" ? \"clipboard\" : \"image/*\"}\n\t\t\ton:load={handle_upload}\n\t\t\ton:error\n\t\t\t{root}\n\t\t\t{max_file_size}\n\t\t\tdisable_click={!sources.includes(\"upload\") || value !== null}\n\t\t\t{upload}\n\t\t\t{stream_handler}\n\t\t\taria_label={i18n(\"image.drop_to_upload\")}\n\t\t>\n\t\t\t{#if value === null}\n\t\t\t\t<slot />\n\t\t\t{/if}\n\t\t</Upload>\n\t\t{#if active_source === \"webcam\" && !streaming && pending}\n\t\t\t<UploadProgress {root} {upload_id} {stream_handler} {files} />\n\t\t{:else if active_source === \"webcam\" && (streaming || (!streaming && !value))}\n\t\t\t<Webcam\n\t\t\t\t{root}\n\t\t\t\t{value}\n\t\t\t\ton:capture={(e) => handle_save(e.detail, \"change\")}\n\t\t\t\ton:stream={(e) => handle_save(e.detail, \"stream\")}\n\t\t\t\ton:error\n\t\t\t\ton:drag\n\t\t\t\ton:upload={(e) => handle_save(e.detail, \"upload\")}\n\t\t\t\ton:close_stream\n\t\t\t\t{stream_state}\n\t\t\t\tmirror_webcam={webcam_options.mirror}\n\t\t\t\t{stream_every}\n\t\t\t\t{streaming}\n\t\t\t\tmode=\"image\"\n\t\t\t\tinclude_audio={false}\n\t\t\t\t{i18n}\n\t\t\t\t{upload}\n\t\t\t\t{time_limit}\n\t\t\t\twebcam_constraints={webcam_options.constraints}\n\t\t\t/>\n\t\t{:else if value !== null && !streaming}\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events-->\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions-->\n\t\t\t<div class:selectable class=\"image-frame\" on:click={handle_click}>\n\t\t\t\t<Image src={value.url} restProps={{ alt: value.alt_text }} />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\t{#if sources.length > 1 || sources.includes(\"clipboard\")}\n\t\t<SelectSource\n\t\t\t{sources}\n\t\t\tbind:active_source\n\t\t\t{handle_clear}\n\t\t\thandle_select={handle_select_source}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.image-frame :global(img) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: scale-down;\n\t}\n\n\t.upload-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\theight: 100%;\n\t\tflex-shrink: 1;\n\t\tmax-height: 100%;\n\t}\n\n\t.reduced-height {\n\t\theight: calc(100% - var(--size-10));\n\t}\n\n\t.image-container {\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmax-height: 100%;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.image-frame {\n\t\tobject-fit: cover;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as Webcam } from \"./shared/Webcam.svelte\";\n\texport { default as BaseImageUploader } from \"./shared/ImageUploader.svelte\";\n\texport { default as BaseStaticImage } from \"./shared/ImagePreview.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n\texport { default as BaseImage } from \"./shared/Image.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { tick } from \"svelte\";\n\timport { Gradio } from \"@gradio/utils\";\n\timport StaticImage from \"./shared/ImagePreview.svelte\";\n\timport ImageUploader from \"./shared/ImageUploader.svelte\";\n\timport { Block, Empty, UploadText } from \"@gradio/atoms\";\n\timport { Image } from \"@gradio/icons\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport type { ImageProps, ImageEvents } from \"./shared/types\";\n\n\tlet stream_data = { value: null };\n\tlet upload_promise = $state<Promise<any>>();\n\tclass ImageGradio extends Gradio<ImageEvents, ImageProps> {\n\t\tasync get_data() {\n\t\t\tif (upload_promise) {\n\t\t\t\tawait upload_promise;\n\t\t\t\tawait tick();\n\t\t\t}\n\n\t\t\tconst data = await super.get_data();\n\t\t\tif (props.props.streaming) {\n\t\t\t\tdata.value = stream_data.value;\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tconst props = $props();\n\tconst gradio = new ImageGradio(props);\n\n\tlet fullscreen = $state(false);\n\tlet dragging = $state(false);\n\tlet active_source = $derived.by(() =>\n\t\tgradio.props.sources ? gradio.props.sources[0] : null\n\t);\n\n\tlet upload_component: ImageUploader;\n\tconst handle_drag_event = (event: Event): void => {\n\t\tconst drag_event = event as DragEvent;\n\t\tdrag_event.preventDefault();\n\t\tdrag_event.stopPropagation();\n\t\tif (drag_event.type === \"dragenter\" || drag_event.type === \"dragover\") {\n\t\t\tdragging = true;\n\t\t} else if (drag_event.type === \"dragleave\") {\n\t\t\tdragging = false;\n\t\t}\n\t};\n\n\tconst handle_drop = (event: Event): void => {\n\t\tif (gradio.shared.interactive) {\n\t\t\tconst drop_event = event as DragEvent;\n\t\t\tdrop_event.preventDefault();\n\t\t\tdrop_event.stopPropagation();\n\t\t\tdragging = false;\n\n\t\t\tif (upload_component) {\n\t\t\t\tupload_component.loadFilesFromDrop(drop_event);\n\t\t\t}\n\t\t}\n\t};\n\n\tlet old_value = $state(gradio.props.value);\n\n\t$effect(() => {\n\t\tif (old_value != gradio.props.value) {\n\t\t\told_value = gradio.props.value;\n\t\t\tgradio.dispatch(\"change\");\n\t\t}\n\t});\n\n\tlet status = $derived(gradio?.shared?.loading_status.stream_state);\n</script>\n\n{#if !gradio.shared.interactive}\n\t<Block\n\t\tvisible={gradio.shared.visible}\n\t\tvariant={\"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\telem_id={gradio.shared.elem_id}\n\t\telem_classes={gradio.shared.elem_classes}\n\t\theight={gradio.props.height || undefined}\n\t\twidth={gradio.props.width}\n\t\tallow_overflow={false}\n\t\tcontainer={gradio.shared.container}\n\t\tscale{gradio.shared.scale}\n\t\tmin_width={gradio.shared.min_width}\n\t\tbind:fullscreen\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...gradio.shared.loading_status}\n\t\t/>\n\t\t<StaticImage\n\t\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\t\ton:error={({ detail }) => gradio.dispatch(\"error\", detail)}\n\t\t\ton:fullscreen={({ detail }) => {\n\t\t\t\tfullscreen = detail;\n\t\t\t}}\n\t\t\t{fullscreen}\n\t\t\tvalue={gradio.props.value}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\tselectable={gradio.props._selectable}\n\t\t\ti18n={gradio.i18n}\n\t\t\tbuttons={gradio.props.buttons}\n\t\t/>\n\t</Block>\n{:else}\n\t<Block\n\t\tvisible={gradio.shared.visible}\n\t\tvariant={gradio.props.value === null ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\telem_id={gradio.shared.elem_id}\n\t\telem_classes={gradio.shared.elem_classes}\n\t\theight={gradio.props.height || undefined}\n\t\twidth={gradio.props.width}\n\t\tallow_overflow={false}\n\t\tcontainer={gradio.shared.container}\n\t\tscale={gradio.shared.scale}\n\t\tmin_width={gradio.shared.min_width}\n\t\tbind:fullscreen\n\t\ton:dragenter={handle_drag_event}\n\t\ton:dragleave={handle_drag_event}\n\t\ton:dragover={handle_drag_event}\n\t\ton:drop={handle_drop}\n\t>\n\t\t{#if gradio.shared.loading_status.type === \"output\"}\n\t\t\t<StatusTracker\n\t\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\t\ti18n={gradio.i18n}\n\t\t\t\t{...gradio.shared.loading_status}\n\t\t\t\ton:clear_status={() =>\n\t\t\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t\t\t/>\n\t\t{/if}\n\t\t<ImageUploader\n\t\t\tbind:upload_promise\n\t\t\tbind:this={upload_component}\n\t\t\tbind:active_source\n\t\t\tbind:value={gradio.props.value}\n\t\t\tbind:dragging\n\t\t\tselectable={gradio.props._selectable}\n\t\t\troot={gradio.shared.root}\n\t\t\tsources={gradio.props.sources}\n\t\t\t{fullscreen}\n\t\t\tshow_fullscreen_button={gradio.props.buttons === null\n\t\t\t\t? true\n\t\t\t\t: gradio.props.buttons.includes(\"fullscreen\")}\n\t\t\ton:edit={() => gradio.dispatch(\"edit\")}\n\t\t\ton:clear={() => {\n\t\t\t\tfullscreen = false;\n\t\t\t\tgradio.dispatch(\"clear\");\n\t\t\t\tgradio.dispatch(\"input\");\n\t\t\t}}\n\t\t\ton:stream={({ detail }) => {\n\t\t\t\tstream_data = detail;\n\t\t\t\tgradio.dispatch(\"stream\", detail);\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:upload={() => {\n\t\t\t\tgradio.dispatch(\"upload\");\n\t\t\t\tgradio.dispatch(\"input\");\n\t\t\t}}\n\t\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tgradio.shared.loading_status.status = \"error\";\n\t\t\t\tgradio.dispatch(\"error\", detail);\n\t\t\t}}\n\t\t\ton:close_stream={() => {\n\t\t\t\tgradio.dispatch(\"close_stream\");\n\t\t\t}}\n\t\t\ton:fullscreen={({ detail }) => {\n\t\t\t\tfullscreen = detail;\n\t\t\t}}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\tpending={gradio.shared.loading_status?.status === \"pending\" ||\n\t\t\t\tgradio.shared.loading_status?.status === \"streaming\"}\n\t\t\tstreaming={gradio.props.streaming}\n\t\t\twebcam_options={gradio.props.webcam_options}\n\t\t\tstream_every={gradio.props.stream_every}\n\t\t\ttime_limit={gradio.shared.loading_status?.time_limit}\n\t\t\tmax_file_size={gradio.shared.max_file_size}\n\t\t\ti18n={gradio.i18n}\n\t\t\tupload={(...args) => gradio.shared.client.upload(...args)}\n\t\t\tstream_handler={gradio.shared.client?.stream}\n\t\t\tstream_state={status}\n\t\t>\n\t\t\t{#if active_source === \"upload\" || !active_source}\n\t\t\t\t<UploadText\n\t\t\t\t\ti18n={gradio.i18n}\n\t\t\t\t\ttype=\"image\"\n\t\t\t\t\tplaceholder={gradio.props.placeholder}\n\t\t\t\t/>\n\t\t\t{:else if active_source === \"clipboard\"}\n\t\t\t\t<UploadText i18n={gradio.i18n} type=\"clipboard\" mode=\"short\" />\n\t\t\t{:else}\n\t\t\t\t<Empty unpadded_box={true} size=\"large\"><Image /></Empty>\n\t\t\t{/if}\n\t\t</ImageUploader>\n\t</Block>\n{/if}\n"],"names":["value","label","show_label","$.prop","$$props","sources","streaming","pending","webcam_options","selectable","root","i18n","max_file_size","upload","stream_handler","stream_every","show_fullscreen_button","stream_state","upload_promise","upload_input","$.mutable_source","uploading","active_source","fullscreen","files","upload_id","handle_upload","detail","svgContent","tick","dispatch","handle_clear","event","handle_save","img_blob","f_","FileData","f","dragging","handle_click","evt","coordinates","get_coordinates_of_clicked_image","handle_select_source","source","$.get","image_container","on_drag_over","on_drop","$.set","active_streaming","ImageIcon","$$render","consequent","Clear","handle_remove_image_click","$0","$.derived_safe_equal","$1","$.untrack","$$value","$.bind_this","div","stream_data","$.state","ImageGradio","Gradio","data","props","$.rest_props","gradio","$.derived","upload_component","handle_drag_event","drag_event","handle_drop","drop_event","old_value","$.user_effect","$2","consequent_1","$3","args","status","alternate_2"],"mappings":"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"}