{"version":3,"file":"Index-DILFAWAQ.js","sources":["../../../../js/dialogue/Switch.svelte","../../../../js/dialogue/Dialogue.svelte","../../../../js/dialogue/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\t// based on https://svelte.dev/playground/d65a4e9f0ae74d1eb1b08d13e428af32?version=3.35.0\n\n\timport { createEventDispatcher } from \"svelte\";\n\texport let label;\n\texport let checked = false;\n\texport let disabled = false;\n\tconst dispatch = createEventDispatcher();\n\t// @ts-ignore\n\tfunction handleClick(event: Event): void {\n\t\tconst target = event.target;\n\t\t// @ts-ignore\n\t\tconst state = target.getAttribute(\"aria-checked\");\n\t\tchecked = state === \"true\" ? false : true;\n\t\tdispatch(\"click\", { checked });\n\t}\n</script>\n\n<div class=\"s s--slider\" style=\"font-size:var(--font-size-sm)px\">\n\t<button\n\t\trole=\"switch\"\n\t\taria-checked={checked}\n\t\ton:click={handleClick}\n\t\t{disabled}\n\t>\n\t</button>\n\t<span>{label}</span>\n</div>\n\n<style>\n\t.s--slider {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.s--slider button {\n\t\twidth: 3em;\n\t\theight: 1.6em;\n\t\tposition: relative;\n\t\tmargin: 0 0.5em 0 0;\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tborder: none;\n\t}\n\n\t.s--slider button[disabled] {\n\t\tcursor: not-allowed;\n\t}\n\n\t.s--slider button::before {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\twidth: 1.3em;\n\t\theight: 1.3em;\n\t\tbackground: #fff;\n\t\ttop: 0.13em;\n\t\tright: 1.5em;\n\t\ttransition: transform 0.3s;\n\t}\n\n\t.s--slider button[aria-checked=\"true\"] {\n\t\tbackground-color: var(--color-accent);\n\t}\n\n\t.s--slider button[aria-checked=\"true\"]::before {\n\t\ttransform: translateX(1.3em);\n\t\ttransition: transform 0.3s;\n\t}\n\n\t.s--slider button:focus {\n\t\tbox-shadow: 0 0px 0px 1px var(--color-accent);\n\t}\n\n\t/* Slider Design Option */\n\t.s--slider button {\n\t\tborder-radius: 1.5em;\n\t}\n\n\t.s--slider button::before {\n\t\tborder-radius: 100%;\n\t}\n\n\t.s--slider button:focus {\n\t\tbox-shadow: 0 0px 8px var(--accent-color);\n\t\tborder-radius: 1.5em;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount, tick } from \"svelte\";\n\timport { BlockTitle, IconButton, IconButtonWrapper } from \"@gradio/atoms\";\n\timport { Copy, Check, Send, Plus, Trash } from \"@gradio/icons\";\n\timport { fade } from \"svelte/transition\";\n\timport { BaseDropdown, BaseDropdownOptions } from \"@gradio/dropdown\";\n\timport { Gradio } from \"@gradio/utils\";\n\timport type { DialogueLine } from \"./utils\";\n\timport Switch from \"./Switch.svelte\";\n\timport type { DialogueEvents, DialogueProps } from \"./types\";\n\n\tconst props = $props();\n\n\tconst gradio: Gradio<DialogueEvents, DialogueProps> = props.gradio;\n\n\tlet checked = $derived(false);\n\tlet disabled = $derived(!gradio.shared.interactive);\n\n\tlet dialogue_lines: DialogueLine[] = $state([]);\n\n\t$effect(() => {\n\t\tif (\n\t\t\tgradio.props.value &&\n\t\t\tgradio.props.value.length &&\n\t\t\ttypeof gradio.props.value !== \"string\"\n\t\t) {\n\t\t\tdialogue_lines = [...gradio.props.value];\n\t\t} else if (gradio.props.value && typeof gradio.props.value !== \"string\") {\n\t\t\tdialogue_lines = [\n\t\t\t\t{\n\t\t\t\t\tspeaker: `${gradio.props.speakers.length ? gradio.props.speakers[0] : \"\"}`,\n\t\t\t\t\ttext: \"\"\n\t\t\t\t}\n\t\t\t];\n\t\t} else if (typeof gradio.props.value === \"string\") {\n\t\t\ttextbox_value = gradio.props.value;\n\t\t\tchecked = true;\n\t\t}\n\t});\n\n\tlet buttons = $derived(gradio.props.buttons || [\"copy\"]);\n\n\tlet old_value = $state(gradio.props.value);\n\n\t$effect(() => {\n\t\tif (old_value != gradio.props.value) {\n\t\t\told_value = gradio.props.value;\n\t\t\tgradio.dispatch(\"change\");\n\t\t}\n\t});\n\n\tlet dialogue_container_element: HTMLDivElement;\n\n\tlet showTagMenu = $state(false);\n\tlet currentLineIndex = $state(-1);\n\tlet selectedOptionIndex = $state(0);\n\tlet filtered_tags: string[] = $state([]);\n\tlet input_elements: (HTMLInputElement | HTMLTextAreaElement)[] = $state([]);\n\n\tlet textarea_element: HTMLTextAreaElement;\n\tlet offset_from_top = $state(0);\n\tlet copied = $state(false);\n\tlet timer: any;\n\tlet textbox_value = $state(\"\");\n\tlet hoveredSpeaker: string | null = $state(null);\n\tlet is_unformatting = $state(false);\n\tlet is_formatting = $state(false);\n\n\tconst defaultColorNames = [\n\t\t\"red\",\n\t\t\"green\",\n\t\t\"blue\",\n\t\t\"yellow\",\n\t\t\"purple\",\n\t\t\"teal\",\n\t\t\"orange\",\n\t\t\"cyan\",\n\t\t\"lime\",\n\t\t\"pink\"\n\t];\n\n\tconst colorNameToHex: Record<string, string> = {\n\t\tred: \"rgba(254, 202, 202, 0.7)\",\n\t\tgreen: \"rgba(209, 250, 229, 0.7)\",\n\t\tblue: \"rgba(219, 234, 254, 0.7)\",\n\t\tyellow: \"rgba(254, 243, 199, 0.7)\",\n\t\tpurple: \"rgba(233, 213, 255, 0.7)\",\n\t\tteal: \"rgba(204, 251, 241, 0.7)\",\n\t\torange: \"rgba(254, 215, 170, 0.7)\",\n\t\tcyan: \"rgba(207, 250, 254, 0.7)\",\n\t\tlime: \"rgba(217, 249, 157, 0.7)\",\n\t\tpink: \"rgba(252, 231, 243, 0.7)\"\n\t};\n\n\tlet speakerColors: Record<string, string> = $derived.by(() => {\n\t\tlet _speakerColors: Record<string, string> = {};\n\t\tif (gradio.props.color_map) {\n\t\t\t_speakerColors = { ...gradio.props.color_map };\n\t\t} else {\n\t\t\t_speakerColors = {};\n\t\t\tgradio.props.speakers.forEach((speaker, index) => {\n\t\t\t\tconst colorName = defaultColorNames[index % defaultColorNames.length];\n\t\t\t\t_speakerColors[speaker] = colorNameToHex[colorName];\n\t\t\t});\n\t\t}\n\t\treturn _speakerColors;\n\t});\n\n\tfunction add_line(index: number): void {\n\t\tconst newSpeaker =\n\t\t\tgradio.props.speakers.length > 0 ? gradio.props.speakers[0] : \"\";\n\t\tdialogue_lines = [\n\t\t\t...dialogue_lines.slice(0, index + 1),\n\t\t\t{ speaker: newSpeaker, text: \"\" },\n\t\t\t...dialogue_lines.slice(index + 1)\n\t\t];\n\n\t\ttick().then(() => {\n\t\t\tif (input_elements[index + 1]) {\n\t\t\t\tinput_elements[index + 1].focus();\n\t\t\t}\n\t\t});\n\t\tgradio.props.value = [...dialogue_lines];\n\t}\n\n\tfunction delete_line(index: number): void {\n\t\tdialogue_lines = [\n\t\t\t...dialogue_lines.slice(0, index),\n\t\t\t...dialogue_lines.slice(index + 1)\n\t\t];\n\t\tgradio.props.value = [...dialogue_lines];\n\t}\n\n\tfunction update_line(\n\t\tindex: number,\n\t\tkey: keyof DialogueLine,\n\t\tvalue: string\n\t): void {\n\t\tdialogue_lines[index][key] = value;\n\t\tdialogue_lines = [...dialogue_lines];\n\t\tgradio.props.value = [...dialogue_lines];\n\t}\n\n\tfunction handle_input(event: Event, index: number): void {\n\t\tconst input = (event.target as HTMLInputElement) || HTMLTextAreaElement;\n\t\tif (input && !input_elements[index]) {\n\t\t\tinput_elements[index] = input;\n\t\t}\n\n\t\tconst cursor_position = input.selectionStart || 0;\n\t\tconst text = input.value;\n\t\tlet show_menu = false;\n\t\tlet position_reference_index = -1;\n\n\t\tif (text[cursor_position - 1] === \":\") {\n\t\t\tcurrentLineIndex = index;\n\t\t\tposition_reference_index = cursor_position;\n\t\t\tconst search_text = get_tag_search_text(text, cursor_position);\n\t\t\tfiltered_tags = gradio.props.tags.filter(\n\t\t\t\t(tag) =>\n\t\t\t\t\tsearch_text === \"\" ||\n\t\t\t\t\ttag.toLowerCase().includes(search_text.toLowerCase())\n\t\t\t);\n\t\t\tshow_menu = filtered_tags.length > 0;\n\t\t\tselectedOptionIndex = 0;\n\t\t} else {\n\t\t\tconst lastColonIndex = text.lastIndexOf(\":\", cursor_position - 1);\n\t\t\tif (\n\t\t\t\tlastColonIndex >= 0 &&\n\t\t\t\t!text.substring(lastColonIndex + 1, cursor_position).includes(\" \")\n\t\t\t) {\n\t\t\t\tcurrentLineIndex = index;\n\t\t\t\tposition_reference_index = lastColonIndex + 1; // Position menu relative to the start of the potential tag\n\t\t\t\tconst searchText = text.substring(lastColonIndex + 1, cursor_position);\n\t\t\t\tfiltered_tags = gradio.props.tags.filter(\n\t\t\t\t\t(tag) =>\n\t\t\t\t\t\tsearchText === \"\" ||\n\t\t\t\t\t\ttag.toLowerCase().includes(searchText.toLowerCase())\n\t\t\t\t);\n\t\t\t\tshow_menu = filtered_tags.length > 0;\n\t\t\t\tselectedOptionIndex = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (show_menu && position_reference_index !== -1) {\n\t\t\tshowTagMenu = true;\n\t\t\tconst input_rect = input.getBoundingClientRect();\n\t\t\t// Position menu below the current input by calculating the distance from the top of the container\n\t\t\t// and use 1.5 times the input height.\n\t\t\tif (dialogue_container_element) {\n\t\t\t\tconst container_rect =\n\t\t\t\t\tdialogue_container_element.getBoundingClientRect();\n\t\t\t\toffset_from_top =\n\t\t\t\t\tcontainer_rect.top + input_rect.height * (index + 1.5);\n\t\t\t}\n\t\t} else {\n\t\t\tshowTagMenu = false;\n\t\t}\n\t\tgradio.dispatch(\"input\");\n\t}\n\n\tfunction get_tag_search_text(text: string, cursorPosition: number): string {\n\t\tconst lastColonIndex = text.lastIndexOf(\":\", cursorPosition - 1);\n\t\tif (lastColonIndex >= 0) {\n\t\t\treturn text.substring(lastColonIndex + 1, cursorPosition);\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tasync function insert_selected_tag(): Promise<void> {\n\t\tconst tag = filtered_tags[selectedOptionIndex];\n\t\tif (tag) {\n\t\t\tlet text;\n\t\t\tlet currentInput;\n\t\t\tif (checked) {\n\t\t\t\tcurrentInput = textarea_element;\n\t\t\t\ttext = textbox_value;\n\t\t\t} else {\n\t\t\t\tcurrentInput = input_elements[currentLineIndex];\n\t\t\t\ttext = dialogue_lines[currentLineIndex].text;\n\t\t\t}\n\t\t\tconst cursorPosition = currentInput?.selectionStart || 0;\n\t\t\tconst lastColonIndex = text.lastIndexOf(\":\", cursorPosition - 1);\n\t\t\tif (lastColonIndex >= 0) {\n\t\t\t\tconst beforeColon = text.substring(0, lastColonIndex);\n\t\t\t\tconst afterCursor = text.substring(cursorPosition);\n\n\t\t\t\tif (checked) {\n\t\t\t\t\t// plain text mode: don't filter speaker tags\n\t\t\t\t\tconst newText = `${beforeColon}${tag} ${afterCursor}`;\n\t\t\t\t\ttextbox_value = newText;\n\t\t\t\t\tif (gradio.props.speakers.length === 0) {\n\t\t\t\t\t\tgradio.props.value = newText;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgradio.props.value = await gradio.shared.server.unformat({\n\t\t\t\t\t\t\ttext: newText\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttick().then(() => {\n\t\t\t\t\t\tif (textarea_element) {\n\t\t\t\t\t\t\tconst newCursorPosition = beforeColon.length + tag.length + 1;\n\t\t\t\t\t\t\ttextarea_element.setSelectionRange(\n\t\t\t\t\t\t\t\tnewCursorPosition,\n\t\t\t\t\t\t\t\tnewCursorPosition\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\ttextarea_element.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// dialogue line mode\n\t\t\t\t\tconst filteredBeforeColon = beforeColon\n\t\t\t\t\t\t.replace(/\\[S\\d+\\]/g, \"\")\n\t\t\t\t\t\t.trim();\n\t\t\t\t\tconst newText = `${filteredBeforeColon}${tag} ${afterCursor}`;\n\t\t\t\t\tupdate_line(currentLineIndex, \"text\", newText);\n\n\t\t\t\t\ttick().then(() => {\n\t\t\t\t\t\tconst updatedInput = input_elements[currentLineIndex];\n\t\t\t\t\t\tif (updatedInput) {\n\t\t\t\t\t\t\tconst newCursorPosition =\n\t\t\t\t\t\t\t\tfilteredBeforeColon.length + tag.length + 1;\n\t\t\t\t\t\t\tupdatedInput.setSelectionRange(\n\t\t\t\t\t\t\t\tnewCursorPosition,\n\t\t\t\t\t\t\t\tnewCursorPosition\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tupdatedInput.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tshowTagMenu = false;\n\t\t\tselectedOptionIndex = 0;\n\t\t}\n\t}\n\n\tasync function insert_tag(e: CustomEvent): Promise<void> {\n\t\tconst tag = gradio.props.tags[e.detail.target.dataset.index];\n\t\tif (tag) {\n\t\t\tlet text;\n\t\t\tlet currentInput;\n\t\t\tif (checked) {\n\t\t\t\tcurrentInput = textarea_element;\n\t\t\t\ttext = textbox_value;\n\t\t\t} else {\n\t\t\t\tcurrentInput = input_elements[currentLineIndex];\n\t\t\t\ttext = dialogue_lines[currentLineIndex].text;\n\t\t\t}\n\t\t\tconst cursorPosition = currentInput?.selectionStart || 0;\n\t\t\tconst lastColonIndex = text.lastIndexOf(\":\", cursorPosition - 1);\n\t\t\tif (lastColonIndex >= 0) {\n\t\t\t\tconst beforeColon = text.substring(0, lastColonIndex);\n\t\t\t\tconst afterCursor = text.substring(cursorPosition);\n\n\t\t\t\tif (checked) {\n\t\t\t\t\t// plain text mode: don't filter speaker tags\n\t\t\t\t\tconst newText = `${beforeColon}${tag} ${afterCursor}`;\n\t\t\t\t\ttextbox_value = newText;\n\t\t\t\t\tif (gradio.props.speakers.length === 0) {\n\t\t\t\t\t\tgradio.props.value = newText;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgradio.props.value = await gradio.shared.server.unformat({\n\t\t\t\t\t\t\ttext: newText\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttick().then(() => {\n\t\t\t\t\t\tif (textarea_element) {\n\t\t\t\t\t\t\tconst newCursorPosition = beforeColon.length + tag.length + 1;\n\t\t\t\t\t\t\ttextarea_element.setSelectionRange(\n\t\t\t\t\t\t\t\tnewCursorPosition,\n\t\t\t\t\t\t\t\tnewCursorPosition\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\ttextarea_element.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// dialogue line mode\n\t\t\t\t\tconst filteredBeforeColon = beforeColon\n\t\t\t\t\t\t.replace(/\\[S\\d+\\]/g, \"\")\n\t\t\t\t\t\t.trim();\n\t\t\t\t\tconst newText = `${filteredBeforeColon}${tag} ${afterCursor}`;\n\t\t\t\t\tupdate_line(currentLineIndex, \"text\", newText);\n\n\t\t\t\t\ttick().then(() => {\n\t\t\t\t\t\tconst updatedInput = input_elements[currentLineIndex];\n\t\t\t\t\t\tif (updatedInput) {\n\t\t\t\t\t\t\tconst newCursorPosition =\n\t\t\t\t\t\t\t\tfilteredBeforeColon.length + tag.length + 1;\n\t\t\t\t\t\t\tupdatedInput.setSelectionRange(\n\t\t\t\t\t\t\t\tnewCursorPosition,\n\t\t\t\t\t\t\t\tnewCursorPosition\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tupdatedInput.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tshowTagMenu = false;\n\t\t\tselectedOptionIndex = 0;\n\t\t}\n\t}\n\n\tfunction handle_click_outside(event: MouseEvent): void {\n\t\tif (showTagMenu) {\n\t\t\tconst target = event.target as Node;\n\t\t\tconst tagMenu = document.getElementById(\"tag-menu\");\n\t\t\tif (tagMenu && !tagMenu.contains(target)) {\n\t\t\t\tshowTagMenu = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function value_to_string(\n\t\tvalue: DialogueLine[] | string\n\t): Promise<string> {\n\t\tif (typeof value === \"string\") {\n\t\t\treturn value;\n\t\t}\n\t\treturn await gradio.shared.server.format(value);\n\t}\n\n\tasync function handle_copy(): Promise<void> {\n\t\tif (\"clipboard\" in navigator) {\n\t\t\tconst text = await value_to_string(gradio.props.value);\n\t\t\tawait navigator.clipboard.writeText(text);\n\t\t\tcopy_feedback();\n\t\t}\n\t}\n\n\tfunction copy_feedback(): void {\n\t\tcopied = true;\n\t\tif (timer) clearTimeout(timer);\n\t\ttimer = setTimeout(() => {\n\t\t\tcopied = false;\n\t\t}, 1000);\n\t}\n\n\tasync function handle_submit(): Promise<void> {\n\t\tif (checked) {\n\t\t\tgradio.props.value = await gradio.shared.server.unformat({\n\t\t\t\ttext: textbox_value\n\t\t\t});\n\t\t}\n\t\tgradio.dispatch(\"submit\");\n\t}\n\n\tonMount(async () => {\n\t\tif (typeof gradio.props.value === \"string\") {\n\t\t\ttextbox_value = gradio.props.value;\n\t\t} else if (gradio.props.value && gradio.props.value.length > 0) {\n\t\t\tconst formatted = await value_to_string(gradio.props.value);\n\t\t\ttextbox_value = formatted;\n\t\t} else {\n\t\t\ttextbox_value = \"\";\n\t\t}\n\t});\n</script>\n\n<svelte:window on:click={handle_click_outside} />\n\n<label class:container={gradio.shared.container}>\n\t{#if gradio.shared.show_label && buttons.includes(\"copy\")}\n\t\t<IconButtonWrapper>\n\t\t\t<IconButton\n\t\t\t\tIcon={copied ? Check : Copy}\n\t\t\t\ton:click={handle_copy}\n\t\t\t\tlabel={copied ? \"Copied\" : \"Copy\"}\n\t\t\t/>\n\t\t</IconButtonWrapper>\n\t{/if}\n\n\t<BlockTitle show_label={gradio.shared.show_label} info={gradio.props.info}\n\t\t>{gradio.shared.label || \"Dialogue\"}</BlockTitle\n\t>\n\t{#if gradio.props.ui_mode === \"both\"}\n\t\t<div\n\t\t\tclass=\"switch-container top-switch\"\n\t\t\tclass:switch-disabled={is_formatting || is_unformatting}\n\t\t>\n\t\t\t<Switch\n\t\t\t\tlabel=\"Plain Text\"\n\t\t\t\tbind:checked\n\t\t\t\tdisabled={is_formatting || is_unformatting}\n\t\t\t\ton:click={async (e) => {\n\t\t\t\t\tif (!e.detail.checked) {\n\t\t\t\t\t\tis_unformatting = true;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tgradio.props.value = await gradio.shared.server.unformat({\n\t\t\t\t\t\t\t\ttext: textbox_value\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdialogue_lines = [...(gradio.props.value as DialogueLine[])];\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tis_unformatting = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tis_formatting = true;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\ttextbox_value = await value_to_string(dialogue_lines);\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tis_formatting = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t{/if}\n\t{#if !checked && gradio.props.ui_mode !== \"text\"}\n\t\t<div\n\t\t\tclass=\"dialogue-container\"\n\t\t\tbind:this={dialogue_container_element}\n\t\t\tclass:loading={is_unformatting}\n\t\t>\n\t\t\t{#if is_unformatting}\n\t\t\t\t<div class=\"loading-overlay\" transition:fade={{ duration: 200 }}>\n\t\t\t\t\t<div class=\"loading-spinner\"></div>\n\t\t\t\t\t<div class=\"loading-text\">Converting to dialogue format...</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t{#each dialogue_lines as line, i}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"dialogue-line\"\n\t\t\t\t\tstyle=\"--speaker-bg-color: {disabled &&\n\t\t\t\t\t(hoveredSpeaker === null || hoveredSpeaker === line.speaker)\n\t\t\t\t\t\t? speakerColors[line.speaker] || 'transparent'\n\t\t\t\t\t\t: 'transparent'}\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"speaker-column\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\t\ton:mouseenter={() => disabled && (hoveredSpeaker = line.speaker)}\n\t\t\t\t\t\ton:mouseleave={() => disabled && (hoveredSpeaker = null)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if disabled}\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tbind:value={line.speaker}\n\t\t\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\t\t\trows=\"1\"\n\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{@const dd_props = new Gradio({\n\t\t\t\t\t\t\t\tshared_props: {\n\t\t\t\t\t\t\t\t\tcontainer: true,\n\t\t\t\t\t\t\t\t\tshow_label: false,\n\t\t\t\t\t\t\t\t\tinteractive: true,\n\t\t\t\t\t\t\t\t\tlabel: \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tvalue: line.speaker,\n\t\t\t\t\t\t\t\t\tchoices: gradio.props.speakers.map((s) => [s, s])\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<BaseDropdown\n\t\t\t\t\t\t\t\ton_change={() =>\n\t\t\t\t\t\t\t\t\tupdate_line(i, \"speaker\", dd_props.props.value as string)}\n\t\t\t\t\t\t\t\tgradio={dd_props}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-column\">\n\t\t\t\t\t\t<div class=\"input-container\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tbind:value={line.text}\n\t\t\t\t\t\t\t\tplaceholder={gradio.props.placeholder}\n\t\t\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\t\t\ton:input={(event) => handle_input(event, i)}\n\t\t\t\t\t\t\t\ton:focus={(event) => handle_input(event, i)}\n\t\t\t\t\t\t\t\ton:keydown={(event) => {\n\t\t\t\t\t\t\t\t\tif (event.key === \"Escape\" && showTagMenu) {\n\t\t\t\t\t\t\t\t\t\tshowTagMenu = false;\n\t\t\t\t\t\t\t\t\t\tselectedOptionIndex = 0;\n\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t} else if (showTagMenu && currentLineIndex === i) {\n\t\t\t\t\t\t\t\t\t\tif (event.key === \"ArrowDown\") {\n\t\t\t\t\t\t\t\t\t\t\tselectedOptionIndex = Math.min(\n\t\t\t\t\t\t\t\t\t\t\t\tselectedOptionIndex + 1,\n\t\t\t\t\t\t\t\t\t\t\t\tfiltered_tags.length - 1\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t\t} else if (event.key === \"ArrowUp\") {\n\t\t\t\t\t\t\t\t\t\t\tselectedOptionIndex = Math.max(\n\t\t\t\t\t\t\t\t\t\t\t\tselectedOptionIndex - 1,\n\t\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t\t} else if (event.key === \"Enter\") {\n\t\t\t\t\t\t\t\t\t\t\tif (filtered_tags[selectedOptionIndex]) {\n\t\t\t\t\t\t\t\t\t\t\t\tinsert_selected_tag();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tbind:this={input_elements[i]}\n\t\t\t\t\t\t\t\trows=\"1\"\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t{#if showTagMenu && currentLineIndex === i}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tid=\"tag-menu\"\n\t\t\t\t\t\t\t\t\tclass=\"tag-menu\"\n\t\t\t\t\t\t\t\t\ttransition:fade={{ duration: 100 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<BaseDropdownOptions\n\t\t\t\t\t\t\t\t\t\tchoices={gradio.props.tags.map((s, i) => [s, i])}\n\t\t\t\t\t\t\t\t\t\tfiltered_indices={filtered_tags.map((s) =>\n\t\t\t\t\t\t\t\t\t\t\tgradio.props.tags.indexOf(s)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tactive_index={filtered_tags.map((s) =>\n\t\t\t\t\t\t\t\t\t\t\tgradio.props.tags.indexOf(s)\n\t\t\t\t\t\t\t\t\t\t)[selectedOptionIndex]}\n\t\t\t\t\t\t\t\t\t\tshow_options={true}\n\t\t\t\t\t\t\t\t\t\ton:change={(e) => insert_tag(e)}\n\t\t\t\t\t\t\t\t\t\t{offset_from_top}\n\t\t\t\t\t\t\t\t\t\tfrom_top={true}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{#if gradio.props.max_lines == undefined || (gradio.props.max_lines && i < gradio.props.max_lines - 1)}\n\t\t\t\t\t\t<div class:action-column={i == 0} class:hidden={disabled}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"add-button\"\n\t\t\t\t\t\t\t\ton:click={() => add_line(i)}\n\t\t\t\t\t\t\t\taria-label=\"Add new line\"\n\t\t\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Plus />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<div class=\"action-column\" class:hidden={disabled || i == 0}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"delete-button\"\n\t\t\t\t\t\t\ton:click={() => delete_line(i)}\n\t\t\t\t\t\t\taria-label=\"Remove current line\"\n\t\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Trash />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t{:else if checked || gradio.props.ui_mode !== \"dialogue\"}\n\t\t<div class=\"textarea-container\" class:loading={is_formatting}>\n\t\t\t{#if is_formatting}\n\t\t\t\t<div class=\"loading-overlay\" transition:fade={{ duration: 200 }}>\n\t\t\t\t\t<div class=\"loading-spinner\"></div>\n\t\t\t\t\t<div class=\"loading-text\">Converting to plain text...</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<textarea\n\t\t\t\tdata-testid=\"textbox\"\n\t\t\t\tbind:value={textbox_value}\n\t\t\t\tplaceholder={gradio.props.placeholder}\n\t\t\t\trows={5}\n\t\t\t\t{disabled}\n\t\t\t\ton:input={(event) => {\n\t\t\t\t\thandle_input(event, 0);\n\t\t\t\t\tgradio.props.value = textbox_value;\n\t\t\t\t}}\n\t\t\t\ton:focus={(event) => handle_input(event, 0)}\n\t\t\t\ton:keydown={(event) => {\n\t\t\t\t\tif (event.key === \"Escape\" && showTagMenu) {\n\t\t\t\t\t\tshowTagMenu = false;\n\t\t\t\t\t\tselectedOptionIndex = 0;\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t} else if (showTagMenu) {\n\t\t\t\t\t\tif (event.key === \"ArrowDown\") {\n\t\t\t\t\t\t\tselectedOptionIndex = Math.min(\n\t\t\t\t\t\t\t\tselectedOptionIndex + 1,\n\t\t\t\t\t\t\t\tfiltered_tags.length - 1\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t} else if (event.key === \"ArrowUp\") {\n\t\t\t\t\t\t\tselectedOptionIndex = Math.max(selectedOptionIndex - 1, 0);\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t} else if (event.key === \"Enter\") {\n\t\t\t\t\t\t\tif (filtered_tags[selectedOptionIndex]) {\n\t\t\t\t\t\t\t\tinsert_selected_tag();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tbind:this={textarea_element}\n\t\t\t/>\n\t\t\t{#if showTagMenu}\n\t\t\t\t<div\n\t\t\t\t\tid=\"tag-menu\"\n\t\t\t\t\tclass=\"tag-menu-plain-text\"\n\t\t\t\t\ttransition:fade={{ duration: 100 }}\n\t\t\t\t>\n\t\t\t\t\t<BaseDropdownOptions\n\t\t\t\t\t\tchoices={gradio.props.tags.map((s, i) => [s, i])}\n\t\t\t\t\t\tfiltered_indices={filtered_tags.map((s) =>\n\t\t\t\t\t\t\tgradio.props.tags.indexOf(s)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tactive_index={filtered_tags.map((s) =>\n\t\t\t\t\t\t\tgradio.props.tags.indexOf(s)\n\t\t\t\t\t\t)[selectedOptionIndex]}\n\t\t\t\t\t\tshow_options={true}\n\t\t\t\t\t\ton:change={(e) => insert_tag(e)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t{#if gradio.props.submit_btn && !disabled}\n\t\t<div class=\"submit-container\">\n\t\t\t<button class=\"submit-button\" on:click={handle_submit} {disabled}>\n\t\t\t\t{#if typeof gradio.props.submit_btn === \"string\"}\n\t\t\t\t\t{gradio.props.submit_btn}\n\t\t\t\t{:else}\n\t\t\t\t\t<Send />\n\t\t\t\t{/if}\n\t\t\t</button>\n\t\t</div>\n\t{/if}\n</label>\n\n<style>\n\tlabel {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t}\n\n\t.input-container {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\talign-items: flex-end;\n\t}\n\n\t.dialogue-container {\n\t\tborder: none;\n\t\tborder-radius: var(--input-radius);\n\t\tbackground: var(--input-background-fill);\n\t\tpadding: var(--spacing-md);\n\t\tmargin-bottom: var(--spacing-sm);\n\t\tposition: relative;\n\t}\n\n\t.dialogue-line {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-bottom: var(--spacing-sm);\n\t}\n\n\t.dialogue-line:has(.action-column.hidden) .text-column {\n\t\tmargin-right: 0;\n\t}\n\n\t.speaker-column {\n\t\tflex: 0 0 150px;\n\t\tmargin-right: var(--spacing-sm);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.speaker-column textarea {\n\t\tbackground: var(--speaker-bg-color);\n\t\ttransition: background-color 0.2s ease;\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tpadding: var(--input-padding);\n\t\tcolor: var(--body-text-color);\n\t\tfont-weight: var(--input-text-weight);\n\t\tfont-size: var(--input-text-size);\n\t\tline-height: var(--line-sm);\n\t\tresize: none;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\theight: auto;\n\t\tmin-height: 30px;\n\t\tmax-height: none;\n\t\tmargin-top: 0px;\n\t\tmargin-bottom: 0px;\n\t\tz-index: 1;\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\twhite-space: pre-wrap;\n\t\tword-wrap: break-word;\n\t\toverflow-wrap: break-word;\n\t\toverflow: hidden;\n\t}\n\n\t.text-column {\n\t\tflex: 1;\n\t\tmargin-right: var(--spacing-sm);\n\t}\n\n\t.text-column textarea {\n\t\twidth: 100%;\n\t\tpadding: var(--spacing-sm);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tcolor: var(--body-text-color);\n\t\tbackground: var(--speaker-bg-color);\n\t\ttransition: background-color 0.2s ease;\n\t\theight: auto;\n\t\tmin-height: 30px;\n\t\tmax-height: none;\n\t\tflex-grow: 1;\n\t\tmargin-top: 0px;\n\t\tmargin-bottom: 0px;\n\t\tresize: none;\n\t\tz-index: 1;\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\tpadding: var(--input-padding);\n\t\twidth: 100%;\n\t\tcolor: var(--body-text-color);\n\t\tfont-weight: var(--input-text-weight);\n\t\tfont-size: var(--input-text-size);\n\t\tline-height: var(--line-sm);\n\t\twhite-space: pre-wrap;\n\t\tword-wrap: break-word;\n\t\toverflow-wrap: break-word;\n\t\toverflow: hidden;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.text-column textarea {\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.dialogue-line[style*=\"--speaker-bg-color: rgba\"] .text-column textarea,\n\t.dialogue-line[style*=\"--speaker-bg-color: rgba\"] .speaker-column textarea {\n\t\tcolor: black;\n\t}\n\n\ttextarea {\n\t\tflex-grow: 1;\n\t\toutline: none !important;\n\t\tmargin-top: 0px;\n\t\tmargin-bottom: 0px;\n\t\tresize: none;\n\t\tz-index: 1;\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\toutline: none !important;\n\t\tbackground: var(--input-background-fill);\n\t\tpadding: var(--input-padding);\n\t\twidth: 100%;\n\t\tcolor: var(--body-text-color);\n\t\tfont-weight: var(--input-text-weight);\n\t\tfont-size: var(--input-text-size);\n\t\tline-height: var(--line-sm);\n\t\tbox-shadow: var(--input-shadow);\n\t\tborder: var(--input-border-width) solid var(--input-border-color);\n\t\tborder-radius: var(--input-radius);\n\t}\n\n\ttextarea:disabled {\n\t\t-webkit-opacity: 1;\n\t\topacity: 1;\n\t}\n\n\ttextarea:focus {\n\t\tbox-shadow: var(--input-shadow-focus);\n\t\tborder-color: var(--input-border-color-focus);\n\t\tbackground: var(--input-background-fill-focus);\n\t}\n\n\ttextarea::placeholder {\n\t\tcolor: var(--input-placeholder-color);\n\t}\n\n\t.action-column {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\n\t.add-button {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: 25px;\n\t\theight: 25px;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcursor: pointer;\n\t}\n\n\t.delete-button {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: 15px;\n\t\theight: 15px;\n\t}\n\n\t.add-button:hover {\n\t\tcolor: var(--color-accent);\n\t}\n\n\t.switch-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\ttransition: opacity 0.2s ease-in-out;\n\t}\n\n\t.switch-container.switch-disabled {\n\t\topacity: 0.6;\n\t\tpointer-events: none;\n\t}\n\n\t.switch-container.top-switch {\n\t\tmargin-bottom: var(--spacing-sm);\n\t\tjustify-content: flex-end;\n\t}\n\n\t.submit-container {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tmargin-top: var(--spacing-sm);\n\t}\n\n\t.submit-container button[disabled] {\n\t\tcursor: not-allowed;\n\t}\n\n\t.submit-button {\n\t\tborder: none;\n\t\ttext-align: center;\n\t\ttext-decoration: none;\n\t\tfont-size: 14px;\n\t\tcursor: pointer;\n\t\tborder-radius: 15px;\n\t\tmin-width: 30px;\n\t\theight: 30px;\n\t\tflex-shrink: 0;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcolor: var(--button-secondary-text-color);\n\t}\n\n\t.submit-button:hover {\n\t\tbackground: var(--button-secondary-background-fill-hover);\n\t}\n\n\t.submit-button:active {\n\t\tbox-shadow: var(--button-shadow-active);\n\t}\n\n\t.submit-button :global(svg) {\n\t\theight: 22px;\n\t\twidth: 22px;\n\t}\n\n\t.tag-menu {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\ttop: 100%;\n\t\tleft: 0;\n\t}\n\n\t.tag-menu-plain-text {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t}\n\n\t.tag-menu-plain-text :global(.options) {\n\t\tposition: static !important;\n\t\twidth: 100% !important;\n\t\tmax-height: none !important;\n\t\ttop: auto !important;\n\t\tbottom: auto !important;\n\t}\n\n\t.hidden {\n\t\tdisplay: none;\n\t}\n\n\t.loading-overlay {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: var(--input-background-fill);\n\t\topacity: 0.95;\n\t\tbackdrop-filter: blur(2px);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 10;\n\t\tborder-radius: var(--input-radius);\n\t}\n\n\t.loading-spinner {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tborder: 2px solid var(--border-color-primary);\n\t\tborder-top: 2px solid var(--color-accent);\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t\tmargin-bottom: var(--spacing-sm);\n\t}\n\n\t@keyframes spin {\n\t\t0% {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.loading-text {\n\t\tcolor: var(--body-text-color);\n\t\tfont-size: var(--text-sm);\n\t\tfont-weight: 500;\n\t\topacity: 0.8;\n\t}\n\n\t.dialogue-container.loading,\n\t.textarea-container.loading {\n\t\tposition: relative;\n\t\topacity: 0.7;\n\t\ttransition: opacity 0.3s ease-in-out;\n\t}\n\n\t.dialogue-container,\n\t.textarea-container {\n\t\ttransition: opacity 0.3s ease-in-out;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as BaseDialogue } from \"./Dialogue.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { Gradio } from \"@gradio/utils\";\n\timport type { DialogueEvents, DialogueProps } from \"./types\";\n\timport Dialogue from \"./Dialogue.svelte\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\n\tconst props = $props();\n\tconst gradio = new Gradio<DialogueEvents, DialogueProps>(props);\n</script>\n\n<Block\n\tvisible={gradio.shared.visible}\n\telem_id={gradio.shared.elem_id}\n\telem_classes={gradio.shared.elem_classes}\n\tscale={gradio.shared.scale}\n\tmin_width={gradio.shared.min_width}\n\tallow_overflow={true}\n\tpadding={gradio.shared.container}\n>\n\t{#if gradio.shared.loading_status}\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...gradio.shared.loading_status}\n\t\t\ton:clear_status={() =>\n\t\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t\t/>\n\t{/if}\n\t<Dialogue {gradio} />\n</Block>\n"],"names":["label","$.prop","$$props","checked","disabled","dispatch","createEventDispatcher","handleClick","event","state","gradio","$.derived","dialogue_lines","$.state","$.proxy","$.user_effect","$.set","textbox_value","buttons","old_value","$.get","dialogue_container_element","showTagMenu","currentLineIndex","selectedOptionIndex","filtered_tags","input_elements","textarea_element","offset_from_top","copied","timer","hoveredSpeaker","is_unformatting","is_formatting","defaultColorNames","colorNameToHex","_speakerColors","speaker","index","colorName","add_line","newSpeaker","tick","delete_line","update_line","key","input","cursor_position","text","show_menu","position_reference_index","search_text","get_tag_search_text","tag","lastColonIndex","searchText","input_rect","container_rect","cursorPosition","insert_selected_tag","currentInput","beforeColon","afterCursor","newText","newCursorPosition","filteredBeforeColon","updatedInput","insert_tag","e","handle_click_outside","target","tagMenu","value_to_string","value","handle_copy","copy_feedback","handle_submit","onMount","formatted","Check","Copy","$$render","consequent","$.template_effect","$.set_text","text_1","$0","consequent_1","$.transition","div_2","fade","consequent_2","$.each","node_6","line","$.bind_value","textarea","$$value","dd_props","Gradio","s","consequent_3","alternate","i","$1","$2","div_7","consequent_4","$.event","button","consequent_5","speakerColors","div_4","textarea_1","handle_input","button_1","$.bind_this","div_1","div_11","consequent_7","textarea_2","consequent_9","consequent_6","alternate_1","props","$.rest_props"],"mappings":"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"}