{"version":3,"file":"DRgJnBvA.js","sources":["../../../../../../../audio/static/StaticAudio.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { Empty } from \"@gradio/atoms\";\n\timport {\n\t\tShareButton,\n\t\tIconButton,\n\t\tBlockLabel,\n\t\tDownloadLink,\n\t\tIconButtonWrapper\n\t} from \"@gradio/atoms\";\n\timport { Download, Music } from \"@gradio/icons\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport AudioPlayer from \"../player/AudioPlayer.svelte\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { FileData } from \"@gradio/client\";\n\timport type { WaveformOptions, SubtitleData } from \"../shared/types\";\n\n\texport let value: null | FileData = null;\n\texport let subtitles: null | FileData | SubtitleData[] = null;\n\texport let label: string;\n\texport let show_label = true;\n\texport let buttons: string[] | null = null;\n\texport let i18n: I18nFormatter;\n\texport let waveform_settings: Record<string, any> = {};\n\texport let waveform_options: WaveformOptions = {\n\t\tshow_recording_waveform: true\n\t};\n\texport let editable = true;\n\texport let loop: boolean;\n\texport let display_icon_button_wrapper_top_corner = false;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData;\n\t\tplay: undefined;\n\t\tpause: undefined;\n\t\tend: undefined;\n\t\tstop: undefined;\n\t}>();\n\n\t$: value && dispatch(\"change\", value);\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={false}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n\n{#if value !== null}\n\t<IconButtonWrapper\n\t\tdisplay_top_corner={display_icon_button_wrapper_top_corner}\n\t>\n\t\t{#if buttons === null ? true : buttons.includes(\"download\")}\n\t\t\t<DownloadLink\n\t\t\t\thref={value.is_stream\n\t\t\t\t\t? value.url?.replace(\"playlist.m3u8\", \"playlist-file\")\n\t\t\t\t\t: value.url}\n\t\t\t\tdownload={value.orig_name || value.path}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</DownloadLink>\n\t\t{/if}\n\t\t{#if buttons === null ? true : buttons.includes(\"share\")}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:error\n\t\t\t\ton:share\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value.url, \"url\");\n\t\t\t\t\treturn `<audio controls src=\"${url}\"></audio>`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</IconButtonWrapper>\n\n\t<AudioPlayer\n\t\t{value}\n\t\tsubtitles={Array.isArray(subtitles) ? subtitles : subtitles?.url}\n\t\t{label}\n\t\t{i18n}\n\t\t{waveform_settings}\n\t\t{waveform_options}\n\t\t{editable}\n\t\t{loop}\n\t\ton:pause\n\t\ton:play\n\t\ton:stop\n\t\ton:load\n\t/>\n{:else}\n\t<Empty size=\"small\">\n\t\t<Music />\n\t</Empty>\n{/if}\n"],"names":["$.prop","$.untrack","value"],"mappings":";;;;;;;;;;;;;;;;wCAAA;;AAiBY,MAAA,kCAAyB,IAAI;AAC7B,MAAA,0CAA8C,IAAI;MAClD,QAAaA,KAAA,SAAA,SAAA,CAAA;AACb,MAAA,4CAAa,IAAI;AACjB,MAAA,sCAA2B,IAAI;MAC/B,OAAmBA,KAAA,SAAA,QAAA,CAAA;MACnB,oBAAsCA,KAAA,SAAA,qBAAA,IAAA,OAAA,CAAA,EAAA;MACtC,mBAAiCA,KAAA,SAAA,oBAAA,IAAA,OAAA,EAC3C,yBAAyB,KAAA,EAAA;AAEf,MAAA,wCAAW,IAAI;MACf,OAAaA,KAAA,SAAA,QAAA,CAAA;AACb,MAAA,oGAAyC,KAAK;AAEnD,QAAA,WAAW,sBAAqB;;AAQnC,eAAS,SAAS,UAAU,MAAK,CAAA;AAAA;;;;;;uDApBzB,MAAa,CAAA,mBAGb,KAAmB,CAAA,iBAwBvB,MAAK,KAAI,KAAI,EAAC,aAAa,CAAA;;;;;;eAF5B;AAAA;aACC;AAAA;;;;;;;;;;;;iBAMc,uCAAsC;AAAA;;;;;;;mEAlChD,MAAsB,CAAA,GAsCxBC,QAAA,MAAA,QAAM,YACT,QAAM,KAAK,QAAQ,iBAAiB,eAAe,IACnD,MAAK,EAAC,GAAG;mEAxCJ,MAAsB,CAAA,GAyCpBA,QAAA,MAAA,MAAK,EAAC,aAAa,MAAK,EAAC,IAAI;;;;;;;;;;0EApC/B,KAAmB,CAAA,GAsCQA,QAAA,MAAA,KAAI,EAAC,iBAAiB,CAAA;;;iCAAvC;AAAA;;;;;;;;;;;;kCAvCV,QAAwB,CAAA,iBAgC7B,QAAO,MAAK,OAAO,OAAO,QAAO,EAAC,SAAS,UAAU,CAAA;;;;;;;;;;gBAetC,WAAA,OAAAC,WAAU;AACtB,sBAAA,CAAAA,eAAc;AACf,sBAAA,YAAY,oBAAoBA,OAAM,GAAU;iDACrB,GAAG;AAAA,gBACnC;AAAA;;;;;;;;;;;;;;kCAnDQ,QAAwB,CAAA,iBA0C7B,QAAO,MAAK,OAAO,OAAO,QAAO,EAAC,SAAS,OAAO,CAAA;;;;;;;;;2DA7C7C,UAA2C,CAAA,iBA8D1C,MAAM,QAAQ,UAAS,KAAI,UAAS,IAAG,UAAS,GAAE,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA/B7D,UAAA,MAAK,MAAK,KAAI,UAAA,YAAA;AAAA,UAAA,UAAA,WAAA,KAAA;AAAA;;;;AATnB;"}