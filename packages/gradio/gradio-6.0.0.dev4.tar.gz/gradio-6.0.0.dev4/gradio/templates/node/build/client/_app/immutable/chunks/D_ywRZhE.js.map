{"version":3,"file":"D_ywRZhE.js","sources":["../../../../../../../video/shared/VideoTimeline.svelte","../../../../../../../video/shared/VideoControls.svelte","../../../../../../../video/shared/Player.svelte","../../../../../../../video/shared/VideoPreview.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount, onDestroy } from \"svelte\";\n\n\texport let videoElement: HTMLVideoElement;\n\texport let trimmedDuration: number | null;\n\texport let dragStart: number;\n\texport let dragEnd: number;\n\texport let loadingTimeline: boolean;\n\n\tlet thumbnails: string[] = [];\n\tlet numberOfThumbnails = 10;\n\tlet intervalId: ReturnType<typeof setInterval> | undefined;\n\tlet videoDuration: number;\n\n\tlet leftHandlePosition = 0;\n\tlet rightHandlePosition = 100;\n\n\tlet dragging: string | null = null;\n\n\tconst startDragging = (side: string | null): void => {\n\t\tdragging = side;\n\t};\n\n\t$: loadingTimeline = thumbnails.length !== numberOfThumbnails;\n\n\tconst stopDragging = (): void => {\n\t\tdragging = null;\n\t};\n\n\tconst drag = (event: { clientX: number }, distance?: number): void => {\n\t\tif (dragging) {\n\t\t\tconst timeline = document.getElementById(\"timeline\");\n\n\t\t\tif (!timeline) return;\n\n\t\t\tconst rect = timeline.getBoundingClientRect();\n\t\t\tlet newPercentage = ((event.clientX - rect.left) / rect.width) * 100;\n\n\t\t\tif (distance) {\n\t\t\t\t// Move handle based on arrow key press\n\t\t\t\tnewPercentage =\n\t\t\t\t\tdragging === \"left\"\n\t\t\t\t\t\t? leftHandlePosition + distance\n\t\t\t\t\t\t: rightHandlePosition + distance;\n\t\t\t} else {\n\t\t\t\t// Move handle based on mouse drag\n\t\t\t\tnewPercentage = ((event.clientX - rect.left) / rect.width) * 100;\n\t\t\t}\n\n\t\t\tnewPercentage = Math.max(0, Math.min(newPercentage, 100)); // Keep within 0 and 100\n\n\t\t\tif (dragging === \"left\") {\n\t\t\t\tleftHandlePosition = Math.min(newPercentage, rightHandlePosition);\n\n\t\t\t\t// Calculate the new time and set it for the videoElement\n\t\t\t\tconst newTimeLeft = (leftHandlePosition / 100) * videoDuration;\n\t\t\t\tvideoElement.currentTime = newTimeLeft;\n\n\t\t\t\tdragStart = newTimeLeft;\n\t\t\t} else if (dragging === \"right\") {\n\t\t\t\trightHandlePosition = Math.max(newPercentage, leftHandlePosition);\n\n\t\t\t\tconst newTimeRight = (rightHandlePosition / 100) * videoDuration;\n\t\t\t\tvideoElement.currentTime = newTimeRight;\n\n\t\t\t\tdragEnd = newTimeRight;\n\t\t\t}\n\n\t\t\tconst startTime = (leftHandlePosition / 100) * videoDuration;\n\t\t\tconst endTime = (rightHandlePosition / 100) * videoDuration;\n\t\t\ttrimmedDuration = endTime - startTime;\n\n\t\t\tleftHandlePosition = leftHandlePosition;\n\t\t\trightHandlePosition = rightHandlePosition;\n\t\t}\n\t};\n\n\tconst moveHandle = (e: KeyboardEvent): void => {\n\t\tif (dragging) {\n\t\t\t// Calculate the movement distance as a percentage of the video duration\n\t\t\tconst distance = (1 / videoDuration) * 100;\n\n\t\t\tif (e.key === \"ArrowLeft\") {\n\t\t\t\tdrag({ clientX: 0 }, -distance);\n\t\t\t} else if (e.key === \"ArrowRight\") {\n\t\t\t\tdrag({ clientX: 0 }, distance);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst generateThumbnail = (): void => {\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tif (!ctx) return;\n\n\t\tcanvas.width = videoElement.videoWidth;\n\t\tcanvas.height = videoElement.videoHeight;\n\n\t\tctx.drawImage(videoElement, 0, 0, canvas.width, canvas.height);\n\n\t\tconst thumbnail: string = canvas.toDataURL(\"image/jpeg\", 0.7);\n\t\tthumbnails = [...thumbnails, thumbnail];\n\t};\n\n\tonMount(() => {\n\t\tconst loadMetadata = (): void => {\n\t\t\tvideoDuration = videoElement.duration;\n\n\t\t\tconst interval = videoDuration / numberOfThumbnails;\n\t\t\tlet captures = 0;\n\n\t\t\tconst onSeeked = (): void => {\n\t\t\t\tgenerateThumbnail();\n\t\t\t\tcaptures++;\n\n\t\t\t\tif (captures < numberOfThumbnails) {\n\t\t\t\t\tvideoElement.currentTime += interval;\n\t\t\t\t} else {\n\t\t\t\t\tvideoElement.removeEventListener(\"seeked\", onSeeked);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvideoElement.addEventListener(\"seeked\", onSeeked);\n\t\t\tvideoElement.currentTime = 0;\n\t\t};\n\n\t\tif (videoElement.readyState >= 1) {\n\t\t\tloadMetadata();\n\t\t} else {\n\t\t\tvideoElement.addEventListener(\"loadedmetadata\", loadMetadata);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\twindow.removeEventListener(\"mousemove\", drag);\n\t\twindow.removeEventListener(\"mouseup\", stopDragging);\n\t\twindow.removeEventListener(\"keydown\", moveHandle);\n\n\t\tif (intervalId !== undefined) {\n\t\t\tclearInterval(intervalId);\n\t\t}\n\t});\n\n\tonMount(() => {\n\t\twindow.addEventListener(\"mousemove\", drag);\n\t\twindow.addEventListener(\"mouseup\", stopDragging);\n\t\twindow.addEventListener(\"keydown\", moveHandle);\n\t});\n</script>\n\n<div class=\"container\">\n\t{#if loadingTimeline}\n\t\t<div class=\"load-wrap\">\n\t\t\t<span aria-label=\"loading timeline\" class=\"loader\" />\n\t\t</div>\n\t{:else}\n\t\t<div id=\"timeline\" class=\"thumbnail-wrapper\">\n\t\t\t<button\n\t\t\t\taria-label=\"start drag handle for trimming video\"\n\t\t\t\tclass=\"handle left\"\n\t\t\t\ton:mousedown={() => startDragging(\"left\")}\n\t\t\t\ton:blur={stopDragging}\n\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\tif (e.key === \"ArrowLeft\" || e.key == \"ArrowRight\") {\n\t\t\t\t\t\tstartDragging(\"left\");\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tstyle=\"left: {leftHandlePosition}%;\"\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\tclass=\"opaque-layer\"\n\t\t\t\tstyle=\"left: {leftHandlePosition}%; right: {100 - rightHandlePosition}%\"\n\t\t\t/>\n\n\t\t\t{#each thumbnails as thumbnail, i (i)}\n\t\t\t\t<img src={thumbnail} alt={`frame-${i}`} draggable=\"false\" />\n\t\t\t{/each}\n\t\t\t<button\n\t\t\t\taria-label=\"end drag handle for trimming video\"\n\t\t\t\tclass=\"handle right\"\n\t\t\t\ton:mousedown={() => startDragging(\"right\")}\n\t\t\t\ton:blur={stopDragging}\n\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\tif (e.key === \"ArrowLeft\" || e.key == \"ArrowRight\") {\n\t\t\t\t\t\tstartDragging(\"right\");\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tstyle=\"left: {rightHandlePosition}%;\"\n\t\t\t/>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.load-wrap {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\theight: 100%;\n\t}\n\t.loader {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tbackground-color: var(--border-color-accent-subdued);\n\t\tanimation: shadowPulse 2s linear infinite;\n\t\tbox-shadow:\n\t\t\t-24px 0 var(--border-color-accent-subdued),\n\t\t\t24px 0 var(--border-color-accent-subdued);\n\t\tmargin: var(--spacing-md);\n\t\tborder-radius: 50%;\n\t\twidth: 10px;\n\t\theight: 10px;\n\t\tscale: 0.5;\n\t}\n\n\t@keyframes shadowPulse {\n\t\t33% {\n\t\t\tbox-shadow:\n\t\t\t\t-24px 0 var(--border-color-accent-subdued),\n\t\t\t\t24px 0 #fff;\n\t\t\tbackground: #fff;\n\t\t}\n\t\t66% {\n\t\t\tbox-shadow:\n\t\t\t\t-24px 0 #fff,\n\t\t\t\t24px 0 #fff;\n\t\t\tbackground: var(--border-color-accent-subdued);\n\t\t}\n\t\t100% {\n\t\t\tbox-shadow:\n\t\t\t\t-24px 0 #fff,\n\t\t\t\t24px 0 var(--border-color-accent-subdued);\n\t\t\tbackground: #fff;\n\t\t}\n\t}\n\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin: var(--spacing-lg) var(--spacing-lg) 0 var(--spacing-lg);\n\t}\n\n\t#timeline {\n\t\tdisplay: flex;\n\t\theight: var(--size-10);\n\t\tflex: 1;\n\t\tposition: relative;\n\t}\n\n\timg {\n\t\tflex: 1 1 auto;\n\t\tmin-width: 0;\n\t\tobject-fit: cover;\n\t\theight: var(--size-12);\n\t\tborder: 1px solid var(--block-border-color);\n\t\tuser-select: none;\n\t\tz-index: 1;\n\t}\n\n\t.handle {\n\t\twidth: 3px;\n\t\tbackground-color: var(--color-accent);\n\t\tcursor: ew-resize;\n\t\theight: var(--size-12);\n\t\tz-index: 3;\n\t\tposition: absolute;\n\t}\n\n\t.opaque-layer {\n\t\tbackground-color: rgba(230, 103, 40, 0.25);\n\t\tborder: 1px solid var(--color-accent);\n\t\theight: var(--size-12);\n\t\tposition: absolute;\n\t\tz-index: 2;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { Undo, Trim, Clear } from \"@gradio/icons\";\n\timport VideoTimeline from \"./VideoTimeline.svelte\";\n\timport { trimVideo } from \"./utils\";\n\timport { FFmpeg } from \"@ffmpeg/ffmpeg\";\n\timport loadFfmpeg from \"./utils\";\n\timport { onMount } from \"svelte\";\n\timport { format_time } from \"@gradio/utils\";\n\timport { IconButton } from \"@gradio/atoms\";\n\timport { ModifyUpload } from \"@gradio/upload\";\n\timport type { FileData } from \"@gradio/client\";\n\n\texport let videoElement: HTMLVideoElement;\n\n\texport let showRedo = false;\n\texport let interactive = true;\n\texport let mode = \"\";\n\texport let handle_reset_value: () => void;\n\texport let handle_trim_video: (videoBlob: Blob) => void;\n\texport let processingVideo = false;\n\texport let i18n: (key: string) => string;\n\texport let value: FileData | null = null;\n\texport let show_download_button = false;\n\texport let handle_clear: () => void = () => {};\n\texport let has_change_history = false;\n\n\tlet ffmpeg: FFmpeg;\n\n\tonMount(async () => {\n\t\tffmpeg = await loadFfmpeg();\n\t});\n\n\t$: if (mode === \"edit\" && trimmedDuration === null && videoElement)\n\t\ttrimmedDuration = videoElement.duration;\n\n\tlet trimmedDuration: number | null = null;\n\tlet dragStart = 0;\n\tlet dragEnd = 0;\n\n\tlet loadingTimeline = false;\n\n\tconst toggleTrimmingMode = (): void => {\n\t\tif (mode === \"edit\") {\n\t\t\tmode = \"\";\n\t\t\ttrimmedDuration = videoElement.duration;\n\t\t} else {\n\t\t\tmode = \"edit\";\n\t\t}\n\t};\n</script>\n\n<div class=\"container\" class:hidden={mode !== \"edit\"}>\n\t{#if mode === \"edit\"}\n\t\t<div class=\"timeline-wrapper\">\n\t\t\t<VideoTimeline\n\t\t\t\t{videoElement}\n\t\t\t\tbind:dragStart\n\t\t\t\tbind:dragEnd\n\t\t\t\tbind:trimmedDuration\n\t\t\t\tbind:loadingTimeline\n\t\t\t/>\n\t\t</div>\n\t{/if}\n\n\t<div class=\"controls\" data-testid=\"waveform-controls\">\n\t\t{#if mode === \"edit\" && trimmedDuration !== null}\n\t\t\t<time\n\t\t\t\taria-label=\"duration of selected region in seconds\"\n\t\t\t\tclass:hidden={loadingTimeline}>{format_time(trimmedDuration)}</time\n\t\t\t>\n\t\t\t<div class=\"edit-buttons\">\n\t\t\t\t<button\n\t\t\t\t\tclass:hidden={loadingTimeline}\n\t\t\t\t\tclass=\"text-button\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tmode = \"\";\n\t\t\t\t\t\tprocessingVideo = true;\n\t\t\t\t\t\ttrimVideo(ffmpeg, dragStart, dragEnd, videoElement)\n\t\t\t\t\t\t\t.then((videoBlob) => {\n\t\t\t\t\t\t\t\thandle_trim_video(videoBlob);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tprocessingVideo = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}>Trim</button\n\t\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"text-button\"\n\t\t\t\t\tclass:hidden={loadingTimeline}\n\t\t\t\t\ton:click={toggleTrimmingMode}>Cancel</button\n\t\t\t\t>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div />\n\t\t{/if}\n\t</div>\n</div>\n\n<ModifyUpload\n\t{i18n}\n\ton:clear={() => handle_clear()}\n\tdownload={show_download_button ? value?.url : null}\n>\n\t{#if showRedo && mode === \"\"}\n\t\t<IconButton\n\t\t\tIcon={Undo}\n\t\t\tlabel=\"Reset video to initial value\"\n\t\t\tdisabled={processingVideo || !has_change_history}\n\t\t\ton:click={() => {\n\t\t\t\thandle_reset_value();\n\t\t\t\tmode = \"\";\n\t\t\t}}\n\t\t/>\n\t{/if}\n\n\t{#if interactive && mode === \"\"}\n\t\t<IconButton\n\t\t\tIcon={Trim}\n\t\t\tlabel=\"Trim video to selection\"\n\t\t\tdisabled={processingVideo}\n\t\t\ton:click={toggleTrimmingMode}\n\t\t/>\n\t{/if}\n</ModifyUpload>\n\n<style>\n\t.container {\n\t\twidth: 100%;\n\t}\n\ttime {\n\t\tcolor: var(--color-accent);\n\t\tfont-weight: bold;\n\t\tpadding-left: var(--spacing-xs);\n\t}\n\n\t.timeline-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t}\n\n\t.text-button {\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-sm);\n\t\tfont-weight: 300;\n\t\tfont-size: var(--size-3);\n\t\ttext-align: center;\n\t\tcolor: var(--neutral-400);\n\t\theight: var(--size-5);\n\t\tfont-weight: bold;\n\t\tpadding: 0 5px;\n\t\tmargin-left: 5px;\n\t}\n\n\t.text-button:hover,\n\t.text-button:focus {\n\t\tcolor: var(--color-accent);\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.controls {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin: var(--spacing-lg);\n\t\toverflow: hidden;\n\t}\n\n\t.edit-buttons {\n\t\tdisplay: flex;\n\t\tgap: var(--spacing-sm);\n\t}\n\n\t@media (max-width: 320px) {\n\t\t.controls {\n\t\t\tflex-direction: column;\n\t\t\talign-items: flex-start;\n\t\t}\n\n\t\t.edit-buttons {\n\t\t\tmargin-top: var(--spacing-sm);\n\t\t}\n\n\t\t.controls * {\n\t\t\tmargin: var(--spacing-sm);\n\t\t}\n\n\t\t.controls .text-button {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.hidden {\n\t\tdisplay: none;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { Play, Pause, Maximize, Undo } from \"@gradio/icons\";\n\timport Video from \"./Video.svelte\";\n\timport VideoControls from \"./VideoControls.svelte\";\n\timport type { FileData, Client } from \"@gradio/client\";\n\timport { prepare_files } from \"@gradio/client\";\n\timport { format_time } from \"@gradio/utils\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\texport let root = \"\";\n\texport let src: string;\n\texport let subtitle: string | null = null;\n\texport let mirror: boolean;\n\texport let autoplay: boolean;\n\texport let loop: boolean;\n\texport let label = \"test\";\n\texport let interactive = false;\n\texport let handle_change: (video: FileData) => void = () => {};\n\texport let handle_reset_value: () => void = () => {};\n\texport let upload: Client[\"upload\"];\n\texport let is_stream: boolean | undefined;\n\texport let i18n: I18nFormatter;\n\texport let show_download_button = false;\n\texport let value: FileData | null = null;\n\texport let handle_clear: () => void = () => {};\n\texport let has_change_history = false;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tplay: undefined;\n\t\tpause: undefined;\n\t\tstop: undefined;\n\t\tend: undefined;\n\t\tclear: undefined;\n\t}>();\n\n\tlet time = 0;\n\tlet duration: number;\n\tlet paused = true;\n\tlet video: HTMLVideoElement;\n\tlet processingVideo = false;\n\n\tfunction handleMove(e: TouchEvent | MouseEvent): void {\n\t\tif (!duration) return;\n\n\t\tif (e.type === \"click\") {\n\t\t\thandle_click(e as MouseEvent);\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.type !== \"touchmove\" && !((e as MouseEvent).buttons & 1)) return;\n\n\t\tconst clientX =\n\t\t\te.type === \"touchmove\"\n\t\t\t\t? (e as TouchEvent).touches[0].clientX\n\t\t\t\t: (e as MouseEvent).clientX;\n\t\tconst { left, right } = (\n\t\t\te.currentTarget as HTMLProgressElement\n\t\t).getBoundingClientRect();\n\t\ttime = (duration * (clientX - left)) / (right - left);\n\t}\n\n\tasync function play_pause(): Promise<void> {\n\t\tif (document.fullscreenElement != video) {\n\t\t\tconst isPlaying =\n\t\t\t\tvideo.currentTime > 0 &&\n\t\t\t\t!video.paused &&\n\t\t\t\t!video.ended &&\n\t\t\t\tvideo.readyState > video.HAVE_CURRENT_DATA;\n\n\t\t\tif (!isPlaying) {\n\t\t\t\tawait video.play();\n\t\t\t} else video.pause();\n\t\t}\n\t}\n\n\tfunction handle_click(e: MouseEvent): void {\n\t\tconst { left, right } = (\n\t\t\te.currentTarget as HTMLProgressElement\n\t\t).getBoundingClientRect();\n\t\ttime = (duration * (e.clientX - left)) / (right - left);\n\t}\n\n\tfunction handle_end(): void {\n\t\tdispatch(\"stop\");\n\t\tdispatch(\"end\");\n\t}\n\n\tconst handle_trim_video = async (videoBlob: Blob): Promise<void> => {\n\t\tlet _video_blob = new File([videoBlob], \"video.mp4\");\n\t\tconst val = await prepare_files([_video_blob]);\n\t\tlet value = ((await upload(val, root))?.filter(Boolean) as FileData[])[0];\n\n\t\thandle_change(value);\n\t};\n\n\tfunction open_full_screen(): void {\n\t\tvideo.requestFullscreen();\n\t}\n\n\t$: time = time || 0;\n\t$: duration = duration || 0;\n</script>\n\n<div class=\"wrap\">\n\t<div class=\"mirror-wrap\" class:mirror>\n\t\t<Video\n\t\t\t{src}\n\t\t\tpreload=\"auto\"\n\t\t\t{autoplay}\n\t\t\t{loop}\n\t\t\t{is_stream}\n\t\t\ton:click={play_pause}\n\t\t\ton:play\n\t\t\ton:pause\n\t\t\ton:error\n\t\t\ton:ended={handle_end}\n\t\t\tbind:currentTime={time}\n\t\t\tbind:duration\n\t\t\tbind:paused\n\t\t\tbind:node={video}\n\t\t\tdata-testid={`${label}-player`}\n\t\t\t{processingVideo}\n\t\t\ton:loadstart\n\t\t\ton:loadeddata\n\t\t\ton:loadedmetadata\n\t\t>\n\t\t\t<track kind=\"captions\" src={subtitle} default />\n\t\t</Video>\n\t</div>\n\n\t<div class=\"controls\">\n\t\t<div class=\"inner\">\n\t\t\t<span\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\tclass=\"icon\"\n\t\t\t\taria-label=\"play-pause-replay-button\"\n\t\t\t\ton:click={play_pause}\n\t\t\t\ton:keydown={play_pause}\n\t\t\t>\n\t\t\t\t{#if time === duration}\n\t\t\t\t\t<Undo />\n\t\t\t\t{:else if paused}\n\t\t\t\t\t<Play />\n\t\t\t\t{:else}\n\t\t\t\t\t<Pause />\n\t\t\t\t{/if}\n\t\t\t</span>\n\n\t\t\t<span class=\"time\">{format_time(time)} / {format_time(duration)}</span>\n\n\t\t\t<!-- TODO: implement accessible video timeline for 4.0 -->\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t<!-- svelte-ignore a11y-no-noninteractive-element-interactions -->\n\t\t\t<progress\n\t\t\t\tvalue={time / duration || 0}\n\t\t\t\ton:mousemove={handleMove}\n\t\t\t\ton:touchmove|preventDefault={handleMove}\n\t\t\t\ton:click|stopPropagation|preventDefault={handle_click}\n\t\t\t/>\n\n\t\t\t<div\n\t\t\t\trole=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\tclass=\"icon\"\n\t\t\t\taria-label=\"full-screen\"\n\t\t\t\ton:click={open_full_screen}\n\t\t\t\ton:keypress={open_full_screen}\n\t\t\t>\n\t\t\t\t<Maximize />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n{#if interactive}\n\t<VideoControls\n\t\tvideoElement={video}\n\t\tshowRedo\n\t\t{handle_trim_video}\n\t\t{handle_reset_value}\n\t\tbind:processingVideo\n\t\t{value}\n\t\t{i18n}\n\t\t{show_download_button}\n\t\t{handle_clear}\n\t\t{has_change_history}\n\t/>\n{/if}\n\n<style lang=\"postcss\">\n\tspan {\n\t\ttext-shadow: 0 0 8px rgba(0, 0, 0, 0.5);\n\t}\n\n\tprogress {\n\t\tmargin-right: var(--size-3);\n\t\tborder-radius: var(--radius-sm);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-2);\n\t}\n\n\tprogress::-webkit-progress-bar {\n\t\tborder-radius: 2px;\n\t\tbackground-color: rgba(255, 255, 255, 0.2);\n\t\toverflow: hidden;\n\t}\n\n\tprogress::-webkit-progress-value {\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t}\n\n\t.mirror {\n\t\ttransform: scaleX(-1);\n\t}\n\n\t.mirror-wrap {\n\t\tposition: relative;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t}\n\n\t.controls {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\topacity: 0;\n\t\ttransition: 500ms;\n\t\tmargin: var(--size-2);\n\t\tborder-radius: var(--radius-md);\n\t\tbackground: var(--color-grey-800);\n\t\tpadding: var(--size-2) var(--size-1);\n\t\twidth: calc(100% - 0.375rem * 2);\n\t\twidth: calc(100% - var(--size-2) * 2);\n\t}\n\t.wrap:hover .controls {\n\t\topacity: 1;\n\t}\n\n\t.inner {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding-right: var(--size-2);\n\t\tpadding-left: var(--size-2);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\t.icon {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tcursor: pointer;\n\t\twidth: var(--size-6);\n\t\tcolor: white;\n\t}\n\n\t.time {\n\t\tflex-shrink: 0;\n\t\tmargin-right: var(--size-3);\n\t\tmargin-left: var(--size-3);\n\t\tcolor: white;\n\t\tfont-size: var(--text-sm);\n\t\tfont-family: var(--font-mono);\n\t}\n\t.wrap {\n\t\tposition: relative;\n\t\tbackground-color: var(--background-fill-secondary);\n\t\theight: var(--size-full);\n\t\twidth: var(--size-full);\n\t\tborder-radius: var(--radius-xl);\n\t}\n\t.wrap :global(video) {\n\t\theight: var(--size-full);\n\t\twidth: var(--size-full);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, afterUpdate, tick } from \"svelte\";\n\timport {\n\t\tBlockLabel,\n\t\tEmpty,\n\t\tIconButton,\n\t\tShareButton,\n\t\tIconButtonWrapper,\n\t\tDownloadLink\n\t} from \"@gradio/atoms\";\n\timport type { FileData, Client } from \"@gradio/client\";\n\timport { Video, Download } from \"@gradio/icons\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\n\timport Player from \"./Player.svelte\";\n\timport type { I18nFormatter } from \"js/core/src/gradio_helper\";\n\n\texport let value: FileData | null = null;\n\texport let subtitle: FileData | null = null;\n\texport let label: string | undefined = undefined;\n\texport let show_label = true;\n\texport let autoplay: boolean;\n\texport let show_share_button = true;\n\texport let show_download_button = true;\n\texport let loop: boolean;\n\texport let i18n: I18nFormatter;\n\texport let upload: Client[\"upload\"];\n\texport let display_icon_button_wrapper_top_corner = false;\n\n\tlet old_value: FileData | null = null;\n\tlet old_subtitle: FileData | null = null;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData;\n\t\tplay: undefined;\n\t\tpause: undefined;\n\t\tend: undefined;\n\t\tstop: undefined;\n\t\tload: undefined;\n\t}>();\n\n\t$: value && dispatch(\"change\", value);\n\n\tafterUpdate(async () => {\n\t\t// needed to bust subtitle caching issues on Chrome\n\t\tif (\n\t\t\tvalue !== old_value &&\n\t\t\tsubtitle !== old_subtitle &&\n\t\t\told_subtitle !== null\n\t\t) {\n\t\t\told_value = value;\n\t\t\tvalue = null;\n\t\t\tawait tick();\n\t\t\tvalue = old_value;\n\t\t}\n\t\told_value = value;\n\t\told_subtitle = subtitle;\n\t});\n</script>\n\n<BlockLabel {show_label} Icon={Video} label={label || \"Video\"} />\n{#if !value || value.url === undefined}\n\t<Empty unpadded_box={true} size=\"large\"><Video /></Empty>\n{:else}\n\t{#key value.url}\n\t\t<Player\n\t\t\tsrc={value.url}\n\t\t\tsubtitle={subtitle?.url}\n\t\t\tis_stream={value.is_stream}\n\t\t\t{autoplay}\n\t\t\ton:play\n\t\t\ton:pause\n\t\t\ton:stop\n\t\t\ton:end\n\t\t\ton:loadedmetadata={() => {\n\t\t\t\t// Deal with `<video>`'s `loadedmetadata` event as `VideoPreview`'s `load` event\n\t\t\t\t// to represent not only the video is loaded but also the metadata is loaded\n\t\t\t\t// so its dimensions (w/h) are known. This is used for Chatbot's auto scroll.\n\t\t\t\tdispatch(\"load\");\n\t\t\t}}\n\t\t\tmirror={false}\n\t\t\t{label}\n\t\t\t{loop}\n\t\t\tinteractive={false}\n\t\t\t{upload}\n\t\t\t{i18n}\n\t\t/>\n\t{/key}\n\t<div data-testid=\"download-div\">\n\t\t<IconButtonWrapper\n\t\t\tdisplay_top_corner={display_icon_button_wrapper_top_corner}\n\t\t>\n\t\t\t{#if show_download_button}\n\t\t\t\t<DownloadLink\n\t\t\t\t\thref={value.is_stream\n\t\t\t\t\t\t? value.url?.replace(\"playlist.m3u8\", \"playlist-file\")\n\t\t\t\t\t\t: value.url}\n\t\t\t\t\tdownload={value.orig_name || value.path}\n\t\t\t\t>\n\t\t\t\t\t<IconButton Icon={Download} label=\"Download\" />\n\t\t\t\t</DownloadLink>\n\t\t\t{/if}\n\t\t\t{#if show_share_button}\n\t\t\t\t<ShareButton\n\t\t\t\t\t{i18n}\n\t\t\t\t\ton:error\n\t\t\t\t\ton:share\n\t\t\t\t\t{value}\n\t\t\t\t\tformatter={async (value) => {\n\t\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\t\tlet url = await uploadToHuggingFace(value.data, \"url\");\n\t\t\t\t\t\treturn url;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</IconButtonWrapper>\n\t</div>\n{/if}\n"],"names":["$.prop","$.mutable_source","event","$.get","$.set","$.each","$.event","$.untrack","$0","$.derived_safe_equal","$.template_effect","$.set_class","root","value","Video","$$anchor"],"mappings":"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"}