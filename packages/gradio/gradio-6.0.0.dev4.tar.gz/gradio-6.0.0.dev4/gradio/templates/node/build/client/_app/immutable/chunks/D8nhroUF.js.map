{"version":3,"file":"D8nhroUF.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/Rendering/geometryBufferRendererSceneComponent.js"],"sourcesContent":["import { Scene } from \"../scene.js\";\nimport { SceneComponentConstants } from \"../sceneComponent.js\";\nimport { GeometryBufferRenderer } from \"./geometryBufferRenderer.js\";\n\nObject.defineProperty(Scene.prototype, \"geometryBufferRenderer\", {\n    get: function () {\n        return this._geometryBufferRenderer;\n    },\n    set: function (value) {\n        if (value && value.isSupported) {\n            this._geometryBufferRenderer = value;\n        }\n    },\n    enumerable: true,\n    configurable: true,\n});\nScene.prototype.enableGeometryBufferRenderer = function (ratio = 1, depthFormat = 15, textureTypesAndFormats) {\n    if (this._geometryBufferRenderer) {\n        return this._geometryBufferRenderer;\n    }\n    this._geometryBufferRenderer = new GeometryBufferRenderer(this, ratio, depthFormat, textureTypesAndFormats);\n    if (!this._geometryBufferRenderer.isSupported) {\n        this._geometryBufferRenderer = null;\n    }\n    return this._geometryBufferRenderer;\n};\nScene.prototype.disableGeometryBufferRenderer = function () {\n    if (!this._geometryBufferRenderer) {\n        return;\n    }\n    this._geometryBufferRenderer.dispose();\n    this._geometryBufferRenderer = null;\n};\n/**\n * Defines the Geometry Buffer scene component responsible to manage a G-Buffer useful\n * in several rendering techniques.\n */\nexport class GeometryBufferRendererSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this.scene._gatherRenderTargetsStage.registerStep(SceneComponentConstants.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER, this, this._gatherRenderTargets);\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        // Nothing to do for this component\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        // Nothing to do for this component\n    }\n    _gatherRenderTargets(renderTargets) {\n        if (this.scene._geometryBufferRenderer) {\n            renderTargets.push(this.scene._geometryBufferRenderer.getGBuffer());\n        }\n    }\n}\nGeometryBufferRenderer._SceneComponentInitialization = (scene) => {\n    // Register the G Buffer component to the scene.\n    let component = scene._getComponent(SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER);\n    if (!component) {\n        component = new GeometryBufferRendererSceneComponent(scene);\n        scene._addComponent(component);\n    }\n};\n//# sourceMappingURL=geometryBufferRendererSceneComponent.js.map"],"names":[],"mappings":";;AAIA,OAAO,eAAe,MAAM,WAAW,0BAA0B;AAAA,EAC7D,KAAK,WAAY;AACb,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,KAAK,SAAU,OAAO;AAClB,QAAI,SAAS,MAAM,aAAa;AAC5B,WAAK,0BAA0B;AAAA,IACnC;AAAA,EACJ;AAAA,EACA,YAAY;AAAA,EACZ,cAAc;AAClB,CAAC;AACD,MAAM,UAAU,+BAA+B,SAAU,QAAQ,GAAG,cAAc,IAAI,wBAAwB;AAC1G,MAAI,KAAK,yBAAyB;AAC9B,WAAO,KAAK;AAAA,EAChB;AACA,OAAK,0BAA0B,IAAI,uBAAuB,MAAM,OAAO,aAAa,sBAAsB;AAC1G,MAAI,CAAC,KAAK,wBAAwB,aAAa;AAC3C,SAAK,0BAA0B;AAAA,EACnC;AACA,SAAO,KAAK;AAChB;AACA,MAAM,UAAU,gCAAgC,WAAY;AACxD,MAAI,CAAC,KAAK,yBAAyB;AAC/B;AAAA,EACJ;AACA,OAAK,wBAAwB,QAAO;AACpC,OAAK,0BAA0B;AACnC;AAKO,MAAM,qCAAqC;AAAA;AAAA;AAAA;AAAA;AAAA,EAK9C,YAAY,OAAO;AAIf,SAAK,OAAO,wBAAwB;AACpC,SAAK,QAAQ;AAAA,EACjB;AAAA;AAAA;AAAA;AAAA,EAIA,WAAW;AACP,SAAK,MAAM,0BAA0B,aAAa,wBAAwB,iDAAiD,MAAM,KAAK,oBAAoB;AAAA,EAC9J;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU;AAAA,EAEV;AAAA;AAAA;AAAA;AAAA,EAIA,UAAU;AAAA,EAEV;AAAA,EACA,qBAAqB,eAAe;AAChC,QAAI,KAAK,MAAM,yBAAyB;AACpC,oBAAc,KAAK,KAAK,MAAM,wBAAwB,WAAU,CAAE;AAAA,IACtE;AAAA,EACJ;AACJ;AACA,uBAAuB,gCAAgC,CAAC,UAAU;AAE9D,MAAI,YAAY,MAAM,cAAc,wBAAwB,2BAA2B;AACvF,MAAI,CAAC,WAAW;AACZ,gBAAY,IAAI,qCAAqC,KAAK;AAC1D,UAAM,cAAc,SAAS;AAAA,EACjC;AACJ;","x_google_ignoreList":[0]}