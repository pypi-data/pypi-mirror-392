{"version":3,"file":"w7gnNWYy.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/Engines/Extensions/engine.multiRender.js"],"sourcesContent":["import { InternalTexture } from \"../../Materials/Textures/internalTexture.js\";\nimport { Logger } from \"../../Misc/logger.js\";\n\nimport { ThinEngine } from \"../thinEngine.js\";\nThinEngine.prototype.restoreSingleAttachment = function () {\n    const gl = this._gl;\n    this.bindAttachments([gl.BACK]);\n};\nThinEngine.prototype.restoreSingleAttachmentForRenderTarget = function () {\n    const gl = this._gl;\n    this.bindAttachments([gl.COLOR_ATTACHMENT0]);\n};\nThinEngine.prototype.buildTextureLayout = function (textureStatus, backBufferLayout = false) {\n    const gl = this._gl;\n    const result = [];\n    if (backBufferLayout) {\n        result.push(gl.BACK);\n    }\n    else {\n        for (let i = 0; i < textureStatus.length; i++) {\n            if (textureStatus[i]) {\n                result.push(gl[\"COLOR_ATTACHMENT\" + i]);\n            }\n            else {\n                result.push(gl.NONE);\n            }\n        }\n    }\n    return result;\n};\nThinEngine.prototype.bindAttachments = function (attachments) {\n    const gl = this._gl;\n    gl.drawBuffers(attachments);\n};\nThinEngine.prototype.unBindMultiColorAttachmentFramebuffer = function (rtWrapper, disableGenerateMipMaps = false, onBeforeUnbind) {\n    this._currentRenderTarget = null;\n    if (!rtWrapper.disableAutomaticMSAAResolve) {\n        this.resolveMultiFramebuffer(rtWrapper);\n    }\n    if (!disableGenerateMipMaps) {\n        this.generateMipMapsMultiFramebuffer(rtWrapper);\n    }\n    if (onBeforeUnbind) {\n        if (rtWrapper._MSAAFramebuffer) {\n            // Bind the correct framebuffer\n            this._bindUnboundFramebuffer(rtWrapper._framebuffer);\n        }\n        onBeforeUnbind();\n    }\n    this._bindUnboundFramebuffer(null);\n};\nThinEngine.prototype.createMultipleRenderTarget = function (size, options, initializeBuffers = true) {\n    let generateMipMaps = false;\n    let generateDepthBuffer = true;\n    let generateStencilBuffer = false;\n    let generateDepthTexture = false;\n    let depthTextureFormat = undefined;\n    let textureCount = 1;\n    let samples = 1;\n    const defaultType = 0;\n    const defaultSamplingMode = 3;\n    const defaultUseSRGBBuffer = false;\n    const defaultFormat = 5;\n    const defaultTarget = 3553;\n    let types = [];\n    let samplingModes = [];\n    let useSRGBBuffers = [];\n    let formats = [];\n    let targets = [];\n    let faceIndex = [];\n    let layerIndex = [];\n    let layers = [];\n    let labels = [];\n    let dontCreateTextures = false;\n    const rtWrapper = this._createHardwareRenderTargetWrapper(true, false, size);\n    if (options !== undefined) {\n        generateMipMaps = options.generateMipMaps === undefined ? false : options.generateMipMaps;\n        generateDepthBuffer = options.generateDepthBuffer === undefined ? true : options.generateDepthBuffer;\n        generateStencilBuffer = options.generateStencilBuffer === undefined ? false : options.generateStencilBuffer;\n        generateDepthTexture = options.generateDepthTexture === undefined ? false : options.generateDepthTexture;\n        textureCount = options.textureCount ?? 1;\n        samples = options.samples ?? samples;\n        types = options.types || types;\n        samplingModes = options.samplingModes || samplingModes;\n        useSRGBBuffers = options.useSRGBBuffers || useSRGBBuffers;\n        formats = options.formats || formats;\n        targets = options.targetTypes || targets;\n        faceIndex = options.faceIndex || faceIndex;\n        layerIndex = options.layerIndex || layerIndex;\n        layers = options.layerCounts || layers;\n        labels = options.labels || labels;\n        dontCreateTextures = options.dontCreateTextures ?? false;\n        if (this.webGLVersion > 1 &&\n            (options.depthTextureFormat === 13 ||\n                options.depthTextureFormat === 17 ||\n                options.depthTextureFormat === 16 ||\n                options.depthTextureFormat === 14 ||\n                options.depthTextureFormat === 18)) {\n            depthTextureFormat = options.depthTextureFormat;\n        }\n    }\n    if (depthTextureFormat === undefined) {\n        depthTextureFormat = generateStencilBuffer ? 13 : 14;\n    }\n    const gl = this._gl;\n    // Create the framebuffer\n    const currentFramebuffer = this._currentFramebuffer;\n    const framebuffer = gl.createFramebuffer();\n    this._bindUnboundFramebuffer(framebuffer);\n    const width = size.width ?? size;\n    const height = size.height ?? size;\n    const textures = [];\n    const attachments = [];\n    const useStencilTexture = this.webGLVersion > 1 &&\n        (depthTextureFormat === 13 ||\n            depthTextureFormat === 17 ||\n            depthTextureFormat === 18);\n    rtWrapper.label = options?.label ?? \"MultiRenderTargetWrapper\";\n    rtWrapper._framebuffer = framebuffer;\n    rtWrapper._generateDepthBuffer = generateDepthTexture || generateDepthBuffer;\n    rtWrapper._generateStencilBuffer = generateDepthTexture ? useStencilTexture : generateStencilBuffer;\n    rtWrapper._depthStencilBuffer = this._setupFramebufferDepthAttachments(rtWrapper._generateStencilBuffer, rtWrapper._generateDepthBuffer, width, height, 1, depthTextureFormat);\n    rtWrapper._attachments = attachments;\n    for (let i = 0; i < textureCount; i++) {\n        let samplingMode = samplingModes[i] || defaultSamplingMode;\n        let type = types[i] || defaultType;\n        let useSRGBBuffer = useSRGBBuffers[i] || defaultUseSRGBBuffer;\n        const format = formats[i] || defaultFormat;\n        const target = targets[i] || defaultTarget;\n        const layerCount = layers[i] ?? 1;\n        if (type === 1 && !this._caps.textureFloatLinearFiltering) {\n            // if floating point linear (gl.FLOAT) then force to NEAREST_SAMPLINGMODE\n            samplingMode = 1;\n        }\n        else if (type === 2 && !this._caps.textureHalfFloatLinearFiltering) {\n            // if floating point linear (HALF_FLOAT) then force to NEAREST_SAMPLINGMODE\n            samplingMode = 1;\n        }\n        const filters = this._getSamplingParameters(samplingMode, generateMipMaps);\n        if (type === 1 && !this._caps.textureFloat) {\n            type = 0;\n            Logger.Warn(\"Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type\");\n        }\n        useSRGBBuffer = useSRGBBuffer && this._caps.supportSRGBBuffers && (this.webGLVersion > 1 || this.isWebGPU);\n        const isWebGL2 = this.webGLVersion > 1;\n        const attachment = gl[isWebGL2 ? \"COLOR_ATTACHMENT\" + i : \"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n        attachments.push(attachment);\n        if (target === -1 || dontCreateTextures) {\n            continue;\n        }\n        const texture = new InternalTexture(this, 6 /* InternalTextureSource.MultiRenderTarget */);\n        textures[i] = texture;\n        gl.activeTexture(gl[\"TEXTURE\" + i]);\n        gl.bindTexture(target, texture._hardwareTexture.underlyingResource);\n        gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, filters.mag);\n        gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, filters.min);\n        gl.texParameteri(target, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(target, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        const internalSizedFormat = this._getRGBABufferInternalSizedFormat(type, format, useSRGBBuffer);\n        const internalFormat = this._getInternalFormat(format);\n        const webGLTextureType = this._getWebGLTextureType(type);\n        if (isWebGL2 && (target === 35866 || target === 32879)) {\n            if (target === 35866) {\n                texture.is2DArray = true;\n            }\n            else {\n                texture.is3D = true;\n            }\n            texture.baseDepth = texture.depth = layerCount;\n            gl.texImage3D(target, 0, internalSizedFormat, width, height, layerCount, 0, internalFormat, webGLTextureType, null);\n        }\n        else if (target === 34067) {\n            // We have to generate all faces to complete the framebuffer\n            for (let i = 0; i < 6; i++) {\n                gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, internalSizedFormat, width, height, 0, internalFormat, webGLTextureType, null);\n            }\n            texture.isCube = true;\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, internalSizedFormat, width, height, 0, internalFormat, webGLTextureType, null);\n        }\n        if (generateMipMaps) {\n            gl.generateMipmap(target);\n        }\n        // Unbind\n        this._bindTextureDirectly(target, null);\n        texture.baseWidth = width;\n        texture.baseHeight = height;\n        texture.width = width;\n        texture.height = height;\n        texture.isReady = true;\n        texture.samples = 1;\n        texture.generateMipMaps = generateMipMaps;\n        texture.samplingMode = samplingMode;\n        texture.type = type;\n        texture._useSRGBBuffer = useSRGBBuffer;\n        texture.format = format;\n        texture.label = labels[i] ?? rtWrapper.label + \"-Texture\" + i;\n        this._internalTexturesCache.push(texture);\n    }\n    if (generateDepthTexture && this._caps.depthTextureExtension && !dontCreateTextures) {\n        // Depth texture\n        const depthTexture = new InternalTexture(this, 14 /* InternalTextureSource.Depth */);\n        let depthTextureType = 5;\n        let glDepthTextureInternalFormat = gl.DEPTH_COMPONENT16;\n        let glDepthTextureFormat = gl.DEPTH_COMPONENT;\n        let glDepthTextureType = gl.UNSIGNED_SHORT;\n        let glDepthTextureAttachment = gl.DEPTH_ATTACHMENT;\n        if (this.webGLVersion < 2) {\n            glDepthTextureInternalFormat = gl.DEPTH_COMPONENT;\n        }\n        else {\n            if (depthTextureFormat === 14) {\n                depthTextureType = 1;\n                glDepthTextureType = gl.FLOAT;\n                glDepthTextureInternalFormat = gl.DEPTH_COMPONENT32F;\n            }\n            else if (depthTextureFormat === 18) {\n                depthTextureType = 0;\n                glDepthTextureType = gl.FLOAT_32_UNSIGNED_INT_24_8_REV;\n                glDepthTextureInternalFormat = gl.DEPTH32F_STENCIL8;\n                glDepthTextureFormat = gl.DEPTH_STENCIL;\n                glDepthTextureAttachment = gl.DEPTH_STENCIL_ATTACHMENT;\n            }\n            else if (depthTextureFormat === 16) {\n                depthTextureType = 0;\n                glDepthTextureType = gl.UNSIGNED_INT;\n                glDepthTextureInternalFormat = gl.DEPTH_COMPONENT24;\n                glDepthTextureAttachment = gl.DEPTH_ATTACHMENT;\n            }\n            else if (depthTextureFormat === 13 || depthTextureFormat === 17) {\n                depthTextureType = 12;\n                glDepthTextureType = gl.UNSIGNED_INT_24_8;\n                glDepthTextureInternalFormat = gl.DEPTH24_STENCIL8;\n                glDepthTextureFormat = gl.DEPTH_STENCIL;\n                glDepthTextureAttachment = gl.DEPTH_STENCIL_ATTACHMENT;\n            }\n        }\n        this._bindTextureDirectly(gl.TEXTURE_2D, depthTexture, true);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texImage2D(gl.TEXTURE_2D, 0, glDepthTextureInternalFormat, width, height, 0, glDepthTextureFormat, glDepthTextureType, null);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, glDepthTextureAttachment, gl.TEXTURE_2D, depthTexture._hardwareTexture.underlyingResource, 0);\n        this._bindTextureDirectly(gl.TEXTURE_2D, null);\n        rtWrapper._depthStencilTexture = depthTexture;\n        rtWrapper._depthStencilTextureWithStencil = useStencilTexture;\n        depthTexture.baseWidth = width;\n        depthTexture.baseHeight = height;\n        depthTexture.width = width;\n        depthTexture.height = height;\n        depthTexture.isReady = true;\n        depthTexture.samples = 1;\n        depthTexture.generateMipMaps = generateMipMaps;\n        depthTexture.samplingMode = 1;\n        depthTexture.format = depthTextureFormat;\n        depthTexture.type = depthTextureType;\n        depthTexture.label = rtWrapper.label + \"-DepthStencil\";\n        textures[textureCount] = depthTexture;\n        this._internalTexturesCache.push(depthTexture);\n    }\n    rtWrapper.setTextures(textures);\n    if (initializeBuffers) {\n        gl.drawBuffers(attachments);\n    }\n    this._bindUnboundFramebuffer(currentFramebuffer);\n    rtWrapper.setLayerAndFaceIndices(layerIndex, faceIndex);\n    this.resetTextureCache();\n    if (!dontCreateTextures) {\n        this.updateMultipleRenderTargetTextureSampleCount(rtWrapper, samples, initializeBuffers);\n    }\n    else if (samples > 1) {\n        const framebuffer = gl.createFramebuffer();\n        if (!framebuffer) {\n            throw new Error(\"Unable to create multi sampled framebuffer\");\n        }\n        rtWrapper._samples = samples;\n        rtWrapper._MSAAFramebuffer = framebuffer;\n        if (textureCount > 0 && initializeBuffers) {\n            this._bindUnboundFramebuffer(framebuffer);\n            gl.drawBuffers(attachments);\n            this._bindUnboundFramebuffer(currentFramebuffer);\n        }\n    }\n    return rtWrapper;\n};\nThinEngine.prototype.updateMultipleRenderTargetTextureSampleCount = function (rtWrapper, samples, initializeBuffers = true) {\n    if (this.webGLVersion < 2 || !rtWrapper) {\n        return 1;\n    }\n    if (rtWrapper.samples === samples) {\n        return samples;\n    }\n    const gl = this._gl;\n    samples = Math.min(samples, this.getCaps().maxMSAASamples);\n    // Dispose previous render buffers\n    if (rtWrapper._depthStencilBuffer) {\n        gl.deleteRenderbuffer(rtWrapper._depthStencilBuffer);\n        rtWrapper._depthStencilBuffer = null;\n    }\n    if (rtWrapper._MSAAFramebuffer) {\n        gl.deleteFramebuffer(rtWrapper._MSAAFramebuffer);\n        rtWrapper._MSAAFramebuffer = null;\n    }\n    const count = rtWrapper._attachments.length; // We do it this way instead of rtWrapper.textures.length to avoid taking into account the depth/stencil texture, in case it has been created\n    for (let i = 0; i < count; i++) {\n        const texture = rtWrapper.textures[i];\n        const hardwareTexture = texture._hardwareTexture;\n        hardwareTexture?.releaseMSAARenderBuffers();\n    }\n    if (samples > 1 && typeof gl.renderbufferStorageMultisample === \"function\") {\n        const framebuffer = gl.createFramebuffer();\n        if (!framebuffer) {\n            throw new Error(\"Unable to create multi sampled framebuffer\");\n        }\n        rtWrapper._MSAAFramebuffer = framebuffer;\n        this._bindUnboundFramebuffer(framebuffer);\n        const attachments = [];\n        for (let i = 0; i < count; i++) {\n            const texture = rtWrapper.textures[i];\n            const hardwareTexture = texture._hardwareTexture;\n            const attachment = gl[this.webGLVersion > 1 ? \"COLOR_ATTACHMENT\" + i : \"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n            const colorRenderbuffer = this._createRenderBuffer(texture.width, texture.height, samples, -1 /* not used */, this._getRGBABufferInternalSizedFormat(texture.type, texture.format, texture._useSRGBBuffer), attachment);\n            if (!colorRenderbuffer) {\n                throw new Error(\"Unable to create multi sampled framebuffer\");\n            }\n            hardwareTexture.addMSAARenderBuffer(colorRenderbuffer);\n            texture.samples = samples;\n            attachments.push(attachment);\n        }\n        if (initializeBuffers) {\n            gl.drawBuffers(attachments);\n        }\n    }\n    else {\n        this._bindUnboundFramebuffer(rtWrapper._framebuffer);\n    }\n    const depthFormat = rtWrapper._depthStencilTexture ? rtWrapper._depthStencilTexture.format : undefined;\n    rtWrapper._depthStencilBuffer = this._setupFramebufferDepthAttachments(rtWrapper._generateStencilBuffer, rtWrapper._generateDepthBuffer, rtWrapper.width, rtWrapper.height, samples, depthFormat);\n    this._bindUnboundFramebuffer(null);\n    rtWrapper._samples = samples;\n    return samples;\n};\nThinEngine.prototype.generateMipMapsMultiFramebuffer = function (texture) {\n    const rtWrapper = texture;\n    const gl = this._gl;\n    if (!rtWrapper.isMulti) {\n        return;\n    }\n    for (let i = 0; i < rtWrapper._attachments.length; i++) {\n        const texture = rtWrapper.textures[i];\n        if (texture?.generateMipMaps && !texture?.isCube && !texture?.is3D) {\n            this._bindTextureDirectly(gl.TEXTURE_2D, texture, true);\n            gl.generateMipmap(gl.TEXTURE_2D);\n            this._bindTextureDirectly(gl.TEXTURE_2D, null);\n        }\n    }\n};\nThinEngine.prototype.resolveMultiFramebuffer = function (texture) {\n    const rtWrapper = texture;\n    const gl = this._gl;\n    if (!rtWrapper._MSAAFramebuffer || !rtWrapper.isMulti) {\n        return;\n    }\n    let bufferBits = rtWrapper.resolveMSAAColors ? gl.COLOR_BUFFER_BIT : 0;\n    bufferBits |= rtWrapper._generateDepthBuffer && rtWrapper.resolveMSAADepth ? gl.DEPTH_BUFFER_BIT : 0;\n    bufferBits |= rtWrapper._generateStencilBuffer && rtWrapper.resolveMSAAStencil ? gl.STENCIL_BUFFER_BIT : 0;\n    const attachments = rtWrapper._attachments;\n    const count = attachments.length;\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, rtWrapper._MSAAFramebuffer);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, rtWrapper._framebuffer);\n    for (let i = 0; i < count; i++) {\n        const texture = rtWrapper.textures[i];\n        for (let j = 0; j < count; j++) {\n            attachments[j] = gl.NONE;\n        }\n        attachments[i] = gl[this.webGLVersion > 1 ? \"COLOR_ATTACHMENT\" + i : \"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n        gl.readBuffer(attachments[i]);\n        gl.drawBuffers(attachments);\n        gl.blitFramebuffer(0, 0, texture.width, texture.height, 0, 0, texture.width, texture.height, bufferBits, gl.NEAREST);\n    }\n    for (let i = 0; i < count; i++) {\n        attachments[i] = gl[this.webGLVersion > 1 ? \"COLOR_ATTACHMENT\" + i : \"COLOR_ATTACHMENT\" + i + \"_WEBGL\"];\n    }\n    gl.drawBuffers(attachments);\n    gl.bindFramebuffer(this._gl.FRAMEBUFFER, rtWrapper._MSAAFramebuffer);\n};\n//# sourceMappingURL=engine.multiRender.js.map"],"names":["i","framebuffer","texture"],"mappings":"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","x_google_ignoreList":[0]}