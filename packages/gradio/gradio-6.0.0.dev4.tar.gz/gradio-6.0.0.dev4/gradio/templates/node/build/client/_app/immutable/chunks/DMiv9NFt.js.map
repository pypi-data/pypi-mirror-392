{"version":3,"file":"DMiv9NFt.js","sources":["../../../../../../../upload/src/UploadProgress.svelte","../../../../../../../upload/src/Upload.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { FileData, type Client } from \"@gradio/client\";\n\timport { onMount, createEventDispatcher, onDestroy } from \"svelte\";\n\n\ttype FileDataWithProgress = FileData & { progress: number };\n\n\texport let upload_id: string;\n\texport let root: string;\n\texport let files: FileData[];\n\texport let stream_handler: Client[\"stream\"];\n\n\tlet stream: Awaited<ReturnType<Client[\"stream\"]>>;\n\tlet progress = false;\n\tlet current_file_upload: FileDataWithProgress;\n\tlet file_to_display: FileDataWithProgress;\n\n\tlet files_with_progress: FileDataWithProgress[] = files.map((file) => {\n\t\treturn {\n\t\t\t...file,\n\t\t\tprogress: 0\n\t\t};\n\t});\n\n\tconst dispatch = createEventDispatcher();\n\n\tfunction handleProgress(filename: string, chunk_size: number): void {\n\t\t// Find the corresponding file in the array and update its progress\n\t\tfiles_with_progress = files_with_progress.map((file) => {\n\t\t\tif (file.orig_name === filename) {\n\t\t\t\tfile.progress += chunk_size;\n\t\t\t}\n\t\t\treturn file;\n\t\t});\n\t}\n\n\tfunction getProgress(file: FileDataWithProgress): number {\n\t\treturn (file.progress * 100) / (file.size || 0) || 0;\n\t}\n\n\tonMount(async () => {\n\t\tstream = await stream_handler(\n\t\t\tnew URL(`${root}/gradio_api/upload_progress?upload_id=${upload_id}`)\n\t\t);\n\n\t\tif (stream == null) {\n\t\t\tthrow new Error(\"Event source is not defined\");\n\t\t}\n\t\t// Event listener for progress updates\n\t\tstream.onmessage = async function (event) {\n\t\t\tconst _data = JSON.parse(event.data);\n\t\t\tif (!progress) progress = true;\n\t\t\tif (_data.msg === \"done\") {\n\t\t\t\t// the stream will close itself but is here for clarity; remove .close() in 5.0\n\t\t\t\tstream?.close();\n\t\t\t\tdispatch(\"done\");\n\t\t\t} else {\n\t\t\t\tcurrent_file_upload = _data;\n\t\t\t\thandleProgress(_data.orig_name, _data.chunk_size);\n\t\t\t}\n\t\t};\n\t});\n\tonDestroy(() => {\n\t\t// the stream will close itself but is here for clarity; remove .close() in 5.0\n\t\tif (stream != null || stream != undefined) stream.close();\n\t});\n\n\tfunction calculateTotalProgress(files: FileData[]): number {\n\t\tlet totalProgress = 0;\n\t\tfiles.forEach((file) => {\n\t\t\ttotalProgress += getProgress(file as FileDataWithProgress);\n\t\t});\n\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--upload-progress-width\",\n\t\t\t(totalProgress / files.length).toFixed(2) + \"%\"\n\t\t);\n\n\t\treturn totalProgress / files.length;\n\t}\n\n\t$: calculateTotalProgress(files_with_progress);\n\n\t$: file_to_display = current_file_upload || files_with_progress[0];\n</script>\n\n<div class=\"wrap\" class:progress>\n\t<span class=\"uploading\"\n\t\t>Uploading {files_with_progress.length}\n\t\t{files_with_progress.length > 1 ? \"files\" : \"file\"}...</span\n\t>\n\n\t{#if file_to_display}\n\t\t<div class=\"file\">\n\t\t\t<span>\n\t\t\t\t<div class=\"progress-bar\">\n\t\t\t\t\t<progress\n\t\t\t\t\t\tstyle=\"visibility:hidden;height:0;width:0;\"\n\t\t\t\t\t\tvalue={getProgress(file_to_display)}\n\t\t\t\t\t\tmax=\"100\">{getProgress(file_to_display)}</progress\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t<span class=\"file-name\">\n\t\t\t\t{file_to_display.orig_name}\n\t\t\t</span>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.wrap {\n\t\toverflow-y: auto;\n\t\ttransition: opacity 0.5s ease-in-out;\n\t\tbackground: var(--block-background-fill);\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmin-height: var(--size-40);\n\t\twidth: var(--size-full);\n\t}\n\n\t.wrap::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: var(--upload-progress-width);\n\t\theight: 100%;\n\t\ttransition: all 0.5s ease-in-out;\n\t\tz-index: 1;\n\t}\n\n\t.uploading {\n\t\tfont-size: var(--text-lg);\n\t\tfont-family: var(--font);\n\t\tz-index: 2;\n\t}\n\n\t.file-name {\n\t\tmargin: var(--spacing-md);\n\t\tfont-size: var(--text-lg);\n\t\tcolor: var(--body-text-color-subdued);\n\t}\n\n\t.file {\n\t\tfont-size: var(--text-md);\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t.file progress {\n\t\tdisplay: inline;\n\t\theight: var(--size-1);\n\t\twidth: 100%;\n\t\ttransition: all 0.5s ease-in-out;\n\t\tcolor: var(--color-accent);\n\t\tborder: none;\n\t}\n\n\t.file progress[value]::-webkit-progress-value {\n\t\tbackground-color: var(--color-accent);\n\t\tborder-radius: 20px;\n\t}\n\n\t.file progress[value]::-webkit-progress-bar {\n\t\tbackground-color: var(--border-color-accent);\n\t\tborder-radius: 20px;\n\t}\n\n\t.progress-bar {\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tborder-radius: 50%;\n\t\tbackground:\n\t\t\tradial-gradient(\n\t\t\t\tclosest-side,\n\t\t\t\tvar(--block-background-fill) 64%,\n\t\t\t\ttransparent 53% 100%\n\t\t\t),\n\t\t\tconic-gradient(\n\t\t\t\tvar(--color-accent) var(--upload-progress-width),\n\t\t\t\tvar(--border-color-accent) 0\n\t\t\t);\n\t\ttransition: all 0.5s ease-in-out;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, tick, getContext } from \"svelte\";\n\timport type { FileData } from \"@gradio/client\";\n\timport { prepare_files, type Client } from \"@gradio/client\";\n\timport UploadProgress from \"./UploadProgress.svelte\";\n\timport { create_drag } from \"./utils\";\n\n\tconst { drag, open_file_upload: _open_file_upload } = create_drag();\n\n\texport let filetype: string | string[] | null = null;\n\texport let dragging = false;\n\texport let boundedheight = true;\n\texport let center = true;\n\texport let flex = true;\n\texport let file_count: \"single\" | \"multiple\" | \"directory\" = \"single\";\n\texport let disable_click = false;\n\texport let root: string;\n\texport let hidden = false;\n\texport let format: \"blob\" | \"file\" = \"file\";\n\texport let uploading = false;\n\texport let show_progress = true;\n\texport let max_file_size: number | null = null;\n\texport let upload: Client[\"upload\"];\n\texport let stream_handler: Client[\"stream\"];\n\texport let icon_upload = false;\n\texport let height: number | string | undefined = undefined;\n\texport let aria_label: string | undefined = undefined;\n\texport let upload_promise: Promise<(FileData | null)[]> | null = null;\n\n\texport function open_upload(): void {\n\t\t_open_file_upload();\n\t}\n\tlet upload_id: string = \"\";\n\tlet file_data: FileData[];\n\tlet accept_file_types: string | null;\n\tlet use_post_upload_validation: boolean | null = null;\n\n\tconst get_ios = (): boolean => {\n\t\tif (typeof navigator !== \"undefined\") {\n\t\t\tconst userAgent = navigator.userAgent.toLowerCase();\n\t\t\treturn userAgent.indexOf(\"iphone\") > -1 || userAgent.indexOf(\"ipad\") > -1;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$: ios = get_ios();\n\n\tconst dispatch = createEventDispatcher();\n\tconst validFileTypes = [\"image\", \"video\", \"audio\", \"text\", \"file\"];\n\tconst process_file_type = (type: string): string => {\n\t\tif (ios && type.startsWith(\".\")) {\n\t\t\tuse_post_upload_validation = true;\n\t\t\treturn type;\n\t\t}\n\t\tif (ios && type.includes(\"file/*\")) {\n\t\t\treturn \"*\";\n\t\t}\n\t\tif (type.startsWith(\".\") || type.endsWith(\"/*\")) {\n\t\t\treturn type;\n\t\t}\n\t\tif (validFileTypes.includes(type)) {\n\t\t\treturn type + \"/*\";\n\t\t}\n\t\treturn \".\" + type;\n\t};\n\n\t$: if (filetype == null) {\n\t\taccept_file_types = null;\n\t} else if (typeof filetype === \"string\") {\n\t\taccept_file_types = process_file_type(filetype);\n\t} else if (ios && filetype.includes(\"file/*\")) {\n\t\taccept_file_types = \"*\";\n\t} else {\n\t\tfiletype = filetype.map(process_file_type);\n\t\taccept_file_types = filetype.join(\", \");\n\t}\n\n\texport function paste_clipboard(): void {\n\t\tnavigator.clipboard.read().then(async (items) => {\n\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\tconst type = items[i].types.find((t) => t.startsWith(\"image/\"));\n\t\t\t\tif (type) {\n\t\t\t\t\titems[i].getType(type).then(async (blob) => {\n\t\t\t\t\t\tconst file = new File(\n\t\t\t\t\t\t\t[blob],\n\t\t\t\t\t\t\t`clipboard.${type.replace(\"image/\", \"\")}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait load_files([file]);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\texport function open_file_upload(): void {\n\t\t_open_file_upload();\n\t}\n\n\tfunction handle_upload(\n\t\tfile_data: FileData[],\n\t\t_upload_id?: string\n\t): Promise<(FileData | null)[]> {\n\t\tupload_promise = new Promise(async (resolve, rej) => {\n\t\t\tawait tick();\n\t\t\tif (!_upload_id) {\n\t\t\t\tupload_id = Math.random().toString(36).substring(2, 15);\n\t\t\t} else {\n\t\t\t\tupload_id = _upload_id;\n\t\t\t}\n\n\t\t\tuploading = true;\n\n\t\t\ttry {\n\t\t\t\tconst _file_data = await upload(\n\t\t\t\t\tfile_data,\n\t\t\t\t\troot,\n\t\t\t\t\tupload_id,\n\t\t\t\t\tmax_file_size ?? Infinity\n\t\t\t\t);\n\t\t\t\tdispatch(\n\t\t\t\t\t\"load\",\n\t\t\t\t\tfile_count === \"single\" ? _file_data?.[0] : _file_data\n\t\t\t\t);\n\t\t\t\tresolve(_file_data || []);\n\t\t\t\tuploading = false;\n\t\t\t\treturn _file_data || [];\n\t\t\t} catch (e) {\n\t\t\t\tdispatch(\"error\", (e as Error).message);\n\t\t\t\tuploading = false;\n\t\t\t\tresolve([]);\n\t\t\t}\n\t\t});\n\n\t\treturn upload_promise;\n\t}\n\n\tfunction is_valid_mimetype(\n\t\tfile_accept: string | string[] | null,\n\t\tuploaded_file_extension: string,\n\t\tuploaded_file_type: string\n\t): boolean {\n\t\tif (\n\t\t\t!file_accept ||\n\t\t\tfile_accept === \"*\" ||\n\t\t\tfile_accept === \"file/*\" ||\n\t\t\t(Array.isArray(file_accept) &&\n\t\t\t\tfile_accept.some((accept) => accept === \"*\" || accept === \"file/*\"))\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\tlet acceptArray: string[];\n\t\tif (typeof file_accept === \"string\") {\n\t\t\tacceptArray = file_accept.split(\",\").map((s) => s.trim());\n\t\t} else if (Array.isArray(file_accept)) {\n\t\t\tacceptArray = file_accept;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\tacceptArray.includes(uploaded_file_extension) ||\n\t\t\tacceptArray.some((type) => {\n\t\t\t\tconst [category] = type.split(\"/\").map((s) => s.trim());\n\t\t\t\treturn (\n\t\t\t\t\ttype.endsWith(\"/*\") && uploaded_file_type.startsWith(category + \"/\")\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\texport async function load_files(\n\t\tfiles: File[] | Blob[],\n\t\tupload_id?: string\n\t): Promise<(FileData | null)[] | void> {\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\t\tlet _files: File[] = files.map(\n\t\t\t(f) =>\n\t\t\t\tnew File([f], f instanceof File ? f.name : \"file\", { type: f.type })\n\t\t);\n\n\t\tif (ios && use_post_upload_validation) {\n\t\t\t_files = _files.filter((file) => {\n\t\t\t\tif (is_valid_file(file)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tdispatch(\n\t\t\t\t\t\"error\",\n\t\t\t\t\t`Invalid file type: ${file.name}. Only ${filetype} allowed.`\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (_files.length === 0) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\tfile_data = await prepare_files(_files);\n\t\treturn await handle_upload(file_data, upload_id);\n\t}\n\n\tfunction is_valid_file(file: File): boolean {\n\t\tif (!filetype) return true;\n\n\t\tconst allowed_types = Array.isArray(filetype) ? filetype : [filetype];\n\n\t\treturn allowed_types.some((type) => {\n\t\t\tconst processed_type = process_file_type(type);\n\n\t\t\tif (processed_type.startsWith(\".\")) {\n\t\t\t\treturn file.name.toLowerCase().endsWith(processed_type.toLowerCase());\n\t\t\t}\n\n\t\t\tif (processed_type === \"*\") {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (processed_type.endsWith(\"/*\")) {\n\t\t\t\tconst [category] = processed_type.split(\"/\");\n\t\t\t\treturn file.type.startsWith(category + \"/\");\n\t\t\t}\n\n\t\t\treturn file.type === processed_type;\n\t\t});\n\t}\n\n\tasync function load_files_from_upload(files: File[]): Promise<void> {\n\t\tconst files_to_load = files.filter((file) => {\n\t\t\tconst file_extension = \".\" + file.name.toLowerCase().split(\".\").pop();\n\t\t\tif (\n\t\t\t\tfile_extension &&\n\t\t\t\tis_valid_mimetype(accept_file_types, file_extension, file.type)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tfile_extension && Array.isArray(filetype)\n\t\t\t\t\t? filetype.includes(file_extension)\n\t\t\t\t\t: file_extension === filetype\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tdispatch(\"error\", `Invalid file type only ${filetype} allowed.`);\n\t\t\treturn false;\n\t\t});\n\t\tif (format != \"blob\") {\n\t\t\tawait load_files(files_to_load);\n\t\t} else {\n\t\t\tif (file_count === \"single\") {\n\t\t\t\tdispatch(\"load\", files_to_load[0]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch(\"load\", files_to_load);\n\t\t}\n\t}\n\n\texport async function load_files_from_drop(e: DragEvent): Promise<void> {\n\t\tdragging = false;\n\t\tif (!e.dataTransfer?.files) return;\n\t\tconst files_to_load = Array.from(e.dataTransfer.files).filter(\n\t\t\tis_valid_file\n\t\t);\n\n\t\tif (format != \"blob\") {\n\t\t\tawait load_files(files_to_load);\n\t\t} else {\n\t\t\tif (file_count === \"single\") {\n\t\t\t\tdispatch(\"load\", files_to_load[0]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdispatch(\"load\", files_to_load);\n\t\t}\n\t}\n</script>\n\n{#if filetype === \"clipboard\"}\n\t<button\n\t\tclass:hidden\n\t\tclass:center\n\t\tclass:boundedheight\n\t\tclass:flex\n\t\tclass:icon-mode={icon_upload}\n\t\tstyle:height={icon_upload\n\t\t\t? \"\"\n\t\t\t: height\n\t\t\t\t? typeof height === \"number\"\n\t\t\t\t\t? height + \"px\"\n\t\t\t\t\t: height\n\t\t\t\t: \"100%\"}\n\t\ttabindex={hidden ? -1 : 0}\n\t\ton:click={paste_clipboard}\n\t\taria-label={aria_label || \"Paste from clipboard\"}\n\t>\n\t\t<slot />\n\t</button>\n{:else if uploading && show_progress}\n\t{#if !hidden}\n\t\t<UploadProgress {root} {upload_id} files={file_data} {stream_handler} />\n\t{/if}\n{:else}\n\t<button\n\t\tclass:hidden\n\t\tclass:center\n\t\tclass:boundedheight\n\t\tclass:flex\n\t\tclass:disable_click\n\t\tclass:icon-mode={icon_upload}\n\t\tstyle:height={icon_upload\n\t\t\t? \"\"\n\t\t\t: height\n\t\t\t\t? typeof height === \"number\"\n\t\t\t\t\t? height + \"px\"\n\t\t\t\t\t: height\n\t\t\t\t: \"100%\"}\n\t\ttabindex={hidden ? -1 : 0}\n\t\tuse:drag={{\n\t\t\ton_drag_change: (dragging) => (dragging = dragging),\n\t\t\ton_files: (files) => load_files_from_upload(files),\n\t\t\taccepted_types: accept_file_types,\n\t\t\tmode: file_count,\n\t\t\tdisable_click\n\t\t}}\n\t\taria-label={aria_label || \"Click to upload or drop files\"}\n\t\taria-dropeffect=\"copy\"\n\t>\n\t\t<slot />\n\t</button>\n{/if}\n\n<style>\n\tbutton {\n\t\tcursor: pointer;\n\t\twidth: var(--size-full);\n\t}\n\n\t.center {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\t.flex {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\t.hidden {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tflex-grow: 0;\n\t}\n\n\t.hidden :global(svg) {\n\t\tdisplay: none;\n\t}\n\n\t.disable_click {\n\t\tcursor: default;\n\t}\n\n\t.icon-mode {\n\t\tposition: absolute !important;\n\t\twidth: var(--size-4);\n\t\theight: var(--size-4);\n\t\tpadding: 0;\n\t\tmin-height: 0;\n\t\tborder-radius: var(--radius-circle);\n\t}\n\n\t.icon-mode :global(svg) {\n\t\twidth: var(--size-4);\n\t\theight: var(--size-4);\n\t}\n</style>\n"],"names":["$.prop","$.mutable_source","$.set","event","files","$.get","$.untrack","file_data","upload_id","$.set_attribute","dragging"],"mappings":"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"}