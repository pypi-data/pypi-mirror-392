{"version":3,"file":"7lw_6biO.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/FlowGraph/Blocks/Data/flowGraphCachedOperationBlock.js"],"sourcesContent":["import { FlowGraphBlock } from \"../../flowGraphBlock.js\";\nimport { RichTypeBoolean } from \"../../flowGraphRichTypes.js\";\nconst CacheName = \"cachedOperationValue\";\nconst CacheExecIdName = \"cachedExecutionId\";\n/**\n * A block that will cache the result of an operation and deliver it as an output.\n */\nexport class FlowGraphCachedOperationBlock extends FlowGraphBlock {\n    constructor(outputRichType, config) {\n        super(config);\n        this.value = this.registerDataOutput(\"value\", outputRichType);\n        this.isValid = this.registerDataOutput(\"isValid\", RichTypeBoolean);\n    }\n    _updateOutputs(context) {\n        const cachedExecutionId = context._getExecutionVariable(this, CacheExecIdName, -1);\n        const cachedValue = context._getExecutionVariable(this, CacheName, null);\n        if (cachedValue !== undefined && cachedValue !== null && cachedExecutionId === context.executionId) {\n            this.isValid.setValue(true, context);\n            this.value.setValue(cachedValue, context);\n        }\n        else {\n            try {\n                const calculatedValue = this._doOperation(context);\n                if (calculatedValue === undefined || calculatedValue === null) {\n                    this.isValid.setValue(false, context);\n                    return;\n                }\n                context._setExecutionVariable(this, CacheName, calculatedValue);\n                context._setExecutionVariable(this, CacheExecIdName, context.executionId);\n                this.value.setValue(calculatedValue, context);\n                this.isValid.setValue(true, context);\n            }\n            catch (e) {\n                this.isValid.setValue(false, context);\n            }\n        }\n    }\n}\n//# sourceMappingURL=flowGraphCachedOperationBlock.js.map"],"names":[],"mappings":";;AAEA,MAAM,YAAY;AAClB,MAAM,kBAAkB;AAIjB,MAAM,sCAAsC,eAAe;AAAA,EAC9D,YAAY,gBAAgB,QAAQ;AAChC,UAAM,MAAM;AACZ,SAAK,QAAQ,KAAK,mBAAmB,SAAS,cAAc;AAC5D,SAAK,UAAU,KAAK,mBAAmB,WAAW,eAAe;AAAA,EACrE;AAAA,EACA,eAAe,SAAS;AACpB,UAAM,oBAAoB,QAAQ,sBAAsB,MAAM,iBAAiB,EAAE;AACjF,UAAM,cAAc,QAAQ,sBAAsB,MAAM,WAAW,IAAI;AACvE,QAAI,gBAAgB,UAAa,gBAAgB,QAAQ,sBAAsB,QAAQ,aAAa;AAChG,WAAK,QAAQ,SAAS,MAAM,OAAO;AACnC,WAAK,MAAM,SAAS,aAAa,OAAO;AAAA,IAC5C,OACK;AACD,UAAI;AACA,cAAM,kBAAkB,KAAK,aAAa,OAAO;AACjD,YAAI,oBAAoB,UAAa,oBAAoB,MAAM;AAC3D,eAAK,QAAQ,SAAS,OAAO,OAAO;AACpC;AAAA,QACJ;AACA,gBAAQ,sBAAsB,MAAM,WAAW,eAAe;AAC9D,gBAAQ,sBAAsB,MAAM,iBAAiB,QAAQ,WAAW;AACxE,aAAK,MAAM,SAAS,iBAAiB,OAAO;AAC5C,aAAK,QAAQ,SAAS,MAAM,OAAO;AAAA,MACvC,SACO,GAAG;AACN,aAAK,QAAQ,SAAS,OAAO,OAAO;AAAA,MACxC;AAAA,IACJ;AAAA,EACJ;AACJ;","x_google_ignoreList":[0]}