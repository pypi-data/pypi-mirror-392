{"version":3,"file":"BrWliddq.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+loaders@8.36.1_@babylonjs+core@8.36.1_babylonjs-gltf2interface@8.36.1/node_modules/@babylonjs/loaders/glTF/2.0/Extensions/KHR_node_visibility.js"],"sourcesContent":["import { registerGLTFExtension, unregisterGLTFExtension } from \"../glTFLoaderExtensionRegistry.js\";\nimport { AddObjectAccessorToKey } from \"./objectModelMapping.js\";\nconst NAME = \"KHR_node_visibility\";\n// object model extension for visibility\nAddObjectAccessorToKey(\"/nodes/{}/extensions/KHR_node_visibility/visible\", {\n    get: (node) => {\n        const tn = node._babylonTransformNode;\n        if (tn && tn.isVisible !== undefined) {\n            return tn.isVisible;\n        }\n        return true;\n    },\n    set: (value, node) => {\n        node._primitiveBabylonMeshes?.forEach((mesh) => {\n            mesh.inheritVisibility = true;\n        });\n        if (node._babylonTransformNode) {\n            node._babylonTransformNode.isVisible = value;\n        }\n        node._primitiveBabylonMeshes?.forEach((mesh) => {\n            mesh.isVisible = value;\n        });\n    },\n    getTarget: (node) => node._babylonTransformNode,\n    getPropertyName: [() => \"isVisible\"],\n    type: \"boolean\",\n});\n/**\n * Loader extension for KHR_node_visibility\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class KHR_node_visibility {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = loader.isExtensionUsed(NAME);\n    }\n    onReady() {\n        if (!this._loader) {\n            return;\n        }\n        const nodes = this._loader.gltf.nodes;\n        if (nodes) {\n            for (const node of nodes) {\n                const babylonTransformNode = node._babylonTransformNode;\n                if (babylonTransformNode) {\n                    babylonTransformNode.inheritVisibility = true;\n                    if (node.extensions && node.extensions.KHR_node_visibility && node.extensions.KHR_node_visibility.visible === false) {\n                        babylonTransformNode.isVisible = false;\n                    }\n                }\n            }\n        }\n    }\n    dispose() {\n        delete this._loader;\n    }\n}\nunregisterGLTFExtension(NAME);\nregisterGLTFExtension(NAME, true, (loader) => new KHR_node_visibility(loader));\n//# sourceMappingURL=KHR_node_visibility.js.map"],"names":[],"mappings":";;AAEA,MAAM,OAAO;AAEb,uBAAuB,oDAAoD;AAAA,EACvE,KAAK,CAAC,SAAS;AACX,UAAM,KAAK,KAAK;AAChB,QAAI,MAAM,GAAG,cAAc,QAAW;AAClC,aAAO,GAAG;AAAA,IACd;AACA,WAAO;AAAA,EACX;AAAA,EACA,KAAK,CAAC,OAAO,SAAS;AAClB,SAAK,yBAAyB,QAAQ,CAAC,SAAS;AAC5C,WAAK,oBAAoB;AAAA,IAC7B,CAAC;AACD,QAAI,KAAK,uBAAuB;AAC5B,WAAK,sBAAsB,YAAY;AAAA,IAC3C;AACA,SAAK,yBAAyB,QAAQ,CAAC,SAAS;AAC5C,WAAK,YAAY;AAAA,IACrB,CAAC;AAAA,EACL;AAAA,EACA,WAAW,CAAC,SAAS,KAAK;AAAA,EAC1B,iBAAiB,CAAC,MAAM,WAAW;AAAA,EACnC,MAAM;AACV,CAAC;AAKM,MAAM,oBAAoB;AAAA;AAAA;AAAA;AAAA,EAI7B,YAAY,QAAQ;AAIhB,SAAK,OAAO;AACZ,SAAK,UAAU;AACf,SAAK,UAAU,OAAO,gBAAgB,IAAI;AAAA,EAC9C;AAAA,EACA,UAAU;AACN,QAAI,CAAC,KAAK,SAAS;AACf;AAAA,IACJ;AACA,UAAM,QAAQ,KAAK,QAAQ,KAAK;AAChC,QAAI,OAAO;AACP,iBAAW,QAAQ,OAAO;AACtB,cAAM,uBAAuB,KAAK;AAClC,YAAI,sBAAsB;AACtB,+BAAqB,oBAAoB;AACzC,cAAI,KAAK,cAAc,KAAK,WAAW,uBAAuB,KAAK,WAAW,oBAAoB,YAAY,OAAO;AACjH,iCAAqB,YAAY;AAAA,UACrC;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,UAAU;AACN,WAAO,KAAK;AAAA,EAChB;AACJ;AACA,wBAAwB,IAAI;AAC5B,sBAAsB,MAAM,MAAM,CAAC,WAAW,IAAI,oBAAoB,MAAM,CAAC;","x_google_ignoreList":[0]}