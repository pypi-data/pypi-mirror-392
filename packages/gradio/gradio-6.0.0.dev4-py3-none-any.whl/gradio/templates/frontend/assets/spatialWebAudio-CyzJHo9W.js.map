{"version":3,"file":"spatialWebAudio-CyzJHo9W.js","sources":["../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subProperties/abstractSpatialAudio.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subProperties/abstractStereoAudio.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subNodes/stereoAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subProperties/stereoAudio.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subNodes/spatialAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subNodes/spatialWebAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subNodes/stereoWebAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subNodes/webAudioBusAndSoundSubGraph.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subProperties/spatialAudio.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subProperties/spatialWebAudio.js"],"sourcesContent":["import { Quaternion, Vector3 } from \"../../../Maths/math.vector.js\";\nexport const _SpatialAudioDefaults = {\n    coneInnerAngle: 6.28318530718,\n    coneOuterAngle: 6.28318530718,\n    coneOuterVolume: 0,\n    distanceModel: \"linear\",\n    maxDistance: 10000,\n    minDistance: 1,\n    panningModel: \"equalpower\",\n    position: Vector3.Zero(),\n    rolloffFactor: 1,\n    rotation: Vector3.Zero(),\n    rotationQuaternion: new Quaternion(),\n};\n/**\n * @param options The spatial audio options to check.\n * @returns `true` if spatial audio options are defined, otherwise `false`.\n */\nexport function _HasSpatialAudioOptions(options) {\n    return (options.spatialEnabled ||\n        options.spatialAutoUpdate !== undefined ||\n        options.spatialConeInnerAngle !== undefined ||\n        options.spatialConeOuterAngle !== undefined ||\n        options.spatialConeOuterVolume !== undefined ||\n        options.spatialDistanceModel !== undefined ||\n        options.spatialMaxDistance !== undefined ||\n        options.spatialMinDistance !== undefined ||\n        options.spatialMinUpdateTime !== undefined ||\n        options.spatialPanningModel !== undefined ||\n        options.spatialPosition !== undefined ||\n        options.spatialRolloffFactor !== undefined ||\n        options.spatialRotation !== undefined ||\n        options.spatialRotationQuaternion !== undefined);\n}\n/**\n * Abstract class representing the `spatial` audio property on a sound or audio bus.\n *\n * @see {@link AudioEngineV2.listener}\n */\nexport class AbstractSpatialAudio {\n}\n//# sourceMappingURL=abstractSpatialAudio.js.map","export const _StereoAudioDefaults = {\n    pan: 0,\n};\n/**\n * @param options The stereo audio options to check.\n * @returns `true` if stereo audio options are defined, otherwise `false`.\n */\nexport function _HasStereoAudioOptions(options) {\n    return options.stereoEnabled || options.stereoPan !== undefined;\n}\n/**\n * Abstract class representing the `stereo` audio property on a sound or audio bus.\n *\n * @see {@link AudioEngineV2.listener}\n */\nexport class AbstractStereoAudio {\n}\n//# sourceMappingURL=abstractStereoAudio.js.map","import { _AbstractAudioSubNode } from \"../../abstractAudio/subNodes/abstractAudioSubNode.js\";\nimport { _StereoAudioDefaults } from \"../../abstractAudio/subProperties/abstractStereoAudio.js\";\n/** @internal */\nexport class _StereoAudioSubNode extends _AbstractAudioSubNode {\n    constructor(engine) {\n        super(\"Stereo\" /* AudioSubNode.STEREO */, engine);\n    }\n    /** @internal */\n    setOptions(options) {\n        this.pan = options.stereoPan ?? _StereoAudioDefaults.pan;\n    }\n}\n/** @internal */\nexport function _GetStereoAudioSubNode(subGraph) {\n    return subGraph.getSubNode(\"Stereo\" /* AudioSubNode.STEREO */);\n}\n/** @internal */\nexport function _SetStereoAudioProperty(subGraph, property, value) {\n    subGraph.callOnSubNode(\"Stereo\" /* AudioSubNode.STEREO */, (node) => {\n        node[property] = value;\n    });\n}\n//# sourceMappingURL=stereoAudioSubNode.js.map","import { _StereoAudioDefaults, AbstractStereoAudio } from \"../../abstractAudio/subProperties/abstractStereoAudio.js\";\nimport { _SetStereoAudioProperty } from \"../subNodes/stereoAudioSubNode.js\";\n/** @internal */\nexport class _StereoAudio extends AbstractStereoAudio {\n    /** @internal */\n    constructor(subGraph) {\n        super();\n        this._pan = _StereoAudioDefaults.pan;\n        this._subGraph = subGraph;\n    }\n    /** @internal */\n    get pan() {\n        return this._pan;\n    }\n    set pan(value) {\n        this._pan = value;\n        _SetStereoAudioProperty(this._subGraph, \"pan\", value);\n    }\n}\n//# sourceMappingURL=stereoAudio.js.map","import { _SpatialAudioAttacherComponent } from \"../components/spatialAudioAttacherComponent.js\";\nimport { _SpatialAudioDefaults } from \"../subProperties/abstractSpatialAudio.js\";\nimport { _AbstractAudioSubNode } from \"./abstractAudioSubNode.js\";\n/** @internal */\nexport class _SpatialAudioSubNode extends _AbstractAudioSubNode {\n    constructor(engine) {\n        super(\"Spatial\" /* AudioSubNode.SPATIAL */, engine);\n        this._attacherComponent = null;\n    }\n    /** @internal */\n    get isAttached() {\n        return this._attacherComponent !== null && this._attacherComponent.isAttached;\n    }\n    /** @internal */\n    attach(sceneNode, useBoundingBox, attachmentType) {\n        this.detach();\n        if (!this._attacherComponent) {\n            this._attacherComponent = new _SpatialAudioAttacherComponent(this);\n        }\n        this._attacherComponent.attach(sceneNode, useBoundingBox, attachmentType);\n    }\n    /** @internal */\n    detach() {\n        this._attacherComponent?.detach();\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._attacherComponent?.dispose();\n        this._attacherComponent = null;\n    }\n    /** @internal */\n    setOptions(options) {\n        this.coneInnerAngle = options.spatialConeInnerAngle ?? _SpatialAudioDefaults.coneInnerAngle;\n        this.coneOuterAngle = options.spatialConeOuterAngle ?? _SpatialAudioDefaults.coneOuterAngle;\n        this.coneOuterVolume = options.spatialConeOuterVolume ?? _SpatialAudioDefaults.coneOuterVolume;\n        this.distanceModel = options.spatialDistanceModel ?? _SpatialAudioDefaults.distanceModel;\n        this.maxDistance = options.spatialMaxDistance ?? _SpatialAudioDefaults.maxDistance;\n        this.minDistance = options.spatialMinDistance ?? _SpatialAudioDefaults.minDistance;\n        this.panningModel = options.spatialPanningModel ?? _SpatialAudioDefaults.panningModel;\n        this.rolloffFactor = options.spatialRolloffFactor ?? _SpatialAudioDefaults.rolloffFactor;\n        if (options.spatialPosition) {\n            this.position = options.spatialPosition.clone();\n        }\n        if (options.spatialRotationQuaternion) {\n            this.rotationQuaternion = options.spatialRotationQuaternion.clone();\n        }\n        else if (options.spatialRotation) {\n            this.rotation = options.spatialRotation.clone();\n        }\n        else {\n            this.rotationQuaternion = _SpatialAudioDefaults.rotationQuaternion.clone();\n        }\n        this.update();\n    }\n    /** @internal */\n    update() {\n        if (this.isAttached) {\n            this._attacherComponent?.update();\n        }\n        else {\n            this._updatePosition();\n            this._updateRotation();\n        }\n    }\n}\n/** @internal */\nexport function _GetSpatialAudioSubNode(subGraph) {\n    return subGraph.getSubNode(\"Spatial\" /* AudioSubNode.SPATIAL */);\n}\n/** @internal */\nexport function _SetSpatialAudioProperty(subGraph, property, value) {\n    subGraph.callOnSubNode(\"Spatial\" /* AudioSubNode.SPATIAL */, (node) => {\n        node[property] = value;\n    });\n}\n//# sourceMappingURL=spatialAudioSubNode.js.map","import { Matrix, Quaternion, Vector3 } from \"../../../Maths/math.vector.js\";\nimport { _SpatialAudioSubNode } from \"../../abstractAudio/subNodes/spatialAudioSubNode.js\";\nimport { _SpatialAudioDefaults } from \"../../abstractAudio/subProperties/abstractSpatialAudio.js\";\nimport { _WebAudioParameterComponent } from \"../components/webAudioParameterComponent.js\";\nconst TmpMatrix = Matrix.Zero();\nconst TmpQuaternion = new Quaternion();\nconst TmpVector = Vector3.Zero();\nfunction D2r(degrees) {\n    return (degrees * Math.PI) / 180;\n}\nfunction R2d(radians) {\n    return (radians * 180) / Math.PI;\n}\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function _CreateSpatialAudioSubNodeAsync(engine) {\n    return new _SpatialWebAudioSubNode(engine);\n}\n/** @internal */\nexport class _SpatialWebAudioSubNode extends _SpatialAudioSubNode {\n    /** @internal */\n    constructor(engine) {\n        super(engine);\n        this._lastPosition = Vector3.Zero();\n        this._lastRotation = Vector3.Zero();\n        this._lastRotationQuaternion = new Quaternion();\n        /** @internal */\n        this.position = _SpatialAudioDefaults.position.clone();\n        /** @internal */\n        this.rotation = _SpatialAudioDefaults.rotation.clone();\n        /** @internal */\n        this.rotationQuaternion = _SpatialAudioDefaults.rotationQuaternion.clone();\n        this.node = new PannerNode(engine._audioContext);\n        this._orientationX = new _WebAudioParameterComponent(engine, this.node.orientationX);\n        this._orientationY = new _WebAudioParameterComponent(engine, this.node.orientationY);\n        this._orientationZ = new _WebAudioParameterComponent(engine, this.node.orientationZ);\n        this._positionX = new _WebAudioParameterComponent(engine, this.node.positionX);\n        this._positionY = new _WebAudioParameterComponent(engine, this.node.positionY);\n        this._positionZ = new _WebAudioParameterComponent(engine, this.node.positionZ);\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._orientationX.dispose();\n        this._orientationY.dispose();\n        this._orientationZ.dispose();\n        this._positionX.dispose();\n        this._positionY.dispose();\n        this._positionZ.dispose();\n        this.node.disconnect();\n    }\n    /** @internal */\n    get coneInnerAngle() {\n        return D2r(this.node.coneInnerAngle);\n    }\n    set coneInnerAngle(value) {\n        this.node.coneInnerAngle = R2d(value);\n    }\n    /** @internal */\n    get coneOuterAngle() {\n        return D2r(this.node.coneOuterAngle);\n    }\n    set coneOuterAngle(value) {\n        this.node.coneOuterAngle = R2d(value);\n    }\n    /** @internal */\n    get coneOuterVolume() {\n        return this.node.coneOuterGain;\n    }\n    set coneOuterVolume(value) {\n        this.node.coneOuterGain = value;\n    }\n    /** @internal */\n    get distanceModel() {\n        return this.node.distanceModel;\n    }\n    set distanceModel(value) {\n        this.node.distanceModel = value;\n        // Wiggle the max distance to make the change take effect.\n        const maxDistance = this.node.maxDistance;\n        this.node.maxDistance = maxDistance + 0.001;\n        this.node.maxDistance = maxDistance;\n    }\n    /** @internal */\n    get minDistance() {\n        return this.node.refDistance;\n    }\n    set minDistance(value) {\n        this.node.refDistance = value;\n    }\n    /** @internal */\n    get maxDistance() {\n        return this.node.maxDistance;\n    }\n    set maxDistance(value) {\n        this.node.maxDistance = value;\n    }\n    /** @internal */\n    get panningModel() {\n        return this.node.panningModel;\n    }\n    set panningModel(value) {\n        this.node.panningModel = value;\n    }\n    /** @internal */\n    get rolloffFactor() {\n        return this.node.rolloffFactor;\n    }\n    set rolloffFactor(value) {\n        this.node.rolloffFactor = value;\n    }\n    /** @internal */\n    get _inNode() {\n        return this.node;\n    }\n    /** @internal */\n    get _outNode() {\n        return this.node;\n    }\n    /** @internal */\n    _updatePosition() {\n        if (this._lastPosition.equalsWithEpsilon(this.position)) {\n            return;\n        }\n        // If attached and there is a ramp in progress, we assume another update is coming soon that we can wait for.\n        // We don't do this for unattached nodes because there may not be another update coming.\n        if (this.isAttached && (this._positionX.isRamping || this._positionY.isRamping || this._positionZ.isRamping)) {\n            return;\n        }\n        this._positionX.targetValue = this.position.x;\n        this._positionY.targetValue = this.position.y;\n        this._positionZ.targetValue = this.position.z;\n        this._lastPosition.copyFrom(this.position);\n    }\n    /** @internal */\n    _updateRotation() {\n        // If attached and there is a ramp in progress, we assume another update is coming soon that we can wait for.\n        // We don't do this for unattached nodes because there may not be another update coming.\n        if (this.isAttached && (this._orientationX.isRamping || this._orientationY.isRamping || this._orientationZ.isRamping)) {\n            return;\n        }\n        if (!this._lastRotationQuaternion.equalsWithEpsilon(this.rotationQuaternion)) {\n            TmpQuaternion.copyFrom(this.rotationQuaternion);\n            this._lastRotationQuaternion.copyFrom(this.rotationQuaternion);\n        }\n        else if (!this._lastRotation.equalsWithEpsilon(this.rotation)) {\n            Quaternion.FromEulerAnglesToRef(this.rotation.x, this.rotation.y, this.rotation.z, TmpQuaternion);\n            this._lastRotation.copyFrom(this.rotation);\n        }\n        else {\n            return;\n        }\n        Matrix.FromQuaternionToRef(TmpQuaternion, TmpMatrix);\n        Vector3.TransformNormalToRef(Vector3.RightReadOnly, TmpMatrix, TmpVector);\n        this._orientationX.targetValue = TmpVector.x;\n        this._orientationY.targetValue = TmpVector.y;\n        this._orientationZ.targetValue = TmpVector.z;\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        // If the wrapped node is not available now, it will be connected later by the subgraph.\n        if (node._inNode) {\n            this.node.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node._inNode) {\n            this.node.disconnect(node._inNode);\n        }\n        return true;\n    }\n    /** @internal */\n    getClassName() {\n        return \"_SpatialWebAudioSubNode\";\n    }\n}\n//# sourceMappingURL=spatialWebAudioSubNode.js.map","import { _StereoAudioSubNode } from \"../../abstractAudio/subNodes/stereoAudioSubNode.js\";\nimport { _WebAudioParameterComponent } from \"../components/webAudioParameterComponent.js\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function _CreateStereoAudioSubNodeAsync(engine) {\n    return new _StereoWebAudioSubNode(engine);\n}\n/** @internal */\nexport class _StereoWebAudioSubNode extends _StereoAudioSubNode {\n    /** @internal */\n    constructor(engine) {\n        super(engine);\n        this.node = new StereoPannerNode(engine._audioContext);\n        this._pan = new _WebAudioParameterComponent(engine, this.node.pan);\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._pan.dispose();\n    }\n    /** @internal */\n    get pan() {\n        return this._pan.targetValue;\n    }\n    /** @internal */\n    set pan(value) {\n        this._pan.targetValue = value;\n    }\n    /** @internal */\n    get _inNode() {\n        return this.node;\n    }\n    /** @internal */\n    get _outNode() {\n        return this.node;\n    }\n    /** @internal */\n    getClassName() {\n        return \"_StereoWebAudioSubNode\";\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        // If the wrapped node is not available now, it will be connected later by the subgraph.\n        if (node._inNode) {\n            this.node.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node._inNode) {\n            this.node.disconnect(node._inNode);\n        }\n        return true;\n    }\n}\n//# sourceMappingURL=stereoWebAudioSubNode.js.map","import { _GetSpatialAudioSubNode } from \"../../abstractAudio/subNodes/spatialAudioSubNode.js\";\nimport { _GetStereoAudioSubNode } from \"../../abstractAudio/subNodes/stereoAudioSubNode.js\";\nimport { _GetVolumeAudioSubNode } from \"../../abstractAudio/subNodes/volumeAudioSubNode.js\";\nimport { _HasSpatialAudioOptions } from \"../../abstractAudio/subProperties/abstractSpatialAudio.js\";\nimport { _HasStereoAudioOptions } from \"../../abstractAudio/subProperties/abstractStereoAudio.js\";\nimport { _CreateSpatialAudioSubNodeAsync } from \"./spatialWebAudioSubNode.js\";\nimport { _CreateStereoAudioSubNodeAsync } from \"./stereoWebAudioSubNode.js\";\nimport { _WebAudioBaseSubGraph } from \"./webAudioBaseSubGraph.js\";\n/** @internal */\nexport class _WebAudioBusAndSoundSubGraph extends _WebAudioBaseSubGraph {\n    constructor() {\n        super(...arguments);\n        this._rootNode = null;\n        this._inputNode = null;\n    }\n    /** @internal */\n    async initAsync(options) {\n        await super.initAsync(options);\n        let hasSpatialOptions = false;\n        let hasStereoOptions = false;\n        if ((hasSpatialOptions = _HasSpatialAudioOptions(options))) {\n            await this.createAndAddSubNodeAsync(\"Spatial\" /* AudioSubNode.SPATIAL */);\n        }\n        if ((hasStereoOptions = _HasStereoAudioOptions(options))) {\n            await this.createAndAddSubNodeAsync(\"Stereo\" /* AudioSubNode.STEREO */);\n        }\n        await this._createSubNodePromisesResolvedAsync();\n        if (hasSpatialOptions) {\n            _GetSpatialAudioSubNode(this)?.setOptions(options);\n        }\n        if (hasStereoOptions) {\n            _GetStereoAudioSubNode(this)?.setOptions(options);\n        }\n    }\n    /** @internal */\n    get _inNode() {\n        return this._inputNode;\n    }\n    // eslint-disable-next-line @typescript-eslint/promise-function-async\n    _createSubNode(name) {\n        try {\n            const node = super._createSubNode(name);\n            return node;\n        }\n        catch (e) { }\n        switch (name) {\n            case \"Spatial\" /* AudioSubNode.SPATIAL */:\n                return _CreateSpatialAudioSubNodeAsync(this._owner.engine);\n            case \"Stereo\" /* AudioSubNode.STEREO */:\n                return _CreateStereoAudioSubNodeAsync(this._owner.engine);\n            default:\n                throw new Error(`Unknown subnode name: ${name}`);\n        }\n    }\n    _onSubNodesChanged() {\n        super._onSubNodesChanged();\n        const spatialNode = _GetSpatialAudioSubNode(this);\n        const stereoNode = _GetStereoAudioSubNode(this);\n        const volumeNode = _GetVolumeAudioSubNode(this);\n        if (spatialNode && spatialNode.getClassName() !== \"_SpatialWebAudioSubNode\") {\n            throw new Error(\"Not a WebAudio subnode.\");\n        }\n        if (stereoNode && stereoNode.getClassName() !== \"_StereoWebAudioSubNode\") {\n            throw new Error(\"Not a WebAudio subnode.\");\n        }\n        if (volumeNode && volumeNode.getClassName() !== \"_VolumeWebAudioSubNode\") {\n            throw new Error(\"Not a WebAudio subnode.\");\n        }\n        if (spatialNode) {\n            spatialNode.disconnectAll();\n            if (volumeNode) {\n                spatialNode.connect(volumeNode);\n            }\n        }\n        if (stereoNode) {\n            stereoNode.disconnectAll();\n            if (volumeNode) {\n                stereoNode.connect(volumeNode);\n            }\n        }\n        if (spatialNode && stereoNode) {\n            this._rootNode = new GainNode(this._owner.engine._audioContext);\n            this._rootNode.connect(spatialNode._outNode);\n            this._rootNode.connect(stereoNode._outNode);\n        }\n        else {\n            this._rootNode?.disconnect();\n            this._rootNode = null;\n        }\n        let inSubNode = null;\n        let inNode = null;\n        if (this._rootNode) {\n            inNode = this._rootNode;\n        }\n        else {\n            if (spatialNode) {\n                inSubNode = spatialNode;\n            }\n            else if (stereoNode) {\n                inSubNode = stereoNode;\n            }\n            else if (volumeNode) {\n                inSubNode = volumeNode;\n            }\n            inNode = inSubNode?.node ?? null;\n        }\n        if (this._inputNode !== inNode) {\n            // Disconnect the wrapped upstream WebAudio nodes from the old wrapped WebAudio node.\n            // The wrapper nodes are unaware of this change.\n            if (this._inputNode && this._upstreamNodes) {\n                const it = this._upstreamNodes.values();\n                for (let next = it.next(); !next.done; next = it.next()) {\n                    next.value._outNode?.disconnect(this._inputNode);\n                }\n            }\n            this._inputNode = inNode;\n            // Connect the wrapped upstream WebAudio nodes to the new wrapped WebAudio node.\n            // The wrapper nodes are unaware of this change.\n            if (inNode && this._upstreamNodes) {\n                const it = this._upstreamNodes.values();\n                for (let next = it.next(); !next.done; next = it.next()) {\n                    next.value._outNode?.connect(inNode);\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=webAudioBusAndSoundSubGraph.js.map","import { _GetSpatialAudioSubNode, _SetSpatialAudioProperty } from \"../subNodes/spatialAudioSubNode.js\";\nimport { _SpatialAudioDefaults, AbstractSpatialAudio } from \"./abstractSpatialAudio.js\";\n/** @internal */\nexport class _SpatialAudio extends AbstractSpatialAudio {\n    /** @internal */\n    constructor(subGraph) {\n        super();\n        this._coneInnerAngle = _SpatialAudioDefaults.coneInnerAngle;\n        this._coneOuterAngle = _SpatialAudioDefaults.coneOuterAngle;\n        this._coneOuterVolume = _SpatialAudioDefaults.coneOuterVolume;\n        this._distanceModel = _SpatialAudioDefaults.distanceModel;\n        this._maxDistance = _SpatialAudioDefaults.maxDistance;\n        this._minDistance = _SpatialAudioDefaults.minDistance;\n        this._panningModel = _SpatialAudioDefaults.panningModel;\n        this._rolloffFactor = _SpatialAudioDefaults.rolloffFactor;\n        const subNode = _GetSpatialAudioSubNode(subGraph);\n        if (subNode) {\n            this._position = subNode.position.clone();\n            this._rotation = subNode.rotation.clone();\n            this._rotationQuaternion = subNode.rotationQuaternion.clone();\n        }\n        else {\n            this._position = _SpatialAudioDefaults.position.clone();\n            this._rotation = _SpatialAudioDefaults.rotation.clone();\n            this._rotationQuaternion = _SpatialAudioDefaults.rotationQuaternion.clone();\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            subGraph.createAndAddSubNodeAsync(\"Spatial\" /* AudioSubNode.SPATIAL */);\n        }\n        this._subGraph = subGraph;\n    }\n    /** @internal */\n    get coneInnerAngle() {\n        return this._coneInnerAngle;\n    }\n    set coneInnerAngle(value) {\n        this._coneInnerAngle = value;\n        _SetSpatialAudioProperty(this._subGraph, \"coneInnerAngle\", value);\n    }\n    /** @internal */\n    get coneOuterAngle() {\n        return this._coneOuterAngle;\n    }\n    set coneOuterAngle(value) {\n        this._coneOuterAngle = value;\n        _SetSpatialAudioProperty(this._subGraph, \"coneOuterAngle\", value);\n    }\n    /** @internal */\n    get coneOuterVolume() {\n        return this._coneOuterVolume;\n    }\n    set coneOuterVolume(value) {\n        this._coneOuterVolume = value;\n        _SetSpatialAudioProperty(this._subGraph, \"coneOuterVolume\", value);\n    }\n    /** @internal */\n    get distanceModel() {\n        return this._distanceModel;\n    }\n    set distanceModel(value) {\n        this._distanceModel = value;\n        _SetSpatialAudioProperty(this._subGraph, \"distanceModel\", value);\n    }\n    /** @internal */\n    get isAttached() {\n        return this._subGraph.getSubNode(\"Spatial\" /* AudioSubNode.SPATIAL */)?.isAttached ?? false;\n    }\n    /** @internal */\n    get maxDistance() {\n        return this._maxDistance;\n    }\n    set maxDistance(value) {\n        if (value <= 0) {\n            value = 0.000001;\n        }\n        this._maxDistance = value;\n        _SetSpatialAudioProperty(this._subGraph, \"maxDistance\", value);\n    }\n    /** @internal */\n    get minDistance() {\n        return this._minDistance;\n    }\n    set minDistance(value) {\n        this._minDistance = value;\n        _SetSpatialAudioProperty(this._subGraph, \"minDistance\", value);\n    }\n    /** @internal */\n    get panningModel() {\n        return this._panningModel;\n    }\n    set panningModel(value) {\n        this._panningModel = value;\n        _SetSpatialAudioProperty(this._subGraph, \"panningModel\", value);\n    }\n    /** @internal */\n    get position() {\n        return this._position;\n    }\n    set position(value) {\n        this._position = value;\n        this._updatePosition();\n    }\n    /** @internal */\n    get rolloffFactor() {\n        return this._rolloffFactor;\n    }\n    set rolloffFactor(value) {\n        this._rolloffFactor = value;\n        _SetSpatialAudioProperty(this._subGraph, \"rolloffFactor\", value);\n    }\n    /** @internal */\n    get rotation() {\n        return this._rotation;\n    }\n    set rotation(value) {\n        this._rotation = value;\n        this._updateRotation();\n    }\n    /** @internal */\n    get rotationQuaternion() {\n        return this._rotationQuaternion;\n    }\n    set rotationQuaternion(value) {\n        this._rotationQuaternion = value;\n        this._updateRotation();\n    }\n    /**\n     * Attaches to a scene node.\n     *\n     * Detaches automatically before attaching to the given scene node.\n     * If `sceneNode` is `null` it is the same as calling `detach()`.\n     *\n     * @param sceneNode The scene node to attach to, or `null` to detach.\n     * @param useBoundingBox Whether to use the bounding box of the node for positioning. Defaults to `false`.\n     * @param attachmentType Whether to attach to the node's position and/or rotation. Defaults to `PositionAndRotation`.\n     */\n    attach(sceneNode, useBoundingBox = false, attachmentType = 3 /* SpatialAudioAttachmentType.PositionAndRotation */) {\n        _GetSpatialAudioSubNode(this._subGraph)?.attach(sceneNode, useBoundingBox, attachmentType);\n    }\n    /**\n     * Detaches from the scene node if attached.\n     */\n    detach() {\n        _GetSpatialAudioSubNode(this._subGraph)?.detach();\n    }\n    /** @internal */\n    update() {\n        const subNode = _GetSpatialAudioSubNode(this._subGraph);\n        if (!subNode) {\n            return;\n        }\n        if (subNode.isAttached) {\n            subNode.update();\n        }\n        else {\n            this._updatePosition(subNode);\n            this._updateRotation(subNode);\n        }\n    }\n    _updatePosition(subNode = null) {\n        if (!subNode) {\n            subNode = _GetSpatialAudioSubNode(this._subGraph);\n            if (!subNode) {\n                return;\n            }\n        }\n        const position = subNode.position;\n        if (!position.equalsWithEpsilon(this._position)) {\n            subNode.position.copyFrom(this._position);\n            subNode._updatePosition();\n        }\n    }\n    _updateRotation(subNode = null) {\n        if (!subNode) {\n            subNode = _GetSpatialAudioSubNode(this._subGraph);\n            if (!subNode) {\n                return;\n            }\n        }\n        if (!subNode.rotationQuaternion.equalsWithEpsilon(this._rotationQuaternion)) {\n            subNode.rotationQuaternion.copyFrom(this._rotationQuaternion);\n            subNode._updateRotation();\n        }\n        else if (!subNode.rotation.equalsWithEpsilon(this._rotation)) {\n            subNode.rotation.copyFrom(this._rotation);\n            subNode._updateRotation();\n        }\n    }\n}\n//# sourceMappingURL=spatialAudio.js.map","import { _SpatialAudio } from \"../../abstractAudio/subProperties/spatialAudio.js\";\nimport { _SpatialWebAudioUpdaterComponent } from \"../components/spatialWebAudioUpdaterComponent.js\";\n/** @internal */\nexport class _SpatialWebAudio extends _SpatialAudio {\n    /** @internal */\n    constructor(subGraph, autoUpdate, minUpdateTime) {\n        super(subGraph);\n        this._updaterComponent = new _SpatialWebAudioUpdaterComponent(this, autoUpdate, minUpdateTime);\n    }\n    /** @internal */\n    get minUpdateTime() {\n        return this._updaterComponent.minUpdateTime;\n    }\n    /** @internal */\n    set minUpdateTime(value) {\n        this._updaterComponent.minUpdateTime = value;\n    }\n    /** @internal */\n    dispose() {\n        this._updaterComponent.dispose();\n        this._updaterComponent = null;\n    }\n}\n//# sourceMappingURL=spatialWebAudio.js.map"],"names":["_SpatialAudioDefaults","Vector3","Quaternion","_HasSpatialAudioOptions","options","AbstractSpatialAudio","_StereoAudioDefaults","_HasStereoAudioOptions","AbstractStereoAudio","_StereoAudioSubNode","_AbstractAudioSubNode","engine","_GetStereoAudioSubNode","subGraph","_SetStereoAudioProperty","property","value","node","_StereoAudio","_SpatialAudioSubNode","sceneNode","useBoundingBox","attachmentType","_SpatialAudioAttacherComponent","_GetSpatialAudioSubNode","_SetSpatialAudioProperty","TmpMatrix","Matrix","TmpQuaternion","TmpVector","D2r","degrees","R2d","radians","_CreateSpatialAudioSubNodeAsync","_SpatialWebAudioSubNode","_WebAudioParameterComponent","maxDistance","_CreateStereoAudioSubNodeAsync","_StereoWebAudioSubNode","_WebAudioBusAndSoundSubGraph","_WebAudioBaseSubGraph","hasSpatialOptions","hasStereoOptions","name","spatialNode","stereoNode","volumeNode","_GetVolumeAudioSubNode","inSubNode","inNode","it","next","_SpatialAudio","subNode","_SpatialWebAudio","autoUpdate","minUpdateTime","_SpatialWebAudioUpdaterComponent"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}