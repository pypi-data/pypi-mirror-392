import{f as G,i as H,s as j,e as z,b as C,a as N,g as O}from"./i18n-5O2R8uRh.js";import{p as F,ac as J,f as K,s as Q,t as R,b as U,c as V,h as W,_ as X,i as Y,a9 as Z,r as ee}from"./index-bhUlIv2p.js";import{G as te}from"./utils.svelte-Baqu2V3e.js";import{S as re}from"./index-D9STzgM4.js";/* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";/* empty css                                                   */import"./IconButton-CbXWacxl.js";import"./svelte-component-Df_c_uts.js";import"./misc-BSG2QtlE.js";import"./Clear-DimAkCP_.js";import"./prism-python-Bb2K859D.js";var ae=K('<div role="region" aria-label="Draggable items container"><!> <!></div>');function me(y,_){F(_,!0);const A=G(_,["$$slots","$$events","$$legacy"]),s=new te(A);let a,o=null,c=[],i=null;const p=[{event:"dragstart",handler:x},{event:"dragend",handler:k}],m=[{event:"dragover",handler:D},{event:"drop",handler:P},{event:"dragenter",handler:M}];function S(e){p.forEach(({event:r,handler:t})=>{e.addEventListener(r,t)})}function h(e){p.forEach(({event:r,handler:t})=>{e.removeEventListener(r,t)})}function w(e){m.forEach(({event:r,handler:t})=>{e.addEventListener(r,t)})}function v(e){m.forEach(({event:r,handler:t})=>{e.removeEventListener(r,t)})}function b(e,r){e.classList.add("draggable-item"),e.setAttribute("data-index",r.toString()),e.style.position="relative";const t=document.createElement("div");t.className="drag-handle",t.setAttribute("draggable","true"),t.setAttribute("aria-grabbed","false"),t.setAttribute("data-index",r.toString()),t.innerHTML="⋮⋮",e.appendChild(t),S(t),w(e)}function f(){if(!a)return;c.forEach(t=>{const n=t.querySelector(".drag-handle");n&&(h(n),n.remove()),v(t)}),c=[];const e=Array.from(a.children);let r=0;e.forEach(t=>{t.classList.contains("status-tracker")||(t.classList.contains("form")&&t.children.length>0?Array.from(t.children).forEach(l=>{c.push(l),b(l,r),r++}):(c.push(t),b(t,r),r++))})}function x(e){e.stopPropagation?.();const r=e.currentTarget,t=r.parentElement;o=t,parseInt(r.dataset.index||"-1"),r.setAttribute("aria-grabbed","true"),t.classList.add("dragging"),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t.outerHTML),e.dataTransfer.setDragImage(t,10,10))}function k(e){e.stopPropagation?.();const r=e.currentTarget;r.parentElement.classList.remove("dragging"),r.setAttribute("aria-grabbed","false"),i&&(i.classList.remove("drop-target"),i=null),o=null}function D(e){return e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!1}function M(e){e.stopPropagation?.();const r=e.currentTarget;if(r===o||!o||!a)return;const t=o.parentElement,n=r.parentElement,l=t?.classList.contains("form")&&t.parentElement===a,u=n?.classList.contains("form")&&n.parentElement===a;(l||t===a)&&(u||n===a)&&(i&&i!==r&&i.classList.remove("drop-target"),r.classList.add("drop-target"),i=r)}async function P(e){e.stopPropagation?.();const r=e.currentTarget;if(r.classList.remove("drop-target"),i&&(i.classList.remove("drop-target"),i=null),o&&o!==r&&a){const t=o.parentElement,n=r.parentElement,l=t?.classList.contains("form")&&t.parentElement===a,u=n?.classList.contains("form")&&n.parentElement===a;if(!((l||t===a)&&(u||n===a)))return!1;const g=document.createElement("div");g.style.display="none",t.insertBefore(g,o),n.insertBefore(o,r),t.insertBefore(r,g),g.remove(),o?.classList.remove("dragging");const T=o?.querySelector(".drag-handle");T&&T.setAttribute("aria-grabbed","false"),await X(),f()}return!1}J(()=>{f();const e=new MutationObserver(f);return a&&e.observe(a,{childList:!0,subtree:!1}),()=>{e.disconnect(),c.forEach(r=>{const t=r.querySelector(".drag-handle");t&&h(t),v(r)})}});var d=ae();let E;var L=W(d);{var $=e=>{{let r=Z(()=>s.shared.loading_status?s.shared.loading_status.status=="pending"?"generating":s.shared.loading_status.status:null);re(e,O({get autoscroll(){return s.shared.autoscroll},get i18n(){return s.i18n}},()=>s.shared.loading_status,{get status(){return Y(r)}}))}};H(L,e=>{s.shared.loading_status&&s.props.show_progress&&e($)})}var q=Q(L,2);j(q,_,"default",{},null),ee(d),z(d,e=>a=e,()=>a),R(e=>{C(d,"id",s.shared.elem_id),E=N(d,1,`draggable ${e??""}`,"svelte-1kr8imm",E,{hide:!s.shared.visible,horizontal:s.props.orientation==="row",vertical:s.props.orientation==="column"})},[()=>(s.shared.elem_classes||[]).join(" ")]),U(y,d),V()}export{me as default};
//# sourceMappingURL=Index-B8IVmYOc.js.map
