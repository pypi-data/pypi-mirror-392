{"version":3,"file":"webAudioBaseSubGraph-DcBa2Tul.js","sources":["../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subNodes/abstractAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subNodes/volumeAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subProperties/abstractAudioAnalyzer.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subNodes/audioAnalyzerSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subProperties/audioAnalyzer.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/abstractAudioOutNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/subNodes/abstractAudioSubGraph.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subNodes/volumeWebAudioSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subNodes/webAudioAnalyzerSubNode.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/subNodes/webAudioBaseSubGraph.js"],"sourcesContent":["import { AbstractNamedAudioNode } from \"../abstractAudioNode.js\";\n/** @internal */\nexport class _AbstractAudioSubNode extends AbstractNamedAudioNode {\n    /** @internal */\n    constructor(name, engine) {\n        super(name, engine, 3 /* AudioNodeType.HAS_INPUTS_AND_OUTPUTS */);\n    }\n    /** @internal */\n    connect(node) {\n        if (!this._connect(node)) {\n            throw new Error(\"Connect failed\");\n        }\n    }\n    /** @internal */\n    disconnect(node) {\n        if (!this._disconnect(node)) {\n            throw new Error(\"Disconnect failed\");\n        }\n    }\n    /** @internal */\n    disconnectAll() {\n        if (!this._downstreamNodes) {\n            throw new Error(\"Disconnect failed\");\n        }\n        const it = this._downstreamNodes.values();\n        for (let next = it.next(); !next.done; next = it.next()) {\n            if (!this._disconnect(next.value)) {\n                throw new Error(\"Disconnect failed\");\n            }\n        }\n    }\n}\n//# sourceMappingURL=abstractAudioSubNode.js.map","import { _AbstractAudioSubNode } from \"../subNodes/abstractAudioSubNode.js\";\n/** @internal */\nexport const _VolumeAudioDefaults = {\n    volume: 1,\n};\n/** @internal */\nexport class _VolumeAudioSubNode extends _AbstractAudioSubNode {\n    constructor(engine) {\n        super(\"Volume\" /* AudioSubNode.VOLUME */, engine);\n    }\n    /** @internal */\n    setOptions(options) {\n        this.volume = options.volume ?? _VolumeAudioDefaults.volume;\n    }\n}\n/** @internal */\nexport function _GetVolumeAudioSubNode(subGraph) {\n    return subGraph.getSubNode(\"Volume\" /* AudioSubNode.VOLUME */);\n}\n/** @internal */\nexport function _GetVolumeAudioProperty(subGraph, property) {\n    return _GetVolumeAudioSubNode(subGraph)?.[property] ?? _VolumeAudioDefaults[property];\n}\n//# sourceMappingURL=volumeAudioSubNode.js.map","export const _AudioAnalyzerDefaults = {\n    fftSize: 2048,\n    minDecibels: -100,\n    maxDecibels: -30,\n    smoothing: 0.8,\n};\n/**\n * @param options The audio analyzer options to check.\n * @returns `true` if audio analyzer options are defined, otherwise `false`.\n */\nexport function _HasAudioAnalyzerOptions(options) {\n    return (options.analyzerEnabled ||\n        options.analyzerFFTSize !== undefined ||\n        options.analyzerMinDecibels !== undefined ||\n        options.analyzerMaxDecibels !== undefined ||\n        options.analyzerSmoothing !== undefined);\n}\n/**\n * An AudioAnalyzer converts time-domain audio data into the frequency-domain.\n */\nexport class AbstractAudioAnalyzer {\n    /**\n     * The number of data values that will be returned when calling getByteFrequencyData() or getFloatFrequencyData(). This is always half the `fftSize`.\n     */\n    get frequencyBinCount() {\n        return this.fftSize / 2;\n    }\n}\n//# sourceMappingURL=abstractAudioAnalyzer.js.map","import { _AudioAnalyzerDefaults } from \"../subProperties/abstractAudioAnalyzer.js\";\nimport { _AbstractAudioSubNode } from \"./abstractAudioSubNode.js\";\n/** @internal */\nexport class _AudioAnalyzerSubNode extends _AbstractAudioSubNode {\n    constructor(engine) {\n        super(\"Analyzer\" /* AudioSubNode.ANALYZER */, engine);\n    }\n    /** @internal */\n    setOptions(options) {\n        this.fftSize = options.analyzerFFTSize ?? _AudioAnalyzerDefaults.fftSize;\n        this.minDecibels = options.analyzerMinDecibels ?? _AudioAnalyzerDefaults.minDecibels;\n        this.maxDecibels = options.analyzerMaxDecibels ?? _AudioAnalyzerDefaults.maxDecibels;\n        this.smoothing = options.analyzerSmoothing ?? _AudioAnalyzerDefaults.smoothing;\n    }\n}\n/** @internal */\nexport function _GetAudioAnalyzerSubNode(subGraph) {\n    return subGraph.getSubNode(\"Analyzer\" /* AudioSubNode.ANALYZER */);\n}\n/** @internal */\nexport function _SetAudioAnalyzerProperty(subGraph, property, value) {\n    subGraph.callOnSubNode(\"Analyzer\" /* AudioSubNode.ANALYZER */, (node) => {\n        node[property] = value;\n    });\n}\n//# sourceMappingURL=audioAnalyzerSubNode.js.map","import { Logger } from \"../../../Misc/logger.js\";\nimport { _AudioAnalyzerDefaults, AbstractAudioAnalyzer } from \"../../abstractAudio/subProperties/abstractAudioAnalyzer.js\";\nimport { _GetAudioAnalyzerSubNode, _SetAudioAnalyzerProperty } from \"../subNodes/audioAnalyzerSubNode.js\";\nlet EmptyByteFrequencyData = null;\nlet EmptyFloatFrequencyData = null;\n/** @internal */\nexport function _GetEmptyByteFrequencyData() {\n    if (!EmptyByteFrequencyData) {\n        EmptyByteFrequencyData = new Uint8Array();\n    }\n    return EmptyByteFrequencyData;\n}\n/** @internal */\nexport function _GetEmptyFloatFrequencyData() {\n    if (!EmptyFloatFrequencyData) {\n        EmptyFloatFrequencyData = new Float32Array();\n    }\n    return EmptyFloatFrequencyData;\n}\n/** @internal */\nexport class _AudioAnalyzer extends AbstractAudioAnalyzer {\n    /** @internal */\n    constructor(subGraph) {\n        super();\n        this._fftSize = _AudioAnalyzerDefaults.fftSize;\n        this._maxDecibels = _AudioAnalyzerDefaults.maxDecibels;\n        this._minDecibels = _AudioAnalyzerDefaults.minDecibels;\n        this._smoothing = _AudioAnalyzerDefaults.smoothing;\n        this._subGraph = subGraph;\n    }\n    /** @internal */\n    get fftSize() {\n        return this._fftSize;\n    }\n    set fftSize(value) {\n        this._fftSize = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"fftSize\", value);\n    }\n    /** @internal */\n    get isEnabled() {\n        return _GetAudioAnalyzerSubNode(this._subGraph) !== null;\n    }\n    /** @internal */\n    get minDecibels() {\n        return this._minDecibels;\n    }\n    set minDecibels(value) {\n        this._minDecibels = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"minDecibels\", value);\n    }\n    /** @internal */\n    get maxDecibels() {\n        return this._maxDecibels;\n    }\n    set maxDecibels(value) {\n        this._maxDecibels = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"maxDecibels\", value);\n    }\n    /** @internal */\n    get smoothing() {\n        return this._smoothing;\n    }\n    set smoothing(value) {\n        this._smoothing = value;\n        _SetAudioAnalyzerProperty(this._subGraph, \"smoothing\", value);\n    }\n    /** @internal */\n    dispose() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (subNode) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this._subGraph.removeSubNodeAsync(subNode);\n            subNode.dispose();\n        }\n    }\n    /** @internal */\n    async enableAsync() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (!subNode) {\n            await this._subGraph.createAndAddSubNodeAsync(\"Analyzer\" /* AudioSubNode.ANALYZER */);\n        }\n    }\n    /** @internal */\n    getByteFrequencyData() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (!subNode) {\n            Logger.Warn(\"AudioAnalyzer not enabled\");\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.enableAsync();\n            return _GetEmptyByteFrequencyData();\n        }\n        return subNode.getByteFrequencyData();\n    }\n    /** @internal */\n    getFloatFrequencyData() {\n        const subNode = _GetAudioAnalyzerSubNode(this._subGraph);\n        if (!subNode) {\n            Logger.Warn(\"AudioAnalyzer not enabled\");\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.enableAsync();\n            return _GetEmptyFloatFrequencyData();\n        }\n        return subNode.getFloatFrequencyData();\n    }\n}\n//# sourceMappingURL=audioAnalyzer.js.map","import { AbstractNamedAudioNode } from \"./abstractAudioNode.js\";\nimport { _GetVolumeAudioProperty, _GetVolumeAudioSubNode } from \"./subNodes/volumeAudioSubNode.js\";\nimport { _AudioAnalyzer } from \"./subProperties/audioAnalyzer.js\";\n/**\n * Abstract class representing and audio output node with an analyzer and volume control.\n */\nexport class AbstractAudioOutNode extends AbstractNamedAudioNode {\n    constructor(name, engine, nodeType) {\n        super(name, engine, nodeType);\n        this._analyzer = null;\n    }\n    /**\n     * The analyzer features of the bus.\n     */\n    get analyzer() {\n        return this._analyzer ?? (this._analyzer = new _AudioAnalyzer(this._subGraph));\n    }\n    /**\n     * The audio output volume.\n     */\n    get volume() {\n        return _GetVolumeAudioProperty(this._subGraph, \"volume\");\n    }\n    set volume(value) {\n        // The volume subnode is created on initialization and should always exist.\n        const node = _GetVolumeAudioSubNode(this._subGraph);\n        if (!node) {\n            throw new Error(\"No volume subnode\");\n        }\n        node.volume = value;\n    }\n    /**\n     * Releases associated resources.\n     */\n    dispose() {\n        super.dispose();\n        this._analyzer?.dispose();\n        this._analyzer = null;\n        this._subGraph.dispose();\n    }\n    /**\n     * Sets the audio output volume with optional ramping.\n     * If the duration is 0 then the volume is set immediately, otherwise it is ramped to the new value over the given duration using the given shape.\n     * If a ramp is already in progress then the volume is not set and an error is thrown.\n     * @param value The value to set the volume to.\n     * @param options The options to use for ramping the volume change.\n     */\n    setVolume(value, options = null) {\n        const node = _GetVolumeAudioSubNode(this._subGraph);\n        if (!node) {\n            throw new Error(\"No volume subnode\");\n        }\n        node.setVolume(value, options);\n    }\n}\n//# sourceMappingURL=abstractAudioOutNode.js.map","/**\n * Adds common sub graph functionality to an audio node.\n *\n * Audio nodes such as static sounds, streaming sounds, and buses can use audio sub graphs to process audio internally\n * before sending it to connected downstream audio nodes. This is useful for applying effects, spatial audio, and other\n * audio processing tasks common to multiple audio node classes.\n *\n * A key feature of audio sub graphs is their audio sub nodes are created asynchronously on demand so the minimum set\n * of sub nodes are used at all times to save memory and CPU resources. The tradeoff is a small delay when first\n * setting a property backed by a sub node. This delay is avoided by using the appropriate options to initialize the\n * sub node on creation, e.g. `spatialEnabled` and `stereoEnabled`, or by setting any creation option backed by the\n * sub node, e.g. `spatialPosition` and `stereoPan`.\n *\n * @internal\n */\nexport class _AbstractAudioSubGraph {\n    constructor() {\n        this._createSubNodePromises = {};\n        this._isDisposed = false;\n        this._subNodes = {};\n        this._onSubNodeDisposed = (node) => {\n            const subNode = node;\n            delete this._subNodes[subNode.name];\n            this._onSubNodesChanged();\n        };\n    }\n    /**\n     * Executes the given callback with the named sub node, creating the sub node if needed.\n     *\n     * @param name The name of the sub node\n     * @param callback The function to call with the named sub node\n     *\n     * @internal\n     */\n    callOnSubNode(name, callback) {\n        const node = this.getSubNode(name);\n        if (node) {\n            callback(node);\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises, github/no-then\n        this._createSubNodePromisesResolvedAsync().then(() => {\n            const node = this.getSubNode(name);\n            if (node) {\n                callback(node);\n                return;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises, github/no-then\n            this.createAndAddSubNodeAsync(name).then((node) => {\n                callback(node);\n            });\n        });\n    }\n    /**\n     * Creates the named subnode and adds it to the sub graph.\n     *\n     * @param name The name of the sub node.\n     * @returns A promise that resolves to the created sub node.\n     *\n     * @internal\n     */\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\n    createAndAddSubNodeAsync(name) {\n        var _a;\n        // eslint-disable-next-line github/no-then\n        (_a = this._createSubNodePromises)[name] || (_a[name] = this._createSubNode(name).then((node) => {\n            this._addSubNode(node);\n            return node;\n        }));\n        return this._createSubNodePromises[name];\n    }\n    /**\n     * Releases associated resources.\n     *\n     * @internal\n     */\n    dispose() {\n        this._isDisposed = true;\n        const subNodes = Object.values(this._subNodes);\n        for (const subNode of subNodes) {\n            subNode.dispose();\n        }\n        this._subNodes = {};\n        this._createSubNodePromises = {};\n    }\n    /**\n     * Gets a previously created sub node.\n     *\n     * @param name - The name of the sub node\n     * @returns The named sub node, or `null` if it has not been created, yet\n     *\n     * @internal\n     * */\n    getSubNode(name) {\n        return this._subNodes[name] ?? null;\n    }\n    /**\n     * Removes a sub node from the sub graph.\n     *\n     * @param subNode - The sub node to remove\n     * @returns A promise that resolves when the sub node is removed\n     *\n     * @internal\n     */\n    async removeSubNodeAsync(subNode) {\n        await this._createSubNodePromisesResolvedAsync();\n        const name = subNode.name;\n        if (this._subNodes[name]) {\n            delete this._subNodes[name];\n        }\n        delete this._createSubNodePromises[name];\n        this._onSubNodesChanged();\n    }\n    async _createSubNodePromisesResolvedAsync() {\n        return await Promise.all(Object.values(this._createSubNodePromises));\n    }\n    _addSubNode(node) {\n        if (this._isDisposed) {\n            node.dispose();\n            return;\n        }\n        this._subNodes[node.name] = node;\n        node.onDisposeObservable.addOnce(this._onSubNodeDisposed);\n        this._onSubNodesChanged();\n    }\n}\n//# sourceMappingURL=abstractAudioSubGraph.js.map","import { _VolumeAudioSubNode } from \"../../abstractAudio/subNodes/volumeAudioSubNode.js\";\nimport { _WebAudioParameterComponent } from \"../components/webAudioParameterComponent.js\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function _CreateVolumeAudioSubNodeAsync(engine) {\n    return new _VolumeWebAudioSubNode(engine);\n}\n/** @internal */\nexport class _VolumeWebAudioSubNode extends _VolumeAudioSubNode {\n    /** @internal */\n    constructor(engine) {\n        super(engine);\n        const gainNode = (this.node = new GainNode(engine._audioContext));\n        this._volume = new _WebAudioParameterComponent(engine, gainNode.gain);\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._volume.dispose();\n    }\n    /** @internal */\n    get volume() {\n        return this._volume.value;\n    }\n    /** @internal */\n    set volume(value) {\n        this.setVolume(value);\n    }\n    /** @internal */\n    get _inNode() {\n        return this.node;\n    }\n    /** @internal */\n    get _outNode() {\n        return this.node;\n    }\n    /** @internal */\n    setVolume(value, options = null) {\n        this._volume.setTargetValue(value, options);\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        // If the wrapped node is not available now, it will be connected later by the subgraph.\n        if (node._inNode) {\n            this.node.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node._inNode) {\n            this.node.disconnect(node._inNode);\n        }\n        return true;\n    }\n    /** @internal */\n    getClassName() {\n        return \"_VolumeWebAudioSubNode\";\n    }\n}\n//# sourceMappingURL=volumeWebAudioSubNode.js.map","import { _AudioAnalyzerSubNode } from \"../../abstractAudio/subNodes/audioAnalyzerSubNode.js\";\nimport { _GetEmptyByteFrequencyData, _GetEmptyFloatFrequencyData } from \"../../abstractAudio/subProperties/audioAnalyzer.js\";\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function _CreateAudioAnalyzerSubNodeAsync(engine) {\n    return new _WebAudioAnalyzerSubNode(engine);\n}\n/** @internal */\nexport class _WebAudioAnalyzerSubNode extends _AudioAnalyzerSubNode {\n    /** @internal */\n    constructor(engine) {\n        super(engine);\n        this._byteFrequencyData = null;\n        this._floatFrequencyData = null;\n        this._analyzerNode = new AnalyserNode(engine._audioContext);\n    }\n    /** @internal */\n    get fftSize() {\n        return this._analyzerNode.fftSize;\n    }\n    set fftSize(value) {\n        if (value === this._analyzerNode.fftSize) {\n            return;\n        }\n        this._analyzerNode.fftSize = value;\n        this._clearArrays();\n    }\n    /** @internal */\n    get _inNode() {\n        return this._analyzerNode;\n    }\n    /** @internal */\n    get minDecibels() {\n        return this._analyzerNode.minDecibels;\n    }\n    set minDecibels(value) {\n        this._analyzerNode.minDecibels = value;\n    }\n    /** @internal */\n    get maxDecibels() {\n        return this._analyzerNode.maxDecibels;\n    }\n    set maxDecibels(value) {\n        this._analyzerNode.maxDecibels = value;\n    }\n    /** @internal */\n    get smoothing() {\n        return this._analyzerNode.smoothingTimeConstant;\n    }\n    set smoothing(value) {\n        this._analyzerNode.smoothingTimeConstant = value;\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._clearArrays();\n        this._byteFrequencyData = null;\n        this._floatFrequencyData = null;\n        this._analyzerNode.disconnect();\n    }\n    /** @internal */\n    getClassName() {\n        return \"_WebAudioAnalyzerSubNode\";\n    }\n    /** @internal */\n    getByteFrequencyData() {\n        if (!this._byteFrequencyData || this._byteFrequencyData.length === 0) {\n            this._byteFrequencyData = new Uint8Array(this._analyzerNode.frequencyBinCount);\n        }\n        this._analyzerNode.getByteFrequencyData(this._byteFrequencyData);\n        return this._byteFrequencyData;\n    }\n    /** @internal */\n    getFloatFrequencyData() {\n        if (!this._floatFrequencyData || this._floatFrequencyData.length === 0) {\n            this._floatFrequencyData = new Float32Array(this._analyzerNode.frequencyBinCount);\n        }\n        this._analyzerNode.getFloatFrequencyData(this._floatFrequencyData);\n        return this._floatFrequencyData;\n    }\n    _clearArrays() {\n        this._byteFrequencyData?.set(_GetEmptyByteFrequencyData());\n        this._floatFrequencyData?.set(_GetEmptyFloatFrequencyData());\n    }\n}\n//# sourceMappingURL=webAudioAnalyzerSubNode.js.map","import { _AbstractAudioSubGraph } from \"../../abstractAudio/subNodes/abstractAudioSubGraph.js\";\nimport { _GetAudioAnalyzerSubNode } from \"../../abstractAudio/subNodes/audioAnalyzerSubNode.js\";\nimport { _GetVolumeAudioSubNode } from \"../../abstractAudio/subNodes/volumeAudioSubNode.js\";\nimport { _HasAudioAnalyzerOptions } from \"../../abstractAudio/subProperties/abstractAudioAnalyzer.js\";\nimport { _CreateVolumeAudioSubNodeAsync } from \"./volumeWebAudioSubNode.js\";\nimport { _CreateAudioAnalyzerSubNodeAsync } from \"./webAudioAnalyzerSubNode.js\";\n/** @internal */\nexport class _WebAudioBaseSubGraph extends _AbstractAudioSubGraph {\n    /** @internal */\n    constructor(owner) {\n        super();\n        this._outputNode = null;\n        this._owner = owner;\n    }\n    /** @internal */\n    async initAsync(options) {\n        const hasAnalyzerOptions = _HasAudioAnalyzerOptions(options);\n        if (hasAnalyzerOptions) {\n            await this.createAndAddSubNodeAsync(\"Analyzer\" /* AudioSubNode.ANALYZER */);\n        }\n        await this.createAndAddSubNodeAsync(\"Volume\" /* AudioSubNode.VOLUME */);\n        await this._createSubNodePromisesResolvedAsync();\n        if (hasAnalyzerOptions) {\n            const analyzerNode = _GetAudioAnalyzerSubNode(this);\n            if (!analyzerNode) {\n                throw new Error(\"No analyzer subnode.\");\n            }\n            analyzerNode.setOptions(options);\n        }\n        const volumeNode = _GetVolumeAudioSubNode(this);\n        if (!volumeNode) {\n            throw new Error(\"No volume subnode.\");\n        }\n        volumeNode.setOptions(options);\n        if (volumeNode.getClassName() !== \"_VolumeWebAudioSubNode\") {\n            throw new Error(\"Not a WebAudio subnode.\");\n        }\n        this._outputNode = volumeNode.node;\n        // Connect the new wrapped WebAudio node to the wrapped downstream WebAudio nodes.\n        // The wrapper nodes are unaware of this change.\n        if (this._outputNode && this._downstreamNodes) {\n            const it = this._downstreamNodes.values();\n            for (let next = it.next(); !next.done; next = it.next()) {\n                const inNode = next.value._inNode;\n                if (inNode) {\n                    this._outputNode.connect(inNode);\n                }\n            }\n        }\n    }\n    /** @internal */\n    get _inNode() {\n        return this._outputNode;\n    }\n    /** @internal */\n    get _outNode() {\n        return this._outputNode;\n    }\n    // Function is async, but throws synchronously. Avoiding breaking changes.\n    // eslint-disable-next-line @typescript-eslint/promise-function-async\n    _createSubNode(name) {\n        switch (name) {\n            case \"Analyzer\" /* AudioSubNode.ANALYZER */:\n                return _CreateAudioAnalyzerSubNodeAsync(this._owner.engine);\n            case \"Volume\" /* AudioSubNode.VOLUME */:\n                return _CreateVolumeAudioSubNodeAsync(this._owner.engine);\n            default:\n                throw new Error(`Unknown subnode name: ${name}`);\n        }\n    }\n    _onSubNodesChanged() {\n        const analyzerNode = _GetAudioAnalyzerSubNode(this);\n        const volumeNode = _GetVolumeAudioSubNode(this);\n        if (analyzerNode && volumeNode) {\n            volumeNode.connect(analyzerNode);\n        }\n    }\n}\n//# sourceMappingURL=webAudioBaseSubGraph.js.map"],"names":["_AbstractAudioSubNode","AbstractNamedAudioNode","name","engine","node","it","next","_VolumeAudioDefaults","_VolumeAudioSubNode","options","_GetVolumeAudioSubNode","subGraph","_GetVolumeAudioProperty","property","_AudioAnalyzerDefaults","_HasAudioAnalyzerOptions","AbstractAudioAnalyzer","_AudioAnalyzerSubNode","_GetAudioAnalyzerSubNode","_SetAudioAnalyzerProperty","value","EmptyByteFrequencyData","EmptyFloatFrequencyData","_GetEmptyByteFrequencyData","_GetEmptyFloatFrequencyData","_AudioAnalyzer","subNode","Logger","AbstractAudioOutNode","nodeType","_AbstractAudioSubGraph","callback","_a","subNodes","_CreateVolumeAudioSubNodeAsync","_VolumeWebAudioSubNode","gainNode","_WebAudioParameterComponent","_CreateAudioAnalyzerSubNodeAsync","_WebAudioAnalyzerSubNode","_WebAudioBaseSubGraph","owner","hasAnalyzerOptions","analyzerNode","volumeNode","inNode"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}