import{f as j,g as k,i as C}from"./i18n-5O2R8uRh.js";import{p as P,f as F,U as I,b as S,j as _,af as v,i as a,a9 as n,c as E,_ as L,s as R}from"./index-bhUlIv2p.js";import{B as T}from"./Block-CWUxteKJ.js";import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";/* empty css                                                        */import{G as W}from"./utils.svelte-Baqu2V3e.js";import{U as q}from"./UploadText-BSp3FKTS.js";import D from"./Gallery-VeKGolRh.js";import{S as H}from"./index-D9STzgM4.js";/* empty css                                                   */import{F as J}from"./FileUpload-pMqcjcv7.js";/* empty css                                              */import{default as De}from"./Example-B_mvormk.js";import"./prism-python-Bb2K859D.js";import"./ImagePaste-CAS9twPF.js";import"./Upload-CzlAHTb6.js";import"./window-BwbneT0F.js";import"./event-modifiers-CdEA5IGF.js";import"./misc-BSG2QtlE.js";import"./BlockLabel-B0lD-lMe.js";import"./IconButton-CbXWacxl.js";import"./svelte-component-Df_c_uts.js";import"./Empty-5TrEX-tI.js";import"./ShareButton-2E8myMWE.js";import"./Community-DDp4fj5H.js";import"./Clear-DimAkCP_.js";import"./Download-CYnkzDbq.js";import"./Image-CR2fNVDq.js";import"./Play-a1iOyiRM.js";import"./IconButtonWrapper-DsFz-pKX.js";import"./FullscreenButton-0A34tPEK.js";import"./Maximize-Dcz8xF4p.js";import"./Upload-DUNHTCuE.js";import"./actions-CwcOrYgf.js";import"./props-BmhlB8PY.js";/* empty css                                             */import"./utils-BsTlurbm.js";import"./ModifyUpload-BwV9897O.js";import"./DownloadLink-BGikjoQ1.js";import"./Edit-Bpj06u9m.js";import"./Undo-CfrxzS-O.js";import"./Image-CfdJwp5Q.js";/* empty css                                            *//* empty css                                                   */import"./Video-Bk_QzOHi.js";import"./index-tFQomdd2.js";import"./File-Dm1qMDFE.js";import"./html-BYxzblBS.js";var K=F("<!> <!>",1);function Te(w,g){P(g,!0);let u=v(void 0);class y extends W{async get_data(){return a(u)&&(await a(u),await L()),await super.get_data()}}const $=j(g,["$$slots","$$events","$$legacy"]),e=new y($);let d=v(!1),b=n(()=>e.props.value===null?!0:e.props.value.length===0);function x(o){if(!e.props.value)return;const{index:i}=o.detail;e.dispatch("delete",o.detail),e.props.value=e.props.value.filter((s,p)=>p!==i),e.dispatch("change",e.props.value)}async function f(o){return(await Promise.all(o.map(async s=>{if(s.path?.toLowerCase().endsWith(".svg")&&s.url){const c=await(await fetch(s.url)).text();return{...s,url:`data:image/svg+xml,${encodeURIComponent(c)}`}}return s}))).map(s=>s.mime_type?.includes("video")?{video:s,caption:null}:{image:s,caption:null})}{let o=n(()=>typeof e.props.height=="number"?e.props.height:void 0);T(w,{get visible(){return e.shared.visible},variant:"solid",padding:!1,get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},allow_overflow:!1,get height(){return a(o)},get fullscreen(){return a(d)},set fullscreen(i){_(d,i,!0)},children:(i,s)=>{var p=K(),c=I(p);H(c,k({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{$$events:{clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}}));var G=R(c,2);{var U=l=>{J(l,{value:null,get root(){return e.shared.root},get label(){return e.shared.label},get max_file_size(){return e.shared.max_file_size},file_count:"multiple",get file_types(){return e.props.file_types},get i18n(){return e.i18n},upload:(...r)=>e.shared.client.upload(...r),stream_handler:(...r)=>e.shared.client.stream(...r),get upload_promise(){return a(u)},set upload_promise(r){_(u,r,!0)},$$events:{upload:async r=>{const m=Array.isArray(r.detail)?r.detail:[r.detail];e.props.value=await f(m),e.dispatch("upload",e.props.value),e.dispatch("change",e.props.value)},error:({detail:r})=>{e.shared.loading_status=e.shared.loading_status||{},e.shared.loading_status.status="error",e.dispatch("error",r)}},children:(r,m)=>{q(r,{get i18n(){return e.i18n},type:"gallery"})},$$slots:{default:!0}})},z=l=>{{let r=n(()=>e.props.buttons.includes("share")),m=n(()=>e.props.buttons.includes("download")),A=n(()=>e.props.buttons.includes("fullscreen"));D(l,{get label(){return e.shared.label},get show_label(){return e.shared.show_label},get columns(){return e.props.columns},get rows(){return e.props.rows},get height(){return e.props.height},get preview(){return e.props.preview},get object_fit(){return e.props.object_fit},get interactive(){return e.shared.interactive},get allow_preview(){return e.props.allow_preview},get show_share_button(){return a(r)},get show_download_button(){return a(m)},get fit_columns(){return e.props.fit_columns},get i18n(){return e.i18n},_fetch:(...t)=>e.shared.client.fetch(...t),get show_fullscreen_button(){return a(A)},get fullscreen(){return a(d)},get root(){return e.shared.root},get file_types(){return e.props.file_types},get max_file_size(){return e.shared.max_file_size},upload:(...t)=>e.shared.client.upload(...t),stream_handler:(...t)=>e.shared.client.stream(...t),get selected_index(){return e.props.selected_index},set selected_index(t){e.props.selected_index=t},get value(){return e.props.value},set value(t){e.props.value=t},$$events:{change:()=>e.dispatch("change"),clear:()=>e.dispatch("change"),select:t=>e.dispatch("select",t.detail),share:t=>e.dispatch("share",t.detail),error:t=>e.dispatch("error",t.detail),preview_open:()=>e.dispatch("preview_open"),preview_close:()=>e.dispatch("preview_close"),fullscreen:({detail:t})=>{_(d,t,!0)},delete:x,upload:async t=>{const B=Array.isArray(t.detail)?t.detail:[t.detail],h=await f(B);e.props.value=e.props.value?[...e.props.value,...h]:h,e.dispatch("upload",h),e.dispatch("change",e.props.value)}}})}};C(G,l=>{e.shared.interactive&&a(b)?l(U):l(z,!1)})}S(i,p)},$$slots:{default:!0}})}E()}export{De as BaseExample,D as BaseGallery,Te as default};
//# sourceMappingURL=Index-DeW-xRFm.js.map
