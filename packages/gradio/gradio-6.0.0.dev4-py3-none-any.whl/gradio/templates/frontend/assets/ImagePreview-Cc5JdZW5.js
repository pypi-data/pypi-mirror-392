import{p as m,d as $,i as b,e as ee,a as te}from"./i18n-5O2R8uRh.js";import{p as re,R as ae,f as M,U as q,i as p,V as B,b as P,c as le,g,Q as d,d as s,s as w,h as z,r as D,m as ne,j as se,t as oe,e as ie}from"./index-bhUlIv2p.js";import{b as y}from"./misc-BSG2QtlE.js";import{u as ue}from"./utils.svelte-Baqu2V3e.js";/* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";import{B as ce}from"./BlockLabel-B0lD-lMe.js";import{D as de}from"./DownloadLink-BGikjoQ1.js";import{I as _e}from"./IconButton-CbXWacxl.js";import{E as fe}from"./Empty-5TrEX-tI.js";import{S as me}from"./ShareButton-2E8myMWE.js";import{D as ge}from"./Download-CYnkzDbq.js";import{I as L}from"./Image-CR2fNVDq.js";import{I as ve}from"./IconButtonWrapper-DsFz-pKX.js";import{F as he}from"./FullscreenButton-0A34tPEK.js";import{I as be}from"./Image-CfdJwp5Q.js";/* empty css                                                   */const pe=_=>{let t;if(_.currentTarget instanceof Element)t=_.currentTarget.querySelector("img");else return[NaN,NaN];const r=t.getBoundingClientRect(),u=t.naturalWidth/r.width,o=t.naturalHeight/r.height;if(u>o){const l=t.naturalHeight/u,v=(r.height-l)/2;var a=Math.round((_.clientX-r.left)*u),f=Math.round((_.clientY-r.top-v)*u)}else{const l=t.naturalWidth/o,v=(r.width-l)/2;var a=Math.round((_.clientX-r.left-v)*o),f=Math.round((_.clientY-r.top)*o)}return a<0||a>=t.naturalWidth||f<0||f>=t.naturalHeight?null:[a,f]};var we=M("<!> <!> <!>",1),ye=M('<div class="image-container svelte-12vrxzd"><!> <button class="svelte-12vrxzd"><div><!></div></button></div>'),Ie=M("<!> <!>",1);function xe(_,t){re(t,!1);let r=m(t,"value",12),u=m(t,"label",12,void 0),o=m(t,"show_label",12),a=m(t,"buttons",12,null),f=m(t,"selectable",12,!1),l=m(t,"i18n",12),v=m(t,"display_icon_button_wrapper_top_corner",12,!1),I=m(t,"fullscreen",12,!1);const O=ae(),X=e=>{let c=pe(e);c&&O("select",{index:c,value:null})};let E=ne();var Y={get value(){return r()},set value(e){r(e),g()},get label(){return u()},set label(e){u(e),g()},get show_label(){return o()},set show_label(e){o(e),g()},get buttons(){return a()},set buttons(e){a(e),g()},get selectable(){return f()},set selectable(e){f(e),g()},get i18n(){return l()},set i18n(e){l(e),g()},get display_icon_button_wrapper_top_corner(){return v()},set display_icon_button_wrapper_top_corner(e){v(e),g()},get fullscreen(){return I()},set fullscreen(e){I(e),g()}};$();var H=Ie(),N=q(H);{let e=B(()=>(s(o()),s(u()),s(l()),d(()=>o()?u()||l()("image.image"):"")));ce(N,{get show_label(){return o()},get Icon(){return L},get label(){return p(e)}})}var C=w(N,2);{var Q=e=>{fe(e,{unpadded_box:!0,size:"large",children:(c,x)=>{L(c)},$$slots:{default:!0}})},U=e=>{var c=ye(),x=z(c);ve(x,{get display_top_corner(){return v()},children:(h,Se)=>{var W=we(),j=q(W);{var A=n=>{he(n,{get fullscreen(){return I()},$$events:{fullscreen(i){y.call(this,t,i)}}})};b(j,n=>{s(a()),d(()=>a()===null?!0:a().includes("fullscreen"))&&n(A)})}var F=w(j,2);{var G=n=>{{let i=B(()=>(s(r()),d(()=>r().orig_name||"image")));de(n,{get href(){return s(r()),d(()=>r().url)},get download(){return p(i)},children:(R,ke)=>{{let Z=B(()=>(s(l()),d(()=>l()("common.download"))));_e(R,{get Icon(){return ge},get label(){return p(Z)}})}},$$slots:{default:!0}})}};b(F,n=>{s(a()),d(()=>a()===null?!0:a().includes("download"))&&n(G)})}var J=w(F,2);{var K=n=>{me(n,{get i18n(){return l()},formatter:async i=>i?`<img src="${await ue(i)}" />`:"",get value(){return r()},$$events:{share(i){y.call(this,t,i)},error(i){y.call(this,t,i)}}})};b(J,n=>{s(a()),d(()=>a()===null?!0:a().includes("share"))&&n(K)})}P(h,W)},$$slots:{default:!0}});var S=w(x,2),k=z(S);let T;var V=z(k);be(V,{get src(){return s(r()),d(()=>r().url)},restProps:{loading:"lazy",alt:""},$$events:{load(h){y.call(this,t,h)}}}),D(k),D(S),D(c),ee(c,h=>se(E,h),()=>p(E)),oe(()=>T=te(k,1,"image-frame svelte-12vrxzd",null,T,{selectable:f()})),ie("click",S,X),P(e,c)};b(C,e=>{s(r()),d(()=>r()==null||!r()?.url)?e(Q):e(U,!1)})}return P(_,H),le(Y)}const Ye=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{xe as I,Ye as a,pe as g};
//# sourceMappingURL=ImagePreview-Cc5JdZW5.js.map
