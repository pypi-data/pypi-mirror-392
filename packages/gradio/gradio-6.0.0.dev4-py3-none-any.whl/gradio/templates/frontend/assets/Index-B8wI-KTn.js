import{p as y,d as je,i as ve,c as F,e as pe,r as qe,t as Ae,a as Ie,u as Oe,f as Qe,g as Ue}from"./i18n-5O2R8uRh.js";import{p as xe,R as We,ac as ze,l as K,d as N,i as a,m as k,a as Je,f as O,e as h,U as ye,$ as Ke,t as A,b as G,c as ke,g as $,aD as he,s as x,_ as Ne,j as _,k as fe,W as Ve,h as w,r as g,a9 as V,O as me,Q as ge,aA as Ze,af as et,ag as tt,ah as at}from"./index-bhUlIv2p.js";import{G as rt}from"./utils.svelte-Baqu2V3e.js";import{a as st}from"./actions-CwcOrYgf.js";import{b as nt}from"./input-BWfFfFnB.js";import{b as be}from"./misc-BSG2QtlE.js";import{t as I,E as lt}from"./tinycolor-JI4GWIK_.js";/* empty css                                                        */import{B as ot}from"./BlockTitle-FeDv4ORC.js";import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";import{B as it}from"./Block-CWUxteKJ.js";import{S as ut}from"./index-D9STzgM4.js";/* empty css                                                   */import{default as At}from"./Example-6aoekeYr.js";import"./Info-BxoDwKiQ.js";import"./MarkdownCode-B8rUXPOm.js";import"./html-BYxzblBS.js";import"./prism-python-Bb2K859D.js";import"./IconButton-CbXWacxl.js";import"./svelte-component-Df_c_uts.js";import"./Clear-DimAkCP_.js";function ct(o,s){const i=e=>{o&&!o.contains(e.target)&&!e.defaultPrevented&&s(e)};return document.addEventListener("mousedown",i,!0),{destroy(){document.removeEventListener("mousedown",i,!0)}}}function we(o){const s=o.s,i=o.v;let e=s*i;const f=o.h/60;let u=e*(1-Math.abs(f%2-1));const c=i-e;e=e+c,u=u+c;const b=Math.floor(f)%6,v=[e,u,c,c,u,e][b],p=[u,e,e,u,c,c][b],B=[c,c,u,e,e,u][b];return`rgba(${v*255}, ${p*255}, ${B*255}, ${o.a})`}function dt(o,s){return s==="hex"?I(o).toHexString():s==="rgb"?I(o).toRgbString():I(o).toHslString()}var _t=O("<button> </button>"),vt=O('<div class="color-picker svelte-nbn1m9"><div class="color-gradient svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="hue-slider svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="input svelte-nbn1m9"><button class="swatch svelte-nbn1m9"></button> <div><div class="input-wrap svelte-nbn1m9"><input type="text" class="svelte-nbn1m9"/> <button class="eyedropper svelte-nbn1m9"><!></button></div> <div class="buttons svelte-nbn1m9"></div></div></div></div>'),pt=O('<!> <button class="dialog-button svelte-nbn1m9"></button> <!>',1);function ht(o,s){xe(s,!1);const i=k();let e=y(s,"value",12,"#000000"),f=y(s,"label",12),u=y(s,"info",12,void 0),c=y(s,"disabled",12,!1),b=y(s,"show_label",12,!0),v=y(s,"current_mode",12,"hex"),p=y(s,"dialog_open",12,!1),B=k(!1),E=k(),M=k();const C=We();let R=k([0,0]),d=null,P=!1,L=[0,0],H=k(0),Q=k(0),m=null,Y=!1;function $e(t){m=t.currentTarget.getBoundingClientRect(),Y=!0,Z(t.clientX)}function Z(t){if(!m)return;const r=Math.max(0,Math.min(t-m.left,m.width));_(Q,r);const l=r/m.width*360;_(H,l),e(we({h:l,s:L[0],v:L[1],a:1})),C("input")}function ee(t,r){if(!d)return;const l=Math.max(0,Math.min(t-d.left,d.width)),S=Math.max(0,Math.min(r-d.top,d.height));_(R,[l,S]);const D={h:a(H)*1,s:l/d.width,v:1-S/d.height,a:1};L=[D.s,D.v],e(we(D)),C("input")}function Be(t){P=!0,d=t.currentTarget.getBoundingClientRect(),ee(t.clientX,t.clientY)}function Ee(t){P&&ee(t.clientX,t.clientY),Y&&Z(t.clientX)}function Me(){P=!1,Y=!1}async function te(t){if(P||Y||(await Ne(),!t)||(!d&&a(E)&&(d=a(E).getBoundingClientRect()),!m&&a(M)&&(m=a(M).getBoundingClientRect()),!d||!m))return;const r=I(t).toHsv(),l=r.s*d.width,S=(1-r.v)*d.height;_(R,[l,S]),L=[r.s,r.v],_(H,r.h),_(Q,r.h/360*m.width)}function Ce(){new EyeDropper().open().then(r=>{e(r.sRGBHex)}),C("input")}const Re=[["Hex","hex"],["RGB","rgb"],["HSL","hsl"]];ze(async()=>{_(B,window!==void 0&&!!window.EyeDropper)});function Se(){p(!1)}function De(){C("selected",a(i)),C("close")}K(()=>(N(e()),N(v())),()=>{_(i,dt(e(),v()))}),K(()=>a(i),()=>{a(i)&&C("selected",a(i))}),K(()=>N(e()),()=>{te(e())}),Je();var He={get value(){return e()},set value(t){e(t),$()},get label(){return f()},set label(t){f(t),$()},get info(){return u()},set info(t){u(t),$()},get disabled(){return c()},set disabled(t){c(t),$()},get show_label(){return b()},set show_label(t){b(t),$()},get current_mode(){return v()},set current_mode(t){v(t),$()},get dialog_open(){return p()},set dialog_open(t){p(t),$()}};je();var ae=pt();h("mousemove",he,Ee),h("mouseup",he,Me);var re=ye(ae);ot(re,{get show_label(){return b()},get info(){return u()},children:(t,r)=>{Ve();var l=Ke();A(()=>fe(l,f())),G(t,l)},$$slots:{default:!0}});var j=x(re,2);let se;var Te=x(j,2);{var Xe=t=>{var r=vt(),l=w(r),S=w(l);let D;g(l),pe(l,n=>_(E,n),()=>a(E));var T=x(l,2),Fe=w(T);let ne;g(T),pe(T,n=>_(M,n),()=>a(M));var le=x(T,2),U=w(le);let oe;var ie=x(U,2),W=w(ie),q=w(W);qe(q);var z=x(q,2),Ge=w(z);{var Pe=n=>{lt(n)};ve(Ge,n=>{a(B)&&n(Pe)})}g(z),g(W);var ue=x(W,2);Ae(ue,5,()=>Re,Oe,(n,J,mt,gt)=>{var ce=V(()=>Ze(a(J),2));let Le=()=>a(ce)[0],de=()=>a(ce)[1];var X=_t();let _e;var Ye=w(X,!0);g(X),A(()=>{_e=Ie(X,1,"button svelte-nbn1m9",null,_e,{active:v()===de()}),fe(Ye,Le())}),h("click",X,()=>v(de())),G(n,X)}),g(ue),g(ie),g(le),g(r),me(()=>h("focus",r,function(n){be.call(this,s,n)})),me(()=>h("blur",r,function(n){be.call(this,s,n)})),st(r,(n,J)=>ct?.(n,J),()=>Se),A(()=>{F(l,`--hue:${a(H)??""}`),D=F(S,"",D,{transform:`translate(${a(R),ge(()=>a(R)[0])??""}px,${a(R),ge(()=>a(R)[1])??""}px)`,background:e()}),ne=F(Fe,"",ne,{background:"hsl("+a(H)+", 100%, 50%)",transform:`translateX(${a(Q)??""}px)`}),oe=F(U,"",oe,{background:e()})}),h("mousedown",l,Be),h("mousedown",T,$e),h("click",U,De),nt(q,()=>a(i),n=>_(i,n)),h("change",q,n=>{e(n.currentTarget.value)}),h("click",z,Ce),G(t,r)};ve(Te,t=>{p()&&t(Xe)})}return A(()=>{j.disabled=c(),se=F(j,"",se,{background:e()})}),h("click",j,()=>{te(e()),p(!p())}),G(o,ae),ke(He)}var ft=O("<!> <!>",1);function Yt(o,s){xe(s,!0);let i=Qe(s,["$$slots","$$events","$$legacy"]);const e=new rt(i);e.props.value=e.props.value??"#000000";let f=et(tt(e.props.value)),u=V(()=>e.shared.label||e.i18n("color_picker.color_picker"));at(()=>{console.log("EFFECT: checking for change",e.props.value,a(f)),a(f)!==e.props.value&&(console.log("EFFECT: value changed, dispatching change"),_(f,e.props.value,!0),e.dispatch("change"))}),it(o,{get visible(){return e.shared.visible},get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},children:(c,b)=>{var v=ft(),p=ye(v);ut(p,Ue({get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n}},()=>e.shared.loading_status,{$$events:{clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}}));var B=x(p,2);{let E=V(()=>!e.shared.interactive);ht(B,{get label(){return a(u)},get info(){return e.props.info},get show_label(){return e.shared.show_label},get disabled(){return a(E)},get value(){return e.props.value},set value(M){e.props.value=M},$$events:{input:()=>e.dispatch("input"),submit:()=>e.dispatch("submit"),blur:()=>e.dispatch("blur"),focus:()=>e.dispatch("focus")}})}G(c,v)},$$slots:{default:!0}}),ke()}export{ht as BaseColorPicker,At as BaseExample,Yt as default};
//# sourceMappingURL=Index-B8wI-KTn.js.map
