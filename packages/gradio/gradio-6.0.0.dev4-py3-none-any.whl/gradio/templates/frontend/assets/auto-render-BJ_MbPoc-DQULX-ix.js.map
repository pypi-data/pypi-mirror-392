{"version":3,"file":"auto-render-BJ_MbPoc-DQULX-ix.js","sources":["../../../../js/dataframe-interim/dist/auto-render-BJ_MbPoc.js"],"sourcesContent":["import katex from \"./katex-CyKMQRKW.js\";\nvar findEndOfMath = function findEndOfMath2(delimiter, text, startIndex) {\n  var index = startIndex;\n  var braceLevel = 0;\n  var delimLength = delimiter.length;\n  while (index < text.length) {\n    var character = text[index];\n    if (braceLevel <= 0 && text.slice(index, index + delimLength) === delimiter) {\n      return index;\n    } else if (character === \"\\\\\") {\n      index++;\n    } else if (character === \"{\") {\n      braceLevel++;\n    } else if (character === \"}\") {\n      braceLevel--;\n    }\n    index++;\n  }\n  return -1;\n};\nvar escapeRegex = function escapeRegex2(string) {\n  return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\nvar amsRegex = /^\\\\begin{/;\nvar splitAtDelimiters = function splitAtDelimiters2(text, delimiters) {\n  var index;\n  var data = [];\n  var regexLeft = new RegExp(\"(\" + delimiters.map((x) => escapeRegex(x.left)).join(\"|\") + \")\");\n  while (true) {\n    index = text.search(regexLeft);\n    if (index === -1) {\n      break;\n    }\n    if (index > 0) {\n      data.push({\n        type: \"text\",\n        data: text.slice(0, index)\n      });\n      text = text.slice(index);\n    }\n    var i = delimiters.findIndex((delim) => text.startsWith(delim.left));\n    index = findEndOfMath(delimiters[i].right, text, delimiters[i].left.length);\n    if (index === -1) {\n      break;\n    }\n    var rawData = text.slice(0, index + delimiters[i].right.length);\n    var math = amsRegex.test(rawData) ? rawData : text.slice(delimiters[i].left.length, index);\n    data.push({\n      type: \"math\",\n      data: math,\n      rawData,\n      display: delimiters[i].display\n    });\n    text = text.slice(index + delimiters[i].right.length);\n  }\n  if (text !== \"\") {\n    data.push({\n      type: \"text\",\n      data: text\n    });\n  }\n  return data;\n};\nvar renderMathInText = function renderMathInText2(text, optionsCopy) {\n  var data = splitAtDelimiters(text, optionsCopy.delimiters);\n  if (data.length === 1 && data[0].type === \"text\") {\n    return null;\n  }\n  var fragment = document.createDocumentFragment();\n  for (var i = 0; i < data.length; i++) {\n    if (data[i].type === \"text\") {\n      fragment.appendChild(document.createTextNode(data[i].data));\n    } else {\n      var span = document.createElement(\"span\");\n      var math = data[i].data;\n      optionsCopy.displayMode = data[i].display;\n      try {\n        if (optionsCopy.preProcess) {\n          math = optionsCopy.preProcess(math);\n        }\n        katex.render(math, span, optionsCopy);\n      } catch (e) {\n        if (!(e instanceof katex.ParseError)) {\n          throw e;\n        }\n        optionsCopy.errorCallback(\"KaTeX auto-render: Failed to parse `\" + data[i].data + \"` with \", e);\n        fragment.appendChild(document.createTextNode(data[i].rawData));\n        continue;\n      }\n      fragment.appendChild(span);\n    }\n  }\n  return fragment;\n};\nvar renderElem = function renderElem2(elem, optionsCopy) {\n  for (var i = 0; i < elem.childNodes.length; i++) {\n    var childNode = elem.childNodes[i];\n    if (childNode.nodeType === 3) {\n      var textContentConcat = childNode.textContent;\n      var sibling = childNode.nextSibling;\n      var nSiblings = 0;\n      while (sibling && sibling.nodeType === Node.TEXT_NODE) {\n        textContentConcat += sibling.textContent;\n        sibling = sibling.nextSibling;\n        nSiblings++;\n      }\n      var frag = renderMathInText(textContentConcat, optionsCopy);\n      if (frag) {\n        for (var j = 0; j < nSiblings; j++) {\n          childNode.nextSibling.remove();\n        }\n        i += frag.childNodes.length - 1;\n        elem.replaceChild(frag, childNode);\n      } else {\n        i += nSiblings;\n      }\n    } else if (childNode.nodeType === 1) {\n      (function() {\n        var className = \" \" + childNode.className + \" \";\n        var shouldRender = optionsCopy.ignoredTags.indexOf(childNode.nodeName.toLowerCase()) === -1 && optionsCopy.ignoredClasses.every((x) => className.indexOf(\" \" + x + \" \") === -1);\n        if (shouldRender) {\n          renderElem2(childNode, optionsCopy);\n        }\n      })();\n    }\n  }\n};\nvar renderMathInElement = function renderMathInElement2(elem, options) {\n  if (!elem) {\n    throw new Error(\"No element provided to render\");\n  }\n  var optionsCopy = {};\n  for (var option in options) {\n    if (options.hasOwnProperty(option)) {\n      optionsCopy[option] = options[option];\n    }\n  }\n  optionsCopy.delimiters = optionsCopy.delimiters || [\n    {\n      left: \"$$\",\n      right: \"$$\",\n      display: true\n    },\n    {\n      left: \"\\\\(\",\n      right: \"\\\\)\",\n      display: false\n    },\n    // LaTeX uses $…$, but it ruins the display of normal `$` in text:\n    // {left: \"$\", right: \"$\", display: false},\n    // $ must come after $$\n    // Render AMS environments even if outside $$…$$ delimiters.\n    {\n      left: \"\\\\begin{equation}\",\n      right: \"\\\\end{equation}\",\n      display: true\n    },\n    {\n      left: \"\\\\begin{align}\",\n      right: \"\\\\end{align}\",\n      display: true\n    },\n    {\n      left: \"\\\\begin{alignat}\",\n      right: \"\\\\end{alignat}\",\n      display: true\n    },\n    {\n      left: \"\\\\begin{gather}\",\n      right: \"\\\\end{gather}\",\n      display: true\n    },\n    {\n      left: \"\\\\begin{CD}\",\n      right: \"\\\\end{CD}\",\n      display: true\n    },\n    {\n      left: \"\\\\[\",\n      right: \"\\\\]\",\n      display: true\n    }\n  ];\n  optionsCopy.ignoredTags = optionsCopy.ignoredTags || [\"script\", \"noscript\", \"style\", \"textarea\", \"pre\", \"code\", \"option\"];\n  optionsCopy.ignoredClasses = optionsCopy.ignoredClasses || [];\n  optionsCopy.errorCallback = optionsCopy.errorCallback || console.error;\n  optionsCopy.macros = optionsCopy.macros || {};\n  renderElem(elem, optionsCopy);\n};\nexport {\n  renderMathInElement as default\n};\n//# sourceMappingURL=auto-render-BJ_MbPoc.js.map\n"],"names":["findEndOfMath","delimiter","text","startIndex","index","braceLevel","delimLength","character","escapeRegex","string","amsRegex","splitAtDelimiters","delimiters","data","regexLeft","x","i","delim","rawData","math","renderMathInText","optionsCopy","fragment","span","katex","e","renderElem","renderElem2","elem","childNode","textContentConcat","sibling","nSiblings","frag","j","className","shouldRender","renderMathInElement","options","option"],"mappings":"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"}