const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ApiDocs-BfWLhyd2.js","./i18n-5O2R8uRh.js","./index-bhUlIv2p.js","./index-DcPzVlJ5.css","./i18n-DS6k9oVZ.css","./misc-BSG2QtlE.js","./clear-BGjL_w00.js","./Button-C16n7Lmu.js","./Image-CfdJwp5Q.js","./Image-Da_XA0w6.css","./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js","./prism-python-Bb2K859D.js","./MarkdownCode-Ca68FeML.css","./Button-BZ4d-rtD.css","./IconButtonWrapper-Ck0DJAHY.css","./ImagePreview-CCVfwC4m.css","./index-D9STzgM4.js","./IconButton-CbXWacxl.js","./svelte-component-Df_c_uts.js","./Clear-DimAkCP_.js","./StreamingBar-K0YZHDYh.css","./Block-CWUxteKJ.js","./input-BWfFfFnB.js","./html-BYxzblBS.js","./size-DD_UOoO3.js","./utils.svelte-Baqu2V3e.js","./state.svelte-DwZc0XUq.js","./index-VAFKmIBi.js","./event-modifiers-CdEA5IGF.js","./index-DzZk3aHY.js","./ApiDocs-B8D1C-vr.css","./ApiRecorder-C-hQipYz.js","./ApiRecorder-CoSLrx_1.css","./Settings-eooFy0hm.js","./Dropdown-cdNuGM3A.js","./window-BwbneT0F.js","./BlockTitle-FeDv4ORC.js","./Info-BxoDwKiQ.js","./MarkdownCode-B8rUXPOm.js","./DropdownArrow-CjmTE0-H.js","./Dropdown-CRhvQE-V.css","./Checkbox-0ALqXaAd.js","./Checkbox-cY9ucVXS.css","./Settings-CLQaonub.css","./Example-BeU1J4ps.css"])))=>i.map(i=>d[i]);
import{aS as ct,a4 as _t,aT as ut,q as me,ay as we,I as ye,B as We,i as g,u as ft,aK as gt,av as vt,o as ht,aU as pt,A as mt,C as bt,D as Pe,p as He,aV as wt,X as se,U as q,b as w,c as Xe,aW as yt,aE as xt,af as Ue,ag as qe,ac as kt,f as V,h as A,s as b,a9 as Ce,t as H,j as U,k as oe,e as X,aX as Ct,r as D,aj as pe,$ as Ie}from"./index-bhUlIv2p.js";import{t as Et,u as St,i as E,N as Je,p as Be,m as Ee,e as Lt,c as Ge,q as zt,O as Ot,$ as Rt,a as Ve,b as J,x as Mt,A as At}from"./i18n-5O2R8uRh.js";import{h as Dt}from"./html-BYxzblBS.js";import{c as be}from"./svelte-component-Df_c_uts.js";import{b as jt}from"./size-DD_UOoO3.js";/* empty css                                                   *//* empty css                                                        */import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";import{b as Ft}from"./utils.svelte-Baqu2V3e.js";import{L as Tt,T as Pt}from"./state.svelte-DwZc0XUq.js";import{AppTree as Ut}from"./index-DzZk3aHY.js";function de(o,e=[],i=[],s){var t=ct(),a=_t,c=!t.is_pending();t.update_pending_count(1),a.increment(c);var _=me;if(_){ft();var d=We,v=gt(!1);ye(v)}ut(e,[],i,T=>{_&&(we(!0),ye(d));try{for(const f of T)g(f);s(o,...T)}finally{_&&we(!1),t.update_pending_count(-1),a.decrement(c)}})}function qt(o,e){let i=null,s=me;var t;if(me){i=We;for(var a=mt(document.head);a!==null&&(a.nodeType!==bt||a.data!==o);)a=Pe(a);if(a===null)we(!1);else{var c=Pe(a);a.remove(),ye(c)}}me||(t=document.head.appendChild(vt()));try{ht(()=>e(t),pt)}finally{s&&(we(!0),ye(i))}}function Ke(o,e){He(e,!0);var i,s=wt([async()=>i=await yt(()=>e.node.component)]),t=se(),a=q(t);de(a,[s[0]],[()=>e.node&&g(i)],(c,_)=>{var d=v=>{var T=se(),f=q(T);de(f,[s[0]],[()=>e.node.props.shared_props.visible],(S,h)=>{var N=l=>{var L=se(),p=q(L);de(p,[s[0]],void 0,P=>{be(p,()=>g(i).default,(x,m)=>{m(x,{get shared_props(){return e.node.props.shared_props},get props(){return e.node.props.props},children:(j,Z)=>{var z=se(),ie=q(z);de(ie,[s[0]],[()=>e.node.children&&e.node.children.length],(_e,te)=>{var ae=I=>{var ue=se(),xe=q(ue);de(xe,[s[0]],[()=>e.node.children],(ke,fe)=>{Et(ke,17,()=>g(fe),St,(K,ge)=>{Ke(K,{get node(){return g(ge)}})})}),w(I,ue)};E(_e,I=>{g(te)&&I(ae)})}),w(j,z)},$$slots:{default:!0}})})}),w(l,L)};E(S,l=>{g(h)&&l(N)})}),w(v,T)};E(c,v=>{g(_)&&v(d)})}),w(o,t),Xe()}const It="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Bt="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",Gt="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",Vt="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";let ce=!1,ee=null,ze=[],Nt=0,le={},Zt,Le,Wt=null,Se=[];async function Ht(){if(!ce)try{const o=document.title;document.title="[Sharing] Gradio Tab";const e=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0,selfBrowserSurface:"include"});document.title=o;const i={videoBitsPerSecond:5e6};ee=new MediaRecorder(e,i),ze=[],le={},ee.ondataavailable=Jt,ee.onstop=Kt,ee.start(1e3),ce=!0,Nt=Date.now()}catch(o){Le("Recording Error","Failed to start recording: "+o.message,"error")}}function Xt(){!ce||!ee||(ee.stop(),ce=!1)}function Jt(o){o.data.size>0&&ze.push(o.data)}function Kt(){ce=!1;const o=new Blob(ze,{type:"video/mp4"});Qt(o),(ee?.stream?.getTracks()||[]).forEach(i=>i.stop())}async function Qt(o){try{Le("Processing video","This may take a few seconds...","info");const e=new FormData;e.append("video",o,"recording.mp4"),le.start!==void 0&&le.end!==void 0&&(e.append("remove_segment_start",le.start.toString()),e.append("remove_segment_end",le.end.toString())),Se.length>0&&e.append("zoom_effects",JSON.stringify(Se));const i=await fetch(Zt+"/gradio_api/process_recording",{method:"POST",body:e});if(!i.ok)throw new Error(`Server returned ${i.status}: ${i.statusText}`);const s=await i.blob(),t=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;Ne(s,t),Se=[]}catch{Le("Processing Error","Failed to process recording. Saving original version.","warning");const i=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;Ne(o,i)}}function Ne(o,e){const i=URL.createObjectURL(o),s=document.createElement("a");s.style.display="none",s.href=i,s.download=e,document.body.appendChild(s),s.click(),setTimeout(()=>{document.body.removeChild(s),URL.revokeObjectURL(i)},100)}const Yt=/^'([^]+)'$/,Ze=Symbol("NOVALUE");class $t{id;inputs;outputs;cancels;pending=!1;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;functions;constructor(e){this.id=e.id,this.original_trigger_id=e.id,this.inputs=e.inputs,this.outputs=e.outputs,this.connection_type=e.connection,this.functions={frontend:e.js?is(e.js,e.backend_fn,e.inputs.length,e.outputs.length):void 0,backend:e.backend_fn,backend_js:e.js_implementation?new Je(`let result = await (${e.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=e.targets,this.cancels=e.cancels,this.trigger_modes=e.trigger_mode,this.show_progress_on=e.show_progress_on||null;for(let i=0;i<e.event_specific_args?.length;i++){const s=e.event_specific_args[i];this.event_args[s]=e[s]??null}}async run(e,i,s,t){let a=i;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...a)}:(this.functions.frontend&&(a=await this.functions.frontend(i)),this.functions.backend?{type:"submit",data:e.submit(this.id,a,s,t)}:this.functions.frontend?{type:"data",data:a}:{type:"void",data:null})}add_trigger(e,i){this.triggers.push([e,i])}get_triggers(){return{success:this.triggers.filter(([,e])=>e==="success").map(([e])=>e),failure:this.triggers.filter(([,e])=>e==="failure").map(([e])=>e),all:this.triggers.filter(([,e])=>e==="all").map(([e])=>e)}}}class es{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new Tt;constructor(e,i,s,t,a,c,_){const{by_id:d,by_event:v}=this.create(e);this.dependencies_by_event=v,this.dependencies_by_fn=d,this.client=i,this.update_state_cb=s,this.get_state_cb=t,this.rerender_cb=a,this.log_cb=c,this.add_to_api_calls=_;for(const[T,f]of this.dependencies_by_fn)for(const[S]of f.targets)this.set_event_args(S,f.event_args);this.register_loading_stati(d)}register_loading_stati(e){for(const[i,s]of e)this.loading_stati.register(s.id,s.show_progress_on||s.outputs,s.inputs)}clear_loading_status(e){this.loading_stati.clear(e)}async update_loading_stati_state(){for(const[e,i]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(e),{loading_status:i},!1)}dispatch_state_change_events(e){if(e.changed_state_ids)for(const i of e.changed_state_ids)this.dependencies_by_event.get("change-"+i)?.forEach(t=>{this.dispatch({type:"fn",fn_index:t.id,target_id:i,event_data:null})})}async dispatch(e){let i;if(e.type==="fn"){const s=this.dependencies_by_fn.get(e.fn_index);s&&(i=[s])}else i=this.dependencies_by_event.get(`${e.event_name}-${e.target_id}`);for(let s=0;s<(i?.length||0);s++){const t=i?i[s]:void 0;if(t){this.cancel(t.cancels);const a=ss(t.trigger_modes,this.submissions.has(t.id));if(a==="skip")continue;if(a==="defer"){this.queue.add(t.id);continue}t.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:t.id,stream_state:null}),this.update_loading_stati_state());const c=await this.gather_state(t.inputs),_=await Promise.all(t.targets.map(([f])=>this.set_event_args(f,t.event_args))),{success:d,failure:v,all:T}=t.get_triggers();try{let f=null;if(e.target_id!==void 0||e.type==="event"?f=e.target_id||null:f=t.original_trigger_id,t.connection_type==="stream"&&this.submissions.has(t.id)){const h=this.submissions.get(t.id);let N={fn_index:t.id,data:c,event_data:e.event_data};h.send_chunk(N),_.forEach(l=>l());continue}this.add_to_api_calls({fn_index:t.id,data:c,event_data:e.event_data,trigger_id:f});const S=await t.run(this.client,c,e.event_data,f);if(S.type==="void")_.forEach(h=>h());else if(S.type==="data")this.handle_data(t.outputs,S.data),_.forEach(h=>h());else{let h=null;t.connection_type==="stream"&&!this.submissions.has(t.id)&&(h="waiting"),this.submissions.set(t.id,S.data);let N=0;e:for await(const l of S.data)if(N===0&&t.inputs.forEach(L=>{this.update_state_cb(L,{loading_status:{validation_error:null}},!1)}),N+=1,l!==null){if(l.type==="data"&&this.handle_data(t.outputs,l.data),l.type==="status"){l.original_msg==="process_starts"&&t.connection_type==="stream"&&(h="open");const{fn_index:L,...p}=l;if(l.stage==="complete"){h="closed",d.forEach(P=>{this.dispatch({type:"fn",fn_index:P,event_data:null,target_id:f})}),this.dispatch_state_change_events(l),this.loading_stati.update({...p,status:p.stage,fn_index:t.id,stream_state:h}),this.update_loading_stati_state();break e}else if(l.stage==="generating")this.dispatch_state_change_events(l),this.loading_stati.update({...p,status:p.stage,fn_index:t.id,stream_state:h}),this.update_loading_stati_state();else if(l.stage==="error"){if(Array.isArray(l?.message)){l.message.forEach((x,m)=>{this.update_state_cb(t.inputs[m],{loading_status:{validation_error:x.is_valid?null:x.message,show_validation_error:!0}},!1)}),t.outputs.forEach(x=>{t.inputs.includes(x)||this.update_state_cb(x,{loading_status:{status:null}},!1)}),_.forEach(x=>x()),this.submissions.delete(t.id),this.queue.has(t.id)&&(this.queue.delete(t.id),this.dispatch(e));return}const P=l?.message?.replace(Yt,(x,m)=>m);throw this.log_cb(l._title??"Error",P,L,"error",p.duration,p.visible),new Error("Dependency function failed")}else this.loading_stati.update({...p,status:p.stage,fn_index:t.id,stream_state:h}),this.update_loading_stati_state()}if(l.type==="render"){const{layout:L,components:p,render_id:P,dependencies:x}=l.data;this.rerender_cb(p,L);const{by_id:m,by_event:j}=this.create(x);this.register_loading_stati(m),m.forEach(z=>this.dependencies_by_fn.set(z.id,z)),j.forEach((z,ie)=>this.dependencies_by_event.set(ie,z));const Z=this.render_id_deps.get(P);Z&&Z.forEach(z=>{m.has(z)||this.dependencies_by_fn.delete(z)}),this.render_id_deps.set(P,new Set(Array.from(m.keys()))),this.register_loading_stati(m);break e}l.type==="log"&&this.handle_log(l)}T.forEach(l=>{this.dispatch({type:"fn",fn_index:l,event_data:null,target_id:f})}),_.forEach(l=>l()),this.submissions.delete(t.id),this.queue.has(t.id)&&(this.queue.delete(t.id),this.dispatch(e))}}catch{this.loading_stati.update({status:"error",fn_index:t.id,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(t.id),v.forEach(S=>{this.dispatch({type:"fn",fn_index:S,event_data:null})})}}}}create(e){const i=new Map,s=new Map,t=[];for(const a of e){const c=new $t(a);for(const[_,d]of a.targets)s.has(`${d}-${_}`)||s.set(`${d}-${_}`,[]),s.get(`${d}-${_}`)?.push(c);if(i.set(a.id,c),a.trigger_after!==void 0){const _=a.trigger_only_on_failure?"failure":a.trigger_only_on_success?"success":"all";t.push([a.id,a.trigger_after,_])}}for(const[a,c,_]of t){const d=i.get(c);d&&(d.add_trigger(a,_),d.original_trigger_id=as(e,c))}return{by_id:i,by_event:s}}handle_log(e){const{title:i,log:s,fn_index:t,level:a,duration:c,visible:_}=e;this.log_cb(i,s,t,a,c,_)}async handle_data(e,i){e.forEach(async(s,t)=>{const a=i[t]===void 0?Ze:i[t];if(a!==Ze)if(ts(a)){let c=!1,_=null;for(const[d,v]of Object.entries(a))if(d!=="__type__"){if(d==="visible"){c=!0,_=v;continue}await this.update_state_cb(e[t],{[d]:v},!1)}c&&await this.update_state_cb(e[t],{visible:_},!0)}else await this.update_state_cb(s,{value:a},!1)})}async gather_state(e){return(await Promise.all(e.map(i=>this.get_state_cb(i)))).map(i=>i?.value??null)}async set_event_args(e,i){let s={};const t=await this.get_state_cb(e);for(const[a]of Object.entries(i))s[a]=t?.[a]??null;return Object.keys(i).length===0?()=>{}:(await this.update_state_cb(e,i,!1),()=>{this.update_state_cb(e,s,!1)})}async cancel(e){if(e)for(const i of e){const s=this.submissions.get(i);s&&(await s.cancel(),this.submissions.delete(i))}}dispatch_load_events(){this.dependencies_by_fn.forEach(e=>{e.targets.forEach(([i,s])=>{s==="load"&&this.dispatch({type:"fn",fn_index:e.id,event_data:null,target_id:i})})})}get_fns_from_targets(e){const i=[];return this.dependencies_by_event.forEach((s,t)=>{const[,a]=t.split("-");Number(a)===e&&s.forEach(c=>{i.push(c.id)})}),i}close_stream(e){const i=this.get_fns_from_targets(e);for(const s of i){const t=this.submissions.get(s);t&&(t.close_stream(),this.submissions.delete(s)),this.loading_stati.update({status:"complete",fn_index:s,eta:0,queue:!1,stream_state:"closed"})}this.update_loading_stati_state()}}function ts(o){return typeof o=="object"&&o!==null&&"__type__"in o&&o?.__type__==="update"}function ss(o,e){return e?o==="always_last"?"defer":o==="multiple"?"run":o==="once"?"skip":"run":"run"}function is(o,e,i,s){const t=e?i===1:s===1;try{return new Je("__fn_args",`  let result = await (${o})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${t} && !Array.isArray(result)) ? [result] : result;`)}catch(a){throw a}}function as(o,e){let i=new Map,s=e,t=0;for(;t<100;){const a=i.get(s)||o.find(c=>c.id===s);if(!a||(i.set(a.id,a),a.trigger_after===null||a.trigger_after===void 0))break;s=a.trigger_after,t+=1}return s}var ns=V("<!> <!>",1),rs=V('<button class="show-api svelte-zxu34v"><!> <img class="svelte-zxu34v"/></button>'),os=V('<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer"> <img class="svelte-zxu34v"/></a>',1),ds=V('<div>·</div> <button class="settings svelte-zxu34v"> <img class="svelte-zxu34v"/></button>',1),ls=V('<footer class="svelte-zxu34v"><!> <!> <button> <img class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> <!></footer>'),cs=V('<div id="api-recorder-container" class="svelte-zxu34v"><!></div>'),_s=V('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),us=V('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),fs=V('<div class="wrap svelte-zxu34v"><div class="contain svelte-zxu34v"><!> <!></div> <!> <!> <!></div> <!>',1);function gs(o,e){He(e,!0);const i=()=>Ee(Ot,"$reactive_formatter",a),s=()=>Ee(Rt,"$_",a),t=()=>Ee(ke,"$is_screen_recording",a),[a,c]=zt();Be(e,"render_complete",3,!1);let _=Be(e,"ready",15,!1);e.components.forEach(n=>{n.props.i18n||(n.props.i18n=i())});let d=new Ut(e.components,e.layout,e.dependencies,{root:e.root,theme:e.theme_mode,version:e.version,api_prefix:e.api_prefix,max_file_size:e.max_file_size,autoscroll:e.autoscroll},e.app,i());xt(Ft,{register:d.register_component.bind(d),dispatcher:T});let v=Ue(qe([]));function T(n,r,u){if(r==="share"){const{title:C,description:O}=u}else r==="error"?I("Error",u,-1,r):r==="warning"?I("Warning",u,-1,r):r==="info"?I("Info",u,-1,r):r=="clear_status"?(d.update_state(n,{loading_status:{}},!1),h.clear_loading_status(n)):r=="close_stream"?h.close_stream(n):(r==="select"&&n in d.initial_tabs&&(n=u.id),h.dispatch({type:"event",event_name:r,target_id:n,event_data:u}))}let f=Ue(qe([])),S=n=>{U(f,[...g(f),n],!0)};const h=new es(e.dependencies,e.app,d.update_state.bind(d),d.get_state.bind(d),d.rerender.bind(d),I,S);e.dependencies;let N=350,l=Ce(()=>e.search_params.get("view")==="api"&&e.footer_links.includes("api")),L=Ce(()=>e.search_params.get("view")==="settings"),p=Ce(()=>e.search_params.get("view")==="api-recorder"&&e.footer_links.includes("api")),P=!0,x=!0,m=null,j=null,Z=null;async function z(){if(!m||!j){const n=await pe(()=>import("./ApiDocs-BfWLhyd2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]),import.meta.url),r=await pe(()=>import("./ApiRecorder-C-hQipYz.js"),__vite__mapDeps([31,1,2,3,4,7,5,8,9,10,11,12,13,14,15,32]),import.meta.url);m||(m=n.default),j||(j=r.default)}}async function ie(){j||(j=(await pe(()=>import("./ApiRecorder-C-hQipYz.js"),__vite__mapDeps([31,1,2,3,4,7,5,8,9,10,11,12,13,14,15,32]),import.meta.url)).default)}async function _e(){Z||(Z=(await pe(()=>import("./Settings-eooFy0hm.js"),__vite__mapDeps([33,1,2,3,4,5,6,10,11,12,34,22,27,16,17,18,14,19,20,35,28,36,37,38,23,39,40,41,25,42,24,26,29,43,44]),import.meta.url)).default)}async function te(n){U(p,!1),n&&await z(),U(l,n);let r=new URLSearchParams(window.location.search);n?r.set("view","api"):r.delete("view"),history.replaceState(null,"","?"+r.toString())}async function ae(n){n&&await _e();let r=new URLSearchParams(window.location.search);n?r.set("view","settings"):r.delete("view"),history.replaceState(null,"","?"+r.toString()),U(L,!g(L))}function I(n,r,u,C,O=10,B=!0){g(v).push({title:n,message:r,fn_index:u,type:C,id:++xe,duration:O,visible:B})}function ue(n,r,u){U(v,[I(n,r,-1,u),...g(v)],!0)}let xe=-1;s()("blocks.long_requests_queue"),s()("blocks.connection_can_break"),s()("blocks.waiting_for_inputs");let ke=Mt(!1),fe=0,K;function ge(){if("parentIFrame"in window){const n=K.children[0].getBoundingClientRect();if(!n)return;window.parentIFrame?.size(n.bottom+fe+32)}}function Oe(){t()?Xt():Ht()}kt(()=>{"parentIFrame"in window&&window.parentIFrame?.autoResize(!1);const n=new MutationObserver(ge),r=new ResizeObserver(ge);return n.observe(K,{childList:!0,subtree:!0,attributes:!0}),r.observe(K),d.ready.then(()=>{_(!0),h.dispatch_load_events()}),()=>{n.disconnect(),r.disconnect()}});function Qe(n){U(v,g(v).filter(r=>r.id!==n),!0)}var Ye={add_new_message:ue},Re=fs();qt("zxu34v",n=>{var r=ns(),u=q(r);{var C=y=>{H(()=>{Ct.title=e.title??""},void 0,void 0,void 0,!0)};E(u,y=>{e.control_page_title&&y(C)})}var O=b(u,2);{var B=y=>{var F=se(),he=q(F);Dt(he,()=>`<style>${At(e.css,e.version)}</style>`),w(y,F)};E(O,y=>{e.css&&y(B)})}w(n,r)});var ve=q(Re);let Me;var ne=A(ve);let Ae;var De=A(ne);Ke(De,{get node(){return d.root}});var $e=b(De,2);{var et=n=>{var r=ls(),u=A(r);{var C=k=>{var R=rs(),W=A(R);{var Q=M=>{var $=Ie();H(re=>oe($,re),[()=>s()("errors.use_via_api_or_mcp")]),w(M,$)},G=M=>{var $=Ie();H(re=>oe($,re),[()=>s()("errors.use_via_api")]),w(M,$)};E(W,M=>{e.app.config?.mcp_server?M(Q):M(G,!1)})}var Y=b(W,2);D(R),H(M=>{J(Y,"src",Bt),J(Y,"alt",M)},[()=>s()("common.logo")]),X("click",R,()=>{te(!g(l))}),X("mouseenter",R,()=>{z(),ie()}),w(k,R)};E(u,k=>{e.footer_links.includes("api")&&k(C)})}var O=b(u,2);{var B=k=>{var R=os(),W=b(q(R),2),Q=A(W),G=b(Q);D(W),H((Y,M)=>{oe(Q,`${Y??""} `),J(G,"src",It),J(G,"alt",M)},[()=>s()("common.built_with_gradio"),()=>s()("common.logo")]),w(k,R)};E(O,k=>{e.footer_links.includes("gradio")&&k(B)})}var y=b(O,2);let F;var he=A(y),Te=b(he);D(y);var dt=b(y,4);{var lt=k=>{var R=ds(),W=q(R);let Q;var G=b(W,2),Y=A(G),M=b(Y);D(G),H(($,re)=>{Q=Ve(W,1,"divider svelte-zxu34v",null,Q,{hidden:!t()}),oe(Y,`${$??""} `),J(M,"src",Gt),J(M,"alt",re)},[()=>s()("common.settings"),()=>s()("common.settings")]),X("click",G,()=>{ae(!g(L))}),X("mouseenter",G,()=>{_e()}),w(k,R)};E(dt,k=>{e.footer_links.includes("settings")&&k(lt)})}D(r),H((k,R)=>{F=Ve(y,1,"record svelte-zxu34v",null,F,{hidden:!t()}),oe(he,`${k??""} `),J(Te,"src",Vt),J(Te,"alt",R)},[()=>s()("common.stop_recording"),()=>s()("common.stop_recording")]),X("click",y,()=>{Oe()}),jt(r,"clientHeight",k=>fe=k),w(n,r)};E($e,n=>{e.footer_links.length>0&&n(et)})}D(ne),Lt(ne,n=>K=n,()=>K);var je=b(ne,2);{var tt=n=>{var r=cs(),u=A(r);be(u,()=>j,(C,O)=>{O(C,{get api_calls(){return g(f)},get dependencies(){return e.dependencies}})}),D(r),X("click",r,()=>{te(!0),U(p,!1)}),w(n,r)};E(je,n=>{g(p)&&j&&n(tt)})}var Fe=b(je,2);{var st=n=>{var r=_s(),u=A(r),C=b(u,2),O=A(C);be(O,()=>m,(B,y)=>{y(B,{get root_node(){return d.root},get dependencies(){return e.dependencies},get root(){return e.root},get app(){return e.app},get space_id(){return e.space_id},get api_calls(){return g(f)},get username(){return e.username},$$events:{close:F=>{te(!1),U(f,[],!0),U(p,U(p,F.detail?.api_recorder_visible))}}})}),D(C),D(r),X("click",u,()=>{te(!1)}),w(n,r)};E(Fe,n=>{g(l)&&d.root&&m&&n(st)})}var it=b(Fe,2);{var at=n=>{var r=us(),u=A(r),C=b(u,2),O=A(C);be(O,()=>Z,(B,y)=>{y(B,{get pwa_enabled(){return e.app.config.pwa},get root(){return e.root},get space_id(){return e.space_id},get allow_zoom(){return P},set allow_zoom(F){P=F},get allow_video_trim(){return x},set allow_video_trim(F){x=F},$$events:{close:()=>{ae(!1)},start_recording:()=>{Oe()}}})}),D(C),D(r),X("click",u,()=>{ae(!1)}),w(n,r)};E(it,n=>{g(L)&&e.app.config&&d.root&&Z&&n(at)})}D(ve);var nt=b(ve,2);{var rt=n=>{Pt(n,{get messages(){return g(v)},on_close:Qe})};E(nt,n=>{g(v)&&n(rt)})}H(()=>{Me=Ge(ve,"",Me,{"min-height":e.app_mode?"100%":"auto"}),Ae=Ge(ne,"",Ae,{"flex-grow":e.app_mode?"1":"auto","margin-right":e.vibe_mode?`${N}px`:"0"})}),w(o,Re);var ot=Xe(Ye);return c(),ot}const Ss=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));export{Ss as B,Bt as a,Gt as s};
//# sourceMappingURL=Blocks-BgQvUZpw.js.map
