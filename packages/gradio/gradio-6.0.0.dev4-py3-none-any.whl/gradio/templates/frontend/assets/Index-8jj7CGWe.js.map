{"version":3,"file":"Index-8jj7CGWe.js","sources":["../../../../js/file/shared/File.svelte","../../../../js/file/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { BlockLabel, Empty } from \"@gradio/atoms\";\n\timport { File } from \"@gradio/icons\";\n\timport FilePreview from \"./FilePreview.svelte\";\n\n\tlet {\n\t\tvalue,\n\t\tlabel,\n\t\tshow_label,\n\t\tselectable,\n\t\ti18n,\n\t\theight,\n\t\ton_select,\n\t\ton_download\n\t} = $props();\n</script>\n\n<BlockLabel\n\t{show_label}\n\tfloat={value === null}\n\tIcon={File}\n\tlabel={label || \"File\"}\n/>\n\n{#if value && (Array.isArray(value) ? value.length > 0 : true)}\n\t<FilePreview\n\t\t{i18n}\n\t\t{selectable}\n\t\ton:select={on_select}\n\t\ton:download={on_download}\n\t\t{value}\n\t\t{height}\n\t/>\n{:else}\n\t<Empty unpadded_box={true} size=\"large\"><File /></Empty>\n{/if}\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as FilePreview } from \"./shared/FilePreview.svelte\";\n\texport { default as BaseFileUpload } from \"./shared/FileUpload.svelte\";\n\texport { default as BaseFile } from \"./shared/File.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { Gradio } from \"@gradio/utils\";\n\timport File from \"./shared/File.svelte\";\n\timport FileUpload from \"./shared/FileUpload.svelte\";\n\timport { Block, UploadText } from \"@gradio/atoms\";\n\timport type { FileEvents, FileProps } from \"./types\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport { tick } from \"svelte\";\n\n\tconst props = $props();\n\tlet upload_promise = $state<Promise<any>>();\n\n\tlet dragging = $state(false);\n\tlet pending_upload = $state(false);\n\n\tclass FileGradio extends Gradio<FileEvents, FileProps> {\n\t\tasync get_data() {\n\t\t\tif (upload_promise) {\n\t\t\t\tawait upload_promise;\n\t\t\t\tawait tick();\n\t\t\t}\n\t\t\tconst data = await super.get_data();\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tconst gradio = new FileGradio(props);\n\n\tlet old_value = $state(gradio.props.value);\n\n\t$effect(() => {\n\t\tif (old_value !== gradio.props.value) {\n\t\t\told_value = gradio.props.value;\n\t\t\tgradio.dispatch(\"change\", $state.snapshot(gradio.props.value));\n\t\t}\n\t});\n</script>\n\n<Block\n\tvisible={gradio.shared.visible}\n\tvariant={gradio.props.value ? \"solid\" : \"dashed\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\telem_id={gradio.shared.elem_id}\n\telem_classes={gradio.shared.elem_classes}\n\tcontainer={gradio.shared.container}\n\tscale={gradio.shared.scale}\n\tmin_width={gradio.shared.min_width}\n\tallow_overflow={false}\n>\n\t<StatusTracker\n\t\tautoscroll={gradio.shared.autoscroll}\n\t\ti18n={gradio.i18n}\n\t\t{...gradio.shared.loading_status}\n\t\tstatus={pending_upload\n\t\t\t? \"generating\"\n\t\t\t: gradio.shared.loading_status?.status || \"complete\"}\n\t\ton:clear_status={() =>\n\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t/>\n\t{#if !gradio.shared.interactive}\n\t\t<File\n\t\t\ton_select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton_download={({ detail }) => gradio.dispatch(\"download\", detail)}\n\t\t\tselectable={gradio.props._selectable}\n\t\t\tvalue={gradio.props.value}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\theight={gradio.props.height}\n\t\t\ti18n={gradio.i18n}\n\t\t/>\n\t{:else}\n\t\t<FileUpload\n\t\t\tbind:upload_promise\n\t\t\tupload={(...args) => gradio.shared.client.upload(...args)}\n\t\t\tstream_handler={(...args) => gradio.shared.client.stream(...args)}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\tvalue={gradio.props.value}\n\t\t\tfile_count={gradio.props.file_count}\n\t\t\tfile_types={gradio.props.file_types}\n\t\t\tselectable={gradio.props._selectable}\n\t\t\theight={gradio.props.height}\n\t\t\troot={gradio.shared.root}\n\t\t\tallow_reordering={gradio.props.allow_reordering}\n\t\t\tmax_file_size={gradio.shared.max_file_size}\n\t\t\ton:change={({ detail }) => {\n\t\t\t\tgradio.props.value = detail;\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton:upload={() => gradio.dispatch(\"upload\")}\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tgradio.shared.loading_status = gradio.shared.loading_status || {};\n\t\t\t\tgradio.shared.loading_status.status = \"error\";\n\t\t\t\tgradio.dispatch(\"error\", detail);\n\t\t\t}}\n\t\t\ton:delete={({ detail }) => {\n\t\t\t\tgradio.dispatch(\"delete\", detail);\n\t\t\t}}\n\t\t\ti18n={gradio.i18n}\n\t\t>\n\t\t\t<UploadText i18n={gradio.i18n} type=\"file\" />\n\t\t</FileUpload>\n\t{/if}\n</Block>\n"],"names":["File","$$props","$$render","consequent","alternate","props","$.rest_props","upload_promise","$.state","dragging","FileGradio","Gradio","$.get","gradio","old_value","$.proxy","$.user_effect","$.set","$0","$.derived","detail","args"],"mappings":"24CAAA,iDA8BQ,IAAA,mBAEN,MAAA,wFADCA,wXAICC,EAAA,QAAA,OAAA,QAAAA,EAAA,KAAA,GAAAA,EAAA,MAAA,OAAA,GAAAC,EAAAC,CAAA,EAAAD,EAAAE,EAAA,EAAA,cATJ,sCC1BA,eAwBOC,EAAAC,EAAAL,EAAA,CAAA,UAAA,WAAA,UAAA,CAAA,MACLM,EAAcC,EAAA,MAAA,EAEZC,IAAM,EAAA,EAGP,MAAAC,UAAaC,CAAsB,OAEnC,UAAO,CACR,OAAAC,EAAAL,CAAA,uBAGW,GAIC,MAAA,MAAA,SAAA,CAGX,QAGDM,EAAM,IAAAH,EAAAL,CAAA,EAEP,IAAAS,EAAAN,EAAAO,EAAAF,EAAA,MAAA,KAAA,CAAA,EAEAG,EAAO,KACPJ,EAAAE,CAAa,IAAAD,EAAY,MAAO,QAChCI,EAAAH,EAAcD,EAAA,MAAA,MAAA,EAAA,IACL,SAAO,WAAcA,EAAA,MAAA,KAAA,CAAA,EAE9B,IAKC,IAAAK,EAAAC,EAAA,IAAAN,EAAA,MAAA,MAAA,QAAA,QAAA,YACYJ,CAAO,EAAA,QAAO,MAAU,4BAFtCI,EAAA,OAAA,2EAGQ,0BACK,OAAO,mCACVA,EAAA,OAAA,qCACJA,EAAU,OAAA,8BACXA,EAAO,OAAO,8BACdA,EAAc,OAAI,0BACb,2DAQO,gBAAY,QAAA,UAAA,iCAL1BA,EAAA,OAAA,uBACA,OAAAA,EAAY,WACZA,EAAA,OAAgB,qEAKhBA,EAAO,SAAQ,eAAYA,EAAA,OAAA,cAAA,mCAI3B,UAAA,CAAA,CAAA,OAAAO,CAAA,IAAAP,EAAA,SAAA,SAAAO,CAAA,EACK,YAAA,CAAA,CAAA,OAAAA,CAAA,IAAAP,EAAA,SAAA,WAAAO,CAAA,0BACOP,EAAO,MAAE,gCACrBA,EAAc,MAAM,0BACbA,EAAO,OAAO,+BACTA,EAAO,OAAO,kCACZ,MAAM,iEAMK,OAAM,OAAA,OAAgB,GAAAQ,CAAA,yBAClBR,EAAA,OAAa,OAAA,OAAA,GAAAQ,CAAA,qBACvCR,EAAW,OAAO,+BACbA,EAAW,OAAG,+BACrBA,EAAA,MAAA,+BACWA,EAAO,MAAM,oCACbA,QAAW,oCACXA,EAAE,MAAW,iCACtBA,EAAY,gCACZA,EAAU,OAAO,oCACLA,EAAA,MAAgB,6CAChBA,EAAA,OAAc,sHACrB,OAAA,CAAA,CAAA,OAAAO,KAAkB,CACzBP,EAAA,MAAA,MAAAO,CACD,SACQ,OAAAA,CAAU,IAAAH,EAAQR,EAAQW,EAAA,EAAA,YACjCP,EAAA,SAAA,OAAA,EACY,OAAA,CAAA,CAAA,OAAAO,CAAI,IAAAP,EAAA,SAAA,SAAAO,CAAA,aAClBP,EAAA,SAAA,QAAA,EACa,MAAA,CAAA,CAAA,OAAAO,KAAa,CACxBP,EAAA,OAAU,eAAAA,EAAA,OAAA,gBAAA,CAAA,EACXA,EAAE,OAAA,eAAA,OAAA,QACHA,EAAK,SAAA,QAAAO,CAAA,iJApCJP,EAAA,OAAA,YAAAX,EAAAE,EAAA,EAAA,EAAAF,EAAAC,CAAA,sCAxBH"}