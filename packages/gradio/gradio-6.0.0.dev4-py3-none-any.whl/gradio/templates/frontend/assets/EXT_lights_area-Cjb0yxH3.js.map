{"version":3,"file":"EXT_lights_area-Cjb0yxH3.js","sources":["../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/Lights/LTC/ltcTextureTool.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/Lights/areaLight.js","../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/Lights/rectAreaLight.js","../../../../node_modules/.pnpm/@babylonjs+loaders@8.36.1_@babylonjs+core@8.36.1_babylonjs-gltf2interface@8.36.1/node_modules/@babylonjs/loaders/glTF/2.0/Extensions/EXT_lights_area.js"],"sourcesContent":["import { Tools } from \"../../Misc/tools.js\";\n/**\n * Loads LTC texture data from Babylon.js CDN.\n * @returns Promise with data for LTC1 and LTC2 textures for area lights.\n */\nexport async function DecodeLTCTextureDataAsync() {\n    const ltc1 = new Uint16Array(64 * 64 * 4);\n    const ltc2 = new Uint16Array(64 * 64 * 4);\n    const file = await Tools.LoadFileAsync(Tools.GetAssetUrl(\"https://assets.babylonjs.com/core/areaLights/areaLightsLTC.bin\"));\n    const ltcEncoded = new Uint16Array(file);\n    const pixelCount = ltcEncoded.length / 8;\n    for (let pixelIndex = 0; pixelIndex < pixelCount; pixelIndex++) {\n        ltc1[pixelIndex * 4] = ltcEncoded[pixelIndex * 8];\n        ltc1[pixelIndex * 4 + 1] = ltcEncoded[pixelIndex * 8 + 1];\n        ltc1[pixelIndex * 4 + 2] = ltcEncoded[pixelIndex * 8 + 2];\n        ltc1[pixelIndex * 4 + 3] = ltcEncoded[pixelIndex * 8 + 3];\n        ltc2[pixelIndex * 4] = ltcEncoded[pixelIndex * 8 + 4];\n        ltc2[pixelIndex * 4 + 1] = ltcEncoded[pixelIndex * 8 + 5];\n        ltc2[pixelIndex * 4 + 2] = ltcEncoded[pixelIndex * 8 + 6];\n        ltc2[pixelIndex * 4 + 3] = ltcEncoded[pixelIndex * 8 + 7];\n    }\n    return [ltc1, ltc2];\n}\n//# sourceMappingURL=ltcTextureTool.js.map","import { RawTexture } from \"../Materials/Textures/rawTexture.js\";\nimport { Texture } from \"../Materials/Textures/texture.js\";\n\nimport { Light } from \"./light.js\";\nimport { DecodeLTCTextureDataAsync } from \"./LTC/ltcTextureTool.js\";\nimport { Logger } from \"../Misc/logger.js\";\nfunction CreateSceneLTCTextures(scene) {\n    const useDelayedTextureLoading = scene.useDelayedTextureLoading;\n    scene.useDelayedTextureLoading = false;\n    const previousState = scene._blockEntityCollection;\n    scene._blockEntityCollection = false;\n    scene._ltcTextures = {\n        LTC1: RawTexture.CreateRGBATexture(null, 64, 64, scene.getEngine(), false, false, 2, 2, 0, false, true),\n        LTC2: RawTexture.CreateRGBATexture(null, 64, 64, scene.getEngine(), false, false, 2, 2, 0, false, true),\n    };\n    scene._blockEntityCollection = previousState;\n    scene._ltcTextures.LTC1.wrapU = Texture.CLAMP_ADDRESSMODE;\n    scene._ltcTextures.LTC1.wrapV = Texture.CLAMP_ADDRESSMODE;\n    scene._ltcTextures.LTC2.wrapU = Texture.CLAMP_ADDRESSMODE;\n    scene._ltcTextures.LTC2.wrapV = Texture.CLAMP_ADDRESSMODE;\n    scene.useDelayedTextureLoading = useDelayedTextureLoading;\n    DecodeLTCTextureDataAsync()\n        // eslint-disable-next-line github/no-then\n        .then((textureData) => {\n        if (scene._ltcTextures) {\n            const ltc1 = scene._ltcTextures?.LTC1;\n            ltc1.update(textureData[0]);\n            const ltc2 = scene._ltcTextures?.LTC2;\n            ltc2.update(textureData[1]);\n            scene.onDisposeObservable.addOnce(() => {\n                scene._ltcTextures?.LTC1.dispose();\n                scene._ltcTextures?.LTC2.dispose();\n            });\n        }\n    })\n        // eslint-disable-next-line github/no-then\n        .catch((error) => {\n        Logger.Error(`Area Light fail to get LTC textures data. Error: ${error}`);\n    });\n}\n/**\n * Abstract Area Light class that servers as parent for all Area Lights implementations.\n * The light is emitted from the area in the -Z direction.\n */\nexport class AreaLight extends Light {\n    /**\n     * Creates a area light object.\n     * Documentation : https://doc.babylonjs.com/features/featuresDeepDive/lights/lights_introduction\n     * @param name The friendly name of the light\n     * @param position The position of the area light.\n     * @param scene The scene the light belongs to\n     */\n    constructor(name, position, scene) {\n        super(name, scene);\n        this.position = position;\n        if (!this._scene._ltcTextures) {\n            CreateSceneLTCTextures(this._scene);\n        }\n    }\n    transferTexturesToEffect(effect) {\n        if (this._scene._ltcTextures) {\n            effect.setTexture(\"areaLightsLTC1Sampler\", this._scene._ltcTextures.LTC1);\n            effect.setTexture(\"areaLightsLTC2Sampler\", this._scene._ltcTextures.LTC2);\n        }\n        return this;\n    }\n    /**\n     * Prepares the list of defines specific to the light type.\n     * @param defines the list of defines\n     * @param lightIndex defines the index of the light for the effect\n     */\n    prepareLightSpecificDefines(defines, lightIndex) {\n        defines[\"AREALIGHT\" + lightIndex] = true;\n        defines[\"AREALIGHTUSED\"] = true;\n    }\n    _isReady() {\n        if (this._scene._ltcTextures) {\n            return this._scene._ltcTextures.LTC1.isReady() && this._scene._ltcTextures.LTC2.isReady();\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=areaLight.js.map","import { __decorate } from \"../tslib.es6.js\";\nimport { Vector3 } from \"../Maths/math.vector.js\";\nimport { Node } from \"../node.js\";\nimport { Light } from \"./light.js\";\nimport { RegisterClass } from \"../Misc/typeStore.js\";\nimport { serialize } from \"../Misc/decorators.js\";\nimport { AreaLight } from \"./areaLight.js\";\nNode.AddNodeConstructor(\"Light_Type_4\", (name, scene) => {\n    return () => new RectAreaLight(name, Vector3.Zero(), 1, 1, scene);\n});\n/**\n * A rectangular area light defined by an unique point in world space, a width and a height.\n * The light is emitted from the rectangular area in the -Z direction.\n */\nexport class RectAreaLight extends AreaLight {\n    /**\n     * Rect Area Light width.\n     */\n    get width() {\n        return this._width.x;\n    }\n    /**\n     * Rect Area Light width.\n     */\n    set width(value) {\n        this._width.x = value;\n    }\n    /**\n     * Rect Area Light height.\n     */\n    get height() {\n        return this._height.y;\n    }\n    /**\n     * Rect Area Light height.\n     */\n    set height(value) {\n        this._height.y = value;\n    }\n    /**\n     * Creates a rectangular area light object.\n     * Documentation : https://doc.babylonjs.com/features/featuresDeepDive/lights/lights_introduction\n     * @param name The friendly name of the light\n     * @param position The position of the area light.\n     * @param width The width of the area light.\n     * @param height The height of the area light.\n     * @param scene The scene the light belongs to\n     */\n    constructor(name, position, width, height, scene) {\n        super(name, position, scene);\n        this._width = new Vector3(width, 0, 0);\n        this._height = new Vector3(0, height, 0);\n        this._pointTransformedPosition = Vector3.Zero();\n        this._pointTransformedWidth = Vector3.Zero();\n        this._pointTransformedHeight = Vector3.Zero();\n    }\n    /**\n     * Returns the string \"RectAreaLight\"\n     * @returns the class name\n     */\n    getClassName() {\n        return \"RectAreaLight\";\n    }\n    /**\n     * Returns the integer 4.\n     * @returns The light Type id as a constant defines in Light.LIGHTTYPEID_x\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    getTypeID() {\n        return Light.LIGHTTYPEID_RECT_AREALIGHT;\n    }\n    _buildUniformLayout() {\n        this._uniformBuffer.addUniform(\"vLightData\", 4);\n        this._uniformBuffer.addUniform(\"vLightDiffuse\", 4);\n        this._uniformBuffer.addUniform(\"vLightSpecular\", 4);\n        this._uniformBuffer.addUniform(\"vLightWidth\", 4);\n        this._uniformBuffer.addUniform(\"vLightHeight\", 4);\n        this._uniformBuffer.addUniform(\"shadowsInfo\", 3);\n        this._uniformBuffer.addUniform(\"depthValues\", 2);\n        this._uniformBuffer.create();\n    }\n    _computeTransformedInformation() {\n        if (this.parent && this.parent.getWorldMatrix) {\n            Vector3.TransformCoordinatesToRef(this.position, this.parent.getWorldMatrix(), this._pointTransformedPosition);\n            Vector3.TransformNormalToRef(this._width, this.parent.getWorldMatrix(), this._pointTransformedWidth);\n            Vector3.TransformNormalToRef(this._height, this.parent.getWorldMatrix(), this._pointTransformedHeight);\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Sets the passed Effect \"effect\" with the PointLight transformed position (or position, if none) and passed name (string).\n     * @param effect The effect to update\n     * @param lightIndex The index of the light in the effect to update\n     * @returns The point light\n     */\n    transferToEffect(effect, lightIndex) {\n        const offset = this._scene.floatingOriginOffset;\n        if (this._computeTransformedInformation()) {\n            this._uniformBuffer.updateFloat4(\"vLightData\", this._pointTransformedPosition.x - offset.x, this._pointTransformedPosition.y - offset.y, this._pointTransformedPosition.z - offset.z, 0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightWidth\", this._pointTransformedWidth.x / 2, this._pointTransformedWidth.y / 2, this._pointTransformedWidth.z / 2, 0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightHeight\", this._pointTransformedHeight.x / 2, this._pointTransformedHeight.y / 2, this._pointTransformedHeight.z / 2, 0, lightIndex);\n        }\n        else {\n            this._uniformBuffer.updateFloat4(\"vLightData\", this.position.x - offset.x, this.position.y - offset.y, this.position.z - offset.z, 0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightWidth\", this._width.x / 2, this._width.y / 2, this._width.z / 2, 0.0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightHeight\", this._height.x / 2, this._height.y / 2, this._height.z / 2, 0.0, lightIndex);\n        }\n        return this;\n    }\n    transferToNodeMaterialEffect(effect, lightDataUniformName) {\n        const offset = this._scene.floatingOriginOffset;\n        if (this._computeTransformedInformation()) {\n            effect.setFloat3(lightDataUniformName, this._pointTransformedPosition.x - offset.x, this._pointTransformedPosition.y - offset.y, this._pointTransformedPosition.z - offset.z);\n        }\n        else {\n            effect.setFloat3(lightDataUniformName, this.position.x - offset.x, this.position.y - offset.y, this.position.z - offset.z);\n        }\n        return this;\n    }\n}\n__decorate([\n    serialize()\n], RectAreaLight.prototype, \"width\", null);\n__decorate([\n    serialize()\n], RectAreaLight.prototype, \"height\", null);\n// Register Class Name\nRegisterClass(\"BABYLON.RectAreaLight\", RectAreaLight);\n//# sourceMappingURL=rectAreaLight.js.map","import { Vector3, Quaternion } from \"@babylonjs/core/Maths/math.vector.js\";\nimport { Color3 } from \"@babylonjs/core/Maths/math.color.js\";\nimport { Light } from \"@babylonjs/core/Lights/light.js\";\nimport { RectAreaLight } from \"@babylonjs/core/Lights/rectAreaLight.js\";\nimport { TransformNode as BabylonTransformNode } from \"@babylonjs/core/Meshes/transformNode.js\";\nimport { GLTFLoader, ArrayItem } from \"../glTFLoader.js\";\nimport { registerGLTFExtension, unregisterGLTFExtension } from \"../glTFLoaderExtensionRegistry.js\";\nconst NAME = \"EXT_lights_area\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/EXT_lights_area/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class EXT_lights_area {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        delete this._lights;\n    }\n    /** @internal */\n    onLoading() {\n        const extensions = this._loader.gltf.extensions;\n        if (extensions && extensions[this.name]) {\n            const extension = extensions[this.name];\n            this._lights = extension.lights;\n            ArrayItem.Assign(this._lights);\n        }\n    }\n    /**\n     * @internal\n     */\n    // eslint-disable-next-line no-restricted-syntax\n    loadNodeAsync(context, node, assign) {\n        return GLTFLoader.LoadExtensionAsync(context, node, this.name, async (extensionContext, extension) => {\n            this._loader._allMaterialsDirtyRequired = true;\n            return await this._loader.loadNodeAsync(context, node, (babylonMesh) => {\n                let babylonLight;\n                const light = ArrayItem.Get(extensionContext, this._lights, extension.light);\n                const name = light.name || babylonMesh.name;\n                this._loader.babylonScene._blockEntityCollection = !!this._loader._assetContainer;\n                const size = light.size !== undefined ? light.size : 1.0;\n                switch (light.type) {\n                    case \"rect\" /* EXTLightsArea_LightType.RECT */: {\n                        const width = light.rect?.aspect !== undefined ? light.rect.aspect * size : size;\n                        const height = size;\n                        const babylonRectAreaLight = new RectAreaLight(name, Vector3.Zero(), width, height, this._loader.babylonScene);\n                        babylonLight = babylonRectAreaLight;\n                        break;\n                    }\n                    case \"disk\" /* EXTLightsArea_LightType.DISK */: {\n                        // For disk lights, we'll use a rectangle light with the same area to approximate the disk light\n                        // In the future, this could be extended to support actual disk area lights\n                        const newSize = Math.sqrt(size * size * 0.25 * Math.PI); // Area of the disk\n                        const babylonRectAreaLight = new RectAreaLight(name, Vector3.Zero(), newSize, newSize, this._loader.babylonScene);\n                        babylonLight = babylonRectAreaLight;\n                        break;\n                    }\n                    default: {\n                        this._loader.babylonScene._blockEntityCollection = false;\n                        throw new Error(`${extensionContext}: Invalid area light type (${light.type})`);\n                    }\n                }\n                babylonLight._parentContainer = this._loader._assetContainer;\n                this._loader.babylonScene._blockEntityCollection = false;\n                light._babylonLight = babylonLight;\n                babylonLight.falloffType = Light.FALLOFF_GLTF;\n                babylonLight.diffuse = light.color ? Color3.FromArray(light.color) : Color3.White();\n                babylonLight.intensity = light.intensity == undefined ? 1 : light.intensity;\n                // glTF EXT_lights_area specifies lights face down -Z, but Babylon.js area lights face down +Z\n                // Create a parent transform node with 180-degree rotation around Y axis to flip the direction\n                const lightParentNode = new BabylonTransformNode(`${name}_orientation`, this._loader.babylonScene);\n                lightParentNode.rotationQuaternion = Quaternion.RotationAxis(Vector3.Up(), Math.PI);\n                lightParentNode.parent = babylonMesh;\n                babylonLight.parent = lightParentNode;\n                this._loader._babylonLights.push(babylonLight);\n                GLTFLoader.AddPointerMetadata(babylonLight, extensionContext);\n                assign(babylonMesh);\n            });\n        });\n    }\n}\nunregisterGLTFExtension(NAME);\nregisterGLTFExtension(NAME, true, (loader) => new EXT_lights_area(loader));\n//# sourceMappingURL=EXT_lights_area.js.map"],"names":["DecodeLTCTextureDataAsync","ltc1","ltc2","file","Tools","ltcEncoded","pixelCount","pixelIndex","CreateSceneLTCTextures","scene","useDelayedTextureLoading","previousState","RawTexture","Texture","textureData","error","Logger","AreaLight","Light","name","position","effect","defines","lightIndex","Node","RectAreaLight","Vector3","value","width","height","offset","lightDataUniformName","__decorate","serialize","RegisterClass","NAME","EXT_lights_area","loader","extensions","extension","ArrayItem","context","node","assign","GLTFLoader","extensionContext","babylonMesh","babylonLight","light","size","newSize","Color3","lightParentNode","BabylonTransformNode","Quaternion","unregisterGLTFExtension","registerGLTFExtension"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}