import{p,d as J,a as Y,r as pe,t as ue,u as ve,i as R,b as _e,f as ge,g as he}from"./i18n-5O2R8uRh.js";import{n as me,b as y,p as q,R as $,f as F,t as V,e as X,c as M,g as u,j as b,m as Z,i as r,l as we,d as B,a as ke,h as H,s as O,Q as I,k as ye,V as P,X as be,U as ee,r as D,af as xe,ag as Ce,ah as Ge,a9 as W}from"./index-bhUlIv2p.js";import{k as Ue}from"./key-DIjq0Qdg.js";import{G as je}from"./utils.svelte-Baqu2V3e.js";/* empty css                                                        */import{F as Be}from"./File-Dm1qMDFE.js";import{B as Fe}from"./Block-CWUxteKJ.js";import"./MarkdownCode.svelte_svelte_type_style_lang-ywXsGwHK.js";import{B as ze}from"./BlockLabel-B0lD-lMe.js";import{s as Le}from"./event-modifiers-CdEA5IGF.js";import{b as Se}from"./misc-BSG2QtlE.js";import{a as Ee}from"./input-BWfFfFnB.js";import{S as Ie}from"./index-D9STzgM4.js";/* empty css                                                   */import"./prism-python-Bb2K859D.js";import"./IconButton-CbXWacxl.js";import"./svelte-component-Df_c_uts.js";import"./Clear-DimAkCP_.js";var Pe=me('<svg width="100%" height="100%" viewBox="0 0 14 17" version="1.1" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,-10.6667,-7.73588)"><path d="M12.7,24.033C12.256,24.322 11.806,24.339 11.351,24.084C10.896,23.829 10.668,23.434 10.667,22.9L10.667,9.1C10.667,8.567 10.895,8.172 11.351,7.916C11.807,7.66 12.256,7.677 12.7,7.967L23.567,14.867C23.967,15.133 24.167,15.511 24.167,16C24.167,16.489 23.967,16.867 23.567,17.133L12.7,24.033Z" style="fill:currentColor;fill-rule:nonzero;"></path></g></svg>');function De(x){var s=Pe();y(x,s)}var Te=F('<input type="checkbox"/>');function He(x,s){q(s,!1);let n=p(s,"value",12),e=p(s,"disabled",12);const a=$();var v={get value(){return n()},set value(h){n(h),u()},get disabled(){return e()},set disabled(h){e(h),u()}};J();var l=Te();pe(l);let g;return V(()=>{l.disabled=e(),g=Y(l,1,"svelte-3g0mcl",null,g,{disabled:e()&&!n()})}),Ee(l,n),X("input",l,()=>a("change",!n())),y(x,l),M(v)}const Oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23888888'%20d='M6%202c-1.1%200-1.99.9-1.99%202L4%2020c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6H6zm7%207V3.5L18.5%209H13z'/%3e%3c/svg%3e",Ve="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%2032%2032'%20version='1.1'%20id='svg7'%20sodipodi:docname='light-folder-new.svg'%20inkscape:version='1.3.2%20(091e20e,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview7'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='7.375'%20inkscape:cx='15.932203'%20inkscape:cy='16'%20inkscape:window-width='1312'%20inkscape:window-height='529'%20inkscape:window-x='0'%20inkscape:window-y='38'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg7'%20/%3e%3cdefs%20id='defs6'%3e%3cclipPath%20id='clipPath1'%3e%3cpath%20d='m69.63%2012.145h-.052c-22.727-.292-46.47%204.077-46.709%204.122-2.424.451-4.946%202.974-5.397%205.397-.044.237-4.414%2023.983-4.122%2046.71-.292%2022.777%204.078%2046.523%204.122%2046.761.451%202.423%202.974%204.945%205.398%205.398.237.044%2023.982%204.413%2046.709%204.121%2022.779.292%2046.524-4.077%2046.761-4.121%202.423-.452%204.946-2.976%205.398-5.399.044-.236%204.413-23.981%204.121-46.709.292-22.777-4.077-46.523-4.121-46.761-.453-2.423-2.976-4.946-5.398-5.397-.238-.045-23.984-4.414-46.71-4.122'%20id='path1'%20/%3e%3c/clipPath%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='352.98'%20x2='-601.15'%20y1='663.95'%20x1='-591.02'%20id='2'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop1'%20/%3e%3cstop%20offset='1'%20stop-color='%23aaa'%20id='stop2'%20/%3e%3c/linearGradient%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='354.29'%20x2='-704.05'%20y1='647.77'%20x1='-701.19'%20id='1'%3e%3cstop%20stop-color='%23acabab'%20id='stop3'%20/%3e%3cstop%20offset='1'%20stop-color='%23d4d4d4'%20id='stop4'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='0'%20x1='59.12'%20y1='-19.888'%20x2='59.15'%20y2='-37.783'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(4.17478%200%200%204.16765-1069.7%20447.73)'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop5'%20/%3e%3cstop%20offset='1'%20stop-color='%23bdbdbd'%20id='stop6'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20transform='matrix(.07089%200%200%20.07017%2023.295-40.67)'%20fill='%2360aae5'%20id='g7'%20style='fill:%23888888;fill-opacity:1'%3e%3cpath%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20d='m-884.1%20294.78c-4.626%200-8.349%203.718-8.349%208.335v161.41l468.19%201v-121.2c0-4.618-3.724-8.335-8.35-8.335h-272.65c-8.51.751-9.607-.377-13.812-5.981-5.964-7.968-14.969-21.443-20.84-29.21-4.712-6.805-5.477-6.02-13.292-6.02z'%20fill='url(%230)'%20color='%23000'%20id='path6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20y='356.85'%20x='-890.28'%20height='295.13'%20width='463.85'%20fill='url(%231)'%20stroke='url(%231)'%20stroke-width='2.378'%20rx='9.63'%20id='rect6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20width='463.85'%20height='295.13'%20x='-890.28'%20y='356.85'%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20fill='none'%20stroke='url(%232)'%20stroke-linejoin='round'%20stroke-linecap='round'%20stroke-width='5.376'%20rx='9.63'%20id='rect7'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3c/g%3e%3c/svg%3e";var qe=F('<span class="no-checkbox svelte-6im0c4" aria-hidden="true"></span>'),Me=F('<span role="button" aria-label="expand directory" tabindex="0"><!></span>'),Ae=F('<span class="file-icon svelte-6im0c4"><img alt="file icon" class="svelte-6im0c4"/></span>'),Qe=F('<li class="svelte-6im0c4"><span class="wrap svelte-6im0c4"><!> <!> </span> <!></li>'),Re=F('<ul class="svelte-6im0c4"></ul>');function te(x,s){q(s,!1);let n=p(s,"path",28,()=>[]),e=p(s,"selected_files",28,()=>[]),a=p(s,"selected_folders",28,()=>[]),v=p(s,"is_selected_entirely",12,!1),l=p(s,"interactive",12),g=p(s,"ls_fn",12),h=p(s,"file_count",12,"multiple"),k=p(s,"valid_for_selection",12),m=Z([]),c=Z([]);const S=t=>{r(c).includes(t)?b(c,r(c).filter(z=>z!==t)):b(c,[...r(c),t])},i=t=>{r(c).includes(t)||b(c,[...r(c),t])};(async()=>(b(m,await g()(n())),k()&&b(m,[{name:".",type:"file"},...r(m)]),b(c,r(m).map((t,z)=>t.type==="folder"&&(v()||e().some(L=>L[0]===t.name))?z:null).filter(t=>t!==null))))();const o=$();we(()=>(B(v()),r(m),B(n())),()=>{v()&&r(m).forEach(t=>{o("check",{path:[...n(),t.name],checked:!0,type:t.type})})}),ke();var T={get path(){return n()},set path(t){n(t),u()},get selected_files(){return e()},set selected_files(t){e(t),u()},get selected_folders(){return a()},set selected_folders(t){a(t),u()},get is_selected_entirely(){return v()},set is_selected_entirely(t){v(t),u()},get interactive(){return l()},set interactive(t){l(t),u()},get ls_fn(){return g()},set ls_fn(t){g(t),u()},get file_count(){return h()},set file_count(t){h(t),u()},get valid_for_selection(){return k()},set valid_for_selection(t){k(t),u()}};J();var E=Re();return ue(E,5,()=>r(m),ve,(t,z,L)=>{let G=()=>r(z).type,_=()=>r(z).name,re=()=>r(z).valid;var A=Qe(),Q=H(A),K=H(Q);{var se=d=>{var f=qe();y(d,f)},ae=d=>{{let f=P(()=>!l()),U=P(()=>(G(),B(e()),B(a()),_(),I(()=>(G()==="file"?e():a()).some(j=>j[0]===_()&&j.length===1))));He(d,{get disabled(){return r(f)},get value(){return r(U)},$$events:{change:j=>{let C=j.detail;o("check",{path:[...n(),_()],checked:C,type:G()}),G()==="folder"&&C&&i(L)}}})}};R(K,d=>{G()==="folder"&&h()==="single"?d(se):d(ae,!1)})}var N=O(K,2);{var le=d=>{var f=Me();let U;var j=H(f);De(j),D(f),V(C=>U=Y(f,1,"icon svelte-6im0c4",null,U,C),[()=>({hidden:!r(c).includes(L)})]),X("click",f,Le(()=>S(L))),X("keydown",f,({key:C})=>{(C===" "||C==="Enter")&&S(L)}),y(d,f)},ie=d=>{var f=Ae(),U=H(f);D(f),V(()=>_e(U,"src",_()==="."?Ve:Oe)),y(d,f)};R(N,d=>{G()==="folder"?d(le):d(ie,!1)})}var ne=O(N);D(Q);var oe=O(Q,2);{var ce=d=>{var f=be(),U=ee(f);{let j=P(()=>(B(n()),_(),I(()=>[...n(),_()]))),C=P(()=>(B(e()),_(),I(()=>e().filter(w=>w[0]===_()).map(w=>w.slice(1))))),de=P(()=>(B(a()),_(),I(()=>a().filter(w=>w[0]===_()).map(w=>w.slice(1))))),fe=P(()=>(B(a()),_(),I(()=>a().some(w=>w[0]===_()&&w.length===1))));te(U,{get path(){return r(j)},get selected_files(){return r(C)},get selected_folders(){return r(de)},get is_selected_entirely(){return r(fe)},get interactive(){return l()},get ls_fn(){return g()},get file_count(){return h()},get valid_for_selection(){return re()},$$events:{check(w){Se.call(this,s,w)}}})}y(d,f)};R(oe,d=>{G(),r(c),I(()=>G()==="folder"&&r(c).includes(L))&&d(ce)})}D(A),V(()=>ye(ne,` ${_()??""}`)),y(t,A)}),D(E),y(x,E),M(T)}var We=F('<div class="file-wrap svelte-1gs1iku"><!></div>');function Xe(x,s){q(s,!1);let n=p(s,"interactive",12),e=p(s,"file_count",12,"multiple"),a=p(s,"value",28,()=>[]),v=p(s,"ls_fn",12),l=Z([]);const g=(i,o)=>i.join("/")===o.join("/"),h=(i,o)=>o.some(T=>g(T,i)),k=(i,o)=>i.join("/").startsWith(o.join("/"));var m={get interactive(){return n()},set interactive(i){n(i),u()},get file_count(){return e()},set file_count(i){e(i),u()},get value(){return a()},set value(i){a(i),u()},get ls_fn(){return v()},set ls_fn(i){v(i),u()}};J();var c=We(),S=H(c);return te(S,{path:[],get selected_files(){return a()},get selected_folders(){return r(l)},get interactive(){return n()},get ls_fn(){return v()},get file_count(){return e()},valid_for_selection:!1,$$events:{check:i=>{const{path:o,checked:T,type:E}=i.detail;T?e()==="single"?a([o]):E==="folder"?h(o,r(l))||b(l,[...r(l),o]):h(o,a())||a([...a(),o]):(b(l,r(l).filter(t=>!k(o,t))),E==="folder"?(b(l,r(l).filter(t=>!k(t,o))),a(a().filter(t=>!k(t,o)))):a(a().filter(t=>!g(t,o))))}}}),D(c),y(x,c),M(m)}var Ze=F("<!> <!> <!>",1);function ut(x,s){q(s,!0);const n=ge(s,["$$slots","$$events","$$legacy"]),e=new je(n);let a=xe(Ce(e.props.value)),v=W(()=>[e.props.root_dir,e.props.glob,e.props.ignore_glob]);Ge(()=>{r(a)!=e.props.value&&(b(a,e.props.value,!0),e.dispatch("change"))});{let l=W(()=>e.props.value===null?"dashed":"solid");Fe(x,{get visible(){return e.shared.visible},get variant(){return r(l)},border_mode:"base",padding:!1,get elem_id(){return e.shared.elem_id},get elem_classes(){return e.shared.elem_classes},get container(){return e.shared.container},get scale(){return e.shared.scale},get min_width(){return e.shared.min_width},allow_overflow:!0,overflow_behavior:"auto",get height(){return e.props.height},get max_height(){return e.props.max_height},get min_height(){return e.props.min_height},children:(g,h)=>{var k=Ze(),m=ee(k);Ie(m,he(()=>e.shared.loading_status,{get autoscroll(){return e.shared.autoscroll},get i18n(){return e.i18n},$$events:{clear_status:()=>e.dispatch("clear_status",e.shared.loading_status)}}));var c=O(m,2);{let i=W(()=>e.shared.label||"FileExplorer");ze(c,{get show_label(){return e.shared.show_label},get Icon(){return Be},get label(){return r(i)},float:!1})}var S=O(c,2);Ue(S,()=>r(v),i=>{Xe(i,{get file_count(){return e.props.file_count},get interactive(){return e.shared.interactive},get ls_fn(){return e.shared.server.ls},get value(){return e.props.value},set value(o){e.props.value=o}})}),y(g,k)},$$slots:{default:!0}})}M()}export{ut as default};
//# sourceMappingURL=Index-DiGD0l1o.js.map
