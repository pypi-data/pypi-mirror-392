{"version":3,"file":"BL9z6SMe.js","sources":["../../../../../../../json/shared/JSONNode.svelte","../../../../../../../json/shared/JSON.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount, createEventDispatcher, tick, afterUpdate } from \"svelte\";\n\n\texport let value: any;\n\texport let depth = 0;\n\texport let is_root = false;\n\texport let is_last_item = true;\n\texport let key: string | number | null = null;\n\texport let open = false;\n\texport let theme_mode: \"system\" | \"light\" | \"dark\" = \"system\";\n\texport let show_indices = false;\n\texport let interactive = true;\n\n\tconst dispatch = createEventDispatcher();\n\tlet root_element: HTMLElement;\n\t$: collapsed = open ? false : depth >= 3;\n\tlet child_nodes: any[] = [];\n\n\tfunction is_collapsible(val: any): boolean {\n\t\treturn val !== null && (typeof val === \"object\" || Array.isArray(val));\n\t}\n\n\tasync function toggle_collapse(): Promise<void> {\n\t\tcollapsed = !collapsed;\n\t\tawait tick();\n\t\tdispatch(\"toggle\", { collapsed, depth });\n\t}\n\n\tfunction get_collapsed_preview(val: any): string {\n\t\tif (Array.isArray(val)) return `Array(${val.length})`;\n\t\tif (typeof val === \"object\" && val !== null)\n\t\t\treturn `Object(${Object.keys(val).length})`;\n\t\treturn String(val);\n\t}\n\n\t$: if (is_collapsible(value)) {\n\t\tchild_nodes = Object.entries(value);\n\t} else {\n\t\tchild_nodes = [];\n\t}\n\t$: if (is_root && root_element) {\n\t\tupdateLineNumbers();\n\t}\n\n\tfunction updateLineNumbers(): void {\n\t\tconst lines = root_element.querySelectorAll(\".line\");\n\t\tlines.forEach((line, index) => {\n\t\t\tconst line_number = line.querySelector(\".line-number\");\n\t\t\tif (line_number) {\n\t\t\t\tline_number.setAttribute(\"data-pseudo-content\", (index + 1).toString());\n\t\t\t\tline_number?.setAttribute(\n\t\t\t\t\t\"aria-roledescription\",\n\t\t\t\t\t`Line number ${index + 1}`\n\t\t\t\t);\n\t\t\t\tline_number?.setAttribute(\"title\", `Line number ${index + 1}`);\n\t\t\t}\n\t\t});\n\t}\n\n\tonMount(() => {\n\t\tif (is_root) {\n\t\t\tupdateLineNumbers();\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (is_root) {\n\t\t\tupdateLineNumbers();\n\t\t}\n\t});\n</script>\n\n<div\n\tclass=\"json-node\"\n\tclass:root={is_root}\n\tclass:dark-mode={theme_mode === \"dark\"}\n\tbind:this={root_element}\n\ton:toggle\n\tstyle=\"--depth: {depth};\"\n>\n\t<div class=\"line\" class:collapsed>\n\t\t<span class=\"line-number\"></span>\n\t\t<span class=\"content\">\n\t\t\t{#if is_collapsible(value)}\n\t\t\t\t<button\n\t\t\t\t\tdata-pseudo-content={interactive ? (collapsed ? \"▶\" : \"▼\") : \"\"}\n\t\t\t\t\taria-label={collapsed ? \"Expand\" : \"Collapse\"}\n\t\t\t\t\tclass=\"toggle\"\n\t\t\t\t\tdisabled={!interactive}\n\t\t\t\t\ton:click={toggle_collapse}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t\t{#if key !== null}\n\t\t\t\t<span class=\"key\">\"{key}\"</span><span class=\"punctuation colon\"\n\t\t\t\t\t>:\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t\t{#if is_collapsible(value)}\n\t\t\t\t<span\n\t\t\t\t\tclass=\"punctuation bracket\"\n\t\t\t\t\tclass:square-bracket={Array.isArray(value)}\n\t\t\t\t\t>{Array.isArray(value) ? \"[\" : \"{\"}</span\n\t\t\t\t>\n\t\t\t\t{#if collapsed}\n\t\t\t\t\t<button on:click={toggle_collapse} class=\"preview\">\n\t\t\t\t\t\t{get_collapsed_preview(value)}\n\t\t\t\t\t</button>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"punctuation bracket\"\n\t\t\t\t\t\tclass:square-bracket={Array.isArray(value)}\n\t\t\t\t\t\t>{Array.isArray(value) ? \"]\" : \"}\"}</span\n\t\t\t\t\t>\n\t\t\t\t{/if}\n\t\t\t{:else if typeof value === \"string\"}\n\t\t\t\t<span class=\"value string\">\"{value}\"</span>\n\t\t\t{:else if typeof value === \"number\"}\n\t\t\t\t<span class=\"value number\">{value}</span>\n\t\t\t{:else if typeof value === \"boolean\"}\n\t\t\t\t<span class=\"value bool\">{value.toString()}</span>\n\t\t\t{:else if value === null}\n\t\t\t\t<span class=\"value null\">null</span>\n\t\t\t{:else}\n\t\t\t\t<span>{value}</span>\n\t\t\t{/if}\n\t\t\t{#if !is_last_item && (!is_collapsible(value) || collapsed)}\n\t\t\t\t<span class=\"punctuation\">,</span>\n\t\t\t{/if}\n\t\t</span>\n\t</div>\n\n\t{#if is_collapsible(value)}\n\t\t<div class=\"children\" class:hidden={collapsed}>\n\t\t\t{#each child_nodes as [subKey, subVal], i}\n\t\t\t\t<svelte:self\n\t\t\t\t\tvalue={subVal}\n\t\t\t\t\tdepth={depth + 1}\n\t\t\t\t\tis_last_item={i === child_nodes.length - 1}\n\t\t\t\t\tkey={Array.isArray(value) && !show_indices ? null : subKey}\n\t\t\t\t\t{open}\n\t\t\t\t\t{theme_mode}\n\t\t\t\t\t{show_indices}\n\t\t\t\t\ton:toggle\n\t\t\t\t/>\n\t\t\t{/each}\n\t\t\t<div class=\"line\">\n\t\t\t\t<span class=\"line-number\"></span>\n\t\t\t\t<span class=\"content\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"punctuation bracket\"\n\t\t\t\t\t\tclass:square-bracket={Array.isArray(value)}\n\t\t\t\t\t\t>{Array.isArray(value) ? \"]\" : \"}\"}</span\n\t\t\t\t\t>\n\t\t\t\t\t{#if !is_last_item}<span class=\"punctuation\">,</span>{/if}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.json-node {\n\t\tfont-family: var(--font-mono);\n\t\t--text-color: #d18770;\n\t\t--key-color: var(--text-color);\n\t\t--string-color: #ce9178;\n\t\t--number-color: #719fad;\n\n\t\t--bracket-color: #5d8585;\n\t\t--square-bracket-color: #be6069;\n\t\t--punctuation-color: #8fbcbb;\n\t\t--line-number-color: #6a737d;\n\t\t--separator-color: var(--line-number-color);\n\t}\n\t.json-node.dark-mode {\n\t\t--bracket-color: #7eb4b3;\n\t\t--number-color: #638d9a;\n\t}\n\t.json-node.root {\n\t\tposition: relative;\n\t\tpadding-left: var(--size-14);\n\t}\n\t.json-node.root::before {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: var(--size-11);\n\t\twidth: 1px;\n\t\tbackground-color: var(--separator-color);\n\t}\n\t.line {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tline-height: var(--line-md);\n\t}\n\t.line-number {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\twidth: calc(var(--size-7));\n\t\ttext-align: right;\n\t\tcolor: var(--line-number-color);\n\t\tuser-select: none;\n\t\ttext-overflow: ellipsis;\n\t\ttext-overflow: ellipsis;\n\t\tdirection: rtl;\n\t\toverflow: hidden;\n\t}\n\t.content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding-left: calc(var(--depth) * var(--size-2));\n\t\tflex-wrap: wrap;\n\t}\n\t.children {\n\t\tpadding-left: var(--size-4);\n\t}\n\t.children.hidden {\n\t\tdisplay: none;\n\t}\n\t.key {\n\t\tcolor: var(--key-color);\n\t}\n\t.string {\n\t\tcolor: var(--string-color);\n\t}\n\t.number {\n\t\tcolor: var(--number-color);\n\t}\n\t.bool {\n\t\tcolor: var(--text-color);\n\t}\n\t.null {\n\t\tcolor: var(--text-color);\n\t}\n\t.value {\n\t\tmargin-left: var(--spacing-md);\n\t}\n\t.punctuation {\n\t\tcolor: var(--punctuation-color);\n\t}\n\t.bracket {\n\t\tmargin-left: var(--spacing-sm);\n\t\tcolor: var(--bracket-color);\n\t}\n\t.square-bracket {\n\t\tmargin-left: var(--spacing-sm);\n\t\tcolor: var(--square-bracket-color);\n\t}\n\t.toggle,\n\t.preview {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tcolor: inherit;\n\t\tcursor: pointer;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t}\n\t.toggle {\n\t\tuser-select: none;\n\t\tmargin-right: var(--spacing-md);\n\t}\n\t.preview {\n\t\tmargin: 0 var(--spacing-sm) 0 var(--spacing-lg);\n\t}\n\t.preview:hover {\n\t\ttext-decoration: underline;\n\t}\n\n\t:global([data-pseudo-content])::before {\n\t\tcontent: attr(data-pseudo-content);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onDestroy } from \"svelte\";\n\timport { JSON as JSONIcon } from \"@gradio/icons\";\n\timport { Empty, IconButtonWrapper, IconButton } from \"@gradio/atoms\";\n\timport JSONNode from \"./JSONNode.svelte\";\n\timport { Copy, Check } from \"@gradio/icons\";\n\n\texport let value: any = {};\n\texport let open = false;\n\texport let theme_mode: \"system\" | \"light\" | \"dark\" = \"system\";\n\texport let show_indices = false;\n\texport let label_height: number;\n\texport let interactive = true;\n\texport let show_copy_button = true;\n\n\t$: json_max_height = `calc(100% - ${label_height}px)`;\n\n\tlet copied = false;\n\tlet timer: NodeJS.Timeout;\n\n\tfunction copy_feedback(): void {\n\t\tcopied = true;\n\t\tif (timer) clearTimeout(timer);\n\t\ttimer = setTimeout(() => {\n\t\t\tcopied = false;\n\t\t}, 1000);\n\t}\n\n\tasync function handle_copy(): Promise<void> {\n\t\tif (\"clipboard\" in navigator) {\n\t\t\tawait navigator.clipboard.writeText(JSON.stringify(value, null, 2));\n\t\t\tcopy_feedback();\n\t\t}\n\t}\n\n\tfunction is_empty(obj: object): boolean {\n\t\treturn (\n\t\t\tobj &&\n\t\t\tObject.keys(obj).length === 0 &&\n\t\t\tObject.getPrototypeOf(obj) === Object.prototype &&\n\t\t\tJSON.stringify(obj) === JSON.stringify({})\n\t\t);\n\t}\n\n\tonDestroy(() => {\n\t\tif (timer) clearTimeout(timer);\n\t});\n</script>\n\n{#if value && value !== '\"\"' && !is_empty(value)}\n\t{#if show_copy_button}\n\t\t<IconButtonWrapper>\n\t\t\t<IconButton\n\t\t\t\tshow_label={false}\n\t\t\t\tlabel={copied ? \"Copied\" : \"Copy\"}\n\t\t\t\tIcon={copied ? Check : Copy}\n\t\t\t\ton:click={() => handle_copy()}\n\t\t\t/>\n\t\t</IconButtonWrapper>\n\t{/if}\n\t<div class=\"json-holder\" style:max-height={json_max_height}>\n\t\t<JSONNode\n\t\t\t{value}\n\t\t\tdepth={0}\n\t\t\tis_root={true}\n\t\t\t{open}\n\t\t\t{theme_mode}\n\t\t\t{show_indices}\n\t\t\t{interactive}\n\t\t/>\n\t</div>\n{:else}\n\t<div class=\"empty-wrapper\">\n\t\t<Empty>\n\t\t\t<JSONIcon />\n\t\t</Empty>\n\t</div>\n{/if}\n\n<style>\n\t:global(.copied svg) {\n\t\tanimation: fade ease 300ms;\n\t\tanimation-fill-mode: forwards;\n\t}\n\n\t@keyframes fade {\n\t\t0% {\n\t\t\topacity: 0;\n\t\t}\n\t\t100% {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\t.json-holder {\n\t\tpadding: var(--size-2);\n\t\toverflow-y: auto;\n\t}\n\n\t.empty-wrapper {\n\t\tmin-height: calc(var(--size-32) - 20px);\n\t\theight: 100%;\n\t}\n</style>\n"],"names":["$.prop","$.mutable_source","$.set","$.get","index","$.set_attribute","$.untrack","$.index","$$anchor","$.derived_safe_equal","$.bind_this"],"mappings":"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"}