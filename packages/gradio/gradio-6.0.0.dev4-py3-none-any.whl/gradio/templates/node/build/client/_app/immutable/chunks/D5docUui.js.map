{"version":3,"file":"D5docUui.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/audioBus.js","../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/webAudioBus.js"],"sourcesContent":["import { AbstractAudioBus } from \"./abstractAudioBus.js\";\n/**\n * Abstract class for an audio bus that has spatial audio and stereo output capabilities.\n *\n * Instances of this class can be connected to other audio buses.\n *\n * Audio buses are created by the {@link CreateAudioBusAsync} function.\n */\nexport class AudioBus extends AbstractAudioBus {\n    constructor(name, engine) {\n        super(name, engine);\n        this._outBus = null;\n        this._onOutBusDisposed = () => {\n            this.outBus = this.engine.defaultMainBus;\n        };\n    }\n    /**\n     * The output bus of the audio bus. Defaults to the audio engine's default main bus.\n     */\n    get outBus() {\n        return this._outBus;\n    }\n    set outBus(outBus) {\n        if (this._outBus === outBus) {\n            return;\n        }\n        if (this._outBus) {\n            this._outBus.onDisposeObservable.removeCallback(this._onOutBusDisposed);\n            if (!this._disconnect(this._outBus)) {\n                throw new Error(\"Disconnect failed\");\n            }\n        }\n        this._outBus = outBus;\n        if (this._outBus) {\n            this._outBus.onDisposeObservable.add(this._onOutBusDisposed);\n            if (!this._connect(this._outBus)) {\n                throw new Error(\"Connect failed\");\n            }\n        }\n    }\n    /**\n     * Releases associated resources.\n     */\n    dispose() {\n        super.dispose();\n        this._outBus = null;\n    }\n}\n//# sourceMappingURL=audioBus.js.map","import { AudioBus } from \"../abstractAudio/audioBus.js\";\nimport { _HasSpatialAudioOptions } from \"../abstractAudio/subProperties/abstractSpatialAudio.js\";\nimport { _StereoAudio } from \"../abstractAudio/subProperties/stereoAudio.js\";\nimport { _WebAudioBusAndSoundSubGraph } from \"./subNodes/webAudioBusAndSoundSubGraph.js\";\nimport { _SpatialWebAudio } from \"./subProperties/spatialWebAudio.js\";\n/** @internal */\nexport class _WebAudioBus extends AudioBus {\n    /** @internal */\n    constructor(name, engine, options) {\n        super(name, engine);\n        this._spatial = null;\n        this._spatialAutoUpdate = true;\n        this._spatialMinUpdateTime = 0;\n        this._stereo = null;\n        if (typeof options.spatialAutoUpdate === \"boolean\") {\n            this._spatialAutoUpdate = options.spatialAutoUpdate;\n        }\n        if (typeof options.spatialMinUpdateTime === \"number\") {\n            this._spatialMinUpdateTime = options.spatialMinUpdateTime;\n        }\n        this._subGraph = new _WebAudioBus._SubGraph(this);\n    }\n    /** @internal */\n    async _initAsync(options) {\n        if (options.outBus) {\n            this.outBus = options.outBus;\n        }\n        else {\n            await this.engine.isReadyPromise;\n            this.outBus = this.engine.defaultMainBus;\n        }\n        await this._subGraph.initAsync(options);\n        if (_HasSpatialAudioOptions(options)) {\n            this._initSpatialProperty();\n        }\n        this.engine._addNode(this);\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._spatial = null;\n        this._stereo = null;\n        this.engine._removeNode(this);\n    }\n    /** @internal */\n    get _inNode() {\n        return this._subGraph._inNode;\n    }\n    /** @internal */\n    get _outNode() {\n        return this._subGraph._outNode;\n    }\n    /** @internal */\n    get spatial() {\n        if (this._spatial) {\n            return this._spatial;\n        }\n        return this._initSpatialProperty();\n    }\n    /** @internal */\n    get stereo() {\n        return this._stereo ?? (this._stereo = new _StereoAudio(this._subGraph));\n    }\n    /** @internal */\n    getClassName() {\n        return \"_WebAudioBus\";\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        if (node._inNode) {\n            this._outNode?.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node._inNode) {\n            this._outNode?.disconnect(node._inNode);\n        }\n        return true;\n    }\n    _initSpatialProperty() {\n        if (!this._spatial) {\n            this._spatial = new _SpatialWebAudio(this._subGraph, this._spatialAutoUpdate, this._spatialMinUpdateTime);\n        }\n        return this._spatial;\n    }\n}\n_WebAudioBus._SubGraph = class extends _WebAudioBusAndSoundSubGraph {\n    get _downstreamNodes() {\n        return this._owner._downstreamNodes ?? null;\n    }\n    get _upstreamNodes() {\n        return this._owner._upstreamNodes ?? null;\n    }\n};\n//# sourceMappingURL=webAudioBus.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0,1]}