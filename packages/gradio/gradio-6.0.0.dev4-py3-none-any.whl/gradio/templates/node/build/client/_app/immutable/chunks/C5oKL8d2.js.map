{"version":3,"file":"C5oKL8d2.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/Rendering/iblCdfGeneratorSceneComponent.js"],"sourcesContent":["import { Scene } from \"../scene.js\";\nimport { SceneComponentConstants } from \"../sceneComponent.js\";\nimport { IblCdfGenerator } from \"./iblCdfGenerator.js\";\nObject.defineProperty(Scene.prototype, \"iblCdfGenerator\", {\n    get: function () {\n        return this._iblCdfGenerator;\n    },\n    set: function (value) {\n        if (value) {\n            this._iblCdfGenerator = value;\n        }\n    },\n    enumerable: true,\n    configurable: true,\n});\nScene.prototype.enableIblCdfGenerator = function () {\n    if (this._iblCdfGenerator) {\n        return this._iblCdfGenerator;\n    }\n    this._iblCdfGenerator = new IblCdfGenerator(this);\n    if (!this._iblCdfGenerator.isSupported) {\n        this._iblCdfGenerator = null;\n        return null;\n    }\n    if (this.environmentTexture) {\n        this._iblCdfGenerator.iblSource = this.environmentTexture;\n    }\n    return this._iblCdfGenerator;\n};\nScene.prototype.disableIblCdfGenerator = function () {\n    if (!this._iblCdfGenerator) {\n        return;\n    }\n    this._iblCdfGenerator.dispose();\n    this._iblCdfGenerator = null;\n};\n/**\n * Defines the IBL CDF Generator scene component responsible for generating CDF maps for a given IBL.\n */\nexport class IblCdfGeneratorSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_IBLCDFGENERATOR;\n        this._newIblObserver = null;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this._updateIblSource();\n        this._newIblObserver = this.scene.onEnvironmentTextureChangedObservable.add(this._updateIblSource.bind(this));\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        // Nothing to do for this component\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        this.scene.onEnvironmentTextureChangedObservable.remove(this._newIblObserver);\n    }\n    _updateIblSource() {\n        if (this.scene.iblCdfGenerator && this.scene.environmentTexture) {\n            this.scene.iblCdfGenerator.iblSource = this.scene.environmentTexture;\n        }\n    }\n}\nIblCdfGenerator._SceneComponentInitialization = (scene) => {\n    // Register the CDF generator component to the scene.\n    let component = scene._getComponent(SceneComponentConstants.NAME_IBLCDFGENERATOR);\n    if (!component) {\n        component = new IblCdfGeneratorSceneComponent(scene);\n        scene._addComponent(component);\n    }\n};\n//# sourceMappingURL=iblCdfGeneratorSceneComponent.js.map"],"names":[],"mappings":";;AAGA,OAAO,eAAe,MAAM,WAAW,mBAAmB;AAAA,EACtD,KAAK,WAAY;AACb,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,KAAK,SAAU,OAAO;AAClB,QAAI,OAAO;AACP,WAAK,mBAAmB;AAAA,IAC5B;AAAA,EACJ;AAAA,EACA,YAAY;AAAA,EACZ,cAAc;AAClB,CAAC;AACD,MAAM,UAAU,wBAAwB,WAAY;AAChD,MAAI,KAAK,kBAAkB;AACvB,WAAO,KAAK;AAAA,EAChB;AACA,OAAK,mBAAmB,IAAI,gBAAgB,IAAI;AAChD,MAAI,CAAC,KAAK,iBAAiB,aAAa;AACpC,SAAK,mBAAmB;AACxB,WAAO;AAAA,EACX;AACA,MAAI,KAAK,oBAAoB;AACzB,SAAK,iBAAiB,YAAY,KAAK;AAAA,EAC3C;AACA,SAAO,KAAK;AAChB;AACA,MAAM,UAAU,yBAAyB,WAAY;AACjD,MAAI,CAAC,KAAK,kBAAkB;AACxB;AAAA,EACJ;AACA,OAAK,iBAAiB,QAAO;AAC7B,OAAK,mBAAmB;AAC5B;AAIO,MAAM,8BAA8B;AAAA;AAAA;AAAA;AAAA;AAAA,EAKvC,YAAY,OAAO;AAIf,SAAK,OAAO,wBAAwB;AACpC,SAAK,kBAAkB;AACvB,SAAK,QAAQ;AAAA,EACjB;AAAA;AAAA;AAAA;AAAA,EAIA,WAAW;AACP,SAAK,iBAAgB;AACrB,SAAK,kBAAkB,KAAK,MAAM,sCAAsC,IAAI,KAAK,iBAAiB,KAAK,IAAI,CAAC;AAAA,EAChH;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU;AAAA,EAEV;AAAA;AAAA;AAAA;AAAA,EAIA,UAAU;AACN,SAAK,MAAM,sCAAsC,OAAO,KAAK,eAAe;AAAA,EAChF;AAAA,EACA,mBAAmB;AACf,QAAI,KAAK,MAAM,mBAAmB,KAAK,MAAM,oBAAoB;AAC7D,WAAK,MAAM,gBAAgB,YAAY,KAAK,MAAM;AAAA,IACtD;AAAA,EACJ;AACJ;AACA,gBAAgB,gCAAgC,CAAC,UAAU;AAEvD,MAAI,YAAY,MAAM,cAAc,wBAAwB,oBAAoB;AAChF,MAAI,CAAC,WAAW;AACZ,gBAAY,IAAI,8BAA8B,KAAK;AACnD,UAAM,cAAc,SAAS;AAAA,EACjC;AACJ;","x_google_ignoreList":[0]}