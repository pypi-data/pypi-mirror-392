{"version":3,"file":"B30ghMtc.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/FlowGraph/Blocks/Execution/flowGraphConsoleLogBlock.js"],"sourcesContent":["import { FlowGraphExecutionBlockWithOutSignal } from \"../../flowGraphExecutionBlockWithOutSignal.js\";\nimport { RichTypeAny } from \"../../flowGraphRichTypes.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\nimport { Logger } from \"../../../Misc/logger.js\";\n/**\n * Block that logs a message to the console.\n */\nexport class FlowGraphConsoleLogBlock extends FlowGraphExecutionBlockWithOutSignal {\n    constructor(config) {\n        super(config);\n        this.message = this.registerDataInput(\"message\", RichTypeAny);\n        this.logType = this.registerDataInput(\"logType\", RichTypeAny, \"log\");\n        if (config?.messageTemplate) {\n            const matches = this._getTemplateMatches(config.messageTemplate);\n            for (const match of matches) {\n                this.registerDataInput(match, RichTypeAny);\n            }\n        }\n    }\n    /**\n     * @internal\n     */\n    _execute(context) {\n        const typeValue = this.logType.getValue(context);\n        const messageValue = this._getMessageValue(context);\n        if (typeValue === \"warn\") {\n            Logger.Warn(messageValue);\n        }\n        else if (typeValue === \"error\") {\n            Logger.Error(messageValue);\n        }\n        else {\n            Logger.Log(messageValue);\n        }\n        // activate the output flow block\n        this.out._activateSignal(context);\n    }\n    /**\n     * @returns class name of the block.\n     */\n    getClassName() {\n        return \"FlowGraphConsoleLogBlock\" /* FlowGraphBlockNames.ConsoleLog */;\n    }\n    _getMessageValue(context) {\n        if (this.config?.messageTemplate) {\n            let template = this.config.messageTemplate;\n            const matches = this._getTemplateMatches(template);\n            for (const match of matches) {\n                const value = this.getDataInput(match)?.getValue(context);\n                if (value !== undefined) {\n                    // replace all\n                    template = template.replace(new RegExp(`\\\\{${match}\\\\}`, \"g\"), value.toString());\n                }\n            }\n            return template;\n        }\n        else {\n            return this.message.getValue(context);\n        }\n    }\n    _getTemplateMatches(template) {\n        const regex = /\\{([^}]+)\\}/g;\n        const matches = [];\n        let match;\n        while ((match = regex.exec(template)) !== null) {\n            matches.push(match[1]);\n        }\n        return matches;\n    }\n}\nRegisterClass(\"FlowGraphConsoleLogBlock\" /* FlowGraphBlockNames.ConsoleLog */, FlowGraphConsoleLogBlock);\n//# sourceMappingURL=flowGraphConsoleLogBlock.js.map"],"names":[],"mappings":";;;AAOO,MAAM,iCAAiC,qCAAqC;AAAA,EAC/E,YAAY,QAAQ;AAChB,UAAM,MAAM;AACZ,SAAK,UAAU,KAAK,kBAAkB,WAAW,WAAW;AAC5D,SAAK,UAAU,KAAK,kBAAkB,WAAW,aAAa,KAAK;AACnE,QAAI,QAAQ,iBAAiB;AACzB,YAAM,UAAU,KAAK,oBAAoB,OAAO,eAAe;AAC/D,iBAAW,SAAS,SAAS;AACzB,aAAK,kBAAkB,OAAO,WAAW;AAAA,MAC7C;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,SAAS;AACd,UAAM,YAAY,KAAK,QAAQ,SAAS,OAAO;AAC/C,UAAM,eAAe,KAAK,iBAAiB,OAAO;AAClD,QAAI,cAAc,QAAQ;AACtB,aAAO,KAAK,YAAY;AAAA,IAC5B,WACS,cAAc,SAAS;AAC5B,aAAO,MAAM,YAAY;AAAA,IAC7B,OACK;AACD,aAAO,IAAI,YAAY;AAAA,IAC3B;AAEA,SAAK,IAAI,gBAAgB,OAAO;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAIA,eAAe;AACX,WAAO;AAAA,EACX;AAAA,EACA,iBAAiB,SAAS;AACtB,QAAI,KAAK,QAAQ,iBAAiB;AAC9B,UAAI,WAAW,KAAK,OAAO;AAC3B,YAAM,UAAU,KAAK,oBAAoB,QAAQ;AACjD,iBAAW,SAAS,SAAS;AACzB,cAAM,QAAQ,KAAK,aAAa,KAAK,GAAG,SAAS,OAAO;AACxD,YAAI,UAAU,QAAW;AAErB,qBAAW,SAAS,QAAQ,IAAI,OAAO,MAAM,KAAK,OAAO,GAAG,GAAG,MAAM,SAAQ,CAAE;AAAA,QACnF;AAAA,MACJ;AACA,aAAO;AAAA,IACX,OACK;AACD,aAAO,KAAK,QAAQ,SAAS,OAAO;AAAA,IACxC;AAAA,EACJ;AAAA,EACA,oBAAoB,UAAU;AAC1B,UAAM,QAAQ;AACd,UAAM,UAAU,CAAA;AAChB,QAAI;AACJ,YAAQ,QAAQ,MAAM,KAAK,QAAQ,OAAO,MAAM;AAC5C,cAAQ,KAAK,MAAM,CAAC,CAAC;AAAA,IACzB;AACA,WAAO;AAAA,EACX;AACJ;AACA,cAAc,4BAAiE,wBAAwB;","x_google_ignoreList":[0]}