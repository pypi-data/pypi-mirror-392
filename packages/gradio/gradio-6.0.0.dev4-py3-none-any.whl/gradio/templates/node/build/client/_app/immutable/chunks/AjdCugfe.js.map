{"version":3,"file":"AjdCugfe.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/streamingSound.js","../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/abstractAudio/streamingSoundInstance.js","../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/AudioV2/webAudio/webAudioStreamingSound.js"],"sourcesContent":["import { AbstractSound } from \"./abstractSound.js\";\n/**\n * Abstract class representing a streaming sound.\n *\n * A streaming sound has a sound buffer that is loaded into memory in chunks as it is played. This allows it to be played\n * more quickly than a static sound, but it also means that it cannot have loop points or playback rate changes.\n *\n * Due to the way streaming sounds are typically implemented, there can be a significant delay when attempting to play\n * a streaming sound for the first time. To prevent this delay, it is recommended to preload instances of the sound\n * using the {@link IStreamingSoundStoredOptions.preloadCount} options, or the {@link preloadInstanceAsync} and\n * {@link preloadInstancesAsync} methods before calling the `play` method.\n *\n * Streaming sounds are created by the {@link CreateStreamingSoundAsync} function.\n */\nexport class StreamingSound extends AbstractSound {\n    constructor(name, engine) {\n        super(name, engine);\n        this._preloadedInstances = new Array();\n    }\n    /**\n     * The number of instances to preload. Defaults to `1`.\n     */\n    get preloadCount() {\n        return this._options.preloadCount ?? 1;\n    }\n    /**\n     * Returns the number of instances that have been preloaded.\n     */\n    get preloadCompletedCount() {\n        return this._preloadedInstances.length;\n    }\n    /**\n     * Preloads an instance of the sound.\n     * @returns A promise that resolves when the instance is preloaded.\n     */\n    // eslint-disable-next-line @typescript-eslint/promise-function-async, no-restricted-syntax\n    preloadInstanceAsync() {\n        const instance = this._createInstance();\n        this._addPreloadedInstance(instance);\n        return instance.preloadedPromise;\n    }\n    /**\n     * Preloads the given number of instances of the sound.\n     * @param count - The number of instances to preload.\n     * @returns A promise that resolves when all instances are preloaded.\n     */\n    async preloadInstancesAsync(count) {\n        for (let i = 0; i < count; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.preloadInstanceAsync();\n        }\n        await Promise.all(this._preloadedInstances.map(async (instance) => await instance.preloadedPromise));\n    }\n    /**\n     * Plays the sound.\n     * - Triggers `onEndedObservable` if played for the full duration and the `loop` option is not set.\n     * @param options The options to use when playing the sound. Options set here override the sound's options.\n     */\n    play(options = {}) {\n        if (this.state === 5 /* SoundState.Paused */) {\n            this.resume();\n            return;\n        }\n        let instance;\n        if (this.preloadCompletedCount > 0) {\n            instance = this._preloadedInstances[0];\n            instance.startOffset = this.startOffset;\n            this._removePreloadedInstance(instance);\n        }\n        else {\n            instance = this._createInstance();\n        }\n        const onInstanceStateChanged = () => {\n            if (instance.state === 3 /* SoundState.Started */) {\n                this._stopExcessInstances();\n                instance.onStateChangedObservable.removeCallback(onInstanceStateChanged);\n            }\n        };\n        instance.onStateChangedObservable.add(onInstanceStateChanged);\n        options.startOffset ?? (options.startOffset = this.startOffset);\n        options.loop ?? (options.loop = this.loop);\n        options.volume ?? (options.volume = 1);\n        this._beforePlay(instance);\n        instance.play(options);\n        this._afterPlay(instance);\n    }\n    /**\n     * Stops the sound.\n     */\n    stop() {\n        this._setState(1 /* SoundState.Stopped */);\n        if (!this._instances) {\n            return;\n        }\n        for (const instance of Array.from(this._instances)) {\n            instance.stop();\n        }\n    }\n    _addPreloadedInstance(instance) {\n        if (!this._preloadedInstances.includes(instance)) {\n            this._preloadedInstances.push(instance);\n        }\n    }\n    _removePreloadedInstance(instance) {\n        const index = this._preloadedInstances.indexOf(instance);\n        if (index !== -1) {\n            this._preloadedInstances.splice(index, 1);\n        }\n    }\n}\n//# sourceMappingURL=streamingSound.js.map","import { Observable } from \"../../Misc/observable.js\";\nimport { _AbstractSoundInstance } from \"./abstractSoundInstance.js\";\n/** @internal */\nexport class _StreamingSoundInstance extends _AbstractSoundInstance {\n    constructor(sound) {\n        super(sound);\n        /** @internal */\n        this.onReadyObservable = new Observable();\n        /** @internal */\n        this.preloadedPromise = new Promise((resolve, reject) => {\n            this._rejectPreloadedProimse = reject;\n            this._resolvePreloadedPromise = resolve;\n        });\n        this.onErrorObservable.add(this._rejectPreloadedProimse);\n        this.onReadyObservable.add(this._resolvePreloadedPromise);\n    }\n    /** @internal */\n    set startOffset(value) {\n        this._options.startOffset = value;\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this.onErrorObservable.clear();\n        this.onReadyObservable.clear();\n        this._resolvePreloadedPromise();\n    }\n}\n//# sourceMappingURL=streamingSoundInstance.js.map","import { Logger } from \"../../Misc/logger.js\";\nimport { Tools } from \"../../Misc/tools.js\";\nimport { StreamingSound } from \"../abstractAudio/streamingSound.js\";\nimport { _StreamingSoundInstance } from \"../abstractAudio/streamingSoundInstance.js\";\nimport { _HasSpatialAudioOptions } from \"../abstractAudio/subProperties/abstractSpatialAudio.js\";\nimport { _StereoAudio } from \"../abstractAudio/subProperties/stereoAudio.js\";\nimport { _CleanUrl } from \"../audioUtils.js\";\nimport { _WebAudioBusAndSoundSubGraph } from \"./subNodes/webAudioBusAndSoundSubGraph.js\";\nimport { _SpatialWebAudio } from \"./subProperties/spatialWebAudio.js\";\n/** @internal */\nexport class _WebAudioStreamingSound extends StreamingSound {\n    /** @internal */\n    constructor(name, engine, options) {\n        super(name, engine);\n        this._spatial = null;\n        this._spatialAutoUpdate = true;\n        this._spatialMinUpdateTime = 0;\n        this._stereo = null;\n        if (typeof options.spatialAutoUpdate === \"boolean\") {\n            this._spatialAutoUpdate = options.spatialAutoUpdate;\n        }\n        if (typeof options.spatialMinUpdateTime === \"number\") {\n            this._spatialMinUpdateTime = options.spatialMinUpdateTime;\n        }\n        this._options = {\n            autoplay: options.autoplay ?? false,\n            loop: options.loop ?? false,\n            maxInstances: options.maxInstances ?? Infinity,\n            preloadCount: options.preloadCount ?? 1,\n            startOffset: options.startOffset ?? 0,\n        };\n        this._subGraph = new _WebAudioStreamingSound._SubGraph(this);\n    }\n    /** @internal */\n    async _initAsync(source, options) {\n        const audioContext = this.engine._audioContext;\n        if (!(audioContext instanceof AudioContext)) {\n            throw new Error(\"Unsupported audio context type.\");\n        }\n        this._audioContext = audioContext;\n        this._source = source;\n        if (options.outBus) {\n            this.outBus = options.outBus;\n        }\n        else if (options.outBusAutoDefault !== false) {\n            await this.engine.isReadyPromise;\n            this.outBus = this.engine.defaultMainBus;\n        }\n        await this._subGraph.initAsync(options);\n        if (_HasSpatialAudioOptions(options)) {\n            this._initSpatialProperty();\n        }\n        if (this.preloadCount) {\n            await this.preloadInstancesAsync(this.preloadCount);\n        }\n        if (options.autoplay) {\n            this.play(options);\n        }\n        this.engine._addSound(this);\n    }\n    /** @internal */\n    get _inNode() {\n        return this._subGraph._inNode;\n    }\n    /** @internal */\n    get _outNode() {\n        return this._subGraph._outNode;\n    }\n    /** @internal */\n    get spatial() {\n        if (this._spatial) {\n            return this._spatial;\n        }\n        return this._initSpatialProperty();\n    }\n    /** @internal */\n    get stereo() {\n        return this._stereo ?? (this._stereo = new _StereoAudio(this._subGraph));\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this._spatial = null;\n        this._stereo = null;\n        this._subGraph.dispose();\n        this.engine._removeSound(this);\n    }\n    /** @internal */\n    getClassName() {\n        return \"_WebAudioStreamingSound\";\n    }\n    _createInstance() {\n        return new _WebAudioStreamingSoundInstance(this, this._options);\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        // If the wrapped node is not available now, it will be connected later by the subgraph.\n        if (node._inNode) {\n            this._outNode?.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node._inNode) {\n            this._outNode?.disconnect(node._inNode);\n        }\n        return true;\n    }\n    _initSpatialProperty() {\n        if (!this._spatial) {\n            this._spatial = new _SpatialWebAudio(this._subGraph, this._spatialAutoUpdate, this._spatialMinUpdateTime);\n        }\n        return this._spatial;\n    }\n}\n_WebAudioStreamingSound._SubGraph = class extends _WebAudioBusAndSoundSubGraph {\n    get _downstreamNodes() {\n        return this._owner._downstreamNodes ?? null;\n    }\n    get _upstreamNodes() {\n        return this._owner._upstreamNodes ?? null;\n    }\n};\n/** @internal */\nclass _WebAudioStreamingSoundInstance extends _StreamingSoundInstance {\n    constructor(sound, options) {\n        super(sound);\n        this._currentTimeChangedWhilePaused = false;\n        this._enginePlayTime = Infinity;\n        this._enginePauseTime = 0;\n        this._isReady = false;\n        this._isReadyPromise = new Promise((resolve, reject) => {\n            this._resolveIsReadyPromise = resolve;\n            this._rejectIsReadyPromise = reject;\n        });\n        this._onCanPlayThrough = () => {\n            this._isReady = true;\n            this._resolveIsReadyPromise(this._mediaElement);\n            this.onReadyObservable.notifyObservers(this);\n        };\n        this._onEnded = () => {\n            this.onEndedObservable.notifyObservers(this);\n            this.dispose();\n        };\n        this._onError = (reason) => {\n            this._setState(4 /* SoundState.FailedToStart */);\n            this.onErrorObservable.notifyObservers(reason);\n            this._rejectIsReadyPromise(reason);\n            this.dispose();\n        };\n        this._onEngineStateChanged = () => {\n            if (this.engine.state !== \"running\") {\n                return;\n            }\n            if (this._options.loop && this.state === 2 /* SoundState.Starting */) {\n                this.play();\n            }\n            this.engine.stateChangedObservable.removeCallback(this._onEngineStateChanged);\n        };\n        this._onUserGesture = () => {\n            this.play();\n        };\n        this._options = options;\n        this._volumeNode = new GainNode(sound._audioContext);\n        if (typeof sound._source === \"string\") {\n            this._initFromUrl(sound._source);\n        }\n        else if (Array.isArray(sound._source)) {\n            this._initFromUrls(sound._source);\n        }\n        else if (sound._source instanceof HTMLMediaElement) {\n            this._initFromMediaElement(sound._source);\n        }\n        else {\n            throw new Error(`Invalid streaming sound source (${sound._source}).`);\n        }\n    }\n    /** @internal */\n    get currentTime() {\n        if (this._state === 1 /* SoundState.Stopped */) {\n            return 0;\n        }\n        const timeSinceLastStart = this._state === 5 /* SoundState.Paused */ ? 0 : this.engine.currentTime - this._enginePlayTime;\n        return this._enginePauseTime + timeSinceLastStart + this._options.startOffset;\n    }\n    set currentTime(value) {\n        const restart = this._state === 2 /* SoundState.Starting */ || this._state === 3 /* SoundState.Started */;\n        if (restart) {\n            this._mediaElement.pause();\n            this._state = 1 /* SoundState.Stopped */;\n        }\n        this._options.startOffset = value;\n        if (restart) {\n            this.play({ startOffset: value });\n        }\n        else if (this._state === 5 /* SoundState.Paused */) {\n            this._currentTimeChangedWhilePaused = true;\n        }\n    }\n    get _outNode() {\n        return this._volumeNode;\n    }\n    /** @internal */\n    get startTime() {\n        if (this._state === 1 /* SoundState.Stopped */) {\n            return 0;\n        }\n        return this._enginePlayTime;\n    }\n    /** @internal */\n    dispose() {\n        super.dispose();\n        this.stop();\n        this._sourceNode?.disconnect(this._volumeNode);\n        this._sourceNode = null;\n        this._mediaElement.removeEventListener(\"error\", this._onError);\n        this._mediaElement.removeEventListener(\"ended\", this._onEnded);\n        this._mediaElement.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n        for (const source of Array.from(this._mediaElement.children)) {\n            this._mediaElement.removeChild(source);\n        }\n        this.engine.stateChangedObservable.removeCallback(this._onEngineStateChanged);\n        this.engine.userGestureObservable.removeCallback(this._onUserGesture);\n    }\n    /** @internal */\n    play(options = {}) {\n        if (this._state === 3 /* SoundState.Started */) {\n            return;\n        }\n        if (options.loop !== undefined) {\n            this._options.loop = options.loop;\n        }\n        this._mediaElement.loop = this._options.loop;\n        let startOffset = options.startOffset;\n        if (this._currentTimeChangedWhilePaused) {\n            startOffset = this._options.startOffset;\n            this._currentTimeChangedWhilePaused = false;\n        }\n        else if (this._state === 5 /* SoundState.Paused */) {\n            startOffset = this.currentTime + this._options.startOffset;\n        }\n        if (startOffset && startOffset > 0) {\n            this._mediaElement.currentTime = startOffset;\n        }\n        this._volumeNode.gain.value = options.volume ?? 1;\n        this._play();\n    }\n    /** @internal */\n    pause() {\n        if (this._state !== 2 /* SoundState.Starting */ && this._state !== 3 /* SoundState.Started */) {\n            return;\n        }\n        this._setState(5 /* SoundState.Paused */);\n        this._enginePauseTime += this.engine.currentTime - this._enginePlayTime;\n        this._mediaElement.pause();\n    }\n    /** @internal */\n    resume() {\n        if (this._state === 5 /* SoundState.Paused */) {\n            this.play();\n        }\n        else if (this._currentTimeChangedWhilePaused) {\n            this.play();\n        }\n    }\n    /** @internal */\n    stop() {\n        if (this._state === 1 /* SoundState.Stopped */) {\n            return;\n        }\n        this._stop();\n    }\n    /** @internal */\n    getClassName() {\n        return \"_WebAudioStreamingSoundInstance\";\n    }\n    _connect(node) {\n        const connected = super._connect(node);\n        if (!connected) {\n            return false;\n        }\n        // If the wrapped node is not available now, it will be connected later by the sound's subgraph.\n        if (node instanceof _WebAudioStreamingSound && node._inNode) {\n            this._outNode?.connect(node._inNode);\n        }\n        return true;\n    }\n    _disconnect(node) {\n        const disconnected = super._disconnect(node);\n        if (!disconnected) {\n            return false;\n        }\n        if (node instanceof _WebAudioStreamingSound && node._inNode) {\n            this._outNode?.disconnect(node._inNode);\n        }\n        return true;\n    }\n    _initFromMediaElement(mediaElement) {\n        Tools.SetCorsBehavior(mediaElement.currentSrc, mediaElement);\n        mediaElement.controls = false;\n        mediaElement.loop = this._options.loop;\n        mediaElement.preload = \"auto\";\n        mediaElement.addEventListener(\"canplaythrough\", this._onCanPlayThrough, { once: true });\n        mediaElement.addEventListener(\"ended\", this._onEnded, { once: true });\n        mediaElement.addEventListener(\"error\", this._onError, { once: true });\n        mediaElement.load();\n        this._sourceNode = new MediaElementAudioSourceNode(this._sound._audioContext, { mediaElement: mediaElement });\n        this._sourceNode.connect(this._volumeNode);\n        if (!this._connect(this._sound)) {\n            throw new Error(\"Connect failed\");\n        }\n        this._mediaElement = mediaElement;\n    }\n    _initFromUrl(url) {\n        const audio = new Audio(_CleanUrl(url));\n        this._initFromMediaElement(audio);\n    }\n    _initFromUrls(urls) {\n        const audio = new Audio();\n        for (const url of urls) {\n            const source = document.createElement(\"source\");\n            source.src = _CleanUrl(url);\n            audio.appendChild(source);\n        }\n        this._initFromMediaElement(audio);\n    }\n    _play() {\n        this._setState(2 /* SoundState.Starting */);\n        if (!this._isReady) {\n            this._playWhenReady();\n            return;\n        }\n        if (this._state !== 2 /* SoundState.Starting */) {\n            return;\n        }\n        if (this.engine.state === \"running\") {\n            const result = this._mediaElement.play();\n            this._enginePlayTime = this.engine.currentTime;\n            this._setState(3 /* SoundState.Started */);\n            // It's possible that the play() method fails on Safari, even if the audio engine's state is \"running\".\n            // This occurs when the audio context is paused by the system and resumed automatically by the audio engine\n            // without a user interaction (e.g. when the Vision Pro exits and reenters immersive mode).\n            // eslint-disable-next-line github/no-then\n            result.catch(() => {\n                this._setState(4 /* SoundState.FailedToStart */);\n                if (this._options.loop) {\n                    this.engine.userGestureObservable.addOnce(this._onUserGesture);\n                }\n            });\n        }\n        else if (this._options.loop) {\n            this.engine.stateChangedObservable.add(this._onEngineStateChanged);\n        }\n        else {\n            this.stop();\n            this._setState(4 /* SoundState.FailedToStart */);\n        }\n    }\n    _playWhenReady() {\n        this._isReadyPromise\n            // eslint-disable-next-line github/no-then\n            .then(() => {\n            this._play();\n        })\n            // eslint-disable-next-line github/no-then\n            .catch(() => {\n            Logger.Error(\"Streaming sound instance failed to play\");\n            this._setState(4 /* SoundState.FailedToStart */);\n        });\n    }\n    _stop() {\n        this._mediaElement.pause();\n        this._setState(1 /* SoundState.Stopped */);\n        this._onEnded();\n        this.engine.stateChangedObservable.removeCallback(this._onEngineStateChanged);\n    }\n}\n//# sourceMappingURL=webAudioStreamingSound.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0,1,2]}