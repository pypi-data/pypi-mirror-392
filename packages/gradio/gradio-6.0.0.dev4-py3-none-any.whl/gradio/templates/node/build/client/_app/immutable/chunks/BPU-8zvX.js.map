{"version":3,"file":"BPU-8zvX.js","sources":["../../../../../../../gallery/shared/utils.ts","../../../../../../../gallery/shared/Gallery.svelte"],"sourcesContent":["import { uploadToHuggingFace } from \"@gradio/utils\";\nimport type { FileData } from \"@gradio/client\";\n\nexport async function format_gallery_for_sharing(\n\tvalue: [FileData, string | null][] | null\n): Promise<string> {\n\tif (!value) return \"\";\n\tlet urls = await Promise.all(\n\t\tvalue.map(async ([image, _]) => {\n\t\t\tif (image === null || !image.url) return \"\";\n\t\t\treturn await uploadToHuggingFace(image.url, \"url\");\n\t\t})\n\t);\n\n\treturn `<div style=\"display: flex; flex-wrap: wrap; gap: 16px\">${urls\n\t\t.map((url) => `<img src=\"${url}\" style=\"height: 400px\" />`)\n\t\t.join(\"\")}</div>`;\n}\n","<script lang=\"ts\">\n\timport {\n\t\tBlockLabel,\n\t\tEmpty,\n\t\tShareButton,\n\t\tIconButton,\n\t\tIconButtonWrapper,\n\t\tFullscreenButton\n\t} from \"@gradio/atoms\";\n\timport { ModifyUpload, Upload as UploadComponent } from \"@gradio/upload\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { Image } from \"@gradio/image/shared\";\n\timport { Video } from \"@gradio/video/shared\";\n\timport { dequal } from \"dequal\";\n\timport { createEventDispatcher, onMount } from \"svelte\";\n\timport { tick } from \"svelte\";\n\timport type { GalleryImage, GalleryVideo } from \"../types\";\n\n\timport {\n\t\tDownload,\n\t\tImage as ImageIcon,\n\t\tClear,\n\t\tPlay,\n\t\tUpload as UploadIcon\n\t} from \"@gradio/icons\";\n\timport { FileData } from \"@gradio/client\";\n\timport type { Client } from \"@gradio/client\";\n\timport { format_gallery_for_sharing } from \"./utils\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\ttype GalleryData = GalleryImage | GalleryVideo;\n\n\texport let show_label = true;\n\texport let label: string;\n\texport let value: GalleryData[] | null = null;\n\texport let columns: number | number[] | undefined = [2];\n\texport let rows: number | number[] | undefined = undefined;\n\texport let height: number | \"auto\" = \"auto\";\n\texport let preview: boolean;\n\texport let allow_preview = true;\n\texport let object_fit: \"contain\" | \"cover\" | \"fill\" | \"none\" | \"scale-down\" =\n\t\t\"cover\";\n\texport let show_share_button = false;\n\texport let show_download_button = false;\n\texport let i18n: I18nFormatter;\n\texport let selected_index: number | null = null;\n\texport let interactive: boolean;\n\texport let _fetch: typeof fetch;\n\texport let mode: \"normal\" | \"minimal\" = \"normal\";\n\texport let show_fullscreen_button = true;\n\texport let display_icon_button_wrapper_top_corner = false;\n\texport let fullscreen = false;\n\texport let root = \"\";\n\texport let file_types: string[] | null = [\"image\", \"video\"];\n\texport let max_file_size: number | null = null;\n\texport let upload: Client[\"upload\"] | undefined = undefined;\n\texport let stream_handler: Client[\"stream\"] | undefined = undefined;\n\texport let fit_columns = true;\n\texport let upload_promise: Promise<any> | null = null;\n\n\tlet is_full_screen = false;\n\tlet image_container: HTMLElement;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: undefined;\n\t\tselect: SelectData;\n\t\tpreview_open: undefined;\n\t\tpreview_close: undefined;\n\t\tfullscreen: boolean;\n\t\tdelete: { file: FileData; index: number };\n\t\tupload: FileData | FileData[];\n\t\terror: string;\n\t\tclear: undefined;\n\t}>();\n\n\t// tracks whether the value of the gallery was reset\n\tlet was_reset = true;\n\n\t$: was_reset = value == null || value.length === 0 ? true : was_reset;\n\n\tlet resolved_value: GalleryData[] | null = null;\n\n\t$: resolved_value =\n\t\tvalue == null\n\t\t\t? null\n\t\t\t: (value.map((data) => {\n\t\t\t\t\tif (\"video\" in data) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tvideo: data.video as FileData,\n\t\t\t\t\t\t\tcaption: data.caption\n\t\t\t\t\t\t};\n\t\t\t\t\t} else if (\"image\" in data) {\n\t\t\t\t\t\treturn { image: data.image as FileData, caption: data.caption };\n\t\t\t\t\t}\n\t\t\t\t\treturn {};\n\t\t\t\t}) as GalleryData[]);\n\n\tlet effective_columns: number | number[] | undefined = columns;\n\n\t$: {\n\t\tif (resolved_value && columns && fit_columns) {\n\t\t\tconst item_count = resolved_value.length;\n\t\t\tif (Array.isArray(columns)) {\n\t\t\t\teffective_columns = columns.map((col) => Math.min(col, item_count));\n\t\t\t} else {\n\t\t\t\teffective_columns = Math.min(columns, item_count);\n\t\t\t}\n\t\t} else {\n\t\t\teffective_columns = columns;\n\t\t}\n\t}\n\n\tlet prev_value: GalleryData[] | null = value;\n\tif (selected_index == null && preview && value?.length) {\n\t\tselected_index = 0;\n\t}\n\tlet old_selected_index: number | null = selected_index;\n\n\t$: if (!dequal(prev_value, value)) {\n\t\t// When value is falsy (clear button or first load),\n\t\t// preview determines the selected image\n\t\tif (was_reset) {\n\t\t\tselected_index = preview && value?.length ? 0 : null;\n\t\t\twas_reset = false;\n\t\t\t// Otherwise we keep the selected_index the same if the\n\t\t\t// gallery has at least as many elements as it did before\n\t\t} else {\n\t\t\tif (selected_index !== null && value !== null) {\n\t\t\t\tselected_index = Math.max(\n\t\t\t\t\t0,\n\t\t\t\t\tMath.min(selected_index, value.length - 1)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tselected_index = null;\n\t\t\t}\n\t\t}\n\t\tdispatch(\"change\");\n\t\tprev_value = value;\n\t}\n\n\t$: previous =\n\t\t((selected_index ?? 0) + (resolved_value?.length ?? 0) - 1) %\n\t\t(resolved_value?.length ?? 0);\n\t$: next = ((selected_index ?? 0) + 1) % (resolved_value?.length ?? 0);\n\n\tfunction handle_preview_click(event: MouseEvent): void {\n\t\tconst element = event.target as HTMLElement;\n\t\tconst x = event.offsetX;\n\t\tconst width = element.offsetWidth;\n\t\tconst centerX = width / 2;\n\n\t\tif (x < centerX) {\n\t\t\tselected_index = previous;\n\t\t} else {\n\t\t\tselected_index = next;\n\t\t}\n\t}\n\n\tfunction on_keydown(e: KeyboardEvent): void {\n\t\tswitch (e.code) {\n\t\t\tcase \"Escape\":\n\t\t\t\te.preventDefault();\n\t\t\t\tselected_index = null;\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\te.preventDefault();\n\t\t\t\tselected_index = previous;\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowRight\":\n\t\t\t\te.preventDefault();\n\t\t\t\tselected_index = next;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t$: {\n\t\tif (selected_index !== old_selected_index) {\n\t\t\told_selected_index = selected_index;\n\t\t\tif (selected_index !== null) {\n\t\t\t\tif (resolved_value != null) {\n\t\t\t\t\tselected_index = Math.max(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tMath.min(selected_index, resolved_value.length - 1)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdispatch(\"select\", {\n\t\t\t\t\tindex: selected_index,\n\t\t\t\t\tvalue: resolved_value?.[selected_index]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t$: if (allow_preview) {\n\t\tscroll_to_img(selected_index);\n\t}\n\n\tlet el: HTMLButtonElement[] = [];\n\tlet container_element: HTMLDivElement;\n\n\tasync function scroll_to_img(index: number | null): Promise<void> {\n\t\tif (typeof index !== \"number\") return;\n\t\tawait tick();\n\n\t\tif (el[index] === undefined) return;\n\n\t\tel[index]?.focus();\n\n\t\tconst { left: container_left, width: container_width } =\n\t\t\tcontainer_element.getBoundingClientRect();\n\t\tconst { left, width } = el[index].getBoundingClientRect();\n\n\t\tconst relative_left = left - container_left;\n\n\t\tconst pos =\n\t\t\trelative_left +\n\t\t\twidth / 2 -\n\t\t\tcontainer_width / 2 +\n\t\t\tcontainer_element.scrollLeft;\n\n\t\tif (container_element && typeof container_element.scrollTo === \"function\") {\n\t\t\tcontainer_element.scrollTo({\n\t\t\t\tleft: pos < 0 ? 0 : pos,\n\t\t\t\tbehavior: \"smooth\"\n\t\t\t});\n\t\t}\n\t}\n\n\tlet window_height = 0;\n\n\t// Unlike `gr.Image()`, images specified via remote URLs are not cached in the server\n\t// and their remote URLs are directly passed to the client as `value[].image.url`.\n\t// The `download` attribute of the <a> tag doesn't work for remote URLs (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#download),\n\t// so we need to download the image via JS as below.\n\tasync function download(file_url: string, name: string): Promise<void> {\n\t\tlet response;\n\t\ttry {\n\t\t\tresponse = await _fetch(file_url);\n\t\t} catch (error) {\n\t\t\tif (error instanceof TypeError) {\n\t\t\t\t// If CORS is not allowed (https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#checking_that_the_fetch_was_successful),\n\t\t\t\t// open the link in a new tab instead, mimicing the behavior of the `download` attribute for remote URLs,\n\t\t\t\t// which is not ideal, but a reasonable fallback.\n\t\t\t\twindow.open(file_url, \"_blank\", \"noreferrer\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\t\tconst blob = await response.blob();\n\t\tconst url = URL.createObjectURL(blob);\n\t\tconst link = document.createElement(\"a\");\n\t\tlink.href = url;\n\t\tlink.download = name;\n\t\tlink.click();\n\t\tURL.revokeObjectURL(url);\n\t}\n\n\t$: selected_media =\n\t\tselected_index != null && resolved_value != null\n\t\t\t? resolved_value[selected_index]\n\t\t\t: null;\n\n\tlet thumbnails_overflow = false;\n\n\tfunction check_thumbnails_overflow(): void {\n\t\tif (container_element) {\n\t\t\tthumbnails_overflow =\n\t\t\t\tcontainer_element.scrollWidth > container_element.clientWidth;\n\t\t}\n\t}\n\n\tonMount(() => {\n\t\tcheck_thumbnails_overflow();\n\t\tdocument.addEventListener(\"fullscreenchange\", () => {\n\t\t\tis_full_screen = !!document.fullscreenElement;\n\t\t});\n\t\twindow.addEventListener(\"resize\", check_thumbnails_overflow);\n\t\treturn () =>\n\t\t\twindow.removeEventListener(\"resize\", check_thumbnails_overflow);\n\t});\n\n\t$: (resolved_value, check_thumbnails_overflow());\n\t$: if (container_element) {\n\t\tcheck_thumbnails_overflow();\n\t}\n\n\tfunction handle_item_delete(index: number): void {\n\t\tif (!value || !resolved_value) return;\n\n\t\tconst deleted_item = resolved_value[index];\n\t\tlet deleted_file_data;\n\n\t\tif (\"image\" in deleted_item) {\n\t\t\tdeleted_file_data = {\n\t\t\t\tfile: deleted_item.image,\n\t\t\t\tindex: index\n\t\t\t};\n\t\t} else if (\"video\" in deleted_item) {\n\t\t\tdeleted_file_data = {\n\t\t\t\tfile: deleted_item.video,\n\t\t\t\tindex: index\n\t\t\t};\n\t\t}\n\n\t\tif (deleted_file_data) {\n\t\t\tdispatch(\"delete\", deleted_file_data);\n\t\t}\n\t}\n\n\tlet uploading = false;\n</script>\n\n<svelte:window bind:innerHeight={window_height} />\n\n{#if show_label}\n\t<BlockLabel {show_label} Icon={ImageIcon} label={label || \"Gallery\"} />\n{/if}\n{#if value == null || resolved_value == null || resolved_value.length === 0}\n\t<Empty unpadded_box={true} size=\"large\"><ImageIcon /></Empty>\n{:else}\n\t<div class=\"gallery-container\" bind:this={image_container}>\n\t\t{#if selected_media && allow_preview}\n\t\t\t<span\n\t\t\t\ton:keydown={on_keydown}\n\t\t\t\tclass=\"preview\"\n\t\t\t\tclass:minimal={mode === \"minimal\"}\n\t\t\t>\n\t\t\t\t<IconButtonWrapper\n\t\t\t\t\tdisplay_top_corner={display_icon_button_wrapper_top_corner}\n\t\t\t\t>\n\t\t\t\t\t{#if show_download_button}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tIcon={Download}\n\t\t\t\t\t\t\tlabel={i18n(\"common.download\")}\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tconst image =\n\t\t\t\t\t\t\t\t\t\"image\" in selected_media\n\t\t\t\t\t\t\t\t\t\t? selected_media?.image\n\t\t\t\t\t\t\t\t\t\t: selected_media?.video;\n\t\t\t\t\t\t\t\tif (image == null) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst { url, orig_name } = image;\n\t\t\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\t\t\tdownload(url, orig_name ?? \"image\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if show_fullscreen_button}\n\t\t\t\t\t\t<FullscreenButton {fullscreen} on:fullscreen />\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if show_share_button}\n\t\t\t\t\t\t<div class=\"icon-button\">\n\t\t\t\t\t\t\t<ShareButton\n\t\t\t\t\t\t\t\t{i18n}\n\t\t\t\t\t\t\t\ton:share\n\t\t\t\t\t\t\t\ton:error\n\t\t\t\t\t\t\t\tvalue={resolved_value}\n\t\t\t\t\t\t\t\tformatter={format_gallery_for_sharing}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if !is_full_screen}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tIcon={Clear}\n\t\t\t\t\t\t\tlabel=\"Close\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tselected_index = null;\n\t\t\t\t\t\t\t\tdispatch(\"preview_close\");\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t</IconButtonWrapper>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"media-button\"\n\t\t\t\t\ton:click={\"image\" in selected_media\n\t\t\t\t\t\t? (event) => handle_preview_click(event)\n\t\t\t\t\t\t: null}\n\t\t\t\t\tstyle=\"height: calc(100% - {selected_media.caption\n\t\t\t\t\t\t? '80px'\n\t\t\t\t\t\t: '60px'})\"\n\t\t\t\t\taria-label=\"detailed view of selected image\"\n\t\t\t\t>\n\t\t\t\t\t{#if \"image\" in selected_media}\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\trestProps={{\n\t\t\t\t\t\t\t\talt: selected_media.caption || \"\",\n\t\t\t\t\t\t\t\ttitle: selected_media.caption || null,\n\t\t\t\t\t\t\t\tclass: selected_media.caption && \"with-caption\",\n\t\t\t\t\t\t\t\tloading: \"lazy\"\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsrc={selected_media.image.url}\n\t\t\t\t\t\t\tdata_testid=\"detailed-image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\tsrc={selected_media.video.url}\n\t\t\t\t\t\t\tdata-testid={\"detailed-video\"}\n\t\t\t\t\t\t\talt={selected_media.caption || \"\"}\n\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\tloop={false}\n\t\t\t\t\t\t\tis_stream={false}\n\t\t\t\t\t\t\tmuted={false}\n\t\t\t\t\t\t\tcontrols={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t\t{#if selected_media?.caption}\n\t\t\t\t\t<caption class=\"caption\">\n\t\t\t\t\t\t{selected_media.caption}\n\t\t\t\t\t</caption>\n\t\t\t\t{/if}\n\t\t\t\t<div\n\t\t\t\t\tbind:this={container_element}\n\t\t\t\t\tclass=\"thumbnails scroll-hide\"\n\t\t\t\t\tdata-testid=\"container_el\"\n\t\t\t\t\tstyle=\"justify-content: {thumbnails_overflow\n\t\t\t\t\t\t? 'flex-start'\n\t\t\t\t\t\t: 'center'};\"\n\t\t\t\t>\n\t\t\t\t\t{#each resolved_value as media, i}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tbind:this={el[i]}\n\t\t\t\t\t\t\ton:click={() => (selected_index = i)}\n\t\t\t\t\t\t\tclass=\"thumbnail-item thumbnail-small\"\n\t\t\t\t\t\t\tclass:selected={selected_index === i && mode !== \"minimal\"}\n\t\t\t\t\t\t\taria-label={\"Thumbnail \" +\n\t\t\t\t\t\t\t\t(i + 1) +\n\t\t\t\t\t\t\t\t\" of \" +\n\t\t\t\t\t\t\t\tresolved_value.length}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if \"image\" in media}\n\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\tsrc={media.image.url}\n\t\t\t\t\t\t\t\t\trestProps={{\n\t\t\t\t\t\t\t\t\t\ttitle: media.caption || null,\n\t\t\t\t\t\t\t\t\t\talt: \"\",\n\t\t\t\t\t\t\t\t\t\tclass: \"with-caption\",\n\t\t\t\t\t\t\t\t\t\tloading: \"lazy\"\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tdata_testid={`thumbnail ${i + 1}`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<Play />\n\t\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\t\tsrc={media.video.url}\n\t\t\t\t\t\t\t\t\ttitle={media.caption || null}\n\t\t\t\t\t\t\t\t\tis_stream={false}\n\t\t\t\t\t\t\t\t\tdata-testid={\"thumbnail \" + (i + 1)}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\tloop={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\"grid-wrap\"\n\t\t\tclass:minimal={mode === \"minimal\"}\n\t\t\tclass:fixed-height={mode !== \"minimal\" && (!height || height == \"auto\")}\n\t\t\tclass:hidden={is_full_screen}\n\t\t\tstyle:height={height !== \"auto\" ? height + \"px\" : null}\n\t\t>\n\t\t\t{#if interactive && selected_index === null}\n\t\t\t\t<ModifyUpload\n\t\t\t\t\t{i18n}\n\t\t\t\t\ton:clear={() => {\n\t\t\t\t\t\tvalue = [];\n\t\t\t\t\t\tdispatch(\"clear\");\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{#if upload && stream_handler}\n\t\t\t\t\t\t<IconButton Icon={UploadIcon} label={i18n(\"common.upload\")}>\n\t\t\t\t\t\t\t<UploadComponent\n\t\t\t\t\t\t\t\tbind:upload_promise\n\t\t\t\t\t\t\t\ticon_upload={true}\n\t\t\t\t\t\t\t\ton:load={(e) => dispatch(\"upload\", e.detail)}\n\t\t\t\t\t\t\t\tfiletype={file_types}\n\t\t\t\t\t\t\t\tfile_count=\"multiple\"\n\t\t\t\t\t\t\t\t{max_file_size}\n\t\t\t\t\t\t\t\t{root}\n\t\t\t\t\t\t\t\tbind:uploading\n\t\t\t\t\t\t\t\ton:error={(e) => dispatch(\"error\", e.detail)}\n\t\t\t\t\t\t\t\t{stream_handler}\n\t\t\t\t\t\t\t\t{upload}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t{/if}\n\t\t\t\t</ModifyUpload>\n\t\t\t{/if}\n\t\t\t<div\n\t\t\t\tclass=\"grid-container\"\n\t\t\t\tstyle=\"--grid-cols:{effective_columns}; --grid-rows:{rows}; --object-fit: {object_fit};\"\n\t\t\t\tclass:pt-6={show_label}\n\t\t\t>\n\t\t\t\t{#each resolved_value as entry, i}\n\t\t\t\t\t<div class=\"gallery-item\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"thumbnail-item thumbnail-lg\"\n\t\t\t\t\t\t\tclass:selected={selected_index === i}\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tif (selected_index === null && allow_preview) {\n\t\t\t\t\t\t\t\t\tdispatch(\"preview_open\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tselected_index = i;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\taria-label={\"Thumbnail \" +\n\t\t\t\t\t\t\t\t(i + 1) +\n\t\t\t\t\t\t\t\t\" of \" +\n\t\t\t\t\t\t\t\tresolved_value.length}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if \"image\" in entry}\n\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\talt={entry.caption || \"\"}\n\t\t\t\t\t\t\t\t\tsrc={typeof entry.image === \"string\"\n\t\t\t\t\t\t\t\t\t\t? entry.image\n\t\t\t\t\t\t\t\t\t\t: entry.image.url}\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<Play />\n\t\t\t\t\t\t\t\t<Video\n\t\t\t\t\t\t\t\t\tsrc={entry.video.url}\n\t\t\t\t\t\t\t\t\ttitle={entry.caption || null}\n\t\t\t\t\t\t\t\t\tis_stream={false}\n\t\t\t\t\t\t\t\t\tdata-testid={\"thumbnail \" + (i + 1)}\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\tloop={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if entry.caption}\n\t\t\t\t\t\t\t\t<div class=\"caption-label\">\n\t\t\t\t\t\t\t\t\t{entry.caption}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{#if interactive}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"delete-button\"\n\t\t\t\t\t\t\t\ton:click|stopPropagation={() => handle_item_delete(i)}\n\t\t\t\t\t\t\t\taria-label=\"Delete image\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clear />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n\n<style lang=\"postcss\">\n\t.image-container {\n\t\theight: 100%;\n\t\tposition: relative;\n\t}\n\t.image-container :global(img),\n\tbutton {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t\tdisplay: block;\n\t\tborder-radius: var(--radius-lg);\n\t}\n\n\t.preview {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\tflex-direction: column;\n\t\tz-index: var(--layer-2);\n\t\tborder-radius: calc(var(--block-radius) - var(--block-border-width));\n\t\t-webkit-backdrop-filter: blur(8px);\n\t\tbackdrop-filter: blur(8px);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\t.preview.minimal {\n\t\twidth: fit-content;\n\t\theight: fit-content;\n\t}\n\n\t.preview::before {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tz-index: var(--layer-below);\n\t\tbackground: var(--background-fill-primary);\n\t\topacity: 0.9;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\t.fixed-height {\n\t\tmin-height: var(--size-80);\n\t\tmax-height: 55vh;\n\t}\n\n\t@media (--screen-xl) {\n\t\t.fixed-height {\n\t\t\tmin-height: 450px;\n\t\t}\n\t}\n\n\t.media-button {\n\t\theight: calc(100% - 60px);\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t}\n\t.media-button :global(img),\n\t.media-button :global(video) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t}\n\t.thumbnails :global(img) {\n\t\tobject-fit: cover;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\t.thumbnails :global(svg) {\n\t\tposition: absolute;\n\t\ttop: var(--size-2);\n\t\tleft: var(--size-2);\n\t\twidth: 50%;\n\t\theight: 50%;\n\t\topacity: 50%;\n\t}\n\t.preview :global(img.with-caption) {\n\t\theight: var(--size-full);\n\t}\n\n\t.preview.minimal :global(img.with-caption) {\n\t\theight: auto;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.caption {\n\t\tpadding: var(--size-2) var(--size-3);\n\t\toverflow: hidden;\n\t\tcolor: var(--block-label-text-color);\n\t\tfont-weight: var(--weight-semibold);\n\t\ttext-align: center;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\talign-self: center;\n\t}\n\n\t.thumbnails {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tjustify-content: flex-start;\n\t\talign-items: center;\n\t\tgap: var(--spacing-lg);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-14);\n\t\toverflow-x: scroll;\n\t}\n\n\t.thumbnail-item {\n\t\t--ring-color: transparent;\n\t\tposition: relative;\n\t\tbox-shadow:\n\t\t\tinset 0 0 0 1px var(--ring-color),\n\t\t\tvar(--shadow-drop);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--button-small-radius);\n\t\tbackground: var(--background-fill-secondary);\n\t\taspect-ratio: var(--ratio-square);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\toverflow: clip;\n\t}\n\n\t.thumbnail-item:hover {\n\t\t--ring-color: var(--color-accent);\n\t\tborder-color: var(--color-accent);\n\t\tfilter: brightness(1.1);\n\t}\n\n\t.thumbnail-item.selected {\n\t\t--ring-color: var(--color-accent);\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.thumbnail-item :global(svg) {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\twidth: 50%;\n\t\theight: 50%;\n\t\topacity: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\n\t.thumbnail-item :global(video) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\toverflow: hidden;\n\t\tobject-fit: cover;\n\t}\n\n\t.thumbnail-small {\n\t\tflex: none;\n\t\ttransform: scale(0.9);\n\t\ttransition: 0.075s;\n\t\twidth: var(--size-9);\n\t\theight: var(--size-9);\n\t}\n\t.thumbnail-small.selected {\n\t\t--ring-color: var(--color-accent);\n\t\ttransform: scale(1);\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.thumbnail-small > img {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\toverflow: hidden;\n\t\tobject-fit: var(--object-fit);\n\t}\n\n\t.grid-wrap {\n\t\tposition: relative;\n\t\tpadding: var(--size-2);\n\t\toverflow-y: scroll;\n\t}\n\n\t.grid-container {\n\t\tdisplay: grid;\n\t\tposition: relative;\n\t\tgrid-template-rows: repeat(var(--grid-rows), minmax(100px, 1fr));\n\t\tgrid-template-columns: repeat(var(--grid-cols), minmax(100px, 1fr));\n\t\tgrid-auto-rows: minmax(100px, 1fr);\n\t\tgap: var(--spacing-lg);\n\t}\n\n\t.thumbnail-lg > :global(img) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\toverflow: hidden;\n\t\tobject-fit: var(--object-fit);\n\t}\n\n\t.thumbnail-lg:hover .caption-label {\n\t\topacity: 0.5;\n\t}\n\n\t.caption-label {\n\t\tposition: absolute;\n\t\tright: var(--block-label-margin);\n\t\tbottom: var(--block-label-margin);\n\t\tz-index: var(--layer-1);\n\t\tborder-top: 1px solid var(--border-color-primary);\n\t\tborder-left: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--block-label-radius);\n\t\tbackground: var(--background-fill-secondary);\n\t\tpadding: var(--block-label-padding);\n\t\tmax-width: 80%;\n\t\toverflow: hidden;\n\t\tfont-size: var(--block-label-text-size);\n\t\ttext-align: left;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.grid-wrap.minimal {\n\t\tpadding: 0;\n\t}\n\n\t.gallery-item {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.delete-button {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tz-index: var(--layer-1);\n\t\tborder-top: 1px solid var(--border-color-primary);\n\t\tborder-right: 1px solid var(--border-color-primary);\n\t\tborder-radius: 0 var(--radius-sm) 0 var(--radius-sm);\n\t\tbackground: var(--background-fill-secondary);\n\t\tpadding: var(--block-label-padding);\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\topacity: 0;\n\t\ttransition: opacity 0.2s ease;\n\t\tfont-size: var(--block-label-text-size);\n\t\tcolor: var(--block-label-text-color);\n\t\tfont-weight: var(--weight-semibold);\n\t\twidth: auto;\n\t\theight: auto;\n\t\tmin-width: fit-content;\n\t\tmin-height: fit-content;\n\t}\n\n\t.gallery-item:hover .delete-button {\n\t\topacity: 1;\n\t}\n\n\t.delete-button:hover {\n\t\topacity: 0.8;\n\t}\n\n\t.delete-button :global(svg) {\n\t\twidth: var(--text-xs);\n\t\theight: var(--text-md);\n\t\tcolor: var(--block-label-text-color);\n\t}\n</style>\n"],"names":["$.prop","$.mutable_source","event","index","$.get","$.set","$.derived_safe_equal","ImageIcon","$.untrack","$.each","$.bind_this","i","$.mutate","$.set_class","$.event","UploadIcon","$.stopPropagation","$.set_style"],"mappings":"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"}