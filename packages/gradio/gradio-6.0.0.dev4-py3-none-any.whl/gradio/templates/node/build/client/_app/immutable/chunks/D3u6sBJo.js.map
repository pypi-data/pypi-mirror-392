{"version":3,"file":"D3u6sBJo.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphSwitchBlock.js"],"sourcesContent":["import { FlowGraphExecutionBlock } from \"../../../flowGraphExecutionBlock.js\";\nimport { RichTypeAny } from \"../../../flowGraphRichTypes.js\";\nimport { RegisterClass } from \"../../../../Misc/typeStore.js\";\nimport { getNumericValue, isNumeric } from \"../../../utils.js\";\n/**\n * A block that executes a branch based on a selection.\n */\nexport class FlowGraphSwitchBlock extends FlowGraphExecutionBlock {\n    constructor(\n    /**\n     * the configuration of the block\n     */\n    config) {\n        super(config);\n        this.config = config;\n        /**\n         * The default case to execute if no other case is found.\n         */\n        this.default = this._registerSignalOutput(\"default\");\n        this._caseToOutputFlow = new Map();\n        this.case = this.registerDataInput(\"case\", RichTypeAny);\n        // iterate the set not using for of\n        const array = this.config.cases || [];\n        for (const caseValue of array) {\n            this._caseToOutputFlow.set(caseValue, this._registerSignalOutput(`out_${caseValue}`));\n        }\n    }\n    _execute(context, _callingSignal) {\n        const selectionValue = this.case.getValue(context);\n        let outputFlow;\n        if (isNumeric(selectionValue)) {\n            outputFlow = this._getOutputFlowForCase(getNumericValue(selectionValue));\n        }\n        else {\n            outputFlow = this._getOutputFlowForCase(selectionValue);\n        }\n        if (outputFlow) {\n            outputFlow._activateSignal(context);\n        }\n        else {\n            this.default._activateSignal(context);\n        }\n    }\n    /**\n     * Adds a new case to the switch block.\n     * @param newCase the new case to add.\n     */\n    addCase(newCase) {\n        if (this.config.cases.includes(newCase)) {\n            return;\n        }\n        this.config.cases.push(newCase);\n        this._caseToOutputFlow.set(newCase, this._registerSignalOutput(`out_${newCase}`));\n    }\n    /**\n     * Removes a case from the switch block.\n     * @param caseToRemove the case to remove.\n     */\n    removeCase(caseToRemove) {\n        if (!this.config.cases.includes(caseToRemove)) {\n            return;\n        }\n        const index = this.config.cases.indexOf(caseToRemove);\n        this.config.cases.splice(index, 1);\n        this._caseToOutputFlow.delete(caseToRemove);\n    }\n    /**\n     * @internal\n     */\n    _getOutputFlowForCase(caseValue) {\n        return this._caseToOutputFlow.get(caseValue);\n    }\n    /**\n     * @returns class name of the block.\n     */\n    getClassName() {\n        return \"FlowGraphSwitchBlock\" /* FlowGraphBlockNames.Switch */;\n    }\n    /**\n     * Serialize the block to a JSON representation.\n     * @param serializationObject the object to serialize to.\n     */\n    serialize(serializationObject) {\n        super.serialize(serializationObject);\n        serializationObject.cases = this.config.cases;\n    }\n}\nRegisterClass(\"FlowGraphSwitchBlock\" /* FlowGraphBlockNames.Switch */, FlowGraphSwitchBlock);\n//# sourceMappingURL=flowGraphSwitchBlock.js.map"],"names":[],"mappings":";;;AAOO,MAAM,6BAA6B,wBAAwB;AAAA,EAC9D,YAIA,QAAQ;AACJ,UAAM,MAAM;AACZ,SAAK,SAAS;AAId,SAAK,UAAU,KAAK,sBAAsB,SAAS;AACnD,SAAK,oBAAoB,oBAAI,IAAG;AAChC,SAAK,OAAO,KAAK,kBAAkB,QAAQ,WAAW;AAEtD,UAAM,QAAQ,KAAK,OAAO,SAAS,CAAA;AACnC,eAAW,aAAa,OAAO;AAC3B,WAAK,kBAAkB,IAAI,WAAW,KAAK,sBAAsB,OAAO,SAAS,EAAE,CAAC;AAAA,IACxF;AAAA,EACJ;AAAA,EACA,SAAS,SAAS,gBAAgB;AAC9B,UAAM,iBAAiB,KAAK,KAAK,SAAS,OAAO;AACjD,QAAI;AACJ,QAAI,UAAU,cAAc,GAAG;AAC3B,mBAAa,KAAK,sBAAsB,gBAAgB,cAAc,CAAC;AAAA,IAC3E,OACK;AACD,mBAAa,KAAK,sBAAsB,cAAc;AAAA,IAC1D;AACA,QAAI,YAAY;AACZ,iBAAW,gBAAgB,OAAO;AAAA,IACtC,OACK;AACD,WAAK,QAAQ,gBAAgB,OAAO;AAAA,IACxC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,QAAQ,SAAS;AACb,QAAI,KAAK,OAAO,MAAM,SAAS,OAAO,GAAG;AACrC;AAAA,IACJ;AACA,SAAK,OAAO,MAAM,KAAK,OAAO;AAC9B,SAAK,kBAAkB,IAAI,SAAS,KAAK,sBAAsB,OAAO,OAAO,EAAE,CAAC;AAAA,EACpF;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,cAAc;AACrB,QAAI,CAAC,KAAK,OAAO,MAAM,SAAS,YAAY,GAAG;AAC3C;AAAA,IACJ;AACA,UAAM,QAAQ,KAAK,OAAO,MAAM,QAAQ,YAAY;AACpD,SAAK,OAAO,MAAM,OAAO,OAAO,CAAC;AACjC,SAAK,kBAAkB,OAAO,YAAY;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA,EAIA,sBAAsB,WAAW;AAC7B,WAAO,KAAK,kBAAkB,IAAI,SAAS;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA,EAIA,eAAe;AACX,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU,qBAAqB;AAC3B,UAAM,UAAU,mBAAmB;AACnC,wBAAoB,QAAQ,KAAK,OAAO;AAAA,EAC5C;AACJ;AACA,cAAc,wBAAyD,oBAAoB;","x_google_ignoreList":[0]}