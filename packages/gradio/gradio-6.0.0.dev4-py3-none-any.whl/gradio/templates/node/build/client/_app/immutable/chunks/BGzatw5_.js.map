{"version":3,"file":"BGzatw5_.js","sources":["../../../../../../../file/shared/File.svelte","../../../../../../../file/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { BlockLabel, Empty } from \"@gradio/atoms\";\n\timport { File } from \"@gradio/icons\";\n\timport FilePreview from \"./FilePreview.svelte\";\n\n\tlet {\n\t\tvalue,\n\t\tlabel,\n\t\tshow_label,\n\t\tselectable,\n\t\ti18n,\n\t\theight,\n\t\ton_select,\n\t\ton_download\n\t} = $props();\n</script>\n\n<BlockLabel\n\t{show_label}\n\tfloat={value === null}\n\tIcon={File}\n\tlabel={label || \"File\"}\n/>\n\n{#if value && (Array.isArray(value) ? value.length > 0 : true)}\n\t<FilePreview\n\t\t{i18n}\n\t\t{selectable}\n\t\ton:select={on_select}\n\t\ton:download={on_download}\n\t\t{value}\n\t\t{height}\n\t/>\n{:else}\n\t<Empty unpadded_box={true} size=\"large\"><File /></Empty>\n{/if}\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as FilePreview } from \"./shared/FilePreview.svelte\";\n\texport { default as BaseFileUpload } from \"./shared/FileUpload.svelte\";\n\texport { default as BaseFile } from \"./shared/File.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { Gradio } from \"@gradio/utils\";\n\timport File from \"./shared/File.svelte\";\n\timport FileUpload from \"./shared/FileUpload.svelte\";\n\timport { Block, UploadText } from \"@gradio/atoms\";\n\timport type { FileEvents, FileProps } from \"./types\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport { tick } from \"svelte\";\n\n\tconst props = $props();\n\tlet upload_promise = $state<Promise<any>>();\n\n\tlet dragging = $state(false);\n\tlet pending_upload = $state(false);\n\n\tclass FileGradio extends Gradio<FileEvents, FileProps> {\n\t\tasync get_data() {\n\t\t\tif (upload_promise) {\n\t\t\t\tawait upload_promise;\n\t\t\t\tawait tick();\n\t\t\t}\n\t\t\tconst data = await super.get_data();\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tconst gradio = new FileGradio(props);\n\n\tlet old_value = $state(gradio.props.value);\n\n\t$effect(() => {\n\t\tif (old_value !== gradio.props.value) {\n\t\t\told_value = gradio.props.value;\n\t\t\tgradio.dispatch(\"change\", $state.snapshot(gradio.props.value));\n\t\t}\n\t});\n</script>\n\n<Block\n\tvisible={gradio.shared.visible}\n\tvariant={gradio.props.value ? \"solid\" : \"dashed\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\telem_id={gradio.shared.elem_id}\n\telem_classes={gradio.shared.elem_classes}\n\tcontainer={gradio.shared.container}\n\tscale={gradio.shared.scale}\n\tmin_width={gradio.shared.min_width}\n\tallow_overflow={false}\n>\n\t<StatusTracker\n\t\tautoscroll={gradio.shared.autoscroll}\n\t\ti18n={gradio.i18n}\n\t\t{...gradio.shared.loading_status}\n\t\tstatus={pending_upload\n\t\t\t? \"generating\"\n\t\t\t: gradio.shared.loading_status?.status || \"complete\"}\n\t\ton:clear_status={() =>\n\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t/>\n\t{#if !gradio.shared.interactive}\n\t\t<File\n\t\t\ton_select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton_download={({ detail }) => gradio.dispatch(\"download\", detail)}\n\t\t\tselectable={gradio.props._selectable}\n\t\t\tvalue={gradio.props.value}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\theight={gradio.props.height}\n\t\t\ti18n={gradio.i18n}\n\t\t/>\n\t{:else}\n\t\t<FileUpload\n\t\t\tbind:upload_promise\n\t\t\tupload={(...args) => gradio.shared.client.upload(...args)}\n\t\t\tstream_handler={(...args) => gradio.shared.client.stream(...args)}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\tvalue={gradio.props.value}\n\t\t\tfile_count={gradio.props.file_count}\n\t\t\tfile_types={gradio.props.file_types}\n\t\t\tselectable={gradio.props._selectable}\n\t\t\theight={gradio.props.height}\n\t\t\troot={gradio.shared.root}\n\t\t\tallow_reordering={gradio.props.allow_reordering}\n\t\t\tmax_file_size={gradio.shared.max_file_size}\n\t\t\ton:change={({ detail }) => {\n\t\t\t\tgradio.props.value = detail;\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton:upload={() => gradio.dispatch(\"upload\")}\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tgradio.shared.loading_status = gradio.shared.loading_status || {};\n\t\t\t\tgradio.shared.loading_status.status = \"error\";\n\t\t\t\tgradio.dispatch(\"error\", detail);\n\t\t\t}}\n\t\t\ton:delete={({ detail }) => {\n\t\t\t\tgradio.dispatch(\"delete\", detail);\n\t\t\t}}\n\t\t\ti18n={gradio.i18n}\n\t\t>\n\t\t\t<UploadText i18n={gradio.i18n} type=\"file\" />\n\t\t</FileUpload>\n\t{/if}\n</Block>\n"],"names":["$.rest_props","$.state","$.get","$.proxy","$.user_effect","$.set","$.derived","$0"],"mappings":"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"}