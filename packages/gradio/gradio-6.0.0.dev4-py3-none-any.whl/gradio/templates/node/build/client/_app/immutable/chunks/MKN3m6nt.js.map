{"version":3,"file":"MKN3m6nt.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/PostProcesses/RenderPipeline/postProcessRenderPipelineManager.js","../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/PostProcesses/RenderPipeline/postProcessRenderPipelineManagerSceneComponent.js"],"sourcesContent":["import { Observable } from \"../../Misc/observable.js\";\n/**\n * PostProcessRenderPipelineManager class\n * @see https://doc.babylonjs.com/features/featuresDeepDive/postProcesses/postProcessRenderPipeline\n */\nexport class PostProcessRenderPipelineManager {\n    /**\n     * Initializes a PostProcessRenderPipelineManager\n     * @see https://doc.babylonjs.com/features/featuresDeepDive/postProcesses/postProcessRenderPipeline\n     */\n    constructor() {\n        this._renderPipelines = {};\n        this._onNewPipelineAddedObservable = new Observable();\n        this._onPipelineRemovedObservable = new Observable();\n    }\n    /**\n     * An event triggered when a pipeline is added to the manager\n     */\n    get onNewPipelineAddedObservable() {\n        return this._onNewPipelineAddedObservable;\n    }\n    /**\n     * An event triggered when a pipeline is removed from the manager\n     */\n    get onPipelineRemovedObservable() {\n        return this._onPipelineRemovedObservable;\n    }\n    /**\n     * Gets the list of supported render pipelines\n     */\n    get supportedPipelines() {\n        const result = [];\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                if (pipeline.isSupported) {\n                    result.push(pipeline);\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * Adds a pipeline to the manager\n     * @param renderPipeline The pipeline to add\n     */\n    addPipeline(renderPipeline) {\n        this.removePipeline(renderPipeline._name);\n        this._renderPipelines[renderPipeline._name] = renderPipeline;\n        this._onNewPipelineAddedObservable.notifyObservers(renderPipeline);\n    }\n    /**\n     * Remove the pipeline from the manager\n     * @param renderPipelineName the name of the pipeline to remove\n     */\n    removePipeline(renderPipelineName) {\n        const pipeline = this._renderPipelines[renderPipelineName];\n        if (pipeline) {\n            this._onPipelineRemovedObservable.notifyObservers(pipeline);\n            delete this._renderPipelines[renderPipelineName];\n        }\n    }\n    /**\n     * Attaches a camera to the pipeline\n     * @param renderPipelineName The name of the pipeline to attach to\n     * @param cameras the camera to attach\n     * @param unique if the camera can be attached multiple times to the pipeline\n     */\n    attachCamerasToRenderPipeline(renderPipelineName, cameras, unique = false) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._attachCameras(cameras, unique);\n    }\n    /**\n     * Detaches a camera from the pipeline\n     * @param renderPipelineName The name of the pipeline to detach from\n     * @param cameras the camera to detach\n     */\n    detachCamerasFromRenderPipeline(renderPipelineName, cameras) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._detachCameras(cameras);\n    }\n    /**\n     * Enables an effect by name on a pipeline\n     * @param renderPipelineName the name of the pipeline to enable the effect in\n     * @param renderEffectName the name of the effect to enable\n     * @param cameras the cameras that the effect should be enabled on\n     */\n    enableEffectInPipeline(renderPipelineName, renderEffectName, cameras) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._enableEffect(renderEffectName, cameras);\n    }\n    /**\n     * Disables an effect by name on a pipeline\n     * @param renderPipelineName the name of the pipeline to disable the effect in\n     * @param renderEffectName the name of the effect to disable\n     * @param cameras the cameras that the effect should be disabled on\n     */\n    disableEffectInPipeline(renderPipelineName, renderEffectName, cameras) {\n        const renderPipeline = this._renderPipelines[renderPipelineName];\n        if (!renderPipeline) {\n            return;\n        }\n        renderPipeline._disableEffect(renderEffectName, cameras);\n    }\n    /**\n     * Updates the state of all contained render pipelines and disposes of any non supported pipelines\n     */\n    update() {\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                if (!pipeline.isSupported) {\n                    pipeline.dispose();\n                    delete this._renderPipelines[renderPipelineName];\n                }\n                else {\n                    pipeline._update();\n                }\n            }\n        }\n    }\n    /** @internal */\n    _rebuild() {\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                pipeline._rebuild();\n            }\n        }\n    }\n    /**\n     * Disposes of the manager and pipelines\n     */\n    dispose() {\n        for (const renderPipelineName in this._renderPipelines) {\n            if (Object.prototype.hasOwnProperty.call(this._renderPipelines, renderPipelineName)) {\n                const pipeline = this._renderPipelines[renderPipelineName];\n                pipeline.dispose();\n            }\n        }\n    }\n}\n//# sourceMappingURL=postProcessRenderPipelineManager.js.map","import { SceneComponentConstants } from \"../../sceneComponent.js\";\nimport { PostProcessRenderPipelineManager } from \"./postProcessRenderPipelineManager.js\";\nimport { Scene } from \"../../scene.js\";\nObject.defineProperty(Scene.prototype, \"postProcessRenderPipelineManager\", {\n    get: function () {\n        if (!this._postProcessRenderPipelineManager) {\n            // Register the G Buffer component to the scene.\n            let component = this._getComponent(SceneComponentConstants.NAME_POSTPROCESSRENDERPIPELINEMANAGER);\n            if (!component) {\n                component = new PostProcessRenderPipelineManagerSceneComponent(this);\n                this._addComponent(component);\n            }\n            this._postProcessRenderPipelineManager = new PostProcessRenderPipelineManager();\n        }\n        return this._postProcessRenderPipelineManager;\n    },\n    enumerable: true,\n    configurable: true,\n});\n/**\n * Defines the Render Pipeline scene component responsible to rendering pipelines\n */\nexport class PostProcessRenderPipelineManagerSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_POSTPROCESSRENDERPIPELINEMANAGER;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this.scene._gatherRenderTargetsStage.registerStep(SceneComponentConstants.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER, this, this._gatherRenderTargets);\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        if (this.scene._postProcessRenderPipelineManager) {\n            this.scene._postProcessRenderPipelineManager._rebuild();\n        }\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        if (this.scene._postProcessRenderPipelineManager) {\n            this.scene._postProcessRenderPipelineManager.dispose();\n        }\n    }\n    _gatherRenderTargets() {\n        if (this.scene._postProcessRenderPipelineManager) {\n            this.scene._postProcessRenderPipelineManager.update();\n        }\n    }\n}\n//# sourceMappingURL=postProcessRenderPipelineManagerSceneComponent.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0,1]}