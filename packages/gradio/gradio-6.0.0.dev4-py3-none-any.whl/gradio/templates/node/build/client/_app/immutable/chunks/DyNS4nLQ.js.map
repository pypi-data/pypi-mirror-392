{"version":3,"file":"DyNS4nLQ.js","sources":["../../../../../../../multimodaltextbox/shared/utils.ts","../../../../../../../multimodaltextbox/shared/MultimodalTextbox.svelte","../../../../../../../multimodaltextbox/Index.svelte"],"sourcesContent":["import { tick } from \"svelte\";\n\ninterface Value {\n\tlines: number;\n\tmax_lines: number;\n\ttext: string;\n}\n\nexport async function resize(\n\ttarget: HTMLTextAreaElement | HTMLInputElement,\n\tlines: number,\n\tmax_lines: number\n): Promise<void> {\n\tawait tick();\n\tif (lines === max_lines) return;\n\n\tconst computed_styles = window.getComputedStyle(target);\n\tconst padding_top = parseFloat(computed_styles.paddingTop);\n\tconst padding_bottom = parseFloat(computed_styles.paddingBottom);\n\tconst line_height = parseFloat(computed_styles.lineHeight);\n\n\tlet max =\n\t\tmax_lines === undefined\n\t\t\t? false\n\t\t\t: padding_top + padding_bottom + line_height * max_lines;\n\tlet min = padding_top + padding_bottom + lines * line_height;\n\n\ttarget.style.height = \"1px\";\n\n\tlet scroll_height;\n\tif (max && target.scrollHeight > max) {\n\t\tscroll_height = max;\n\t} else if (target.scrollHeight < min) {\n\t\tscroll_height = min;\n\t} else {\n\t\tscroll_height = target.scrollHeight;\n\t}\n\n\ttarget.style.height = `${scroll_height}px`;\n}\n\nexport function text_area_resize(\n\t_el: HTMLTextAreaElement,\n\t_value: Value\n): any | undefined {\n\tif (_value.lines === _value.max_lines) return;\n\t_el.style.overflowY = \"scroll\";\n\n\tfunction handle_input(event: Event): void {\n\t\tresize(event.target as HTMLTextAreaElement, _value.lines, _value.max_lines);\n\t}\n\t_el.addEventListener(\"input\", handle_input);\n\n\tif (!_value.text.trim()) return;\n\tresize(_el, _value.lines, _value.max_lines);\n\n\treturn {\n\t\tdestroy: () => _el.removeEventListener(\"input\", handle_input)\n\t};\n}\n","<script lang=\"ts\">\n\timport {\n\t\tonMount,\n\t\tbeforeUpdate,\n\t\tafterUpdate,\n\t\tcreateEventDispatcher,\n\t\ttick\n\t} from \"svelte\";\n\timport { text_area_resize, resize } from \"../shared/utils\";\n\timport { BlockTitle } from \"@gradio/atoms\";\n\timport { Upload } from \"@gradio/upload\";\n\timport { Image } from \"@gradio/image/shared\";\n\timport type { I18nFormatter } from \"js/core/src/gradio_helper\";\n\timport type { FileData, Client } from \"@gradio/client\";\n\timport type { WaveformOptions } from \"@gradio/audio\";\n\timport {\n\t\tClear,\n\t\tFile,\n\t\tMusic,\n\t\tPaperclip,\n\t\tVideo,\n\t\tArrowUp,\n\t\tSquare,\n\t\tMicrophone\n\t} from \"@gradio/icons\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { BaseInteractiveAudio as InteractiveAudio } from \"@gradio/audio\";\n\timport type { InputHTMLAttributes } from \"./types\";\n\n\texport let value: { text: string; files: FileData[] } = {\n\t\ttext: \"\",\n\t\tfiles: []\n\t};\n\n\texport let value_is_output = false;\n\texport let lines = 1;\n\texport let i18n: I18nFormatter;\n\texport let placeholder = \"Type here...\";\n\texport let disabled = false;\n\texport let label: string;\n\texport let info: string | undefined = undefined;\n\texport let show_label = true;\n\texport let max_lines: number;\n\texport let submit_btn: string | boolean | null = null;\n\texport let stop_btn: string | boolean | null = null;\n\texport let rtl = false;\n\texport let autofocus = false;\n\texport let text_align: \"left\" | \"right\" | undefined = undefined;\n\texport let autoscroll = true;\n\texport let root: string;\n\texport let file_types_string: string | null = null;\n\texport let max_file_size: number | null = null;\n\texport let upload: Client[\"upload\"];\n\texport let stream_handler: Client[\"stream\"];\n\texport let file_count: \"single\" | \"multiple\" | \"directory\" = \"multiple\";\n\texport let max_plain_text_length = 1000;\n\texport let waveform_settings: Record<string, any>;\n\texport let waveform_options: WaveformOptions = {\n\t\tshow_recording_waveform: true\n\t};\n\texport let sources_string:\n\t\t| \"upload\"\n\t\t| \"upload,microphone\"\n\t\t| \"microphone\"\n\t\t| \"microphone,upload\" = \"upload\";\n\texport let active_source: \"microphone\" | null = null;\n\texport let html_attributes: InputHTMLAttributes | null = null;\n\texport let upload_promise: Promise<any> | null = null;\n\n\tlet upload_component: Upload;\n\tlet el: HTMLTextAreaElement | HTMLInputElement;\n\tlet can_scroll: boolean;\n\tlet previous_scroll_top = 0;\n\tlet user_has_scrolled_up = false;\n\texport let dragging = false;\n\tlet uploading = false;\n\t// value can be null in multimodalchatinterface when loading a deep link\n\tlet oldValue = value?.text ?? \"\";\n\tlet recording = false;\n\n\t$: sources = sources_string\n\t\t.split(\",\")\n\t\t.map((s) => s.trim())\n\t\t.filter((s) => s === \"upload\" || s === \"microphone\") as (\n\t\t| \"upload\"\n\t\t| \"microphone\"\n\t)[];\n\t$: file_types = file_types_string\n\t\t? file_types_string.split(\",\").map((s) => s.trim())\n\t\t: null;\n\t$: dispatch(\"drag\", dragging);\n\t$: show_upload =\n\t\tsources &&\n\t\tsources.includes(\"upload\") &&\n\t\t!(file_count === \"single\" && value.files.length > 0);\n\tlet mic_audio: FileData | null = null;\n\n\tlet full_container: HTMLDivElement;\n\n\t$: if (oldValue !== value.text) {\n\t\tdispatch(\"change\", value);\n\t\toldValue = value.text;\n\t}\n\n\t$: if (value === null) value = { text: \"\", files: [] };\n\t$: (value, el && lines !== max_lines && resize(el, lines, max_lines));\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: typeof value;\n\t\tsubmit: undefined;\n\t\tstop: undefined;\n\t\tblur: undefined;\n\t\tselect: SelectData;\n\t\tinput: undefined;\n\t\tfocus: undefined;\n\t\tdrag: boolean;\n\t\tupload: FileData[] | FileData;\n\t\tclear: undefined;\n\t\tload: FileData[] | FileData;\n\t\terror: string;\n\t\tstart_recording: undefined;\n\t\tpause_recording: undefined;\n\t\tstop_recording: undefined;\n\t}>();\n\n\tbeforeUpdate(() => {\n\t\tcan_scroll = el && el.offsetHeight + el.scrollTop > el.scrollHeight - 100;\n\t});\n\n\tconst scroll = (): void => {\n\t\tif (can_scroll && autoscroll && !user_has_scrolled_up) {\n\t\t\tel.scrollTo(0, el.scrollHeight);\n\t\t}\n\t};\n\n\tasync function handle_change(): Promise<void> {\n\t\tdispatch(\"change\", value);\n\t\tif (!value_is_output) {\n\t\t\tdispatch(\"input\");\n\t\t}\n\t}\n\n\tonMount(() => {\n\t\tif (autofocus && el !== null) {\n\t\t\tel.focus();\n\t\t}\n\t});\n\n\tconst after_update = (): void => {\n\t\tif (can_scroll && autoscroll) {\n\t\t\tscroll();\n\t\t}\n\t\tif (autofocus && el) {\n\t\t\tel.focus();\n\t\t}\n\t};\n\n\tafterUpdate(after_update);\n\n\tfunction handle_select(event: Event): void {\n\t\tconst target: HTMLTextAreaElement | HTMLInputElement = event.target as\n\t\t\t| HTMLTextAreaElement\n\t\t\t| HTMLInputElement;\n\t\tconst text = target.value;\n\t\tconst index: [number, number] = [\n\t\t\ttarget.selectionStart as number,\n\t\t\ttarget.selectionEnd as number\n\t\t];\n\t\tdispatch(\"select\", { value: text.substring(...index), index: index });\n\t}\n\n\tasync function handle_keypress(e: KeyboardEvent): Promise<void> {\n\t\tif (e.key === \"Enter\" && e.shiftKey && lines > 1) {\n\t\t\te.preventDefault();\n\t\t\tawait tick();\n\t\t\tdispatch(\"submit\");\n\t\t} else if (\n\t\t\te.key === \"Enter\" &&\n\t\t\t!e.shiftKey &&\n\t\t\tlines === 1 &&\n\t\t\tmax_lines >= 1\n\t\t) {\n\t\t\te.preventDefault();\n\t\t\tawait tick();\n\t\t\tdispatch(\"submit\");\n\t\t\tactive_source = null;\n\t\t\tadd_mic_audio_to_files();\n\t\t}\n\t}\n\n\tfunction handle_scroll(event: Event): void {\n\t\tconst target = event.target as HTMLElement;\n\t\tconst current_scroll_top = target.scrollTop;\n\t\tif (current_scroll_top < previous_scroll_top) {\n\t\t\tuser_has_scrolled_up = true;\n\t\t}\n\t\tprevious_scroll_top = current_scroll_top;\n\n\t\tconst max_scroll_top = target.scrollHeight - target.clientHeight;\n\t\tconst user_has_scrolled_to_bottom = current_scroll_top >= max_scroll_top;\n\t\tif (user_has_scrolled_to_bottom) {\n\t\t\tuser_has_scrolled_up = false;\n\t\t}\n\t}\n\n\tasync function handle_upload({\n\t\tdetail\n\t}: CustomEvent<FileData>): Promise<void> {\n\t\thandle_change();\n\t\tif (Array.isArray(detail)) {\n\t\t\tfor (let file of detail) {\n\t\t\t\tvalue.files.push(file);\n\t\t\t}\n\t\t\tvalue = value;\n\t\t} else {\n\t\t\tvalue.files.push(detail);\n\t\t\tvalue = value;\n\t\t}\n\t\tawait tick();\n\t\tdispatch(\"change\", value);\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tfunction remove_thumbnail(event: MouseEvent, index: number): void {\n\t\thandle_change();\n\t\tevent.stopPropagation();\n\t\tvalue.files.splice(index, 1);\n\t\tvalue = value;\n\t}\n\n\tfunction handle_upload_click(): void {\n\t\tupload_component.open_upload();\n\t}\n\n\tfunction handle_stop(): void {\n\t\tdispatch(\"stop\");\n\t}\n\n\tfunction add_mic_audio_to_files(): void {\n\t\tif (mic_audio) {\n\t\t\tvalue.files.push(mic_audio);\n\t\t\tvalue = value;\n\t\t\tmic_audio = null;\n\t\t}\n\t}\n\n\tfunction handle_submit(): void {\n\t\tdispatch(\"submit\");\n\t\tactive_source = null;\n\t\tadd_mic_audio_to_files();\n\t}\n\n\tasync function handle_paste(event: ClipboardEvent): Promise<void> {\n\t\tif (!event.clipboardData) return;\n\t\tconst items = event.clipboardData.items;\n\t\tconst text = event.clipboardData.getData(\"text\");\n\n\t\tif (text && text.length > max_plain_text_length) {\n\t\t\tevent.preventDefault();\n\t\t\tconst file = new window.File([text], \"pasted_text.txt\", {\n\t\t\t\ttype: \"text/plain\",\n\t\t\t\tlastModified: Date.now()\n\t\t\t});\n\t\t\tif (upload_component) {\n\t\t\t\tupload_component.load_files([file]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let index in items) {\n\t\t\tconst item = items[index];\n\t\t\tif (item.kind === \"file\" && item.type.includes(\"image\")) {\n\t\t\t\tconst blob = item.getAsFile();\n\t\t\t\tif (blob) upload_component.load_files([blob]);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handle_dragenter(event: DragEvent): void {\n\t\tevent.preventDefault();\n\t\tdragging = true;\n\t}\n\n\tfunction handle_dragleave(event: DragEvent): void {\n\t\tevent.preventDefault();\n\t\tconst rect = full_container.getBoundingClientRect();\n\t\tconst { clientX, clientY } = event;\n\t\tif (\n\t\t\tclientX <= rect.left ||\n\t\t\tclientX >= rect.right ||\n\t\t\tclientY <= rect.top ||\n\t\t\tclientY >= rect.bottom\n\t\t) {\n\t\t\tdragging = false;\n\t\t}\n\t}\n\n\tfunction handle_drop(event: DragEvent): void {\n\t\tevent.preventDefault();\n\t\tdragging = false;\n\t\tif (event.dataTransfer && event.dataTransfer.files) {\n\t\t\tconst files = Array.from(event.dataTransfer.files);\n\n\t\t\tif (file_types) {\n\t\t\t\tconst valid_files = files.filter((file) => {\n\t\t\t\t\treturn file_types.some((type) => {\n\t\t\t\t\t\tif (type.startsWith(\".\")) {\n\t\t\t\t\t\t\treturn file.name.toLowerCase().endsWith(type.toLowerCase());\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn file.type.match(new RegExp(type.replace(\"*\", \".*\")));\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tconst invalid_files = files.length - valid_files.length;\n\t\t\t\tif (invalid_files > 0) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\"error\",\n\t\t\t\t\t\t`${invalid_files} file(s) were rejected. Accepted formats: ${file_types.join(\", \")}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (valid_files.length > 0) {\n\t\t\t\t\tupload_component.load_files(valid_files);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tupload_component.load_files(files);\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"full-container\"\n\tclass:dragging\n\tbind:this={full_container}\n\ton:dragenter={handle_dragenter}\n\ton:dragleave={handle_dragleave}\n\ton:dragover|preventDefault\n\ton:drop={handle_drop}\n\trole=\"group\"\n\taria-label=\"Multimedia input field\"\n>\n\t<BlockTitle {show_label} {info} {rtl}>{label}</BlockTitle>\n\t<div class=\"input-container\">\n\t\t{#if sources && sources.includes(\"microphone\") && active_source === \"microphone\"}\n\t\t\t<InteractiveAudio\n\t\t\t\ton:change={({ detail }) => {\n\t\t\t\t\tif (detail !== null) {\n\t\t\t\t\t\tmic_audio = detail;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\ton:clear={() => {\n\t\t\t\t\tactive_source = null;\n\t\t\t\t}}\n\t\t\t\ton:start_recording={() => dispatch(\"start_recording\")}\n\t\t\t\ton:pause_recording={() => dispatch(\"pause_recording\")}\n\t\t\t\ton:stop_recording={() => dispatch(\"stop_recording\")}\n\t\t\t\tsources={[\"microphone\"]}\n\t\t\t\tclass_name=\"compact-audio\"\n\t\t\t\t{recording}\n\t\t\t\t{waveform_settings}\n\t\t\t\t{waveform_options}\n\t\t\t\t{i18n}\n\t\t\t\t{active_source}\n\t\t\t\t{upload}\n\t\t\t\t{stream_handler}\n\t\t\t\tstream_every={1}\n\t\t\t\teditable={true}\n\t\t\t\t{label}\n\t\t\t\t{root}\n\t\t\t\tloop={false}\n\t\t\t\tshow_label={false}\n\t\t\t\tbuttons={[]}\n\t\t\t\tdragging={false}\n\t\t\t/>\n\t\t{/if}\n\t\t{#if show_upload}\n\t\t\t<Upload\n\t\t\t\tbind:upload_promise\n\t\t\t\tbind:this={upload_component}\n\t\t\t\ton:load={handle_upload}\n\t\t\t\t{file_count}\n\t\t\t\tfiletype={file_types}\n\t\t\t\t{root}\n\t\t\t\t{max_file_size}\n\t\t\t\tbind:dragging\n\t\t\t\tbind:uploading\n\t\t\t\tshow_progress={false}\n\t\t\t\tdisable_click={true}\n\t\t\t\ton:error\n\t\t\t\thidden={true}\n\t\t\t\t{upload}\n\t\t\t\t{stream_handler}\n\t\t\t/>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\"input-wrapper\"\n\t\t\tclass:has-files={value.files.length > 0 || uploading}\n\t\t>\n\t\t\t{#if value.files.length > 0 || uploading || show_upload}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"thumbnails\"\n\t\t\t\t\taria-label=\"Uploaded files\"\n\t\t\t\t\tdata-testid=\"container_el\"\n\t\t\t\t>\n\t\t\t\t\t{#if show_upload}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tdata-testid=\"upload-button\"\n\t\t\t\t\t\t\tclass=\"upload-button mobile-thumbnail-add\"\n\t\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\t\ton:click={handle_upload_click}\n\t\t\t\t\t\t\taria-label=\"Upload a file\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Paperclip />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#each value.files as file, index}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"thumbnail-wrapper\"\n\t\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\t\taria-label=\"File thumbnail\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"thumbnail-item thumbnail-small\">\n\t\t\t\t\t\t\t\t{#if file.mime_type && file.mime_type.includes(\"image\")}\n\t\t\t\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\t\t\t\tsrc={file.url}\n\t\t\t\t\t\t\t\t\t\trestProps={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\t\t\t\t\talt: \"\",\n\t\t\t\t\t\t\t\t\t\t\tloading: \"lazy\",\n\t\t\t\t\t\t\t\t\t\t\tclass: \"thumbnail-image\"\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{:else if file.mime_type && file.mime_type.includes(\"audio\")}\n\t\t\t\t\t\t\t\t\t<Music />\n\t\t\t\t\t\t\t\t{:else if file.mime_type && file.mime_type.includes(\"video\")}\n\t\t\t\t\t\t\t\t\t<Video />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<File />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"delete-button\"\n\t\t\t\t\t\t\t\t\ton:click={(event) => remove_thumbnail(event, index)}\n\t\t\t\t\t\t\t\t\taria-label=\"Remove file\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Clear />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/each}\n\t\t\t\t\t{#if uploading}\n\t\t\t\t\t\t<div class=\"loader\" role=\"status\" aria-label=\"Uploading\"></div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"input-row\">\n\t\t\t\t<textarea\n\t\t\t\t\tdata-testid=\"textbox\"\n\t\t\t\t\tuse:text_area_resize={{\n\t\t\t\t\t\ttext: value.text,\n\t\t\t\t\t\tlines: lines,\n\t\t\t\t\t\tmax_lines: max_lines\n\t\t\t\t\t}}\n\t\t\t\t\tclass:no-label={!show_label}\n\t\t\t\t\tdir={rtl ? \"rtl\" : \"ltr\"}\n\t\t\t\t\tbind:value={value.text}\n\t\t\t\t\tbind:this={el}\n\t\t\t\t\t{placeholder}\n\t\t\t\t\trows={lines}\n\t\t\t\t\t{disabled}\n\t\t\t\t\ton:keypress={handle_keypress}\n\t\t\t\t\ton:blur\n\t\t\t\t\ton:select={handle_select}\n\t\t\t\t\ton:focus\n\t\t\t\t\ton:scroll={handle_scroll}\n\t\t\t\t\ton:paste={handle_paste}\n\t\t\t\t\tstyle={text_align ? \"text-align: \" + text_align : \"\"}\n\t\t\t\t\tautocapitalize={html_attributes?.autocapitalize}\n\t\t\t\t\tautocorrect={html_attributes?.autocorrect}\n\t\t\t\t\tspellcheck={html_attributes?.spellcheck}\n\t\t\t\t\tautocomplete={html_attributes?.autocomplete}\n\t\t\t\t\ttabindex={html_attributes?.tabindex}\n\t\t\t\t\tenterkeyhint={html_attributes?.enterkeyhint}\n\t\t\t\t\tlang={html_attributes?.lang}\n\t\t\t\t/>\n\n\t\t\t\t{#if sources && sources.includes(\"microphone\")}\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-testid=\"microphone-button\"\n\t\t\t\t\t\tclass=\"microphone-button\"\n\t\t\t\t\t\tclass:recording\n\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tactive_source =\n\t\t\t\t\t\t\t\tactive_source !== \"microphone\" ? \"microphone\" : null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\taria-label=\"Record audio\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Microphone />\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if submit_btn}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"submit-button\"\n\t\t\t\t\t\tclass:padded-button={submit_btn !== true}\n\t\t\t\t\t\t{disabled}\n\t\t\t\t\t\ton:click={handle_submit}\n\t\t\t\t\t\taria-label=\"Submit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if submit_btn === true}\n\t\t\t\t\t\t\t<ArrowUp />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{submit_btn}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t\t{#if stop_btn}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"stop-button\"\n\t\t\t\t\t\tclass:padded-button={stop_btn !== true}\n\t\t\t\t\t\ton:click={handle_stop}\n\t\t\t\t\t\taria-label=\"Stop\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if stop_btn === true}\n\t\t\t\t\t\t\t<Square fill={\"none\"} stroke_width={2.5} />\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t{stop_btn}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<style>\n\t.full-container {\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\tpadding: var(--block-padding);\n\t\tborder: 1px solid transparent;\n\t}\n\n\t.full-container.dragging {\n\t\tborder-color: var(--color-accent);\n\t\tborder-radius: calc(var(--radius-sm) - var(--size-px));\n\t}\n\n\t.full-container.dragging::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tpointer-events: none;\n\t}\n\n\t.input-container {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tflex-direction: column;\n\t\tgap: 0;\n\t}\n\n\t.input-wrapper {\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tflex-direction: column;\n\t\tgap: 0;\n\t\tbackground: var(--block-background-fill);\n\t\tborder-radius: var(--radius-xl);\n\t\tpadding: var(--spacing-sm);\n\t\talign-items: flex-start;\n\t\tmin-height: auto;\n\t}\n\n\t.input-wrapper.has-files {\n\t\tpadding-top: var(--spacing-xs);\n\t}\n\n\t.input-row {\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tgap: var(--spacing-sm);\n\t\twidth: 100%;\n\t}\n\n\t.thumbnails {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: var(--spacing-sm);\n\t\tpadding: var(--spacing-xs) 0;\n\t\tmargin-bottom: var(--spacing-xs);\n\t\toverflow-x: auto;\n\t\toverflow-y: hidden;\n\t\tscrollbar-width: none;\n\t\t-ms-overflow-style: none;\n\t\tflex-wrap: nowrap;\n\t\t-webkit-overflow-scrolling: touch;\n\t\tscroll-behavior: smooth;\n\t\toverflow-y: scroll;\n\t\twidth: 100%;\n\t}\n\n\t.thumbnails::-webkit-scrollbar,\n\t.thumbnails::-webkit-scrollbar-track,\n\t.thumbnails::-webkit-scrollbar-thumb {\n\t\tdisplay: none;\n\t}\n\n\t.thumbnails :global(img) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: cover;\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t.thumbnail-wrapper {\n\t\tposition: relative;\n\t\tflex-shrink: 0;\n\t}\n\n\t.thumbnail-item {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tborder: var(--size-px) solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-md);\n\t\tbackground: var(--background-fill-secondary);\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tcursor: default;\n\t\tpadding: 0;\n\t}\n\n\t.thumbnail-small {\n\t\twidth: var(--size-10);\n\t\theight: var(--size-10);\n\t}\n\n\t.thumbnail-item :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.delete-button {\n\t\tposition: absolute;\n\t\tinset: 0;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tcolor: var(--button-primary-text-color);\n\t\tbackground: rgba(0, 0, 0, 0.6);\n\t\tbackdrop-filter: var(--blur-xs);\n\t\tborder-radius: var(--radius-md);\n\t\tpadding: 0;\n\t\tz-index: var(--layer-1);\n\t\topacity: 0;\n\t\ttransition: opacity 0.1s var(--easing-standard);\n\t}\n\n\t.delete-button:hover {\n\t\tbackground: rgba(0, 0, 0, 0.8);\n\t}\n\n\t.delete-button :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.thumbnail-item:hover .delete-button {\n\t\topacity: 1;\n\t}\n\n\ttextarea {\n\t\tflex-grow: 1;\n\t\toutline: none !important;\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t\tcolor: var(--body-text-color);\n\t\tfont-weight: var(--input-text-weight);\n\t\tfont-size: var(--input-text-size);\n\t\tborder: none;\n\t\tmargin: 0;\n\t\tresize: none;\n\t\tposition: relative;\n\t\tz-index: var(--layer-1);\n\t\ttext-align: left;\n\t\tmin-height: var(--size-9);\n\t}\n\n\ttextarea:disabled {\n\t\t-webkit-opacity: 1;\n\t\topacity: 1;\n\t}\n\n\ttextarea::placeholder {\n\t\tcolor: var(--input-placeholder-color);\n\t}\n\n\ttextarea[dir=\"rtl\"] {\n\t\ttext-align: right;\n\t}\n\n\ttextarea[dir=\"rtl\"] ~ .submit-button {\n\t\torder: -1;\n\t}\n\n\ttextarea[dir=\"rtl\"] ~ .submit-button :global(svg) {\n\t\ttransform: scaleX(-1);\n\t}\n\n\t.mobile-thumbnail-add,\n\t.microphone-button {\n\t\tcolor: var(--body-text-color);\n\t\tcursor: pointer;\n\t\tpadding: var(--spacing-sm);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t\tborder-radius: var(--radius-md);\n\t\ttransition:\n\t\t\tbackground 0.2s var(--easing-standard),\n\t\t\tborder-color 0.2s var(--easing-standard);\n\t}\n\n\t.mobile-thumbnail-add {\n\t\twidth: var(--size-10);\n\t\theight: var(--size-10);\n\t}\n\n\t.microphone-button {\n\t\twidth: var(--size-9);\n\t\theight: var(--size-9);\n\t}\n\n\t.mobile-thumbnail-add:hover:not(:disabled),\n\t.microphone-button:hover:not(:disabled) {\n\t\tbackground: var(--button-secondary-background-fill-hover);\n\t\tborder-color: var(--border-color-primary);\n\t}\n\n\t.mobile-thumbnail-add:disabled,\n\t.microphone-button:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\t.mobile-thumbnail-add :global(svg),\n\t.microphone-button :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.submit-button,\n\t.stop-button {\n\t\tborder: var(--size-px) solid var(--border-color-primary);\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex-shrink: 0;\n\t\twidth: var(--size-9);\n\t\theight: var(--size-9);\n\t\tborder-radius: var(--radius-md);\n\t\tz-index: var(--layer-1);\n\t\ttransition:\n\t\t\tbackground 0.2s var(--easing-standard),\n\t\t\tborder-color 0.2s var(--easing-standard);\n\t}\n\n\t.submit-button:hover:not(:disabled),\n\t.stop-button:hover:not(:disabled) {\n\t\tbackground: var(--button-secondary-background-fill-hover);\n\t}\n\n\t.submit-button:active:not(:disabled),\n\t.stop-button:active:not(:disabled) {\n\t\tbox-shadow: var(--button-shadow-active);\n\t}\n\n\t.submit-button:disabled,\n\t.stop-button:disabled {\n\t\tcursor: not-allowed;\n\t}\n\n\t.submit-button :global(svg),\n\t.stop-button :global(svg) {\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t}\n\n\t.padded-button {\n\t\tpadding: 0 var(--spacing-lg);\n\t\twidth: auto;\n\t\tborder-radius: var(--radius-xl);\n\t}\n\n\t.loader {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\tborder: var(--size-1) solid var(--border-color-primary);\n\t\tborder-top-color: var(--color-accent);\n\t\tborder-radius: var(--radius-100);\n\t\twidth: var(--size-5);\n\t\theight: var(--size-5);\n\t\tanimation: spin 1s linear infinite;\n\t\tflex-shrink: 0;\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@media (max-width: 768px) {\n\t\t.input-wrapper {\n\t\t\tpadding: var(--spacing-xs);\n\t\t}\n\n\t\t.thumbnails {\n\t\t\tpadding: var(--spacing-xs) 0;\n\t\t\tmargin-bottom: var(--spacing-md);\n\t\t}\n\n\t\t.thumbnail-small,\n\t\t.mobile-thumbnail-add {\n\t\t\twidth: var(--size-9);\n\t\t\theight: var(--size-9);\n\t\t}\n\n\t\t.thumbnail-item:active .delete-button {\n\t\t\topacity: 1;\n\t\t}\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as BaseMultimodalTextbox } from \"./shared/MultimodalTextbox.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { Gradio, type SelectData } from \"@gradio/utils\";\n\timport MultimodalTextbox from \"./shared/MultimodalTextbox.svelte\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport { onMount, tick } from \"svelte\";\n\timport type { WaveformOptions } from \"../audio/shared/types\";\n\timport type {\n\t\tMultimodalTextboxProps,\n\t\tMultimodalTextboxEvents\n\t} from \"./types\";\n\n\tlet upload_promise = $state<Promise<any>>();\n\n\tclass MultimodalTextboxGradio extends Gradio<\n\t\tMultimodalTextboxEvents,\n\t\tMultimodalTextboxProps\n\t> {\n\t\tasync get_data() {\n\t\t\tif (upload_promise) {\n\t\t\t\tawait upload_promise;\n\t\t\t\tawait tick();\n\t\t\t}\n\t\t\tconst data = await super.get_data();\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tlet props = $props();\n\tconst gradio = new MultimodalTextboxGradio(props);\n\n\tconst value = $derived(gradio.props.value || { text: \"\", files: [] });\n\n\tlet dragging: boolean;\n\tlet active_source: \"microphone\" | null = null;\n\n\tlet color_accent = \"darkorange\";\n\n\tconst waveform_settings = {\n\t\theight: 50,\n\t\tbarWidth: 2,\n\t\tbarGap: 3,\n\t\tcursorWidth: 2,\n\t\tcursorColor: \"#ddd5e9\",\n\t\tautoplay: false,\n\t\tbarRadius: 10,\n\t\tdragToSeek: true,\n\t\tnormalize: true,\n\t\tminPxPerSec: 20,\n\t\twaveColor: \"\",\n\t\tprogressColor: \"\",\n\t\tmediaControls: false as boolean | undefined,\n\t\tsampleRate: 44100\n\t};\n\n\tonMount(() => {\n\t\tcolor_accent = getComputedStyle(document?.documentElement).getPropertyValue(\n\t\t\t\"--color-accent\"\n\t\t);\n\t\tset_trim_region_colour();\n\t\twaveform_settings.waveColor =\n\t\t\tgradio.props?.waveform_options?.waveform_color || \"#9ca3af\";\n\t\twaveform_settings.progressColor =\n\t\t\tgradio.props?.waveform_options?.waveform_progress_color || color_accent;\n\t\twaveform_settings.mediaControls =\n\t\t\tgradio.props?.waveform_options?.show_controls;\n\t\twaveform_settings.sampleRate =\n\t\t\tgradio.props?.waveform_options?.sample_rate || 44100;\n\t});\n\n\tconst trim_region_settings = {\n\t\tcolor: gradio.props?.waveform_options?.trim_region_color,\n\t\tdrag: true,\n\t\tresize: true\n\t};\n\n\tfunction set_trim_region_colour(): void {\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--trim-region-color\",\n\t\t\ttrim_region_settings.color || color_accent\n\t\t);\n\t}\n\n\t// Create const references to the callbacks so that afterUpdate in child is not called on every prop change\n\t// in the DOM. See https://github.com/gradio-app/gradio/issues/11933\n\t// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n\tconst upload_fn = (...args: Parameters<typeof gradio.shared.client.upload>) =>\n\t\tgradio.shared.client.upload(...args);\n\tconst i18n = (s: string | null | undefined): string => gradio.i18n(s);\n\tconst stream_handler_fn = (\n\t\t...args: Parameters<typeof gradio.shared.client.stream>\n\t): EventSource => gradio.shared.client.stream(...args);\n\n\tlet sources_string = $derived(\n\t\tgradio.props.sources.join(\",\") as\n\t\t\t| \"upload\"\n\t\t\t| \"upload,microphone\"\n\t\t\t| \"microphone\"\n\t\t\t| \"microphone,upload\"\n\t);\n\n\tlet file_types_string = $derived.by(\n\t\t() => (gradio.props.file_types || []).join(\",\") || null\n\t);\n</script>\n\n<Block\n\tvisible={gradio.shared.visible}\n\telem_id={gradio.shared.elem_id}\n\telem_classes={[...(gradio.shared.elem_classes || []), \"multimodal-textbox\"]}\n\tscale={gradio.shared.scale}\n\tmin_width={gradio.shared.min_width}\n\tallow_overflow={false}\n\tpadding={false}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n>\n\t{#if gradio.shared.loading_status}\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...gradio.shared.loading_status}\n\t\t\ton:clear_status={() =>\n\t\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t\t/>\n\t{/if}\n\n\t<MultimodalTextbox\n\t\tbind:upload_promise\n\t\t{value}\n\t\tvalue_is_output\n\t\tbind:dragging\n\t\tbind:active_source\n\t\t{file_types_string}\n\t\troot={gradio.shared.root}\n\t\tlabel={gradio.shared.label || \"MultimodalTextbox\"}\n\t\tinfo={gradio.props.info}\n\t\tshow_label={gradio.shared.show_label}\n\t\tlines={gradio.props.lines}\n\t\trtl={gradio.props.rtl}\n\t\ttext_align={gradio.props.text_align}\n\t\twaveform_settings={waveform_settings as WaveformOptions}\n\t\t{i18n}\n\t\tmax_lines={!gradio.props.max_lines\n\t\t\t? gradio.props.lines + 1\n\t\t\t: gradio.props.max_lines}\n\t\tplaceholder={gradio.props.placeholder}\n\t\tsubmit_btn={gradio.props.submit_btn}\n\t\tstop_btn={gradio.props.stop_btn}\n\t\tautofocus={gradio.props.autofocus}\n\t\tautoscroll={gradio.shared.autoscroll}\n\t\tfile_count={gradio.props.file_count}\n\t\t{sources_string}\n\t\tmax_file_size={gradio.shared.max_file_size}\n\t\ton:change={(e) => (\n\t\t\t(gradio.props.value = e.detail),\n\t\t\tgradio.dispatch(\"change\", gradio.props.value)\n\t\t)}\n\t\ton:input={() => gradio.dispatch(\"input\")}\n\t\ton:submit={() => gradio.dispatch(\"submit\")}\n\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\ton:blur={() => gradio.dispatch(\"blur\")}\n\t\ton:select={(e) => gradio.dispatch(\"select\", e.detail)}\n\t\ton:focus={() => gradio.dispatch(\"focus\")}\n\t\ton:error={({ detail }) => {\n\t\t\tgradio.dispatch(\"error\", detail);\n\t\t}}\n\t\ton:start_recording={() => gradio.dispatch(\"start_recording\")}\n\t\ton:pause_recording={() => gradio.dispatch(\"pause_recording\")}\n\t\ton:stop_recording={() => gradio.dispatch(\"stop_recording\")}\n\t\ton:upload={(e) => gradio.dispatch(\"upload\", e.detail)}\n\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\tdisabled={!gradio.shared.interactive}\n\t\tupload={upload_fn}\n\t\tstream_handler={stream_handler_fn}\n\t\tmax_plain_text_length={gradio.props.max_plain_text_length}\n\t\thtml_attributes={gradio.props.html_attributes}\n\t/>\n</Block>\n"],"names":["event","$.prop","root","$.mutable_source","$.get","text","index","$.set","$.each","$.deep_read_state","$.untrack","$.event","$.effect","$.bind_value","$.bind_this","$.set_class","$$anchor","$.template_effect","$.set_style","$.state","$.rest_props","$.derived","$0","$1"],"mappings":"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"}