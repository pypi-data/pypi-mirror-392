{"version":3,"file":"DSerQHmp.js","sources":["../../../../../../../plot/shared/plot_types/BokehPlot.svelte"],"sourcesContent":["<script lang=\"ts\">\n\t//@ts-nocheck\n\timport { onDestroy } from \"svelte\";\n\n\texport let value;\n\texport let bokeh_version: string | null;\n\tconst div_id = `bokehDiv-${Math.random().toString(5).substring(2)}`;\n\t$: plot = value?.plot;\n\n\tasync function embed_bokeh(_plot: Record<string, any>): void {\n\t\tif (document) {\n\t\t\tif (document.getElementById(div_id)) {\n\t\t\t\tdocument.getElementById(div_id).innerHTML = \"\";\n\t\t\t}\n\t\t}\n\t\tif (window.Bokeh) {\n\t\t\tload_bokeh();\n\t\t\tlet plotObj = JSON.parse(_plot);\n\t\t\tawait window.Bokeh.embed.embed_item(plotObj, div_id);\n\t\t}\n\t}\n\n\t$: loaded && embed_bokeh(plot);\n\n\tconst main_src = `https://cdn.bokeh.org/bokeh/release/bokeh-${bokeh_version}.min.js`;\n\n\tconst plugins_src = [\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-widgets-${bokeh_version}.min.js`,\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-tables-${bokeh_version}.min.js`,\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-gl-${bokeh_version}.min.js`,\n\t\t`https://cdn.pydata.org/bokeh/release/bokeh-api-${bokeh_version}.min.js`\n\t];\n\n\tlet loaded = false;\n\tasync function load_plugins(): HTMLScriptElement[] {\n\t\tawait Promise.all(\n\t\t\tplugins_src.map((src, i) => {\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tconst script = document.createElement(\"script\");\n\t\t\t\t\tscript.onload = resolve;\n\t\t\t\t\tscript.src = src;\n\t\t\t\t\tdocument.head.appendChild(script);\n\t\t\t\t\treturn script;\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\n\t\tloaded = true;\n\t}\n\n\tlet plugin_scripts = [];\n\n\tfunction handle_bokeh_loaded(): void {\n\t\tplugin_scripts = load_plugins();\n\t}\n\n\tfunction load_bokeh(): HTMLScriptElement {\n\t\tconst script = document.createElement(\"script\");\n\t\tscript.onload = handle_bokeh_loaded;\n\t\tscript.src = main_src;\n\t\tconst is_bokeh_script_present = document.head.querySelector(\n\t\t\t`script[src=\"${main_src}\"]`\n\t\t);\n\t\tif (!is_bokeh_script_present) {\n\t\t\tdocument.head.appendChild(script);\n\t\t} else {\n\t\t\thandle_bokeh_loaded();\n\t\t}\n\t\treturn script;\n\t}\n\n\tconst main_script = bokeh_version ? load_bokeh() : null;\n\n\tonDestroy(() => {\n\t\tif (main_script in document.children) {\n\t\t\tdocument.removeChild(main_script);\n\t\t\tplugin_scripts.forEach((child) => document.removeChild(child));\n\t\t}\n\t});\n</script>\n\n<div data-testid={\"bokeh\"} id={div_id} class=\"gradio-bokeh\" />\n\n<style>\n\t.gradio-bokeh {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n</style>\n"],"names":["$.prop","$.set","$.get"],"mappings":";;;;;;;sCAAA;;;MAIY,QAAKA,KAAA,SAAA,SAAA,CAAA;MACL,gBAA4BA,KAAA,SAAA,iBAAA,CAAA;QACjC,SAAM,YAAe,KAAK,OAAM,EAAG,SAAS,CAAC,EAAE,UAAU,CAAC,CAAA;iBAGjD,YAAY,OAAkC;AACxD,QAAA,UAAU;AACT,UAAA,SAAS,eAAe,MAAM,GAAG;AACpC,iBAAS,eAAe,MAAM,EAAE,YAAY;AAAA,MAC7C;AAAA,IACD;QACI,OAAO,OAAO;AACjB,iBAAU;AACN,UAAA,UAAU,KAAK,MAAM,KAAK;YACxB,OAAO,MAAM,MAAM,WAAW,SAAS,MAAM;AAAA,IACpD;AAAA,EACD;AAIM,QAAA,wDAAwD,cAAa,CAAA;QAErE,cAAW;AAAA,0DACsC,cAAa,CAAA;AAAA,yDACd,cAAa,CAAA;AAAA,qDACjB,cAAa,CAAA;AAAA,sDACZ,cAAa,CAAA;AAAA;AAG5D,MAAA,wBAAS,KAAK;AACH,iBAAA,eAAoC;UAC5C,QAAQ,IACb,YAAY,IAAG,CAAE,KAAK,MAAM;iBAChB,QAAO,CAAE,YAAY;AACzB,cAAA,SAAS,SAAS,cAAc,QAAQ;AAC9C,eAAO,SAAS;AAChB,eAAO,MAAM;AACb,iBAAS,KAAK,YAAY,MAAM;eACzB;AAAA,MACR,CAAC;AAAA,IACF,CAAC,CAAA;AAGFC,QAAA,QAAS,IAAI;AAAA,EACd;MAEI,iBAAc,CAAA;AAET,WAAA,sBAA4B;AACpC,qBAAiB,aAAY;AAAA,EAC9B;AAES,WAAA,aAAgC;AAClC,UAAA,SAAS,SAAS,cAAc,QAAQ;AAC9C,WAAO,SAAS;AAChB,WAAO,MAAM;AACP,UAAA,0BAA0B,SAAS,KAAK,6BAC9B,QAAQ,IAAA;AAEnB,QAAA,CAAA,yBAAyB;AAC7B,eAAS,KAAK,YAAY,MAAM;AAAA,IACjC,OAAO;AACN,0BAAmB;AAAA,IACpB;WACO;AAAA,EACR;AAEM,QAAA,cAAc,kBAAgB,WAAU,IAAK;AAEnD,YAAS,MAAO;AACX,QAAA,eAAe,SAAS,UAAU;AACrC,eAAS,YAAY,WAAW;AAChC,qBAAe,QAAO,CAAE,UAAU,SAAS,YAAY,KAAK,CAAA;AAAA,IAC7D;AAAA,EACD,CAAC;;QAvEE,MAAO,MAAK,GAAE,IAAI;AAAA;;QAelB,MAAM,KAAI,YAAWC,IAAC,IAAI,CAAA;AAAA;;;;oCA2DZ,OAAO;iDAAM,MAAM,CAAA;;;AAFrC;"}