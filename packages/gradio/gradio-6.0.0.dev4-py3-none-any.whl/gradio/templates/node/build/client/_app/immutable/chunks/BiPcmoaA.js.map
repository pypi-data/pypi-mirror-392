{"version":3,"file":"BiPcmoaA.js","sources":["../../../../../../../image/shared/ImageUploader.svelte","../../../../../../../image/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport { BlockLabel, IconButtonWrapper, IconButton } from \"@gradio/atoms\";\n\timport { Clear, Image as ImageIcon } from \"@gradio/icons\";\n\timport { FullscreenButton } from \"@gradio/atoms\";\n\timport {\n\t\ttype SelectData,\n\t\ttype I18nFormatter,\n\t\ttype ValueData\n\t} from \"@gradio/utils\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\timport Webcam from \"./Webcam.svelte\";\n\n\timport { Upload, UploadProgress } from \"@gradio/upload\";\n\timport { FileData, type Client } from \"@gradio/client\";\n\timport { SelectSource } from \"@gradio/atoms\";\n\timport Image from \"./Image.svelte\";\n\timport type { Base64File, WebcamOptions } from \"./types\";\n\n\texport let value: null | FileData | Base64File = null;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\n\ttype source_type = \"upload\" | \"webcam\" | \"clipboard\" | \"microphone\" | null;\n\n\texport let sources: source_type[] = [\"upload\", \"clipboard\", \"webcam\"];\n\texport let streaming = false;\n\texport let pending = false;\n\texport let webcam_options: WebcamOptions;\n\texport let selectable = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\texport let max_file_size: number | null = null;\n\texport let upload: Client[\"upload\"];\n\texport let stream_handler: Client[\"stream\"];\n\texport let stream_every: number;\n\texport let time_limit: number;\n\texport let show_fullscreen_button = true;\n\texport let stream_state: \"open\" | \"waiting\" | \"closed\" = \"closed\";\n\texport let upload_promise: Promise<any> | null = null;\n\n\tlet upload_input: Upload;\n\texport let uploading = false;\n\texport let active_source: source_type = null;\n\texport let fullscreen = false;\n\n\tlet files: FileData[] = [];\n\tlet upload_id: string;\n\n\tasync function handle_upload({\n\t\tdetail\n\t}: CustomEvent<FileData>): Promise<void> {\n\t\tif (!streaming) {\n\t\t\tif (detail.path?.toLowerCase().endsWith(\".svg\") && detail.url) {\n\t\t\t\tconst response = await fetch(detail.url);\n\t\t\t\tconst svgContent = await response.text();\n\t\t\t\tvalue = {\n\t\t\t\t\t...detail,\n\t\t\t\t\turl: `data:image/svg+xml,${encodeURIComponent(svgContent)}`\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvalue = detail;\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tdispatch(\"upload\");\n\t\t}\n\t}\n\n\tfunction handle_clear(): void {\n\t\tvalue = null;\n\t\tdispatch(\"clear\");\n\t\tdispatch(\"change\", null);\n\t}\n\n\tfunction handle_remove_image_click(event: MouseEvent): void {\n\t\thandle_clear();\n\t\tevent.stopPropagation();\n\t}\n\n\tasync function handle_save(\n\t\timg_blob: Blob | any,\n\t\tevent: \"change\" | \"stream\" | \"upload\"\n\t): Promise<void> {\n\t\tconsole.log(\"handle_save\", { event, img_blob });\n\t\tif (event === \"stream\") {\n\t\t\tdispatch(\"stream\", {\n\t\t\t\tvalue: { url: img_blob } as Base64File,\n\t\t\t\tis_value_data: true\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tupload_id = Math.random().toString(36).substring(2, 15);\n\t\tconst f_ = new File([img_blob], `image.${streaming ? \"jpeg\" : \"png\"}`);\n\t\tfiles = [\n\t\t\tnew FileData({\n\t\t\t\tpath: f_.name,\n\t\t\t\torig_name: f_.name,\n\t\t\t\tblob: f_,\n\t\t\t\tsize: f_.size,\n\t\t\t\tmime_type: f_.type,\n\t\t\t\tis_stream: false\n\t\t\t})\n\t\t];\n\t\tpending = true;\n\t\tconst f = await upload_input.load_files([f_], upload_id);\n\t\tconsole.log(\"uploaded file\", f);\n\t\tif (event === \"change\" || event === \"upload\") {\n\t\t\tvalue = f?.[0] || null;\n\t\t\tawait tick();\n\t\t\tdispatch(\"change\");\n\t\t}\n\t\tpending = false;\n\t}\n\n\t$: active_streaming = streaming && active_source === \"webcam\";\n\t$: if (uploading && !active_streaming) value = null;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange?: never;\n\t\tstream: ValueData;\n\t\tclear?: never;\n\t\tdrag: boolean;\n\t\tupload?: never;\n\t\tselect: SelectData;\n\t\tend_stream: never;\n\t}>();\n\n\texport let dragging = false;\n\n\t$: dispatch(\"drag\", dragging);\n\n\tfunction handle_click(evt: MouseEvent): void {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t}\n\n\t$: if (!active_source && sources) {\n\t\tactive_source = sources[0];\n\t}\n\n\tasync function handle_select_source(\n\t\tsource: (typeof sources)[number]\n\t): Promise<void> {\n\t\tswitch (source) {\n\t\t\tcase \"clipboard\":\n\t\t\t\tupload_input.paste_clipboard();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tlet image_container: HTMLElement;\n\n\tfunction on_drag_over(evt: DragEvent): void {\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = \"copy\";\n\t\t}\n\n\t\tdragging = true;\n\t}\n\n\tasync function on_drop(evt: DragEvent): Promise<void> {\n\t\tevt.preventDefault();\n\t\tevt.stopPropagation();\n\t\tdragging = false;\n\n\t\tif (value) {\n\t\t\thandle_clear();\n\t\t\tawait tick();\n\t\t}\n\n\t\tactive_source = \"upload\";\n\t\tawait tick();\n\t\tupload_input.load_files_from_drop(evt);\n\t}\n</script>\n\n<BlockLabel {show_label} Icon={ImageIcon} label={label || \"Image\"} />\n\n<div data-testid=\"image\" class=\"image-container\" bind:this={image_container}>\n\t<IconButtonWrapper>\n\t\t{#if value?.url && !active_streaming}\n\t\t\t{#if show_fullscreen_button}\n\t\t\t\t<FullscreenButton {fullscreen} on:fullscreen />\n\t\t\t{/if}\n\t\t\t<IconButton\n\t\t\t\tIcon={Clear}\n\t\t\t\tlabel=\"Remove Image\"\n\t\t\t\ton:click={handle_remove_image_click}\n\t\t\t/>\n\t\t{/if}\n\t</IconButtonWrapper>\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<div\n\t\tclass=\"upload-container\"\n\t\tclass:reduced-height={sources.length > 1}\n\t\tstyle:width={value ? \"auto\" : \"100%\"}\n\t\ton:dragover={on_drag_over}\n\t\ton:drop={on_drop}\n\t>\n\t\t<Upload\n\t\t\tbind:upload_promise\n\t\t\thidden={value !== null || active_source === \"webcam\"}\n\t\t\tbind:this={upload_input}\n\t\t\tbind:uploading\n\t\t\tbind:dragging\n\t\t\tfiletype={active_source === \"clipboard\" ? \"clipboard\" : \"image/*\"}\n\t\t\ton:load={handle_upload}\n\t\t\ton:error\n\t\t\t{root}\n\t\t\t{max_file_size}\n\t\t\tdisable_click={!sources.includes(\"upload\") || value !== null}\n\t\t\t{upload}\n\t\t\t{stream_handler}\n\t\t\taria_label={i18n(\"image.drop_to_upload\")}\n\t\t>\n\t\t\t{#if value === null}\n\t\t\t\t<slot />\n\t\t\t{/if}\n\t\t</Upload>\n\t\t{#if active_source === \"webcam\" && !streaming && pending}\n\t\t\t<UploadProgress {root} {upload_id} {stream_handler} {files} />\n\t\t{:else if active_source === \"webcam\" && (streaming || (!streaming && !value))}\n\t\t\t<Webcam\n\t\t\t\t{root}\n\t\t\t\t{value}\n\t\t\t\ton:capture={(e) => handle_save(e.detail, \"change\")}\n\t\t\t\ton:stream={(e) => handle_save(e.detail, \"stream\")}\n\t\t\t\ton:error\n\t\t\t\ton:drag\n\t\t\t\ton:upload={(e) => handle_save(e.detail, \"upload\")}\n\t\t\t\ton:close_stream\n\t\t\t\t{stream_state}\n\t\t\t\tmirror_webcam={webcam_options.mirror}\n\t\t\t\t{stream_every}\n\t\t\t\t{streaming}\n\t\t\t\tmode=\"image\"\n\t\t\t\tinclude_audio={false}\n\t\t\t\t{i18n}\n\t\t\t\t{upload}\n\t\t\t\t{time_limit}\n\t\t\t\twebcam_constraints={webcam_options.constraints}\n\t\t\t/>\n\t\t{:else if value !== null && !streaming}\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events-->\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions-->\n\t\t\t<div class:selectable class=\"image-frame\" on:click={handle_click}>\n\t\t\t\t<Image src={value.url} restProps={{ alt: value.alt_text }} />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\t{#if sources.length > 1 || sources.includes(\"clipboard\")}\n\t\t<SelectSource\n\t\t\t{sources}\n\t\t\tbind:active_source\n\t\t\t{handle_clear}\n\t\t\thandle_select={handle_select_source}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.image-frame :global(img) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: scale-down;\n\t}\n\n\t.upload-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\theight: 100%;\n\t\tflex-shrink: 1;\n\t\tmax-height: 100%;\n\t}\n\n\t.reduced-height {\n\t\theight: calc(100% - var(--size-10));\n\t}\n\n\t.image-container {\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmax-height: 100%;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.image-frame {\n\t\tobject-fit: cover;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script context=\"module\" lang=\"ts\">\n\texport { default as Webcam } from \"./shared/Webcam.svelte\";\n\texport { default as BaseImageUploader } from \"./shared/ImageUploader.svelte\";\n\texport { default as BaseStaticImage } from \"./shared/ImagePreview.svelte\";\n\texport { default as BaseExample } from \"./Example.svelte\";\n\texport { default as BaseImage } from \"./shared/Image.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport { tick } from \"svelte\";\n\timport { Gradio } from \"@gradio/utils\";\n\timport StaticImage from \"./shared/ImagePreview.svelte\";\n\timport ImageUploader from \"./shared/ImageUploader.svelte\";\n\timport { Block, Empty, UploadText } from \"@gradio/atoms\";\n\timport { Image } from \"@gradio/icons\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport type { ImageProps, ImageEvents } from \"./shared/types\";\n\n\tlet stream_data = { value: null };\n\tlet upload_promise = $state<Promise<any>>();\n\tclass ImageGradio extends Gradio<ImageEvents, ImageProps> {\n\t\tasync get_data() {\n\t\t\tif (upload_promise) {\n\t\t\t\tawait upload_promise;\n\t\t\t\tawait tick();\n\t\t\t}\n\n\t\t\tconst data = await super.get_data();\n\t\t\tif (props.props.streaming) {\n\t\t\t\tdata.value = stream_data.value;\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\t}\n\n\tconst props = $props();\n\tconst gradio = new ImageGradio(props);\n\n\tlet fullscreen = $state(false);\n\tlet dragging = $state(false);\n\tlet active_source = $derived.by(() =>\n\t\tgradio.props.sources ? gradio.props.sources[0] : null\n\t);\n\n\tlet upload_component: ImageUploader;\n\tconst handle_drag_event = (event: Event): void => {\n\t\tconst drag_event = event as DragEvent;\n\t\tdrag_event.preventDefault();\n\t\tdrag_event.stopPropagation();\n\t\tif (drag_event.type === \"dragenter\" || drag_event.type === \"dragover\") {\n\t\t\tdragging = true;\n\t\t} else if (drag_event.type === \"dragleave\") {\n\t\t\tdragging = false;\n\t\t}\n\t};\n\n\tconst handle_drop = (event: Event): void => {\n\t\tif (gradio.shared.interactive) {\n\t\t\tconst drop_event = event as DragEvent;\n\t\t\tdrop_event.preventDefault();\n\t\t\tdrop_event.stopPropagation();\n\t\t\tdragging = false;\n\n\t\t\tif (upload_component) {\n\t\t\t\tupload_component.loadFilesFromDrop(drop_event);\n\t\t\t}\n\t\t}\n\t};\n\n\tlet old_value = $state(gradio.props.value);\n\n\t$effect(() => {\n\t\tif (old_value != gradio.props.value) {\n\t\t\told_value = gradio.props.value;\n\t\t\tgradio.dispatch(\"change\");\n\t\t}\n\t});\n\n\tlet status = $derived(gradio?.shared?.loading_status.stream_state);\n</script>\n\n{#if !gradio.shared.interactive}\n\t<Block\n\t\tvisible={gradio.shared.visible}\n\t\tvariant={\"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\telem_id={gradio.shared.elem_id}\n\t\telem_classes={gradio.shared.elem_classes}\n\t\theight={gradio.props.height || undefined}\n\t\twidth={gradio.props.width}\n\t\tallow_overflow={false}\n\t\tcontainer={gradio.shared.container}\n\t\tscale{gradio.shared.scale}\n\t\tmin_width={gradio.shared.min_width}\n\t\tbind:fullscreen\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...gradio.shared.loading_status}\n\t\t/>\n\t\t<StaticImage\n\t\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\t\ton:error={({ detail }) => gradio.dispatch(\"error\", detail)}\n\t\t\ton:fullscreen={({ detail }) => {\n\t\t\t\tfullscreen = detail;\n\t\t\t}}\n\t\t\t{fullscreen}\n\t\t\tvalue={gradio.props.value}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\tselectable={gradio.props._selectable}\n\t\t\ti18n={gradio.i18n}\n\t\t\tbuttons={gradio.props.buttons}\n\t\t/>\n\t</Block>\n{:else}\n\t<Block\n\t\tvisible={gradio.shared.visible}\n\t\tvariant={gradio.props.value === null ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\telem_id={gradio.shared.elem_id}\n\t\telem_classes={gradio.shared.elem_classes}\n\t\theight={gradio.props.height || undefined}\n\t\twidth={gradio.props.width}\n\t\tallow_overflow={false}\n\t\tcontainer={gradio.shared.container}\n\t\tscale={gradio.shared.scale}\n\t\tmin_width={gradio.shared.min_width}\n\t\tbind:fullscreen\n\t\ton:dragenter={handle_drag_event}\n\t\ton:dragleave={handle_drag_event}\n\t\ton:dragover={handle_drag_event}\n\t\ton:drop={handle_drop}\n\t>\n\t\t{#if gradio.shared.loading_status.type === \"output\"}\n\t\t\t<StatusTracker\n\t\t\t\tautoscroll={gradio.shared.autoscroll}\n\t\t\t\ti18n={gradio.i18n}\n\t\t\t\t{...gradio.shared.loading_status}\n\t\t\t\ton:clear_status={() =>\n\t\t\t\t\tgradio.dispatch(\"clear_status\", gradio.shared.loading_status)}\n\t\t\t/>\n\t\t{/if}\n\t\t<ImageUploader\n\t\t\tbind:upload_promise\n\t\t\tbind:this={upload_component}\n\t\t\tbind:active_source\n\t\t\tbind:value={gradio.props.value}\n\t\t\tbind:dragging\n\t\t\tselectable={gradio.props._selectable}\n\t\t\troot={gradio.shared.root}\n\t\t\tsources={gradio.props.sources}\n\t\t\t{fullscreen}\n\t\t\tshow_fullscreen_button={gradio.props.buttons === null\n\t\t\t\t? true\n\t\t\t\t: gradio.props.buttons.includes(\"fullscreen\")}\n\t\t\ton:edit={() => gradio.dispatch(\"edit\")}\n\t\t\ton:clear={() => {\n\t\t\t\tfullscreen = false;\n\t\t\t\tgradio.dispatch(\"clear\");\n\t\t\t\tgradio.dispatch(\"input\");\n\t\t\t}}\n\t\t\ton:stream={({ detail }) => {\n\t\t\t\tstream_data = detail;\n\t\t\t\tgradio.dispatch(\"stream\", detail);\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:upload={() => {\n\t\t\t\tgradio.dispatch(\"upload\");\n\t\t\t\tgradio.dispatch(\"input\");\n\t\t\t}}\n\t\t\ton:select={({ detail }) => gradio.dispatch(\"select\", detail)}\n\t\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tgradio.shared.loading_status.status = \"error\";\n\t\t\t\tgradio.dispatch(\"error\", detail);\n\t\t\t}}\n\t\t\ton:close_stream={() => {\n\t\t\t\tgradio.dispatch(\"close_stream\");\n\t\t\t}}\n\t\t\ton:fullscreen={({ detail }) => {\n\t\t\t\tfullscreen = detail;\n\t\t\t}}\n\t\t\tlabel={gradio.shared.label}\n\t\t\tshow_label={gradio.shared.show_label}\n\t\t\tpending={gradio.shared.loading_status?.status === \"pending\" ||\n\t\t\t\tgradio.shared.loading_status?.status === \"streaming\"}\n\t\t\tstreaming={gradio.props.streaming}\n\t\t\twebcam_options={gradio.props.webcam_options}\n\t\t\tstream_every={gradio.props.stream_every}\n\t\t\ttime_limit={gradio.shared.loading_status?.time_limit}\n\t\t\tmax_file_size={gradio.shared.max_file_size}\n\t\t\ti18n={gradio.i18n}\n\t\t\tupload={(...args) => gradio.shared.client.upload(...args)}\n\t\t\tstream_handler={gradio.shared.client?.stream}\n\t\t\tstream_state={status}\n\t\t>\n\t\t\t{#if active_source === \"upload\" || !active_source}\n\t\t\t\t<UploadText\n\t\t\t\t\ti18n={gradio.i18n}\n\t\t\t\t\ttype=\"image\"\n\t\t\t\t\tplaceholder={gradio.props.placeholder}\n\t\t\t\t/>\n\t\t\t{:else if active_source === \"clipboard\"}\n\t\t\t\t<UploadText i18n={gradio.i18n} type=\"clipboard\" mode=\"short\" />\n\t\t\t{:else}\n\t\t\t\t<Empty unpadded_box={true} size=\"large\"><Image /></Empty>\n\t\t\t{/if}\n\t\t</ImageUploader>\n\t</Block>\n{/if}\n"],"names":["$.prop","$.mutable_source","event","$.set","$.get","$.derived_safe_equal","ImageIcon","$.untrack","$.bind_this","$.state","$.rest_props","$.derived","$.proxy","$.user_effect","$0","$1","$2"],"mappings":"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"}