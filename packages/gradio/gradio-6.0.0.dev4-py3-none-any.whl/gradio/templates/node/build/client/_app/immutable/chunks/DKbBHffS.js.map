{"version":3,"file":"DKbBHffS.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/FlowGraph/Blocks/Execution/ControlFlow/flowGraphForLoopBlock.js"],"sourcesContent":["import { FlowGraphExecutionBlockWithOutSignal } from \"../../../flowGraphExecutionBlockWithOutSignal.js\";\nimport { RichTypeAny, RichTypeFlowGraphInteger, RichTypeNumber } from \"../../../flowGraphRichTypes.js\";\nimport { RegisterClass } from \"../../../../Misc/typeStore.js\";\nimport { getNumericValue } from \"../../../utils.js\";\nimport { FlowGraphInteger } from \"../../../CustomTypes/flowGraphInteger.js\";\n/**\n * Block that executes an action in a loop.\n */\nexport class FlowGraphForLoopBlock extends FlowGraphExecutionBlockWithOutSignal {\n    constructor(config) {\n        super(config);\n        this.startIndex = this.registerDataInput(\"startIndex\", RichTypeAny, 0);\n        this.endIndex = this.registerDataInput(\"endIndex\", RichTypeAny);\n        this.step = this.registerDataInput(\"step\", RichTypeNumber, 1);\n        this.index = this.registerDataOutput(\"index\", RichTypeFlowGraphInteger, new FlowGraphInteger(getNumericValue(config?.initialIndex ?? 0)));\n        this.executionFlow = this._registerSignalOutput(\"executionFlow\");\n        this.completed = this._registerSignalOutput(\"completed\");\n        this._unregisterSignalOutput(\"out\");\n    }\n    /**\n     * @internal\n     */\n    _execute(context) {\n        const index = getNumericValue(this.startIndex.getValue(context));\n        const step = this.step.getValue(context);\n        let endIndex = getNumericValue(this.endIndex.getValue(context));\n        for (let i = index; i < endIndex; i += step) {\n            this.index.setValue(new FlowGraphInteger(i), context);\n            this.executionFlow._activateSignal(context);\n            endIndex = getNumericValue(this.endIndex.getValue(context));\n            if (i > FlowGraphForLoopBlock.MaxLoopIterations * step) {\n                break;\n            }\n        }\n        if (this.config?.incrementIndexWhenLoopDone) {\n            this.index.setValue(new FlowGraphInteger(getNumericValue(this.index.getValue(context)) + step), context);\n        }\n        this.completed._activateSignal(context);\n    }\n    /**\n     * @returns class name of the block.\n     */\n    getClassName() {\n        return \"FlowGraphForLoopBlock\" /* FlowGraphBlockNames.ForLoop */;\n    }\n}\n/**\n * The maximum number of iterations allowed for the loop.\n * If the loop exceeds this number, it will stop. This number is configurable to avoid infinite loops.\n */\nFlowGraphForLoopBlock.MaxLoopIterations = 1000;\nRegisterClass(\"FlowGraphForLoopBlock\" /* FlowGraphBlockNames.ForLoop */, FlowGraphForLoopBlock);\n//# sourceMappingURL=flowGraphForLoopBlock.js.map"],"names":[],"mappings":";;;AAQO,MAAM,8BAA8B,qCAAqC;AAAA,EAC5E,YAAY,QAAQ;AAChB,UAAM,MAAM;AACZ,SAAK,aAAa,KAAK,kBAAkB,cAAc,aAAa,CAAC;AACrE,SAAK,WAAW,KAAK,kBAAkB,YAAY,WAAW;AAC9D,SAAK,OAAO,KAAK,kBAAkB,QAAQ,gBAAgB,CAAC;AAC5D,SAAK,QAAQ,KAAK,mBAAmB,SAAS,0BAA0B,IAAI,iBAAiB,gBAAgB,QAAQ,gBAAgB,CAAC,CAAC,CAAC;AACxI,SAAK,gBAAgB,KAAK,sBAAsB,eAAe;AAC/D,SAAK,YAAY,KAAK,sBAAsB,WAAW;AACvD,SAAK,wBAAwB,KAAK;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA,EAIA,SAAS,SAAS;AACd,UAAM,QAAQ,gBAAgB,KAAK,WAAW,SAAS,OAAO,CAAC;AAC/D,UAAM,OAAO,KAAK,KAAK,SAAS,OAAO;AACvC,QAAI,WAAW,gBAAgB,KAAK,SAAS,SAAS,OAAO,CAAC;AAC9D,aAAS,IAAI,OAAO,IAAI,UAAU,KAAK,MAAM;AACzC,WAAK,MAAM,SAAS,IAAI,iBAAiB,CAAC,GAAG,OAAO;AACpD,WAAK,cAAc,gBAAgB,OAAO;AAC1C,iBAAW,gBAAgB,KAAK,SAAS,SAAS,OAAO,CAAC;AAC1D,UAAI,IAAI,sBAAsB,oBAAoB,MAAM;AACpD;AAAA,MACJ;AAAA,IACJ;AACA,QAAI,KAAK,QAAQ,4BAA4B;AACzC,WAAK,MAAM,SAAS,IAAI,iBAAiB,gBAAgB,KAAK,MAAM,SAAS,OAAO,CAAC,IAAI,IAAI,GAAG,OAAO;AAAA,IAC3G;AACA,SAAK,UAAU,gBAAgB,OAAO;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAIA,eAAe;AACX,WAAO;AAAA,EACX;AACJ;AAKA,sBAAsB,oBAAoB;AAC1C,cAAc,yBAA2D,qBAAqB;","x_google_ignoreList":[0]}