{"version":3,"file":"CsGZT4Ds.js","sources":["../../../../../../../../node_modules/.pnpm/@babylonjs+core@8.36.1/node_modules/@babylonjs/core/FlowGraph/Blocks/Data/flowGraphTransformCoordinatesSystemBlock.js"],"sourcesContent":["import { FlowGraphBlock } from \"../../flowGraphBlock.js\";\nimport { RichTypeAny, RichTypeVector3 } from \"../../flowGraphRichTypes.js\";\nimport { TmpVectors, Vector3 } from \"../../../Maths/math.vector.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\n/**\n * This blocks transforms a vector from one coordinate system to another.\n */\nexport class FlowGraphTransformCoordinatesSystemBlock extends FlowGraphBlock {\n    /**\n     * Creates a new FlowGraphCoordinateTransformBlock\n     * @param config optional configuration for this block\n     */\n    constructor(config) {\n        super(config);\n        this.sourceSystem = this.registerDataInput(\"sourceSystem\", RichTypeAny);\n        this.destinationSystem = this.registerDataInput(\"destinationSystem\", RichTypeAny);\n        this.inputCoordinates = this.registerDataInput(\"inputCoordinates\", RichTypeVector3);\n        this.outputCoordinates = this.registerDataOutput(\"outputCoordinates\", RichTypeVector3);\n    }\n    _updateOutputs(_context) {\n        const sourceSystemValue = this.sourceSystem.getValue(_context);\n        const destinationSystemValue = this.destinationSystem.getValue(_context);\n        const inputCoordinatesValue = this.inputCoordinates.getValue(_context);\n        // takes coordinates from source space to world space\n        const sourceWorld = sourceSystemValue.getWorldMatrix();\n        // takes coordinates from destination space to world space\n        const destinationWorld = destinationSystemValue.getWorldMatrix();\n        const destinationWorldInverse = TmpVectors.Matrix[0].copyFrom(destinationWorld);\n        // takes coordinates from world space to destination space\n        destinationWorldInverse.invert();\n        const sourceToDestination = TmpVectors.Matrix[1];\n        // takes coordinates from source space to world space to destination space\n        destinationWorldInverse.multiplyToRef(sourceWorld, sourceToDestination);\n        const outputCoordinatesValue = this.outputCoordinates.getValue(_context);\n        Vector3.TransformCoordinatesToRef(inputCoordinatesValue, sourceToDestination, outputCoordinatesValue);\n    }\n    /**\n     * Gets the class name of this block\n     * @returns the class name\n     */\n    getClassName() {\n        return \"FlowGraphTransformCoordinatesSystemBlock\" /* FlowGraphBlockNames.TransformCoordinatesSystem */;\n    }\n}\nRegisterClass(\"FlowGraphTransformCoordinatesSystemBlock\" /* FlowGraphBlockNames.TransformCoordinatesSystem */, FlowGraphTransformCoordinatesSystemBlock);\n//# sourceMappingURL=flowGraphTransformCoordinatesSystemBlock.js.map"],"names":[],"mappings":";;;AAOO,MAAM,iDAAiD,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA,EAKzE,YAAY,QAAQ;AAChB,UAAM,MAAM;AACZ,SAAK,eAAe,KAAK,kBAAkB,gBAAgB,WAAW;AACtE,SAAK,oBAAoB,KAAK,kBAAkB,qBAAqB,WAAW;AAChF,SAAK,mBAAmB,KAAK,kBAAkB,oBAAoB,eAAe;AAClF,SAAK,oBAAoB,KAAK,mBAAmB,qBAAqB,eAAe;AAAA,EACzF;AAAA,EACA,eAAe,UAAU;AACrB,UAAM,oBAAoB,KAAK,aAAa,SAAS,QAAQ;AAC7D,UAAM,yBAAyB,KAAK,kBAAkB,SAAS,QAAQ;AACvE,UAAM,wBAAwB,KAAK,iBAAiB,SAAS,QAAQ;AAErE,UAAM,cAAc,kBAAkB,eAAc;AAEpD,UAAM,mBAAmB,uBAAuB,eAAc;AAC9D,UAAM,0BAA0B,WAAW,OAAO,CAAC,EAAE,SAAS,gBAAgB;AAE9E,4BAAwB,OAAM;AAC9B,UAAM,sBAAsB,WAAW,OAAO,CAAC;AAE/C,4BAAwB,cAAc,aAAa,mBAAmB;AACtE,UAAM,yBAAyB,KAAK,kBAAkB,SAAS,QAAQ;AACvE,YAAQ,0BAA0B,uBAAuB,qBAAqB,sBAAsB;AAAA,EACxG;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe;AACX,WAAO;AAAA,EACX;AACJ;AACA,cAAc,4CAAiG,wCAAwC;","x_google_ignoreList":[0]}