let calc_rot (s : LString.t) : int =
  let doubled = LString.append s s in
  let l = LString.length s in
  let rec find_rotation offset =
    if offset > l then
      l
    else
      let substring = LString.sub doubled offset l in
      if s = substring then
        offset
      else
        find_rotation (offset + 1)
  in
  find_rotation 1
[@@no_validate]