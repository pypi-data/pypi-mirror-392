# Visualization Configuration
# Settings for generating maps, plots, and HTML reports

# General settings
general:
  output_format: "zip"         # "zip" (report + source files), "html" (single file), "directory"
  timestamp_format: "%Y%m%d-%H%M%S"

# Dimension mapping
dimensions:
  temporal: "temporal"         # Name of temporal dimension
  spatial: "spatial"           # Name of spatial dimension
  category: null               # Name of categorical dimension for color coding (null=auto-detect)

# Map generation (using Folium)
map:
  enabled: true                # Enable map generation

  # Map style
  style:
    tiles: "OpenStreetMap"     # Map tiles: "OpenStreetMap", "CartoDB positron", "Stamen Terrain"
    zoom_start: 6              # Initial zoom level
    auto_center: true          # Auto-center on data
    width: "100%"              # Map width
    height: "600px"            # Map height

  # Animation
  animation:
    enabled: true              # Enable timeline animation
    auto_play: false           # Auto-play animation on load
    period: "P1D"              # Animation period (ISO 8601 duration)
    duration: null             # Total animation duration (null=auto)
    loop: true                 # Loop animation

  # Markers
  markers:
    cluster: true              # Use marker clustering
    cluster_radius: 80         # Cluster radius in pixels
    popup_max_width: 300       # Maximum popup width
    tooltip: true              # Show tooltips on hover

  # Colors
  colors:
    scheme: "Set3"             # Color scheme for categories
    custom_colors: null        # Custom color mapping (dict)
    default_color: "blue"      # Default marker color

# Plot generation (using matplotlib/seaborn)
plots:
  enabled: true                # Enable plot generation

  # General plot settings
  style:
    style: "seaborn-v0_8-darkgrid"  # Matplotlib style
    context: "notebook"        # Seaborn context: "paper", "notebook", "talk", "poster"
    palette: "Set2"            # Color palette
    figure_dpi: 100            # Figure DPI
    figure_size: [10, 6]       # Figure size [width, height] in inches

  # Plot types to generate
  types:
    timeline: true             # Temporal timeline
    distribution: true         # Entity distribution
    heatmap: false             # Temporal-spatial heatmap (requires both dimensions)
    network: false             # Entity network graph (future)

  # Specific plot settings
  timeline:
    plot_type: "scatter"       # "scatter", "line", "bar"
    show_intervals: true       # Show time intervals as ranges
    aggregation: null          # Aggregation period ("D", "W", "M", "Y")

  distribution:
    plot_type: "bar"           # "bar", "pie", "horizontal"
    top_n: 10                  # Show top N entities
    show_percentages: true     # Show percentages

# Statistical summary
summary:
  enabled: true                # Enable statistical summary

  # Metrics to include
  metrics:
    total_entities: true       # Total entities per dimension
    unique_entities: true      # Unique entities per dimension
    temporal_range: true       # Temporal range (earliest to latest)
    spatial_coverage: true     # Spatial coverage (bounding box)
    most_common: 5             # Number of most common entities to show

  # Success rates
  success_rates:
    normalization: true        # Temporal normalization success rate
    geocoding: true            # Geocoding success rate
    validation: true           # Validation success rate

# HTML report generation
report:
  enabled: true                # Enable HTML report generation

  # Report sections
  sections:
    overview: true             # Overview section
    statistics: true           # Statistics section
    maps: true                 # Maps section
    plots: true                # Plots section
    raw_data: false            # Include raw data tables

  # Styling
  style:
    theme: "light"             # "light", "dark"
    title: "STIndex Extraction Report"
    subtitle: null             # Auto-generated if null
    custom_css: null           # Path to custom CSS file

  # Interactive features
  interactive:
    collapsible_sections: true # Make sections collapsible
    search: false              # Add search functionality
    export_buttons: true       # Add export buttons (CSV, JSON)

# Export options
export:
  # Data export formats
  formats:
    json: true                 # Export as JSON
    csv: true                  # Export as CSV
    geojson: true              # Export spatial data as GeoJSON

  # Export locations (relative to report)
  paths:
    json: "data/extraction_results.json"
    csv: "data/extraction_results.csv"
    geojson: "data/spatial_entities.geojson"

# Error handling
error_handling:
  skip_on_missing_dimension: true  # Skip if dimension not found
  log_warnings: true           # Log visualization warnings
  fallback_to_text: true       # Fallback to text if visualization fails
