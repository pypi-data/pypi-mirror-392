# STIndex Context-Aware Evaluation Configuration
# This config is used for the context-aware evaluation system

# Dataset Configuration
dataset:
  # Path to evaluation dataset
  # Options:
  #   - context_aware_eval.json: Original 100 entries (20 documents)
  #   - context_aware_eval_extended.json: Extended 500 entries (100 documents)
  path: "eval_data/doc_500.json"

  # Sample limit (null = process all)
  # Set to a number to limit chunks for testing (e.g., 50)
  sample_limit: null

# LLM Configuration
llm:
  # LLM Provider Selection
  # Options: hf, openai, anthropic
  # Detailed settings are loaded from:
  #   - hf: cfg/extraction/inference/hf.yml
  #   - openai: cfg/extraction/inference/openai.yml
  #   - anthropic: cfg/extraction/inference/anthropic.yml
  llm_provider: openai

# Context-Aware Extraction Configuration
context_aware:
  # Enable context-aware extraction (maintains memory across chunks)
  enabled: true

  # Maximum number of prior references to keep in memory (sliding window)
  max_memory_refs: 10

  # Disable OSM nearby locations for evaluation (to avoid rate limits)
  enable_nearby_locations: false

  # Nearby locations radius in kilometers
  nearby_radius_km: 100

  # Context types to track
  track_temporal_refs: true     # Track prior temporal extractions
  track_spatial_refs: true      # Track prior spatial extractions
  track_event_refs: true        # Track prior event extractions

# Spatial Post-Processing Configuration
spatial:
  # Disable OpenStreetMap context provider for evaluation (to avoid rate limits)
  # This feature makes API calls to Overpass API which has strict rate limits
  # When enabled with multi-threading, it can cause 429 errors
  enable_osm_context: false
  osm_radius_km: 100
  osm_max_results: 10

# Temporal Post-Processing Configuration
temporal:
  # Enable relative temporal resolution (e.g., "Monday" â†’ "2025-10-27")
  enable_relative_resolution: true
  timezone: "UTC"

# Categorical Post-Processing Configuration
categorical:
  # Enable categorical validation against predefined allowed values
  enable_validation: true
  strict_mode: false
  allow_fuzzy_match: true
  fuzzy_threshold: 0.8

# Geocoding Configuration
geocoding:
  geocoder: nominatim
  user_agent: "stindex-evaluation/1.0"
  rate_limit_period: 1.0
