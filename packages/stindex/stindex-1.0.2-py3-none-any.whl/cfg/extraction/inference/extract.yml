# STIndex Extraction Configuration
# Main configuration file that switches between different LLM providers

# LLM Configuration
llm:
  # LLM Provider Selection
  # Options: hf, openai, anthropic
  llm_provider: openai

# Extraction Configuration
extraction:
  # Enable caching
  enable_cache: true

  # Auto-save results to data/output/yyyy-mm-dd/hh-mm-ss.json
  auto_save: true

  # Minimum confidence threshold (0.0-1.0)
  min_confidence: 0.5

  # Optional: Reference date for temporal resolution (ISO 8601 format)
  reference_date: ""

# Context-Aware Extraction Configuration
context_aware:
  # Enable context-aware extraction (maintains memory across chunks)
  enabled: true

  # Maximum number of prior references to keep in memory (sliding window)
  max_memory_refs: 10

  # Enable OpenStreetMap nearby locations for spatial disambiguation
  # Requires internet connection and may be rate-limited
  enable_nearby_locations: true

  # Nearby locations radius in kilometers
  nearby_radius_km: 100

  # Context types to track
  track_temporal_refs: true     # Track prior temporal extractions
  track_spatial_refs: true      # Track prior spatial extractions
  track_event_refs: true        # Track prior event extractions

# Two-Pass Reflection Configuration
# Note: For detailed reflection settings, see cfg/extraction/inference/reflection.yml
reflection:
  # Enable two-pass reflection (LLM-based quality filtering)
  enabled: true

  # Load detailed reflection settings from reflection.yml
  config_file: "cfg/extraction/inference/reflection.yml"

# Spatial Post-Processing Configuration
spatial:
  # Enable OpenStreetMap context provider for nearby location information
  # Uses Overpass API to fetch nearby POIs (based on GeoLLM research: 3.3x improvement)
  enable_osm_context: false

  # OSM context radius in kilometers
  osm_radius_km: 100

  # Maximum nearby locations to retrieve
  osm_max_results: 10

# Temporal Post-Processing Configuration
temporal:
  # Enable relative temporal resolution (e.g., "Monday" â†’ "2025-10-27")
  enable_relative_resolution: true

  # Default timezone for temporal resolution
  timezone: "UTC"

# Categorical Post-Processing Configuration
categorical:
  # Enable categorical validation against predefined allowed values
  enable_validation: true

  # Strict mode: If true, reject entities with invalid categories
  # If false, keep entities but set category to "unknown" (default: false)
  strict_mode: false

  # Enable fuzzy matching for misspellings (default: true)
  allow_fuzzy_match: true

  # Minimum similarity threshold for fuzzy matching (0.0-1.0)
  fuzzy_threshold: 0.8

# Geocoding Configuration
geocoding:
  # Geocoding service: nominatim
  geocoder: nominatim

  # User agent for geocoding requests
  user_agent: "stindex-spatiotemporal-extraction/1.0"

  # Rate limit period in seconds
  rate_limit_period: 1.0
