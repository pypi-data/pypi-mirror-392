Metadata-Version: 2.4
Name: gitauth
Version: 1.0.0
Summary: A CLI tool to rewrite Git commit authors and committers
Author-email: Mubashar Dev <hello@mubashar.dev>
License: MIT
Project-URL: Homepage, https://github.com/mubashardev/gitauth
Project-URL: Documentation, https://github.com/mubashardev/gitauth#readme
Project-URL: Repository, https://github.com/mubashardev/gitauth
Project-URL: Issues, https://github.com/mubashardev/gitauth/issues
Keywords: git,author,rewrite,commit,cli,filter-repo,filter-branch
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Operating System :: OS Independent
Classifier: Topic :: Software Development :: Version Control :: Git
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: typer[all]>=0.9.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Dynamic: license-file

# GitAuth

A powerful, production-grade CLI tool to safely rewrite Git commit authors and committers across your repository history.

## Features

- ğŸ”„ **Flexible Rewriting**: Change specific authors or rewrite all commits
- ğŸ” **Author Detection**: Identify all unique authors in your repository
- ğŸ§ª **Dry Run Mode**: Preview changes before applying them
- ğŸ’¾ **Automatic Backups**: Create repository backups before rewriting
- âš¡ **Two Backends**: Uses `git filter-repo` (preferred) with `git filter-branch` fallback
- ğŸ›¡ï¸ **Safety First**: Validates repo state and provides clear warnings
- ğŸ“ **Preserves History**: Keeps commit messages, timestamps, and commit order intact
- ğŸŒ **Cross-Platform**: Works on macOS, Linux, and Windows

## Installation

### From PyPI

```bash
pip install gitauth
```

### From Source

```bash
git clone https://github.com/mubashardev/gitauth.git
cd gitauth
pip install -e .
```

### Optional: Install git-filter-repo

For best performance, install `git-filter-repo`:

```bash
# macOS
brew install git-filter-repo

# Linux (Debian/Ubuntu)
sudo apt-get install git-filter-repo

# Or via pip
pip install git-filter-repo
```

If not installed, `gitauth` will automatically fall back to `git filter-branch`.

## Usage

### Check Repository Authors

List all unique authors in your repository:

```bash
gitauth check
```

Output:
```
Found 3 unique authors:
  John Doe <john@example.com>
  Jane Smith <jane@example.com>
  Old Name <old@dev.com>
```

### Dry Run (Preview Changes)

See which commits would be changed without modifying anything:

```bash
# Preview changes for a specific email
gitauth dry-run --old-email "old@dev.com"

# Preview changes for a specific name
gitauth dry-run --old-name "Old Name"
```

### Rewrite Specific Author

Change commits from a specific author:

```bash
# By email
gitauth rewrite --old-email "old@dev.com" --new-name "New Name" --new-email "new@dev.com"

# By name
gitauth rewrite --old-name "Old Name" --new-name "New Name" --new-email "new@dev.com"

# Both (more specific)
gitauth rewrite --old-email "old@dev.com" --old-name "Old Name" --new-name "New Name" --new-email "new@dev.com"
```

### Rewrite All Commits

Change all commits to a new author:

```bash
gitauth rewrite --all --new-name "New Name" --new-email "new@dev.com"
```

### Create Backup

Manually create a backup of your repository:

```bash
gitauth backup
```

Creates: `backup-YYYYMMDD-HHMMSS.tar.gz`

### Push Changes

After rewriting, push to remote (use with caution!):

```bash
# Interactive confirmation
gitauth push

# Force push without confirmation
gitauth push --force
```

### Enable Verbose Logging

Add `--verbose` to any command for detailed output:

```bash
gitauth rewrite --old-email "old@dev.com" --new-name "New Name" --new-email "new@dev.com" --verbose
```

## âš ï¸ Important Warnings

### History Rewriting

**Rewriting Git history is a destructive operation.** Before using this tool:

1. âœ… **Always create a backup** (or work on a clone)
2. âœ… **Coordinate with your team** if working on a shared repository
3. âœ… **Understand the implications** of force-pushing
4. âœ… **Test on a branch first** before affecting main/master

### Force Pushing

After rewriting history, you'll need to force push:

```bash
git push --force-with-lease origin main
# or use: gitauth push --force
```

**Warning**: This will rewrite history on the remote. All collaborators must re-clone or reset their local repositories.

## Examples

### Example 1: Fix Personal Email

You accidentally committed with your work email and want to change it to personal:

```bash
# 1. Check current authors
gitauth check

# 2. Preview changes
gitauth dry-run --old-email "work@company.com"

# 3. Rewrite commits
gitauth rewrite --old-email "work@company.com" --new-name "Your Name" --new-email "personal@gmail.com"

# 4. Push changes
gitauth push
```

### Example 2: Unify Multiple Identities

You committed with different names/emails and want to unify them:

```bash
# Fix first identity
gitauth rewrite --old-email "old1@example.com" --new-name "Your Name" --new-email "unified@example.com"

# Fix second identity
gitauth rewrite --old-email "old2@example.com" --new-name "Your Name" --new-email "unified@example.com"

# Push once
gitauth push
```

### Example 3: Transfer Repository Ownership

Change all commits to a new author (e.g., transferring project ownership):

```bash
# Preview all commits
gitauth dry-run --all

# Rewrite all
gitauth rewrite --all --new-name "New Owner" --new-email "newowner@example.com"

# Push
gitauth push
```

## How It Works

1. **Detection**: Scans repository using `git log` to find commits matching criteria
2. **Validation**: Checks if repository is clean and valid
3. **Backup**: Optionally creates a compressed backup
4. **Rewriting**: Uses `git filter-repo` (fast) or `git filter-branch` (fallback)
5. **Preservation**: Maintains commit timestamps, messages, and tree structure
6. **Safety**: Provides dry-run mode and interactive confirmations

## Project Structure

```
gitauth/
â”œâ”€â”€ gitauth/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py              # Typer CLI interface
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ git_utils.py    # Git operations and validation
â”‚       â”œâ”€â”€ detect.py       # Author detection
â”‚       â”œâ”€â”€ backup.py       # Backup functionality
â”‚       â””â”€â”€ rewrite.py      # Rewrite logic (filter-repo/filter-branch)
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_git_utils.py
â”‚   â”œâ”€â”€ test_detect.py
â”‚   â”œâ”€â”€ test_backup.py
â”‚   â””â”€â”€ test_rewrite.py
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE
```

## Development

### Setup Development Environment

```bash
git clone https://github.com/yourusername/gitauth.git
cd gitauth
pip install -e ".[dev]"
```

### Run Tests

```bash
pytest
pytest --cov=gitauth tests/
```

### Format Code

```bash
black gitauth tests
ruff check gitauth tests
```

### Build Package

```bash
python -m build
```

### Publish to PyPI

```bash
python -m twine upload dist/*
```

## Requirements

- Python 3.8+
- Git 2.0+
- `git-filter-repo` (optional, recommended)

## License

MIT License - see [LICENSE](LICENSE) file for details.

## Contributing

Contributions are welcome! Please:

1. Fork the repository
2. Create a feature branch
3. Add tests for new functionality
4. Ensure all tests pass
5. Submit a pull request

## Changelog

### Version 1.0.0
- Initial release
- Support for `git filter-repo` and `git filter-branch`
- Dry run mode
- Automatic backups
- Author detection
- Cross-platform support

## Support

- ğŸ› [Report bugs](https://github.com/mubashardev/gitauth/issues)
- ğŸ’¡ [Request features](https://github.com/mubashardev/gitauth/issues)
- ğŸ“– [Read documentation](https://github.com/mubashardev/gitauth#readme)

## Acknowledgments

- Inspired by GitHub's [author-rewrite script](https://docs.github.com/en/github/using-git/changing-author-info)
- Powered by [git-filter-repo](https://github.com/newren/git-filter-repo)
- Built with [Typer](https://typer.tiangolo.com/)

---

**Made with â¤ï¸ by [Mubashar Dev](https://mubashar.dev)**
