import{r as c,j as e,C as d,e as x,f as u,D as R,k as A,g as o,W as v,A as b,B as i,ai as w,V as h,I as F,aj as y,a8 as K,M as j,H as Q,ak as U,a7 as X,h as q,T as Z,b as ee,c as k,d as _,a2 as L,F as se,$ as ae,E as te}from"./index-DxSNfwTo.js";import{D as ie}from"./DemoWrapper-BBh5iNb5.js";import{C as re}from"./code-XwOALPA4.js";import{C as P}from"./copy-CWl5PT-g.js";import"./arrow-right-jYSyL5Rl.js";const ne=[{id:"stats",name:"Statistical Summary",outputs:["statistics"]},{id:"distribution",name:"Distribution Analysis",outputs:["distribution"]},{id:"temporal",name:"Temporal Trends",outputs:["temporal_data"]},{id:"spatial",name:"Spatial Analysis",outputs:["spatial_stats"]},{id:"aggregation",name:"Data Aggregation",outputs:["aggregated_data"]}],le=[{id:"sunburst",name:"Sunburst Chart",requiredData:["statistics"]},{id:"map",name:"Interactive Map",requiredData:["spatial_stats"]},{id:"timeline",name:"Timeline",requiredData:["temporal_data"]},{id:"barchart",name:"Bar Chart",requiredData:["distribution"]},{id:"table",name:"Data Table",requiredData:["aggregated_data"]}],ce={taxon:"bg-green-500",plot:"bg-blue-500",shape:"bg-purple-500",custom:"bg-orange-500"};function he(){const[r,m]=c.useState([{id:"1",name:"taxon",type:"taxon",color:"green",transformations:[{id:"t1",name:"Statistical Summary",plugin:"stats",config:{},outputs:["statistics"]}],widgets:[{id:"w1",name:"Sunburst Chart",type:"sunburst",requiredData:["statistics"],config:{}}]}]),[n,g]=c.useState(r[0]),[G,f]=c.useState(!1),[N,C]=c.useState(""),[p,M]=c.useState("taxon"),[W,Y]=c.useState("transform"),[S,D]=c.useState(!1),I=()=>{if(N){const s={id:Date.now().toString(),name:N,type:p,color:p==="taxon"?"green":p==="plot"?"blue":p==="shape"?"purple":"orange",transformations:[],widgets:[]};m([...r,s]),g(s),C(""),f(!1)}},$=s=>{m(r.filter(a=>a.id!==s)),n?.id===s&&g(r[0]||null)},B=(s,a)=>{m(r.map(t=>t.id===s?{...t,transformations:[...t.transformations,{id:Date.now().toString(),name:a.name,plugin:a.id,config:{},outputs:a.outputs}]}:t))},O=(s,a)=>{m(r.map(t=>t.id===s?{...t,widgets:[...t.widgets,{id:Date.now().toString(),name:a.name,type:a.id,requiredData:a.requiredData,config:{}}]}:t))},V=(s,a)=>{m(r.map(t=>t.id===s?{...t,transformations:t.transformations.filter(l=>l.id!==a)}:t))},H=(s,a)=>{m(r.map(t=>t.id===s?{...t,widgets:t.widgets.filter(l=>l.id!==a)}:t))},E=()=>{const s={};return r.forEach(a=>{a.transformations.length>0&&(s[a.name]={widget_data:a.transformations.map(t=>({name:t.name.toLowerCase().replace(/\s+/g,"_"),transformer:t.plugin,config:t.config}))})}),`# Generated transform.yml
${JSON.stringify(s,null,2).replace(/["{},]/g,"").replace(/^\s{2}/gm,"")}`},T=()=>{const s=[];return r.forEach(t=>{t.widgets.length>0&&s.push({name:t.name,path:`/${t.name}`,widgets:t.widgets.map(l=>({type:l.type,data_source:`${t.name}.widget_data`,config:l.config}))})}),`# Generated export.yml
${JSON.stringify({site:{title:"Niamoto Dashboard",output_dir:"./dist"},pages:s},null,2).replace(/["{},]/g,"").replace(/^\s{2}/gm,"")}`},z=s=>{navigator.clipboard.writeText(s),D(!0),setTimeout(()=>D(!1),2e3)},J=(s,a)=>{const t=s.transformations.flatMap(l=>l.outputs);return a.requiredData.every(l=>t.includes(l))};return e.jsx(ie,{currentDemo:"entity-centric",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Interface Entity-Centric"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez vos entités et leurs pipelines de transformation de manière dynamique"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-3",children:e.jsxs(d,{className:"h-[800px]",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"Entités"]}),e.jsx(A,{children:"Gérez vos sources de données"})]}),e.jsx(o,{children:e.jsx(v,{className:"h-[450px]",children:e.jsxs("div",{className:"space-y-2",children:[r.map(s=>e.jsxs("div",{onClick:()=>g(s),className:b("p-3 rounded-lg border cursor-pointer transition-all",n?.id===s.id?"border-primary bg-primary/5":"hover:bg-muted/50"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:b("w-2 h-2 rounded-full",ce[s.type])}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx(i,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:a=>{a.stopPropagation(),$(s.id)},children:e.jsx(w,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(h,{variant:"secondary",className:"text-xs",children:[s.transformations.length," transforms"]}),e.jsxs(h,{variant:"secondary",className:"text-xs",children:[s.widgets.length," widgets"]})]})]},s.id)),G?e.jsxs("div",{className:"p-3 border rounded-lg space-y-3",children:[e.jsx(F,{placeholder:"Nom de l'entité",value:N,onChange:s=>C(s.target.value)}),e.jsxs("select",{className:"w-full p-2 border rounded",value:p,onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"taxon",children:"Taxon"}),e.jsx("option",{value:"plot",children:"Plot"}),e.jsx("option",{value:"shape",children:"Shape"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",onClick:I,children:"Ajouter"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>f(!1),children:"Annuler"})]})]}):e.jsxs(i,{variant:"outline",className:"w-full",onClick:()=>f(!0),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Nouvelle entité"]})]})})})]})}),e.jsx("div",{className:"col-span-6",children:n?e.jsxs(d,{className:"h-[800px]",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Pipeline: ",n.name]}),e.jsx(A,{children:"Configurez les transformations et widgets"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(j,{className:"flex items-center gap-2 mb-3",children:[e.jsx(Q,{className:"h-4 w-4"}),"Transformations"]}),e.jsxs("div",{className:"space-y-2",children:[n.transformations.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx(h,{children:s.plugin}),e.jsx("span",{className:"flex-1 text-sm",children:s.name}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),s.outputs.map(a=>e.jsx(h,{variant:"outline",className:"text-xs",children:a},a)),e.jsx(i,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>V(n.id,s.id),children:e.jsx(w,{className:"h-3 w-3"})})]},s.id)),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-3",children:[e.jsx(j,{className:"text-xs text-muted-foreground",children:"Ajouter une transformation:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:ne.map(s=>e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>B(n.id,s),children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),s.name]},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsxs(j,{className:"flex items-center gap-2 mb-3",children:[e.jsx(X,{className:"h-4 w-4"}),"Widgets"]}),e.jsxs("div",{className:"space-y-2",children:[n.widgets.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx(h,{variant:"secondary",children:s.type}),e.jsx("span",{className:"flex-1 text-sm",children:s.name}),s.requiredData.map(a=>e.jsxs(h,{variant:"outline",className:"text-xs",children:["← ",a]},a)),e.jsx(i,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>H(n.id,s.id),children:e.jsx(w,{className:"h-3 w-3"})})]},s.id)),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-3",children:[e.jsx(j,{className:"text-xs text-muted-foreground",children:"Ajouter un widget:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:le.map(s=>{const a=J(n,s);return e.jsxs(i,{variant:"outline",size:"sm",disabled:!a,onClick:()=>O(n.id,s),className:b(!a&&"opacity-50"),children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),s.name,!a&&e.jsx(q,{className:"h-3 w-3 ml-1 text-orange-500"})]},s.id)})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[e.jsx(q,{className:"h-3 w-3 inline mr-1"}),"Les widgets grisés nécessitent des transformations manquantes"]})]})]})]})]})})]}):e.jsx(d,{className:"h-[800px] flex items-center justify-center",children:e.jsx(o,{children:e.jsx("p",{className:"text-muted-foreground",children:"Sélectionnez ou créez une entité pour commencer"})})})}),e.jsx("div",{className:"col-span-3",children:e.jsxs(d,{className:"h-[800px]",children:[e.jsx(x,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"Configuration YAML"]})}),e.jsxs(o,{children:[e.jsxs(Z,{value:W,onValueChange:s=>Y(s),children:[e.jsxs(ee,{className:"grid w-full grid-cols-2",children:[e.jsx(k,{value:"transform",children:"transform.yml"}),e.jsx(k,{value:"export",children:"export.yml"})]}),e.jsx(_,{value:"transform",className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"h-[420px] border rounded-lg p-3",children:e.jsx("pre",{className:"text-xs font-mono",children:E()})}),e.jsx(i,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>z(E()),children:S?e.jsx(L,{className:"h-3 w-3"}):e.jsx(P,{className:"h-3 w-3"})})]})}),e.jsx(_,{value:"export",className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"h-[420px] border rounded-lg p-3",children:e.jsx("pre",{className:"text-xs font-mono",children:T()})}),e.jsx(i,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>z(T()),children:S?e.jsx(L,{className:"h-3 w-3"}):e.jsx(P,{className:"h-3 w-3"})})]})})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs(i,{className:"w-full",variant:"default",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Sauvegarder la configuration"]}),e.jsxs(i,{className:"w-full",variant:"outline",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Exporter les fichiers YAML"]}),e.jsxs(i,{className:"w-full",variant:"outline",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Prévisualiser le site"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(d,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(u,{className:"text-sm",children:"Gestion Dynamique"})}),e.jsx(o,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ajoutez, modifiez et supprimez des entités selon vos besoins. Chaque entité peut avoir ses propres transformations et widgets."})})]}),e.jsxs(d,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(u,{className:"text-sm",children:"Compatibilité Automatique"})}),e.jsx(o,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Les widgets incompatibles sont automatiquement désactivés. Le système vérifie les données requises vs disponibles."})})]}),e.jsxs(d,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(u,{className:"text-sm",children:"Génération YAML"})}),e.jsx(o,{children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Visualisez en temps réel les fichiers de configuration générés. Exportez-les directement vers votre projet."})})]})]})]})})}export{he as EntityCentricDemo};
