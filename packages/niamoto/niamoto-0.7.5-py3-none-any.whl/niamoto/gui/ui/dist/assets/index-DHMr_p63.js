import{q as W,aN as gs,r as l,j as e,aX as Ge,V as b,B as q,a7 as Ls,$ as Es,H as xe,ab as is,L as je,C as p,e as w,f as C,k as E,g as j,P as be,T as ye,b as we,c as O,d as F,a8 as ls,D as ie,aY as js,aZ as Ts,G as ee,A as ne,a_ as Is,a$ as fs,W as Ne,ac as As,a3 as Rs,h as Ms,ak as ss,N as Be,O as We,Q as Ve,R as Ue,U as Je,a as Ds,b0 as Ye,l as qs,m as Os,n as $s,o as Fs,p as Gs,M as cs,I as os,aa as zs,b1 as ds}from"./index-DxSNfwTo.js";import{G as ts,C as ke,Z as rs,F as Ze,B as Hs}from"./zap-BWt4jB4n.js";import{E as Ce}from"./external-link-DSsEMbXk.js";import{A as he}from"./arrow-right-jYSyL5Rl.js";import{F as Ns}from"./file-code-JSNlsDoc.js";import{P as Ae}from"./progress-CP3viOl4.js";import{e as vs}from"./import-CyNBPDKJ.js";import{a as Re}from"./client-DoUPr9N2.js";import{t as X}from"./index-Dj-YiGsJ.js";import{j as as,d as Oe}from"./js-yaml-yTPt38rv.js";import{Y as Bs}from"./YamlEditor-jynfrHxa.js";import{C as te,h as $e,v as Fe,W as Ws}from"./vsc-dark-plus-C90Pw1E5.js";import{A as Se,l as Vs,g as Us}from"./entities-Bsdeyy1i.js";import{C as ze}from"./code-XwOALPA4.js";import{S as _e}from"./sparkles-K0ediSEW.js";import{T as bs}from"./trending-up-B4stD-Q-.js";import{C as Ke}from"./chart-column-nKEtintF.js";import{g as Js}from"./exports-BWTFEA1B.js";import{R as Ie}from"./rocket-qCtokFz8.js";import{C as ms}from"./copy-CWl5PT-g.js";import{B as Pe}from"./book-open-CADtyscg.js";const Ys=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zs=W("brain",Ys);const Ks=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],xs=W("cloud",Ks);const Qs=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Qe=W("file-check",Qs);const Xs=[["path",{d:"M4 11V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-1",key:"1q9hii"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]],ys=W("file-input",Xs);const et=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],ws=W("github",et);const st=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],tt=W("hammer",st);const rt=[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]],at=W("hand-heart",rt);const nt=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],it=W("key",nt);const lt=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],ct=W("leaf",lt);const ot=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dt=W("mail",ot);const mt=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Cs=W("map-pin",mt);const xt=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],ut=W("mountain",xt);const pt=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],He=W("server",pt);const ht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ss=W("target",ht);const gt=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],ge=W("terminal",gt);const jt=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],ns=W("trees",jt);const ft=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Nt=W("workflow",ft),Le=gs((s,r)=>({currentSection:0,sections:["overview","pipeline","integration","community","perspectives"],configLoaded:!1,isLoadingConfig:!1,importConfig:null,transformConfig:null,exportConfig:null,importMetrics:null,metricsLoading:!1,plugins:[],pluginsLoading:!1,demoProgress:{import:0,transform:0,export:0},activeDemo:null,setCurrentSection:t=>s({currentSection:t}),loadConfiguration:async()=>{if(!(r().configLoaded||r().isLoadingConfig)){s({isLoadingConfig:!0});try{const[t,n,a]=await Promise.all([fetch("/api/config/import"),fetch("/api/config/transform"),fetch("/api/config/export")]);if(t.ok&&n.ok&&a.ok){const h=await t.json(),c=await n.json(),v=await a.json();s({importConfig:h,transformConfig:c,exportConfig:v,configLoaded:!0,isLoadingConfig:!1})}else s({importConfig:us(),transformConfig:ps(),exportConfig:hs(),configLoaded:!0,isLoadingConfig:!1})}catch(t){console.error("Failed to load configuration:",t),s({importConfig:us(),transformConfig:ps(),exportConfig:hs(),configLoaded:!0,isLoadingConfig:!1})}}},loadMetrics:async()=>{if(!r().metricsLoading){s({metricsLoading:!0});try{const t=await fetch("/api/data/tables");if(!t.ok)throw new Error("Failed to fetch tables");const n=await t.json(),a=new Map(n.map(m=>[m.name,m])),h=[{key:"taxon_ref",candidates:["taxon_ref","taxonomy_ref","taxon","taxonomy"]},{key:"occurrences",candidates:["occurrences","occurrence","observations","observation"]},{key:"plot_ref",candidates:["plot_ref","plots_ref","plot","plots"]},{key:"shape_ref",candidates:["shape_ref","shapes_ref","shape","shapes"]}],c=[];for(const{key:m,candidates:y}of h){const x=y.find(o=>a.has(o));x?c.push(fetch(`/api/database/tables/${x}/stats`).then(o=>o.ok?o.json():null).then(o=>({key:m,data:o})).catch(()=>({key:m,data:null}))):c.push(Promise.resolve({key:m,data:null}))}const v=await Promise.all(c),i=new Map(v.map(m=>[m.key,m.data])),f={taxon_ref:i.get("taxon_ref")?.row_count||0,occurrences:i.get("occurrences")?.row_count||0,plot_ref:i.get("plot_ref")?.row_count||0,shape_ref:i.get("shape_ref")?.row_count||0,total_records:(i.get("taxon_ref")?.row_count||0)+(i.get("occurrences")?.row_count||0)+(i.get("plot_ref")?.row_count||0),unique_species:i.get("taxon_ref")?.unique_counts?.full_name||0,unique_locations:i.get("plot_ref")?.row_count||0};s({importMetrics:f,metricsLoading:!1})}catch(t){console.error("Failed to load metrics:",t),s({importMetrics:{taxon_ref:0,occurrences:0,plots:0,shapes:0,total_records:0,unique_species:0,unique_locations:0},metricsLoading:!1})}}},loadPlugins:async()=>{if(!r().pluginsLoading){s({pluginsLoading:!0});try{const t=await fetch("/api/plugins/");if(t.ok){const n=await t.json();s({plugins:n,pluginsLoading:!1})}else s({plugins:[],pluginsLoading:!1})}catch(t){console.error("Failed to load plugins:",t),s({plugins:[],pluginsLoading:!1})}}},setDemoProgress:(t,n)=>{s(a=>({demoProgress:{...a.demoProgress,[t]:n}}))},setActiveDemo:t=>s({activeDemo:t}),resetState:()=>s({currentSection:0,demoProgress:{import:0,transform:0,export:0},activeDemo:null})}));function us(){return{taxonomy:{path:"imports/occurrences.csv",hierarchy:{levels:[{name:"family",column:"family"},{name:"genus",column:"genus"},{name:"species",column:"species"},{name:"infra",column:"infra"}]}},occurrences:{type:"csv",path:"imports/occurrences.csv",identifier:"id_taxonref",location_field:"geo_pt"},plots:{type:"csv",path:"imports/plots.csv",identifier:"id_plot"},shapes:[{type:"Provinces",path:"imports/shapes/provinces.gpkg",name_field:"nom"},{type:"Communes",path:"imports/shapes/communes.gpkg",name_field:"nom"}]}}function ps(){return[{group_by:"taxon",sources:[{name:"occurrences",data:"occurrences",grouping:"taxon_ref"}],widgets_data:{general_info:{plugin:"field_aggregator",params:{}},distribution_map:{plugin:"geospatial_extractor",params:{}}}}]}function hs(){return{exports:[{name:"web_pages",enabled:!0,exporter:"html_page_exporter",params:{output_dir:"exports/web",site:{title:"Niamoto Demo",lang:"fr"}}}]}}function vt({configLoaded:s}){const[r,t]=l.useState(!1);return l.useEffect(()=>{t(!0)},[]),e.jsxs("div",{className:"w-full flex flex-col items-center justify-center text-center space-y-8 animate-fadeIn",children:[e.jsx("div",{className:`transition-all duration-1000 ${r?"scale-100 opacity-100":"scale-50 opacity-0"}`,children:e.jsx("img",{src:Ge,alt:"Niamoto",className:"w-49 h-49 mx-auto animate-pulse"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-5xl md:text-7xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Niamoto"}),e.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-3xl",children:"Plateforme de valorisation des donn√©es √©cologiques pour la recherche"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 max-w-2xl",children:[e.jsxs(b,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(ts,{className:"w-3 h-3"}),"Open Source"]}),e.jsxs(b,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),"Site Statique"]}),e.jsx(b,{variant:"secondary",children:"Pipeline Reproductible"}),e.jsx(b,{variant:"secondary",children:"API REST"})]}),e.jsx("div",{className:"text-lg text-muted-foreground italic max-w-2xl",children:'"Transformez vos donn√©es CSV en site web avec analyses statistiques, cartes interactives et visualisations dynamiques"'}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs(q,{size:"lg",variant:"outline",onClick:()=>window.open("https://github.com/niamoto/niamoto","_blank"),children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),"Voir sur GitHub"]})}),s&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(b,{variant:"outline",className:"bg-green-500/10",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Configuration charg√©e"]})}),e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:e.jsx("svg",{className:"w-6 h-6 text-muted-foreground",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]})}const bt={loader:{title:"Loaders",icon:is,color:"text-blue-500",bgColor:"bg-blue-500/10",description:"Chargement et validation des donn√©es"},transformer:{title:"Transformers",icon:xe,color:"text-green-500",bgColor:"bg-green-500/10",description:"Transformation et analyse des donn√©es"},exporter:{title:"Exporters",icon:Es,color:"text-purple-500",bgColor:"bg-purple-500/10",description:"G√©n√©ration de sites et exports"},widget:{title:"Widgets",icon:Ls,color:"text-orange-500",bgColor:"bg-orange-500/10",description:"Composants de visualisation"}};function yt({}){const[s,r]=l.useState("loader"),[t,n]=l.useState(null),[a,h]=l.useState(null),{plugins:c,pluginsLoading:v,loadPlugins:i}=Le();l.useEffect(()=>{(!c||c.length===0)&&i()},[]);const f=l.useMemo(()=>{if(!c)return{};const x={loader:[],transformer:[],exporter:[],widget:[]};return c.forEach(o=>{x[o.type]&&x[o.type].push({...o,category:o.category||"general"})}),x},[c]),m=x=>{const o={};x.forEach(M=>{const z=M.category||"general";o[z]||(o[z]=[]),o[z].push(M)});const g=Object.keys(o).sort((M,z)=>M==="general"?-1:z==="general"?1:M.localeCompare(z)),A={};return g.forEach(M=>{A[M]=o[M]}),A},y=l.useMemo(()=>{const x={};return Object.entries(bt).forEach(([o,g])=>{x[o]={...g,plugins:f[o]||[],count:f[o]?.length||0}}),x},[f]);return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Plugin System"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Syst√®me modulaire extensible permettant d'ajouter facilement de nouvelles fonctionnalit√©s"})]}),e.jsxs("div",{className:"relative",children:[v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 z-10",children:e.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Object.entries(y).map(([x,o],g)=>{const A=o.icon;return e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:`cursor-pointer transition-all hover:scale-105 ${s===x?"ring-2 ring-primary":""}`,onClick:()=>r(x),children:e.jsxs(w,{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto rounded-full ${o.bgColor} flex items-center justify-center`,children:e.jsx(A,{className:`w-8 h-8 ${o.color}`})}),e.jsx(C,{className:"text-lg",children:o.title}),e.jsx(E,{className:"text-xs",children:v?e.jsx("span",{className:"animate-pulse",children:"Chargement..."}):e.jsxs("span",{className:"font-semibold",children:[o.count," plugins"]})})]})}),g<Object.keys(y).length-1&&e.jsx(he,{className:"absolute -right-6 top-1/2 transform -translate-y-1/2 text-muted-foreground hidden md:block"})]},x)})})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{className:"flex items-center gap-2",children:(()=>{const x=y[s].icon;return e.jsxs(e.Fragment,{children:[e.jsx(x,{className:`w-5 h-5 ${y[s].color}`}),y[s].title]})})()}),e.jsx(E,{children:y[s].description})]}),e.jsx(j,{children:v?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}):y[s].plugins.length>0?e.jsx("div",{className:"space-y-6",children:Object.entries(m(y[s].plugins)).map(([x,o])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold uppercase text-muted-foreground",children:x==="general"?"G√©n√©ral":x}),e.jsx("div",{className:"h-px flex-1 bg-border"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[o.length," plugin",o.length>1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o.map(g=>e.jsx("div",{className:`p-4 rounded-lg border bg-card hover:bg-accent transition-colors cursor-pointer ${a?.id===g.id?"ring-2 ring-primary bg-accent":""}`,onMouseEnter:()=>n(g.name),onMouseLeave:()=>n(null),onClick:()=>h(g),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:g.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.description})]}),e.jsx(be,{className:`w-4 h-4 ml-2 flex-shrink-0 ${t===g.name?y[s].color:"text-muted-foreground"}`})]})},g.id||g.name))})]},x))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucun plugin de ce type disponible"})})]}),e.jsxs(ye,{defaultValue:"usage",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-2",children:[e.jsx(O,{value:"usage",children:"Utilisation"}),e.jsx(O,{value:"creation",children:"Cr√©er un plugin"})]}),e.jsx(F,{value:"usage",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{className:"text-lg",children:a?`Configuration pour ${a.name}`:"Configuration YAML simple"})}),e.jsx(j,{children:e.jsx("pre",{className:"p-4 bg-muted rounded-lg overflow-x-auto",children:e.jsx("code",{children:a?`# ${a.type==="transformer"?"transform":a.type==="loader"?"import":"export"}.yml
${a.type==="transformer"?"widgets_data":a.type==="loader"?"sources":"exports"}:
  ${a.name.toLowerCase().replace(/\s+/g,"_")}:
    plugin: ${a.id}
    ${a.example_config?`params:
${Object.entries(a.example_config).map(([x,o])=>`      ${x}: ${JSON.stringify(o)}`).join(`
`)}`:a.parameters_schema&&a.parameters_schema.length>0?`params:
${a.parameters_schema.slice(0,3).map(x=>`      ${x.name}: ${x.default!==void 0?JSON.stringify(x.default):x.type==="string"?'"value"':x.type==="number"?"0":x.type==="boolean"?"true":"{}"}  # ${x.description||""}`).join(`
`)}`:"params: {}"}
${a.compatible_inputs&&a.compatible_inputs.length>0?`    # Compatible avec: ${a.compatible_inputs.join(", ")}`:""}`:`# S√©lectionnez un plugin pour voir sa configuration
# transform.yml
widgets_data:
  general_info:
    plugin: field_aggregator
    params:
      fields:
        - source: taxon_ref
          field: full_name
          target: name`})})})]})}),e.jsx(F,{value:"creation",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{className:"text-lg",children:"Cr√©er votre propre plugin"})}),e.jsx(j,{children:e.jsx("pre",{className:"p-4 bg-muted rounded-lg overflow-x-auto",children:e.jsx("code",{children:`from niamoto.core.plugins import TransformerPlugin, register

@register("mon_plugin", PluginType.TRANSFORMER)
class MonPlugin(TransformerPlugin):
    def transform(self, data, config):
        # Votre logique ici
        return result`})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{children:e.jsxs(j,{className:"pt-6",children:[e.jsx(ls,{className:"w-8 h-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:"Modulaire"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c?`${c.length} plugins disponibles`:"Syst√®me extensible"})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6",children:[e.jsx(ie,{className:"w-8 h-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:"R√©utilisable"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Partagez vos plugins avec la communaut√©"})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6",children:[e.jsx(Ns,{className:"w-8 h-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:"Simple"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configuration YAML, pas besoin de coder"})]})})]})]})}const wt=[{category:"CLI & Core",icon:ge,color:"text-blue-500",bgColor:"bg-blue-500/10",items:[{name:"Click",description:"Interface ligne de commande √©l√©gante",version:"8.1+"},{name:"Rich",description:"Affichage console moderne",version:"10.0+"},{name:"Pydantic",description:"Validation de donn√©es",version:"2.0+"}]},{category:"Base de donn√©es",icon:ie,color:"text-green-500",bgColor:"bg-green-500/10",items:[{name:"SQLAlchemy",description:"ORM Python puissant",version:"2.0+"},{name:"GeoAlchemy2",description:"Extensions g√©ospatiales",version:"0.14+"},{name:"SQLite",description:"Base de donn√©es embarqu√©e",version:"3.40+"}]},{category:"G√©ospatial",icon:ls,color:"text-purple-500",bgColor:"bg-purple-500/10",items:[{name:"GeoPandas",description:"Donn√©es g√©ographiques",version:"0.14+"},{name:"Shapely",description:"Manipulation g√©om√©tries",version:"2.0+"},{name:"Fiona",description:"I/O formats g√©ospatiaux",version:"1.9+"}]},{category:"Configuration",icon:js,color:"text-orange-500",bgColor:"bg-orange-500/10",items:[{name:"PyYAML",description:"Parsing YAML",version:"6.0+"},{name:"Jinja2",description:"Moteur de templates",version:"3.1+"},{name:"Markdown",description:"Conversion Markdown",version:"3.5+"}]}],Ct=[{category:"Serveur API",icon:He,color:"text-indigo-500",bgColor:"bg-indigo-500/10",items:[{name:"FastAPI",description:"Framework web moderne",version:"0.115+"},{name:"Uvicorn",description:"Serveur ASGI haute performance",version:"0.32+"},{name:"Server-Sent Events",description:"Streaming temps r√©el",version:"native"}]},{category:"API",icon:Ts,color:"text-pink-500",bgColor:"bg-pink-500/10",items:[{name:"57 endpoints REST",description:"10 modules API sp√©cialis√©s"},{name:"OpenAPI/Swagger",description:"Documentation interactive"},{name:"CORS",description:"Support multi-origine"}]}],St=[{category:"Framework UI",icon:ee,color:"text-cyan-500",bgColor:"bg-cyan-500/10",items:[{name:"React",description:"Library UI moderne",version:"19"},{name:"TypeScript",description:"JavaScript typ√©",version:"5.6+"},{name:"Vite",description:"Build tool ultra-rapide",version:"7.0+"}]},{category:"Styling & UI",icon:be,color:"text-teal-500",bgColor:"bg-teal-500/10",items:[{name:"Tailwind CSS",description:"Framework CSS utility-first",version:"4.0"},{name:"shadcn/ui",description:"Composants r√©utilisables",version:"latest"},{name:"Lucide Icons",description:"Ic√¥nes modernes",version:"latest"}]},{category:"State & Outils",icon:js,color:"text-amber-500",bgColor:"bg-amber-500/10",items:[{name:"Zustand",description:"State management simple",version:"5.0+"},{name:"React Hook Form",description:"Gestion de formulaires",version:"7.54+"},{name:"Monaco Editor",description:"√âditeur de code",version:"0.52+"},{name:"Plotly.js",description:"Visualisations interactives",version:"2.35+"}]}];function kt(){return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8 py-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Stack Technique"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Technologies modernes pour une exp√©rience utilisateur optimale"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ge,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Python Core & CLI"}),e.jsx(b,{variant:"outline",children:"Python 3.10+"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:wt.map(s=>{const r=s.icon;return e.jsxs(p,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(w,{children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${s.bgColor} flex items-center justify-center mb-2`,children:e.jsx(r,{className:`w-6 h-6 ${s.color}`})}),e.jsx(C,{className:"text-lg",children:s.category})]}),e.jsx(j,{className:"space-y-3",children:s.items.map(t=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:t.name}),t.version&&e.jsx(b,{variant:"secondary",className:"text-xs",children:t.version})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]},t.name))})]},s.category)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{className:"w-6 h-6 text-indigo-500"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Backend API (FastAPI + Uvicorn)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ct.map(s=>{const r=s.icon;return e.jsxs(p,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(w,{children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${s.bgColor} flex items-center justify-center mb-2`,children:e.jsx(r,{className:`w-6 h-6 ${s.color}`})}),e.jsx(C,{className:"text-lg",children:s.category})]}),e.jsx(j,{className:"space-y-3",children:s.items.map(t=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:t.name}),t.version&&e.jsx(b,{variant:"secondary",className:"text-xs",children:t.version})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]},t.name))})]},s.category)})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"w-6 h-6 text-cyan-500"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Interface Utilisateur (React + Vite)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:St.map(s=>{const r=s.icon;return e.jsxs(p,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(w,{children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${s.bgColor} flex items-center justify-center mb-2`,children:e.jsx(r,{className:`w-6 h-6 ${s.color}`})}),e.jsx(C,{className:"text-lg",children:s.category})]}),e.jsx(j,{className:"space-y-3",children:s.items.map(t=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:t.name}),t.version&&e.jsx(b,{variant:"secondary",className:"text-xs",children:t.version})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description})]},t.name))})]},s.category)})})]}),e.jsxs(p,{className:"border-primary/20 bg-primary/5",children:[e.jsxs(w,{children:[e.jsx(C,{children:"Architecture Compl√®te"}),e.jsx(E,{children:"Stack moderne full-stack Python/TypeScript"})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ge,{className:"w-8 h-8 mx-auto text-blue-500"}),e.jsx("div",{className:"font-bold",children:"CLI Python"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Click + Rich pour une exp√©rience ligne de commande moderne"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(He,{className:"w-8 h-8 mx-auto text-indigo-500"}),e.jsx("div",{className:"font-bold",children:"API REST"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"FastAPI + Uvicorn pour performance et scalabilit√©"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{className:"w-8 h-8 mx-auto text-cyan-500"}),e.jsx("div",{className:"font-bold",children:"Interface Web"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"React + TypeScript pour une UI r√©active"})]})]})})]})]})}function _t(){return e.jsxs("div",{className:"space-y-16",children:[e.jsx(vt,{}),e.jsx("div",{className:"border-t border-border/50"}),e.jsx(yt,{}),e.jsx("div",{className:"border-t border-border/50"}),e.jsx(kt,{})]})}const Me=gs(s=>({status:"idle",currentStep:null,activeStepIndex:0,importResult:null,transformResult:null,exportResult:null,progress:0,logs:[],setStatus:r=>s({status:r}),setCurrentStep:r=>s({currentStep:r}),setActiveStepIndex:r=>s({activeStepIndex:r}),setImportResult:r=>s({importResult:r}),setTransformResult:r=>s({transformResult:r}),setExportResult:r=>s({exportResult:r}),setProgress:r=>s(t=>({progress:typeof r=="function"?r(t.progress):r})),addLog:(r,t="info")=>s(n=>({logs:[...n.logs,{time:new Date().toLocaleTimeString("fr-FR"),message:r,type:t}]})),clearLogs:()=>s({logs:[]}),reset:()=>s({status:"idle",currentStep:null,activeStepIndex:0,importResult:null,transformResult:null,exportResult:null,progress:0,logs:[]}),resetStep:r=>s(()=>{const t={};return r==="import"?t.importResult=null:r==="transform"?t.transformResult=null:r==="export"&&(t.exportResult=null),t})}));async function Pt(s={}){return(await Re.post("/transform/execute",s)).data}async function Lt(s){return(await Re.get(`/transform/status/${s}`)).data}async function ks(s={},r){const{job_id:t}=await Pt(s);return new Promise((n,a)=>{const h=setInterval(async()=>{try{const c=await Lt(t);r&&r(c.progress,c.message),c.status==="completed"?(clearInterval(h),n(c)):c.status==="failed"&&(clearInterval(h),a(new Error(c.error||"Transform failed")))}catch(c){clearInterval(h),a(c)}},1e3)})}async function Et(s={}){return(await Re.post("/export/execute",s)).data}async function Tt(s){return(await Re.get(`/export/status/${s}`)).data}async function _s(s={},r){const{job_id:t}=await Et(s);return new Promise((n,a)=>{const h=setInterval(async()=>{try{const c=await Tt(t);r&&r(c.progress,c.message),c.status==="completed"?(clearInterval(h),n(c)):c.status==="failed"&&(clearInterval(h),a(new Error(c.error||"Export failed")))}catch(c){clearInterval(h),a(c)}},1e3)})}function Xe(s){if(s<60)return`${s}s`;const r=Math.floor(s/60),t=s%60;return`${r}m ${t}s`}function It({type:s,result:r,duration:t}){if(!r)return null;if(s==="import"){const n=r.metrics||{},a=n.taxonomy||0,h=n.occurrences||0,c=n.plots||0,v=n.shapes||0,i=a+h+c+v;return e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsxs("span",{children:["Dur√©e: ",t?Xe(t):"‚Äî"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-medium",children:[e.jsx(ie,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Donn√©es import√©es"})]}),e.jsxs("div",{className:"ml-6 space-y-1 text-muted-foreground",children:[a>0&&e.jsxs("div",{children:["‚Ä¢ Taxonomie: ",a.toLocaleString()," taxons"]}),h>0&&e.jsxs("div",{children:["‚Ä¢ Occurrences: ",h.toLocaleString()]}),c>0&&e.jsxs("div",{children:["‚Ä¢ Parcelles: ",c.toLocaleString()]}),v>0&&e.jsxs("div",{children:["‚Ä¢ Formes: ",v.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-500 font-medium",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Succ√®s: ",i.toLocaleString()," enregistrements import√©s"]})]})]})}if(s==="transform"){const n={};let a=0;const h=r.transformations||r;Object.entries(h).forEach(([i,f])=>{if(f&&typeof f=="object"){const m=f.group||i,y=f.generated||0;n[m]||(n[m]={items:0,widgets:0}),n[m].items+=1,n[m].widgets+=y,a+=y}});const c=Object.values(n).reduce((i,f)=>i+f.items,0),v=t&&c>0?(c/t).toFixed(1):"0";return e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsxs("span",{children:["Dur√©e: ",t?Xe(t):"‚Äî"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-medium",children:[e.jsx(ie,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Groupes trait√©s"})]}),e.jsx("div",{className:"ml-6 space-y-1 text-muted-foreground",children:Object.entries(n).map(([i,f])=>e.jsxs("div",{children:["‚Ä¢ ",i.charAt(0).toUpperCase()+i.slice(1),": ",f.items," √©l√©ments ‚Üí ",f.widgets," widgets g√©n√©r√©s"]},i))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(Qe,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:["Total: ",a.toLocaleString()," widgets g√©n√©r√©s"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground ml-6",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Performance: ",v," √©l√©ments/seconde"]})]})]})]})}if(s==="export"){const n={};let a=0;r.exports&&Object.entries(r.exports).forEach(([v,i])=>{if(i){let f=0;i.data&&typeof i.data=="object"&&(f=i.data.files_generated||0),f===0&&i.data&&typeof i.data=="object"&&Object.values(i.data).forEach(m=>{Array.isArray(m)?f+=m.length:m&&typeof m=="object"&&m.files&&(f+=m.files.length||0)}),f>0&&(n[v]=f,a+=f)}});const h=r.metrics;h&&Object.keys(n).length===0&&(a=h.generated_pages||0);const c=r.metrics?.completed_exports&&r.metrics?.total_exports?(r.metrics.completed_exports/r.metrics.total_exports*100).toFixed(0):"100";return e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsxs("span",{children:["Dur√©e: ",t?Xe(t):"‚Äî"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 font-medium",children:[e.jsx(Ss,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{children:"Cibles"})]}),e.jsxs("div",{className:"ml-6 space-y-1 text-muted-foreground",children:[Object.entries(n).map(([v,i])=>e.jsxs("div",{children:["‚Ä¢ ",v,": ",i.toLocaleString()," fichiers g√©n√©r√©s"]},v)),Object.keys(n).length===0&&a>0&&e.jsxs("div",{children:["‚Ä¢ Export: ",a.toLocaleString()," fichiers g√©n√©r√©s"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(Qe,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:["Total: ",a.toLocaleString()," fichiers g√©n√©r√©s"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-green-500 ml-6",children:[e.jsx(rs,{className:"h-4 w-4"}),e.jsxs("span",{children:["Taux de r√©ussite: ",c,"% cibles compl√©t√©es"]})]})]})]})}return null}const At=(s,r,t)=>{const n=a=>{if(!a)return"Configuration non disponible";try{const h=a.config||a;return as.dump(h,{indent:2,lineWidth:-1})}catch{return JSON.stringify(a,null,2)}};return[{id:"import",title:"Import",icon:ys,color:"text-blue-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",description:"Chargement des donn√©es",yamlSnippet:n(s)},{id:"transform",title:"Transform",icon:xe,color:"text-green-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",description:"Analyse et calculs",yamlSnippet:n(r)},{id:"export",title:"Export",icon:ee,color:"text-purple-500",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",description:"G√©n√©ration du site",yamlSnippet:n(t)}]},Te=33,es=33,Rt=34;function Mt({configName:s,disabled:r}){const{config:t,loading:n,updateConfig:a}=As(s),h=async v=>{try{const i=as.load(v),f=await a({content:i,backup:!0});X.success("Configuration sauvegard√©e",{description:f.backup_path?`Backup cr√©√©: ${f.backup_path.split("/").pop()}`:"Configuration sauvegard√©e avec succ√®s"})}catch(i){throw i instanceof Error&&X.error("Erreur lors de la sauvegarde",{description:i.message}),i}};if(n)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(je,{className:"w-6 h-6 animate-spin text-muted-foreground"})});const c=t?as.dump(t,{indent:2,lineWidth:-1}):"";return e.jsxs("div",{className:ne(r&&"opacity-50 pointer-events-none"),children:[e.jsx(Bs,{value:c,onSave:h,configName:s,showToolbar:!0,height:"500px",readOnly:r}),r&&e.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-2 text-center",children:"‚ö†Ô∏è L'√©dition est d√©sactiv√©e pendant l'ex√©cution du pipeline"})]})}function Dt(){const s=l.useRef(null),{status:r,setStatus:t,activeStepIndex:n,setActiveStepIndex:a,progress:h,setProgress:c,logs:v,addLog:i,clearLogs:f,importResult:m,transformResult:y,exportResult:x,setImportResult:o,setTransformResult:g,setExportResult:A,setCurrentStep:M,reset:z}=Me(),{metricsLoading:le,loadMetrics:B,importConfig:Z,transformConfig:me,exportConfig:V,loadConfiguration:U}=Le(),D=r==="running";l.useEffect(()=>{(async()=>{await B(),await U()})()},[B,U]);const J=At(Z,me,V),H=u=>u==="import"?m:u==="transform"?y:u==="export"?x:null,K=m||y||x,k=async()=>{await P()},P=async()=>{t("running"),c(0),a(0),f(),s.current=null,i("üöÄ D√©marrage du pipeline Niamoto","info");try{i("üìÇ Ex√©cution de l'import...","info"),a(0),M("import");const u=Date.now(),I=await vs({file_name:"config/import.yml",field_mappings:{}},500,3e5,L=>{c(oe=>Math.max(oe,Math.round(L/100*Te)))},void 0,L=>{L?.message&&L.message!==s.current&&(s.current=L.message,i(L.message,"info"))}),S=(Date.now()-u)/1e3;i("‚úÖ Import termin√©","success"),c(L=>Math.max(L,Te)),s.current=null,o({status:"completed",result:I.result,duration:S}),await B(),a(1),M("transform"),i("üîÑ Ex√©cution des transformations...","info");const _=Date.now(),R=await ks({config_path:"config/transform.yml"},(L,oe)=>{c(de=>Math.max(de,Te+Math.round(L/100*es))),oe&&i(oe,"info")}),$=(Date.now()-_)/1e3;i("‚úÖ Transformations termin√©es","success"),c(L=>Math.max(L,Te+es)),g({status:"completed",result:R.result,duration:$}),a(2),M("export"),i("üåê G√©n√©ration du site statique...","info");const pe=Date.now(),re=await _s({config_path:"config/export.yml"},(L,oe)=>{c(de=>Math.max(de,Te+es+Math.round(L/100*Rt))),oe&&i(oe,"info")}),ce=(Date.now()-pe)/1e3;i("‚úÖ Export termin√© avec succ√®s","success"),c(100),A({status:"completed",result:re.result,duration:ce}),i("‚ú® Pipeline termin√© avec succ√®s!","success"),t("completed"),M(null),X.success("Pipeline ex√©cut√© avec succ√®s!")}catch(u){i(`‚ùå Erreur: ${u instanceof Error?u.message:"Erreur inconnue"}`,"error"),t("error"),M(null),X.error("Erreur lors de l'ex√©cution du pipeline")}finally{}},se=()=>{z(),s.current=null,i("üîÑ Pipeline r√©initialis√©","info")};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Pipeline de traitement"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Processus complet de transformation des donn√©es en site web"})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 relative",children:J.map((u,I)=>{const S=u.icon,_=n===I,R=D?n>I:h>(I+1)*33;return e.jsxs("div",{className:"relative group",children:[I<J.length-1&&e.jsxs("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-8 hidden lg:block z-0",children:[e.jsx("div",{className:"relative h-[2px] bg-border",children:R&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-transparent"})}),e.jsx(he,{className:ne("absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4",R?"text-green-500":"text-muted-foreground")})]}),e.jsxs(p,{className:ne("transition-all duration-300 cursor-pointer relative overflow-hidden",_&&"ring-2 shadow-lg",R&&"bg-muted/30",u.id==="import"&&_&&"ring-blue-500/50",u.id==="transform"&&_&&"ring-green-500/50",u.id==="export"&&_&&"ring-purple-500/50",!D&&"hover:ring-1 hover:ring-primary/30"),onClick:()=>!D&&a(I),children:[e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:ne("w-14 h-14 rounded-full flex items-center justify-center transition-all",u.bgColor,_&&"scale-110"),children:R?e.jsx(te,{className:`w-7 h-7 ${u.color}`}):e.jsx(S,{className:ne("w-7 h-7",u.color,_&&"animate-pulse")})}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs(b,{variant:_?"default":"outline",children:["√âtape ",I+1]}),_&&D&&e.jsxs(b,{variant:"outline",className:"bg-green-500/10",children:[e.jsx(Se,{className:"w-3 h-3 mr-1 animate-pulse"}),"En cours"]})]})]}),e.jsx(C,{className:"text-xl",children:u.title}),e.jsx(E,{children:u.description})]}),e.jsx(j,{className:"space-y-4",children:H(u.id)&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(It,{type:u.id,result:H(u.id)?.result,duration:H(u.id)?.duration})})})]})]},u.id)})})}),e.jsxs(ye,{defaultValue:"control",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-3",children:[e.jsx(O,{value:"control",children:"Contr√¥le"}),e.jsx(O,{value:"logs",children:"Timeline"}),e.jsx(O,{value:"config",children:"Configuration"})]}),e.jsx(F,{value:"control",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Contr√¥le du pipeline"}),e.jsx(E,{children:"G√©rez l'ex√©cution du pipeline de traitement des donn√©es"})]}),e.jsxs(j,{className:"space-y-4",children:[D&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4 animate-spin"}),"Progression globale"]}),e.jsxs("span",{className:"font-bold",children:[h,"%"]})]}),e.jsx(Ae,{value:h,className:"h-3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:le?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Chargement des m√©triques..."})]}):D?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 text-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Pipeline en cours..."})]}):h===100&&K?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Pipeline termin√© - Cliquez sur une √©tape pour voir les r√©sultats"})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Pr√™t √† d√©marrer"})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsx(q,{size:"sm",variant:D?"outline":"default",onClick:D?se:k,disabled:le,children:D?e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"R√©initialiser"]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Lancer le pipeline"]})})})]})]})]})}),e.jsx(F,{value:"logs",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"Timeline d'ex√©cution"]})}),e.jsx(j,{children:e.jsx(Ne,{className:"h-[300px] w-full rounded-md border p-4 bg-black/5 dark:bg-white/5",children:v.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun log disponible. Lancez le pipeline pour voir l'activit√©."}):e.jsx("div",{className:"space-y-2 font-mono text-xs",children:v.map((u,I)=>e.jsxs("div",{className:ne("flex items-start gap-3 animate-fadeIn",u.type==="success"&&"text-green-600 dark:text-green-400",u.type==="warning"&&"text-yellow-600 dark:text-yellow-400"),children:[e.jsx("span",{className:"text-muted-foreground opacity-60",children:u.time}),e.jsx("span",{className:"flex-1",children:u.message})]},I))})})})]})}),e.jsx(F,{value:"config",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"√âditeur de Configuration"]}),e.jsx(E,{children:"Modifiez les configurations avant de lancer le pipeline"})]}),e.jsx(j,{children:e.jsxs(ye,{value:J[n].id,onValueChange:u=>{const I=J.findIndex(S=>S.id===u);I>=0&&a(I)},children:[e.jsx(we,{className:"grid w-full grid-cols-3 mb-4",children:J.map(u=>{const I=u.icon;return e.jsxs(O,{value:u.id,className:"gap-2",children:[e.jsx(I,{className:ne("w-4 h-4",u.color)}),u.title]},u.id)})}),J.map(u=>e.jsx(F,{value:u.id,className:"mt-0",children:e.jsx(Mt,{configName:u.id,disabled:D})},u.id))]})})]})})]})]})}function ve(s,r=2e3,t=!0){const[n,a]=l.useState(0),[h,c]=l.useState(!1),[v,i]=l.useState(!1),f=()=>{a(0),c(!0),i(!1)};return l.useEffect(()=>{if(v||!t&&!h)return;const m=Date.now();let y;const x=()=>{const o=Date.now()-m,g=Math.min(o/r,1),A=1-Math.pow(1-g,4),M=Math.floor(s*A);a(M),g<1?y=requestAnimationFrame(x):(a(s),c(!1),i(!0))};return c(!0),y=requestAnimationFrame(x),()=>{y&&cancelAnimationFrame(y)}},[s,r,t,v]),{value:n,isAnimating:h,start:f}}function qt({}){const{importConfig:s,setDemoProgress:r,importMetrics:t,metricsLoading:n,loadMetrics:a}=Le(),{importResult:h,setImportResult:c,setCurrentStep:v}=Me(),[i,f]=l.useState("overview"),[m,y]=l.useState(0),[x,o]=l.useState(!1),[g,A]=l.useState(!1),[M,z]=l.useState(""),[le,B]=l.useState([]),[Z,me]=l.useState(null),V=l.useRef(null);l.useEffect(()=>{a()},[a]),l.useEffect(()=>{if(h&&h.result?.metrics){const k={occurrences:h.result.metrics.occurrences||0,taxonomy:h.result.metrics.taxonomy||0,plots:h.result.metrics.plots||0,shapes:h.result.metrics.shapes||0,...Object.fromEntries(Object.entries(h.result.metrics).filter(([P])=>!["occurrences","taxonomy","plots","shapes"].includes(P)))};me(k),A(!0),y(100),z("Import termin√©!")}},[h]),l.useEffect(()=>{t&&!Z&&!h&&me(t)},[t,Z,h]);const U=ve(g&&Z?.occurrences||0,3e3,g),D=ve(g&&Z?.taxonomy||0,2500,g),J=ve(g&&Z?.plots||0,1500,g),H=ve(g&&Z?.shapes||0,1e3,g),K=async()=>{o(!0),v("import"),A(!1),y(0),B([]),V.current=null;const k=Date.now();try{z("Ex√©cution de l'import r√©el..."),B(["üöÄ D√©marrage de l'import r√©el..."]);const P=await vs({file_name:"config/import.yml",field_mappings:{}},500,3e5,u=>{const I=Math.max(0,Math.min(100,Math.round(u)));y(I),r("import",I)},void 0,u=>{if(typeof u?.progress=="number"){const I=Math.max(0,Math.min(100,Math.round(u.progress)));y(I),r("import",I)}u?.message&&u.message!==V.current&&(V.current=u.message,z(u.message),B(I=>[...I,u.message]))});await a();const se=(Date.now()-k)/1e3;if(c({status:"completed",result:P.result,duration:se}),P.result?.metrics){const u={occurrences:P.result.metrics.occurrences||0,taxonomy:P.result.metrics.taxonomy||0,plots:P.result.metrics.plots||0,shapes:P.result.metrics.shapes||0,...Object.fromEntries(Object.entries(P.result.metrics).filter(([I])=>!["occurrences","taxonomy","plots","shapes"].includes(I)))};me(u),setTimeout(()=>{A(!0)},100)}else console.log("ImportDemo - No metrics found in result!");B(u=>[...u,`‚úÖ Import termin√©: ${P.summary?.total_records||0} enregistrements`,"üéÜ Succ√®s!"]),y(100),z("Import termin√©!"),await a(),X.success("Import r√©el ex√©cut√© avec succ√®s!")}catch(P){B(se=>[...se,`‚ùå Erreur: ${P instanceof Error?P.message:"Erreur inconnue"}`]),X.error("Erreur lors de l'import r√©el")}finally{o(!1),v(null)}};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Import des donn√©es"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Chargement et validation des donn√©es √©cologiques depuis la configuration"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[g&&e.jsxs(b,{variant:"outline",className:"bg-green-500/10",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"La taxonomie est cr√©√©e automatiquement"]}),n&&e.jsxs(b,{variant:"outline",children:[e.jsx(je,{className:"w-3 h-3 mr-1 animate-spin"}),"Chargement des m√©triques..."]}),t&&e.jsxs(b,{variant:"outline",className:"bg-blue-500/10",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),t.total_records," enregistrements en base"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(p,{className:"relative overflow-hidden",children:e.jsxs(j,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:U.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Occurrences import√©es"}),e.jsx(Cs,{className:"w-4 h-4 mt-2 text-blue-500"}),U.isAnimating&&e.jsx(Se,{className:"absolute top-2 right-2 w-3 h-3 text-primary animate-pulse"})]})}),e.jsx(p,{className:"relative overflow-hidden",children:e.jsxs(j,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:D.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Taxa d√©tect√©s"}),e.jsx(ns,{className:"w-4 h-4 mt-2 text-green-500"}),D.isAnimating&&e.jsx(Se,{className:"absolute top-2 right-2 w-3 h-3 text-primary animate-pulse"})]})}),e.jsx(p,{className:"relative overflow-hidden",children:e.jsxs(j,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:J.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parcelles cr√©√©es"}),e.jsx(ie,{className:"w-4 h-4 mt-2 text-purple-500"}),J.isAnimating&&e.jsx(Se,{className:"absolute top-2 right-2 w-3 h-3 text-primary animate-pulse"})]})}),e.jsx(p,{className:"relative overflow-hidden",children:e.jsxs(j,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:H.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Formes g√©ographiques"}),e.jsx(ut,{className:"w-4 h-4 mt-2 text-orange-500"}),H.isAnimating&&e.jsx(Se,{className:"absolute top-2 right-2 w-3 h-3 text-primary animate-pulse"})]})})]}),e.jsxs(ye,{value:i,onValueChange:f,children:[e.jsxs(we,{children:[e.jsx(O,{value:"overview",children:"Vue d'ensemble"}),e.jsx(O,{value:"taxonomy",children:"Taxonomie"}),e.jsx(O,{value:"occurrences",children:"Occurrences"}),e.jsx(O,{value:"shapes",children:"Formes"}),e.jsx(O,{value:"yaml",children:"Configuration YAML"})]}),e.jsx(F,{value:"overview",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Sources de donn√©es configur√©es"}),e.jsx(E,{children:"Configuration charg√©e depuis /test-instance/niamoto-nc/config/import.yml"})]}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:s&&Object.entries(s).map(([k,P])=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rs,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:k}),e.jsx("p",{className:"text-sm text-muted-foreground",children:P&&(P.path||P.file)||"Configuration complexe"})]})]}),e.jsxs(b,{variant:"outline",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"Configur√©"]})]},k))})})]})}),e.jsx(F,{value:"taxonomy",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Configuration taxonomique"}),e.jsx(E,{children:"Hi√©rarchie et enrichissement API"})]}),e.jsx(j,{children:s?.taxonomy&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Hi√©rarchie"}),e.jsx("div",{className:"space-y-2",children:s.taxonomy.hierarchy?.levels?.map((k,P)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-xs",children:P+1}),e.jsx(b,{variant:"secondary",children:k.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["‚Üí ",k.column]})]},P))})]}),s.taxonomy.api_enrichment&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Enrichissement API"}),e.jsx(b,{variant:s.taxonomy.api_enrichment.enabled?"default":"secondary",children:s.taxonomy.api_enrichment.enabled?"Activ√©":"D√©sactiv√©"}),s.taxonomy.api_enrichment.api_url&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s.taxonomy.api_enrichment.api_url})]})]})})]})}),e.jsx(F,{value:"occurrences",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{children:"Configuration des occurrences"})}),e.jsx(j,{children:s?.occurrences&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx(b,{children:s.occurrences.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Identifiant"}),e.jsx(b,{variant:"outline",children:s.occurrences.identifier})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Champ de localisation"}),e.jsx(b,{variant:"outline",children:s.occurrences.location_field})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fichier"}),e.jsx("code",{className:"text-xs bg-muted p-1 rounded",children:s.occurrences.path})]})]})})})]})}),e.jsx(F,{value:"shapes",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Formes g√©ographiques"}),e.jsx(E,{children:"Couches vectorielles et raster"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[s?.shapes&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Shapes (",s.shapes.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.shapes.map((k,P)=>e.jsx("div",{className:"p-2 rounded bg-muted/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:k.type}),e.jsx(b,{variant:"outline",className:"text-xs",children:k.path.split(".").pop()})]})},P))})]}),s?.layers&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Layers (",s.layers.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.layers.map((k,P)=>e.jsx("div",{className:"p-2 rounded bg-muted/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:k.name}),e.jsx(b,{variant:"outline",className:"text-xs",children:k.type})]})},P))})]})]})})]})}),e.jsx(F,{value:"yaml",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{children:"Configuration YAML brute"})}),e.jsx(j,{children:e.jsx(Ne,{className:"h-[400px] w-full",children:e.jsx($e,{language:"yaml",style:Fe,customStyle:{margin:0,borderRadius:"0.5rem",fontSize:"0.75rem",padding:"1rem"},showLineNumbers:!0,children:Oe(s,{indent:2,lineWidth:-1})})})})]})})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Processus d'import"}),e.jsx(E,{children:"Visualisez le processus d'import des donn√©es en temps r√©el"})]}),e.jsxs(j,{className:"space-y-4",children:[(x||m===100)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),M]}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx(Ae,{value:m,className:"h-3"})]}),le.length>0&&e.jsx(Ne,{className:"h-[200px] rounded-md border p-4 bg-muted/20",children:e.jsx("div",{className:"space-y-1 font-mono text-xs",children:le.map((k,P)=>e.jsx("div",{className:"animate-fadeIn",children:k},P))})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:m===100?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Import r√©ussi"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Pr√™t √† importer"})]})}),e.jsxs(q,{onClick:K,disabled:x,children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),x?"Import en cours...":"Lancer l'import"]})]})]})]})]})}function Ot({}){const{transformConfig:s,exportConfig:r,setDemoProgress:t}=Le(),{transformResult:n,setTransformResult:a,setCurrentStep:h}=Me(),[c,v]=l.useState(0),[i,f]=l.useState(!1),[m,y]=l.useState(0),[x,o]=l.useState(!1),[g,A]=l.useState(null),[M,z]=l.useState({widgets:0,items:0,duration:0}),[le,B]=l.useState({}),[Z,me]=l.useState([]),[V,U]=l.useState(""),[D,J]=l.useState([]),[H,K]=l.useState(null),[k,P]=l.useState(null),[se,u]=l.useState(null),[I,S]=l.useState(!1),[_,R]=l.useState(!1),$=ve(x?M.widgets:0,2500,x),pe=ve(x?M.items:0,2e3,x);l.useEffect(()=>{if(!s)return;const d=[];Array.isArray(s)&&s.forEach(N=>{const T=N.group_by;T&&!d.includes(T)&&d.push(T)}),me(d),d.length>0&&!V&&U(d[0])},[s]),l.useEffect(()=>{if(n&&n.result){const d=n.result.transformations||{},N=n.result.metrics||{};let T=0;const G={};Object.values(d).forEach(ae=>{if(ae&&ae.generated!==void 0){T+=ae.generated;const fe=ae.group||"default";G[fe]||(G[fe]={count:0,total:0}),G[fe].count+=1,G[fe].total+=ae.generated}});const Q=N.total_transformations||Object.keys(d).length;z({widgets:T,items:Q,duration:n.duration}),B(G),o(!0),y(100)}},[n]);const re=l.useMemo(()=>{if(!s||!r)return[];const d=[];return(r.exports||[]).forEach(T=>{(T.groups||[]).forEach(Q=>{const ae=Q.group_by;(Q.widgets||[]).forEach(Ee=>{const De=Ee.data_source,ue=Ee.plugin;De&&ue&&d.push({transformer:De,widget:ue,plugin:ue,groupBy:ae})})})}),d},[s,r]),ce=l.useMemo(()=>{const d={};return re.forEach(N=>{d[N.groupBy]||(d[N.groupBy]=[]),d[N.groupBy].push(N)}),d},[re]);l.useEffect(()=>{if(!V)return;(async()=>{S(!0);try{const N=await Vs(V),T=Array.isArray(N)?N:[];J(T),T.length>0?K(T[0].id):K(null)}catch(N){console.error("Failed to load entities:",N),J([]),K(null)}finally{S(!1)}})()},[V]),l.useEffect(()=>{if(!H){P(null),u(null);return}(async()=>{R(!0);try{const N=await Us(V,H);P(N);const T=Object.keys(N.widgets_data||{});T.length>0?u(T[0]):u(null)}catch(N){console.error("Failed to load entity detail:",N),P(null),u(null)}finally{R(!1)}})()},[H,V]);const L=l.useMemo(()=>{if(!k||!se)return null;const d=k.widgets_data[se];return d?{entity:{id:k.id,name:k.name,group_by:k.group_by},transformation:se,jsonData:d}:null},[k,se]),oe=async()=>{f(!0),h("transform"),o(!1),y(0);const d=Date.now();try{const N=await ks({config_path:"config/transform.yml"},T=>{y(T)});if(N.result){const T=N.result.transformations||{},G=N.result.metrics||{};let Q=0;const ae={};Object.values(T).forEach(ue=>{if(ue&&ue.generated!==void 0){Q+=ue.generated;const qe=ue.group||"default";ae[qe]||(ae[qe]={count:0,total:0}),ae[qe].count+=1,ae[qe].total+=ue.generated}});const fe=G.total_transformations||Object.keys(T).length,Ee=G.execution_time?G.execution_time.toFixed(1):((Date.now()-d)/1e3).toFixed(1),De={widgets:Q,items:fe,duration:parseFloat(Ee)};z(De),B(ae),a({status:"completed",result:N.result,duration:parseFloat(Ee)}),setTimeout(()=>{o(!0)},100)}y(100),t("transform",100),X.success("Transformations termin√©es avec succ√®s!")}catch(N){console.error("Transform error:",N),X.error("Erreur lors des transformations")}finally{f(!1),h(null)}},de=Array.isArray(s)?s:[],Y=de[c]||{};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Transformation des donn√©es"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Calculs statistiques et pr√©paration des donn√©es pour les visualisations"})]}),de.length>0&&e.jsx("div",{className:"flex justify-center gap-4",children:de.map((d,N)=>e.jsxs(q,{variant:c===N?"default":"outline",onClick:()=>v(N),className:"capitalize",children:[d.group_by,d.widgets_data&&e.jsxs(b,{variant:"secondary",className:"ml-2",children:[Object.keys(d.widgets_data).length," transformations"]})]},N))}),e.jsxs(ye,{defaultValue:"widgets",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-5",children:[e.jsx(O,{value:"widgets",children:"Transformations"}),e.jsx(O,{value:"architecture",children:"Architecture"}),e.jsx(O,{value:"graph",children:"Graphe"}),e.jsx(O,{value:"preview",children:"Aper√ßu live"}),e.jsx(O,{value:"yaml",children:"YAML"})]}),e.jsx(F,{value:"widgets",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Y.widgets_data&&Object.entries(Y.widgets_data).map(([d,N])=>e.jsxs(p,{className:`cursor-pointer transition-all hover:ring-2 hover:ring-primary/50 ${g===d?"ring-2 ring-primary":""}`,onClick:()=>A(g===d?null:d),children:[e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-sm",children:d}),e.jsxs(b,{variant:"outline",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),N.plugin]})]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Plugin de transformation"}),e.jsxs("div",{className:"flex items-center gap-2",children:[N.plugin==="field_aggregator"&&e.jsx(xe,{className:"w-4 h-4 text-blue-500"}),N.plugin==="geospatial_extractor"&&e.jsx(Cs,{className:"w-4 h-4 text-green-500"}),N.plugin==="top_ranking"&&e.jsx(bs,{className:"w-4 h-4 text-purple-500"}),N.plugin==="time_series_analysis"&&e.jsx(ke,{className:"w-4 h-4 text-orange-500"}),N.plugin==="statistical_summary"&&e.jsx(Ke,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm",children:N.plugin.replace(/_/g," ")})]}),N.params&&Object.keys(N.params).length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Param√®tres:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.keys(N.params).slice(0,3).map(T=>e.jsx(b,{variant:"secondary",className:"text-xs",children:T},T)),Object.keys(N.params).length>3&&e.jsxs(b,{variant:"secondary",className:"text-xs",children:["+",Object.keys(N.params).length-3]})]})]}),g===d&&e.jsx("div",{className:"pt-2",children:e.jsxs(b,{variant:"default",className:"text-xs",children:[e.jsx(te,{className:"w-3 h-3 mr-1"}),"S√©lectionn√©"]})})]})})]},d))}),g&&Y.widgets_data?.[g]&&e.jsxs(p,{className:"animate-fadeIn",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:["Configuration d√©taill√©e : ",g]}),e.jsx(E,{children:"Vue compl√®te de la configuration Transform et Export"})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(b,{variant:"outline",className:"bg-green-500/10",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"Transform"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Configuration de g√©n√©ration"})]}),e.jsx(Ne,{className:"h-[500px] w-full",children:e.jsx($e,{language:"yaml",style:Fe,customStyle:{margin:0,borderRadius:"0.5rem",fontSize:"0.7rem",padding:"0.75rem"},showLineNumbers:!0,children:Oe({[g]:Y.widgets_data[g]},{indent:2,lineWidth:-1})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs(b,{variant:"outline",className:"bg-purple-500/10",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),"Export"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Configuration d'affichage"})]}),e.jsx(Ne,{className:"h-[500px] w-full",children:r&&r.exports&&r.exports.length>0?e.jsx($e,{language:"yaml",style:Fe,customStyle:{margin:0,borderRadius:"0.5rem",fontSize:"0.7rem",padding:"0.75rem"},showLineNumbers:!0,children:(()=>{const d=Y.group_by,N=r.exports[0];if(!N?.groups)return"# Configuration export non disponible";const T=N.groups.find(Q=>Q.group_by===d);if(!T?.widgets)return`# Aucun groupe "${d}" trouv√© dans la configuration export`;const G=T.widgets.find(Q=>Q.data_source===g||Q.widget_id===g);return G?Oe({plugin:G.plugin,data_source:G.data_source,title:G.title,description:G.description,params:G.params},{indent:2,lineWidth:-1}):`# Widget avec data_source "${g}" non trouv√© dans la configuration export
# Widgets disponibles:
${T.widgets.map(Q=>`# - ${Q.data_source||Q.plugin}`).join(`
`)}`})()}):e.jsx("div",{className:"p-4 text-sm text-muted-foreground bg-muted/50 rounded-lg",children:"Configuration export non disponible"})})]})]})})]})]})}),e.jsx(F,{value:"architecture",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Architecture de transformation"}),e.jsx(E,{children:"Comprendre comment les donn√©es circulent dans le pipeline"})]}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(b,{variant:"outline",className:"bg-blue-500/10",children:"1"}),"Sources de donn√©es"]}),e.jsx("div",{className:"space-y-2 pl-4",children:Y.sources?.map((d,N)=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:d.name}),e.jsx(b,{variant:"outline",className:"ml-auto",children:d.data})]}),d.grouping&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground ml-6",children:[e.jsx(ss,{className:"w-3 h-3"}),"Group√© par: ",e.jsx(b,{variant:"secondary",className:"text-xs",children:d.grouping})]}),d.relation&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground ml-6",children:[e.jsx(ss,{className:"w-3 h-3"}),"Relation: ",e.jsx(b,{variant:"secondary",className:"text-xs",children:d.relation.plugin})]})]},N))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(b,{variant:"outline",className:"bg-green-500/10",children:"2"}),"Strat√©gie de groupement"]}),e.jsx("div",{className:"pl-4",children:e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium capitalize",children:["Group by: ",Y.group_by]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2 ml-6",children:["Les donn√©es seront regroup√©es par ",e.jsx("span",{className:"font-medium",children:Y.group_by}),", puis chaque plugin de transformation sera ex√©cut√© pour chaque groupe."]})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(b,{variant:"outline",className:"bg-purple-500/10",children:"3"}),"Transformations g√©n√©r√©s"]}),e.jsx("div",{className:"pl-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Y.widgets_data&&Object.entries(Y.widgets_data).map(([d,N])=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:d})]}),e.jsx(b,{variant:"outline",className:"text-xs",children:N.plugin})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 ml-6",children:['Une colonne "',e.jsx("span",{className:"font-medium",children:d}),'" sera cr√©√© pour chaque ',Y.group_by]})]},d))})})]})]})]})}),e.jsx(F,{value:"graph",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"w-5 h-5"}),"Graphe de d√©pendances"]}),e.jsx(E,{children:"Relations entre transformations et widgets d'export"})]}),e.jsx(j,{children:Object.keys(ce).length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune d√©pendance trouv√©e. Chargez les configurations transform et export."}):e.jsxs("div",{className:"space-y-8",children:[Object.entries(ce).map(([d,N])=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",className:"text-sm",children:d}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.length," d√©pendance",N.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-2",children:N.map((T,G)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(xe,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:T.transformer}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Transform"})]})]}),e.jsx(he,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(Ke,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:T.widget}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Widget"})]})]})]},`${T.transformer}-${T.widget}-${G}`))})]},d)),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:Object.keys(ce).length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Groupes"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:re.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"D√©pendances"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:new Set(re.map(d=>d.transformer)).size}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Transformations"})]})]})})]})})]})}),e.jsx(F,{value:"preview",children:e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),"Transformation ‚Üí Widget"]}),e.jsx(E,{children:"Exemple concret : de la colonne JSON aux donn√©es affichables"})]}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type d'entit√©"}),e.jsxs(Be,{value:V,onValueChange:U,disabled:Z.length===0,children:[e.jsx(We,{children:e.jsx(Ve,{placeholder:"S√©lectionner un type d'entit√©"})}),e.jsx(Ue,{children:Z.map(d=>e.jsx(Je,{value:d,children:d},d))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Entit√©",I&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(chargement...)"})]}),e.jsxs(Be,{value:H||"",onValueChange:d=>K(d),disabled:I||!Array.isArray(D)||D.length===0,children:[e.jsx(We,{children:e.jsx(Ve,{placeholder:"S√©lectionner une entit√©"})}),e.jsx(Ue,{children:Array.isArray(D)&&D.map(d=>e.jsx(Je,{value:d.id,children:d.display_name||d.name},d.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium",children:["Transformation",_&&e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(chargement...)"})]}),e.jsxs(Be,{value:se||"",onValueChange:u,disabled:_||!k||Object.keys(k.widgets_data||{}).length===0,children:[e.jsx(We,{children:e.jsx(Ve,{placeholder:"S√©lectionner une transformation"})}),e.jsx(Ue,{children:k&&Object.keys(k.widgets_data||{}).map(d=>e.jsx(Je,{value:d,children:d},d))})]})]})]}),L&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:"Donn√©es actuelles"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Table: ",e.jsx(b,{variant:"outline",children:L.entity.group_by})," ‚Ä¢ ","ID: ",L.entity.id," ‚Ä¢ ",L.entity.name]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx(xe,{className:"w-4 h-4 inline mr-1 text-green-500"}),L.transformation]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"font-semibold",children:"Donn√©es JSON stock√©es"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["Colonne ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:L.transformation})," dans la table ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:L.entity.group_by})]}),e.jsx(Ne,{className:"h-[450px] w-full rounded-md border",children:e.jsx("pre",{className:"p-4 text-xs",children:JSON.stringify(L.jsonData,null,2)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"font-semibold",children:"Widget g√©n√©r√©"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Widget rendu par le plugin configur√© dans export.yml"}),e.jsx("div",{className:"border rounded-lg bg-background overflow-hidden h-[450px]",children:e.jsx("iframe",{src:`/api/entities/render-widget/${L.entity.group_by}/${L.entity.id}/${L.transformation}`,className:"w-full h-full border-0",title:"Widget preview",sandbox:"allow-scripts allow-same-origin",scrolling:"no"})})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:"üí°"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium",children:"Comment √ßa fonctionne ?"}),e.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Le plugin de transformation calcule les donn√©es pour chaque entit√©"}),e.jsxs("li",{children:["Les r√©sultats sont stock√©s en JSON dans la colonne ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:L.transformation})]}),e.jsx("li",{children:"Le widget plugin (configur√© dans export.yml) lit ces donn√©es JSON"}),e.jsx("li",{children:"Il g√©n√®re le graphique interactif avec Plotly.js"}),e.jsx("li",{children:"Le widget est int√©gr√© dans les pages HTML export√©es"})]})]})]})})]}),!L&&e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:I||_?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(xe,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{children:"Chargement des donn√©es..."})]}):D.length===0?e.jsx("div",{children:"Aucune entit√© trouv√©e avec des donn√©es de transformation"}):k?Object.keys(k.widgets_data||{}).length===0?e.jsx("div",{children:"Cette entit√© n'a pas de donn√©es de transformation"}):e.jsx("div",{children:"S√©lectionnez une transformation pour voir ses donn√©es"}):e.jsx("div",{children:"S√©lectionnez une entit√© pour voir ses donn√©es"})})]})]})}),e.jsx(F,{value:"yaml",children:e.jsxs(p,{children:[e.jsx(w,{children:e.jsx(C,{children:"Configuration YAML"})}),e.jsx(j,{children:e.jsx(Ne,{className:"h-[400px] w-full",children:e.jsx($e,{language:"yaml",style:Fe,customStyle:{margin:0,borderRadius:"0.5rem",fontSize:"0.75rem",padding:"1rem"},showLineNumbers:!0,children:Oe(Y,{indent:2,lineWidth:-1})})})})]})})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Processus de transformation"}),e.jsx(E,{children:"Calcul des statistiques et m√©triques"})]}),e.jsxs(j,{className:"space-y-4",children:[i&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Transformation en cours..."}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx(Ae,{value:m}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[m<25&&"Chargement des donn√©es...",m>=25&&m<50&&"Calcul des agr√©gations...",m>=50&&m<75&&"Analyse statistique...",m>=75&&m<100&&"G√©n√©ration des tables...",m===100&&"Transformation termin√©e !"]})]}),m===100&&x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:$.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Transformations g√©n√©r√©s"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:pe.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Types de transformations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[M.duration,"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Temps de calcul"})]})]}),Object.keys(le).length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"D√©tail par groupe"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries(le).map(([d,N])=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",className:"capitalize",children:d}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.count," type",N.count>1?"s":""]})]}),e.jsxs("div",{className:"text-sm font-medium",children:[N.total.toLocaleString()," transformations"]})]},d))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:m===100?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Transformation r√©ussie"})]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4 text-muted-foreground animate-spin"}),e.jsx("span",{className:"text-sm",children:"Pr√™t √† transformer"})]})}),e.jsxs(q,{onClick:oe,disabled:i,children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),i?"Transformation...":"Lancer la transformation"]})]})]})]})]})}function Ps({item:s,depth:r}){const[t,n]=l.useState(!1),a=s.type==="directory"?"üìÅ":"üìÑ",h=f=>({web:"Site statique HTML",api:"API JSON statique",dwc:"Darwin Core exports","dwc-archive":"Archive DwC-A standard",taxon:"Pages/JSON par taxon",plot:"Pages/JSON par parcelle",shape:"Pages/JSON par zone",assets:"CSS, JS, images",occurrence_json:"Occurrences par taxon"})[f],c=s.type==="directory"?h(s.name):null,v=s.type==="directory"&&s.count?` (${s.count})`:"",i=()=>{s.type==="directory"&&s.children&&n(!t)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginLeft:`${r*1}rem`},className:s.type==="directory"&&s.children?"cursor-pointer hover:bg-muted/50 rounded px-1":"px-1",onClick:i,children:[s.type==="directory"&&s.children&&(t?e.jsx(zs,{className:"inline w-3 h-3 mr-1"}):e.jsx(ss,{className:"inline w-3 h-3 mr-1"})),a," ",s.name,v,c&&e.jsxs("span",{className:"text-muted-foreground",children:[" ‚Üí ",c]})]}),t&&s.children&&s.children.map((f,m)=>e.jsx(Ps,{item:f,depth:r+1},m))]})}function $t({}){const s=Ds(),{setDemoProgress:r}=Le(),{exportResult:t,setExportResult:n,setCurrentStep:a}=Me(),[h,c]=l.useState(!1),[v,i]=l.useState(0),[f,m]=l.useState(!1),[y,x]=l.useState(""),[o,g]=l.useState({totalFiles:0,duration:0,targets:[]}),[A,M]=l.useState(null),[z,le]=l.useState(!1),[B,Z]=l.useState(""),[me,V]=l.useState(""),[U,D]=l.useState(!1),[J,H]=l.useState([]),[K,k]=l.useState(null),P=ve(f?o.totalFiles:0,3e3,f);l.useEffect(()=>{(async()=>{try{const R=(await Re.get("/config/project")).data.working_directory||".";x(`${R}/exports`)}catch(_){console.error("Failed to load working directory:",_),x("exports")}})()},[]),l.useEffect(()=>{if(t&&t.result){const S=t.result.exports||{},_=t.result.metrics||{},R=[];let $=0;Object.entries(S).forEach(([re,ce])=>{if(ce&&ce.data){const L=ce.data.files_generated||0;L>0&&(R.push({name:re,files:L}),$+=L)}}),$===0&&_.generated_pages&&($=_.generated_pages);const pe={totalFiles:$,duration:t.duration,targets:R};g(pe),m(!0),i(100),se()}},[t]);const se=async()=>{try{const S=await Js();M(S)}catch(S){console.error("Failed to load exports structure:",S)}},u=async()=>{if(!B.trim()){X.error("Veuillez entrer un nom de projet");return}D(!0),H([]),k(null);try{const S=new EventSource(`/api/deploy/cloudflare/deploy?project_name=${encodeURIComponent(B)}&branch=${encodeURIComponent(me)}`,{withCredentials:!1});S.onmessage=_=>{const R=_.data;if(R==="DONE"){S.close(),D(!1),K&&X.success("D√©ploiement r√©ussi !");return}if(R.startsWith("URL: ")){const $=R.substring(5);k($)}else R.startsWith("ERROR: ")?(H($=>[...$,`‚ùå ${R}`]),X.error("Erreur lors du d√©ploiement")):R.startsWith("SUCCESS: ")?H($=>[...$,`‚úÖ ${R}`]):H($=>[...$,R])},S.onerror=_=>{console.error("EventSource error:",_),S.close(),D(!1),X.error("Erreur de connexion au serveur")}}catch(S){console.error("Deploy error:",S),D(!1),X.error("Erreur lors du d√©ploiement")}},I=async()=>{c(!0),a("export"),m(!1),i(0);const S=Date.now();try{const _=await _s({config_path:"config/export.yml"},R=>{i(R)});if(_.result){const R=_.result.exports||{},$=_.result.metrics||{},pe=[];let re=0;Object.entries(R).forEach(([oe,de])=>{if(de&&de.data){const Y=de.data.files_generated||0;Y>0&&(pe.push({name:oe,files:Y}),re+=Y)}}),re===0&&$.generated_pages&&(re=$.generated_pages);const ce=$.execution_time?$.execution_time.toFixed(1):((Date.now()-S)/1e3).toFixed(1),L={totalFiles:re,duration:parseFloat(ce),targets:pe};g(L),n({status:"completed",result:_.result,duration:parseFloat(ce)}),setTimeout(()=>{m(!0)},100)}i(100),r("export",100),await se(),X.success("Export termin√© avec succ√®s!")}catch(_){console.error("Export error:",_),X.error("Erreur lors de l'export")}finally{c(!1),a(null)}};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Export & Publication"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"G√©n√©ration du site web statique avec visualisations interactives"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{className:"w-8 h-8 text-purple-500"}),e.jsx(b,{variant:"secondary",children:"Cible 1"})]}),e.jsx("h3",{className:"font-semibold",children:"Site Web Statique"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pages HTML avec navigation hi√©rarchique, cartes interactives et visualisations"}),e.jsxs("div",{className:"pt-2 space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-3 h-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Groupes: dynamiques selon votre configuration"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-3 h-3"}),e.jsx("span",{className:"text-muted-foreground",children:"22+ types de widgets"})]})]})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ze,{className:"w-8 h-8 text-blue-500"}),e.jsx(b,{variant:"secondary",children:"Cible 2"})]}),e.jsx("h3",{className:"font-semibold",children:"API JSON Statique"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Endpoints JSON pour chaque entit√© et fichiers d'index par groupe"}),e.jsxs("div",{className:"pt-2 space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-3 h-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Format structur√©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Configurable (minify, compress)"})]})]})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{className:"w-8 h-8 text-green-500"}),e.jsx(b,{variant:"secondary",children:"Cible 3"})]}),e.jsx("h3",{className:"font-semibold",children:"Darwin Core Archive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Export des occurrences au format Darwin Core pour interop√©rabilit√©"}),e.jsxs("div",{className:"pt-2 space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Standard international GBIF"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsx("span",{className:"text-muted-foreground",children:"JSON par taxon + Archive ZIP"})]})]})]})})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"G√©n√©ration du site"}),e.jsx(E,{children:"Cr√©ation du site web statique complet"})]}),e.jsxs(j,{className:"space-y-4",children:[h&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Export en cours..."}),e.jsxs("span",{children:[v,"%"]})]}),e.jsx(Ae,{value:v}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[v<25&&"G√©n√©ration des pages HTML...",v>=25&&v<50&&"Cr√©ation des visualisations...",v>=50&&v<75&&"Optimisation des assets...",v>=75&&v<100&&"Finalisation...",v===100&&"Export termin√© !"]})]}),v===100&&f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Export termin√© avec succ√®s !"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Les fichiers sont pr√™ts √† √™tre d√©ploy√©s"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{children:e.jsxs(j,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:P.value.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fichiers g√©n√©r√©s"})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[o.duration,"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Temps de g√©n√©ration"})]})})]}),o.targets.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"D√©tail par cible"}),e.jsx("div",{className:"space-y-2",children:o.targets.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[S.name==="web_pages"&&e.jsx(ee,{className:"w-4 h-4 text-purple-500"}),S.name==="json_api"&&e.jsx(Ze,{className:"w-4 h-4 text-blue-500"}),S.name==="dwc_occurrence_json"&&e.jsx(ie,{className:"w-4 h-4 text-green-500"}),S.name==="dwc_archive_standard"&&e.jsx(be,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:S.name.replace(/_/g," ")})]}),e.jsxs(b,{variant:"secondary",children:[S.files.toLocaleString()," fichiers"]})]},S.name))})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(q,{variant:"default",className:"flex-1",onClick:()=>s("/data/preview"),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Voir le site"]})})]}),v!==100&&!h&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Pr√™t √† exporter"})]}),e.jsxs(q,{onClick:I,disabled:h,children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"G√©n√©rer le site"]})]})]})]}),v===100&&f&&e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Aper√ßu du site g√©n√©r√©"}),e.jsx(E,{children:"Pr√©visualisation interactive du site export√©"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsx("iframe",{src:"/preview/index.html",className:"w-full h-[600px] border-0",title:"Site export√©",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms"})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Le site complet est disponible dans ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"exports/web/"})]})]})]}),v===100&&f&&e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"Structure des exports"]}),e.jsxs(E,{children:["Organisation des fichiers g√©n√©r√©s",y&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 p-2 rounded bg-muted/50 font-mono text-xs",children:[e.jsx(Ye,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"R√©pertoire :"}),e.jsx("code",{className:"text-foreground",children:y})]})]})]}),e.jsx(j,{children:A&&A.exists?e.jsxs("div",{className:"font-mono text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-semibold",children:"exports/"})]}),A.tree.map((S,_)=>e.jsx(Ps,{item:S,depth:1},_))]}):e.jsx("div",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun export disponible"})})]}),v===100&&f&&e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Publication"]}),e.jsx(E,{children:"D√©ployez votre site sur GitHub Pages, Netlify, Cloudflare ou votre serveur"})]}),e.jsxs(j,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-900 dark:bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 fill-white dark:fill-gray-900",children:e.jsx("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"GitHub Pages"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"H√©bergement gratuit"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©ployez automatiquement vers une branche gh-pages de votre d√©p√¥t"}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-semibold",children:"Commande"})]}),e.jsxs("code",{className:"text-xs font-mono block",children:["niamoto deploy github \\",e.jsx("br",{}),"¬†¬†--repo https://github.com/user/repo \\",e.jsx("br",{}),"¬†¬†--branch gh-pages"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold",children:"Options"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--repo"})," : URL du d√©p√¥t GitHub"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--branch"})," : Branche cible (d√©faut: gh-pages)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--name"})," : Nom du committer"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--email"})," : Email du committer"]})]})]})]}),e.jsx(q,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Documentation GitHub Pages"]})})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#00C7B7] flex items-center justify-center",children:e.jsx(xs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Netlify"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"CDN global"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©ploiement instantan√© avec CDN mondial et HTTPS automatique"}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-semibold",children:"Commande"})]}),e.jsxs("code",{className:"text-xs font-mono block",children:["niamoto deploy netlify \\",e.jsx("br",{}),"¬†¬†--site-id your-site-id"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold",children:"Pr√©requis"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:["Installer Netlify CLI : ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"npm install -g netlify-cli"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:["Se connecter : ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"netlify login"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsx("span",{children:"Cr√©er un site sur Netlify et r√©cup√©rer le site-id"})]})]})]}),e.jsx(q,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:"https://docs.netlify.com/",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Documentation Netlify"]})})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F38020] flex items-center justify-center",children:e.jsx(xs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Cloudflare Pages"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"R√©seau edge mondial"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©ploiement sur le r√©seau edge mondial de Cloudflare"}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-semibold",children:"Commande"})]}),e.jsxs("code",{className:"text-xs font-mono block",children:["niamoto deploy cloudflare \\",e.jsx("br",{}),"¬†¬†--project-name my-project \\",e.jsx("br",{}),"¬†¬†--branch production"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold",children:"Pr√©requis"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:["Installer Wrangler : ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"npm install -g wrangler"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:["Se connecter : ",e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"wrangler login"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsx("span",{children:"Cr√©er un projet Cloudflare Pages"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(q,{variant:"default",className:"w-full",onClick:()=>{le(!0),Z(""),V(""),H([]),k(null)},disabled:!f||v!==100,children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"D√©ployer maintenant"]}),e.jsx(q,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs("a",{href:"https://developers.cloudflare.com/pages/",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Documentation"]})})]})]})}),e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center",children:e.jsx(He,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"SSH/rsync"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Serveur custom"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©ployez sur votre propre serveur via SSH et rsync"}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-semibold",children:"Commande"})]}),e.jsxs("code",{className:"text-xs font-mono block",children:["niamoto deploy ssh \\",e.jsx("br",{}),"¬†¬†--host user@server.com \\",e.jsx("br",{}),"¬†¬†--path /var/www/html \\",e.jsx("br",{}),"¬†¬†--port 22 \\",e.jsx("br",{}),"¬†¬†--key ~/.ssh/id_rsa"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-semibold",children:"Options"}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--host"})," : user@hostname"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--path"})," : Chemin distant"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--port"})," : Port SSH (d√©faut: 22)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsxs("span",{children:[e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"--key"})," : Cl√© SSH priv√©e"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50",children:[e.jsx(it,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"N√©cessite rsync install√©"})]})]})})]}),e.jsx("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Publication automatis√©e"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ces commandes peuvent √™tre int√©gr√©es dans vos workflows CI/CD (GitHub Actions, GitLab CI) pour automatiser le d√©ploiement √† chaque modification de vos donn√©es source."}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(b,{variant:"secondary",className:"text-xs",children:"GitHub Actions"}),e.jsx(b,{variant:"secondary",className:"text-xs",children:"GitLab CI"}),e.jsx(b,{variant:"secondary",className:"text-xs",children:"4 plateformes"}),e.jsx(b,{variant:"secondary",className:"text-xs",children:"Serveur custom"})]})]})]})})]})]}),e.jsx(qs,{open:z,onOpenChange:le,children:e.jsxs(Os,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs($s,{children:[e.jsx(Fs,{children:"D√©ployer sur Cloudflare Pages"}),e.jsx(Gs,{children:"D√©ployez votre site export√© sur Cloudflare Pages"})]}),e.jsxs("div",{className:"space-y-4",children:[!U&&!K&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(cs,{htmlFor:"project-name",children:"Nom du projet Cloudflare"}),e.jsx(os,{id:"project-name",placeholder:"mon-site-niamoto",value:B,onChange:S=>Z(S.target.value),disabled:U}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Le projet sera cr√©√© automatiquement s'il n'existe pas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(cs,{htmlFor:"branch-name",children:"Branche (optionnel)"}),e.jsx(os,{id:"branch-name",placeholder:"Laisser vide pour d√©ploiement en production",value:me,onChange:S=>V(S.target.value),disabled:U}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Laisser vide pour URL principale (projet.pages.dev). Sp√©cifier une branche cr√©e un alias (branche.projet.pages.dev)"})]}),e.jsxs(q,{onClick:u,disabled:!B.trim()||U,className:"w-full",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Lancer le d√©ploiement"]})]}),(U||J.length>0)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Logs de d√©ploiement"}),U&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"D√©ploiement en cours..."})]})]}),e.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-xs max-h-96 overflow-y-auto",children:J.length===0?e.jsx("div",{className:"text-muted-foreground",children:"En attente des logs..."}):J.map((S,_)=>e.jsx("div",{className:"mb-1",children:S},_))})]}),K&&e.jsx("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(te,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"D√©ploiement r√©ussi !"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Votre site est maintenant en ligne"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-muted/50 font-mono text-xs break-all",children:[e.jsx(ee,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),e.jsx("a",{href:K,target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-primary",children:K})]}),e.jsx(q,{asChild:!0,className:"w-full",size:"sm",children:e.jsxs("a",{href:K,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Ouvrir le site"]})})]})]})}),e.jsx("div",{className:"flex gap-2",children:!U&&e.jsx(q,{variant:"outline",onClick:()=>{le(!1),H([]),k(null),Z("")},className:"flex-1",children:"Fermer"})})]})]})]})})]})}function Ft(){const[s,r]=l.useState("overview"),t=l.useRef(null),n=l.useRef(!0),{currentStep:a,importResult:h,transformResult:c,exportResult:v}=Me(),i=o=>{const g=a===o;let A=!1;return o==="import"&&h?.status==="completed"&&(A=!0),o==="transform"&&c?.status==="completed"&&(A=!0),o==="export"&&v?.status==="completed"&&(A=!0),{isRunning:g,isCompleted:A}},f=i("import"),m=i("transform"),y=i("export");l.useEffect(()=>{if(n.current){n.current=!1;return}t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start"})},[s]);const x=o=>{r(o)};return e.jsx("div",{ref:t,className:"w-full space-y-8",children:e.jsxs(ye,{value:s,onValueChange:x,className:"w-full",children:[e.jsx("div",{className:"sticky top-14 z-30 flex justify-center mb-8 bg-background/95  supports-[backdrop-filter]:bg-background/60 pb-4 pt-4",children:e.jsxs(we,{className:"grid grid-cols-4 w-full max-w-2xl",children:[e.jsxs(O,{value:"overview",className:"gap-2",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Vue d'ensemble"}),e.jsx("span",{className:"sm:hidden",children:"Vue"})]}),e.jsxs(O,{value:"import",className:ne("gap-2 relative",f.isRunning&&"animate-pulse bg-blue-500/20",f.isCompleted&&"text-green-600 dark:text-green-400"),children:[f.isRunning&&e.jsx(je,{className:"w-4 h-4 animate-spin"}),!f.isRunning&&!f.isCompleted&&e.jsx(ys,{className:"w-4 h-4"}),f.isCompleted&&!f.isRunning&&e.jsx(te,{className:"w-4 h-4"}),"Import"]}),e.jsxs(O,{value:"transform",className:ne("gap-2 relative",m.isRunning&&"animate-pulse bg-blue-500/20",m.isCompleted&&"text-green-600 dark:text-green-400"),children:[m.isRunning&&e.jsx(je,{className:"w-4 h-4 animate-spin"}),!m.isRunning&&!m.isCompleted&&e.jsx(xe,{className:"w-4 h-4"}),m.isCompleted&&!m.isRunning&&e.jsx(te,{className:"w-4 h-4"}),"Transform"]}),e.jsxs(O,{value:"export",className:ne("gap-2 relative",y.isRunning&&"animate-pulse bg-blue-500/20",y.isCompleted&&"text-green-600 dark:text-green-400"),children:[y.isRunning&&e.jsx(je,{className:"w-4 h-4 animate-spin"}),!y.isRunning&&!y.isCompleted&&e.jsx(ee,{className:"w-4 h-4"}),y.isCompleted&&!y.isRunning&&e.jsx(te,{className:"w-4 h-4"}),"Export"]})]})}),e.jsx(F,{value:"overview",className:"mt-0",children:e.jsx(Dt,{})}),e.jsx(F,{value:"import",className:"mt-0",children:e.jsx(qt,{})}),e.jsx(F,{value:"transform",className:"mt-0",children:e.jsx(Ot,{})}),e.jsx(F,{value:"export",className:"mt-0",children:e.jsx($t,{})})]})})}const Gt=[{title:"Automatisation compl√®te",description:"Contr√¥lez tout le pipeline Niamoto via API REST",icon:e.jsx(rs,{className:"w-6 h-6 text-yellow-500"})},{title:"57 endpoints",description:"10 modules couvrant import, transformation, export",icon:e.jsx(ie,{className:"w-6 h-6 text-blue-500"})},{title:"Int√©gration externe",description:"Applications tierces, SIG, workflows scientifiques",icon:e.jsx(ee,{className:"w-6 h-6 text-green-500"})}],zt={"R√©cup√©rer un taxon":{language:"bash",code:"curl http://localhost:8080/api/entities/entity/taxon/1"},"Lancer une transformation":{language:"bash",code:`curl -X POST http://localhost:8080/api/transform/execute \\
  -H "Content-Type: application/json" \\
  -d '{"config_path": "config/transform.yml"}'`},"Exporter le site":{language:"bash",code:`curl -X POST http://localhost:8080/api/export/execute \\
  -H "Content-Type: application/json" \\
  -d '{"config_path": "config/export.yml"}'`}},Ht={python:`import requests

# 1. R√©cup√©rer un taxon avec tous ses widgets
response = requests.get(
    "http://localhost:8080/api/entities/entity/taxon/1"
)
taxon = response.json()
print(f"Taxon: {taxon['name']}")
print(f"Widgets disponibles: {len(taxon['widgets'])}")

# 2. Lancer une transformation
response = requests.post(
    "http://localhost:8080/api/transform/execute",
    json={"config_path": "config/transform.yml"}
)
job = response.json()
job_id = job["job_id"]

# 3. Suivre la progression
import time
while True:
    status = requests.get(
        f"http://localhost:8080/api/transform/status/{job_id}"
    ).json()

    print(f"Progress: {status['progress']}%")

    if status["status"] == "completed":
        print("‚úì Transformation termin√©e!")
        break

    time.sleep(1)`,javascript:`// 1. R√©cup√©rer un taxon avec tous ses widgets
const taxon = await fetch(
  'http://localhost:8080/api/entities/entity/taxon/1'
).then(r => r.json())

console.log(\`Taxon: \${taxon.name}\`)
console.log(\`Widgets: \${taxon.widgets.length}\`)

// 2. Lancer un export
const job = await fetch(
  'http://localhost:8080/api/export/execute',
  {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      config_path: 'config/export.yml'
    })
  }
).then(r => r.json())

// 3. Suivre la progression
const pollStatus = async (jobId) => {
  while (true) {
    const status = await fetch(
      \`http://localhost:8080/api/export/status/\${jobId}\`
    ).then(r => r.json())

    console.log(\`Progress: \${status.progress}%\`)

    if (status.status === 'completed') {
      console.log('‚úì Export termin√©!')
      return status
    }

    await new Promise(r => setTimeout(r, 1000))
  }
}

await pollStatus(job.job_id)`,r:`library(httr)
library(jsonlite)

# 1. R√©cup√©rer tous les taxons
response <- GET("http://localhost:8080/api/entities/entities/taxon")
taxons <- content(response, as = "parsed")

# Convertir en dataframe pour analyse
df <- do.call(rbind, lapply(taxons, as.data.frame))
print(paste("Nombre de taxons:", nrow(df)))

# 2. Requ√™te SQL personnalis√©e sur la base
query <- list(
  query = "SELECT rank_name, COUNT(*) as count
           FROM taxon GROUP BY rank_name"
)

response <- POST(
  "http://localhost:8080/api/data/query",
  body = query,
  encode = "json"
)

result <- content(response, as = "parsed")
print(result$rows)

# 3. Exporter pour analyse
POST(
  "http://localhost:8080/api/export/execute",
  body = list(config_path = "config/export.yml"),
  encode = "json"
)`};function Bt({}){const[s,r]=l.useState(null),t=(n,a)=>{navigator.clipboard.writeText(n),r(a),setTimeout(()=>r(null),2e3)};return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"API REST Compl√®te"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Int√©grez Niamoto dans vos workflows et applications"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Gt.map((n,a)=>e.jsx(p,{children:e.jsxs(j,{className:"pt-6 space-y-2 text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:n.icon}),e.jsx("h3",{className:"font-semibold",children:n.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})},a))}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Exemples rapides"}),e.jsx(E,{children:"Commandes cURL pour tester l'API imm√©diatement"})]}),e.jsx(j,{className:"space-y-3",children:Object.entries(zt).map(([n,{code:a}])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:n}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>t(a,n),children:s===n?e.jsx(te,{className:"w-4 h-4 text-green-500"}):e.jsx(ms,{className:"w-4 h-4"})})]}),e.jsx("pre",{className:"bg-muted p-3 rounded-lg text-xs overflow-x-auto",children:e.jsx("code",{children:a})})]},n))})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Exemples complets"]}),e.jsx(E,{children:"Workflow complet : r√©cup√©ration de donn√©es, ex√©cution de jobs, suivi de progression"})]}),e.jsx(j,{children:e.jsxs(ye,{defaultValue:"python",className:"w-full",children:[e.jsxs(we,{className:"grid w-full grid-cols-3",children:[e.jsx(O,{value:"python",children:"Python"}),e.jsx(O,{value:"javascript",children:"JavaScript"}),e.jsx(O,{value:"r",children:"R"})]}),Object.entries(Ht).map(([n,a])=>e.jsx(F,{value:n,className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 z-10",onClick:()=>t(a,n),children:s===n?e.jsx(te,{className:"w-4 h-4 text-green-500"}):e.jsx(ms,{className:"w-4 h-4"})}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg text-xs overflow-x-auto max-h-96",children:e.jsx("code",{children:a})})]})},n))]})})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsx(C,{children:"Cas d'usage"}),e.jsx(E,{children:"Comment utiliser l'API Niamoto dans diff√©rents contextes"})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-purple-500"}),e.jsx("h4",{className:"font-semibold",children:"Automatisation CI/CD"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Int√©grez les exports Niamoto dans vos pipelines d'int√©gration continue : g√©n√©ration automatique du site √† chaque modification des donn√©es source"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded text-xs font-mono",children:"GitHub Actions, GitLab CI, Jenkins"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-blue-500"}),e.jsx("h4",{className:"font-semibold",children:"Applications web personnalis√©es"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Construisez des interfaces sur-mesure qui consomment les donn√©es Niamoto : tableaux de bord, visualisations interactives, portails sp√©cialis√©s"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded text-xs font-mono",children:"React, Vue, Svelte, Next.js"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-green-500"}),e.jsx("h4",{className:"font-semibold",children:"Int√©gration SIG"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connectez vos outils SIG pour acc√©der aux donn√©es g√©ographiques : visualisation, analyse spatiale, export de couches personnalis√©es"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded text-xs font-mono",children:"QGIS, ArcGIS, Python scripts"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5 text-orange-500"}),e.jsx("h4",{className:"font-semibold",children:"Workflows scientifiques"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Int√©grez Niamoto dans vos analyses : extraction de donn√©es pour mod√©lisation, analyses statistiques, g√©n√©ration de rapports automatis√©s"}),e.jsx("div",{className:"bg-muted/50 p-3 rounded text-xs font-mono",children:"R scripts, Python notebooks, workflows"})]})]})})]}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Documentation compl√®te"]}),e.jsx(E,{children:"Explorez tous les endpoints, sch√©mas et testez l'API directement"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"10 modules API"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configuration, Plugins, Import, Transform, Export, Database, Entities, Data Explorer, Files, Bootstrap"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"57 endpoints REST"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"GET, POST, PUT, DELETE avec validation automatique, documentation Swagger interactive et sch√©mas JSON"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{asChild:!0,className:"flex-1",children:e.jsxs("a",{href:"/tools/docs",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Voir la documentation API"]})}),e.jsx(q,{asChild:!0,variant:"outline",className:"flex-1",children:e.jsxs("a",{href:"/api/docs",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Ouvrir Swagger UI"]})})]})]})]})]})}function Wt(){return e.jsx(Bt,{})}const Vt=[{title:"Niamoto NC",icon:ns,logo:Ge,description:"Nouvelle-Cal√©donie",stats:{species:"1275",occurrences:"203,865",plots:"22",shapes:"89"},benefits:["75% d'end√©misme NC","Point chaud biodiversit√© mondial","Interface grand public & chercheurs"],color:"text-blue-500",bgColor:"bg-blue-500/10"},{title:"Central African Plot Network",icon:ns,description:"Gabon - Cameroun",stats:{species:"1,234",occurrences:"45,000",plots:"265",shapes:"71"},benefits:["R√©seau parcelles Afrique Centrale","Biomasse & dynamique foresti√®re","Donn√©es scientifiques ouvertes"],color:"text-amber-900",bgColor:"bg-amber-900/10"},{title:"Endemia",icon:ct,description:"Nouvelle-Cal√©donie",stats:{species:"4658",occurrences:"175,537"},benefits:["2696 esp√®ces end√©miques","Observations participatives","Liste Rouge & esp√®ces prot√©g√©es"],color:"text-lime-700",bgColor:"bg-lime-700/10"}];function Ut({}){return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Instances d√©ploy√©es/en cours"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Niamoto est utilis√© par des organisations vari√©es pour g√©rer leurs donn√©es √©cologiques"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Vt.map((s,r)=>{const t=s.icon;return e.jsxs(p,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 ${s.bgColor} rounded-full blur-3xl opacity-20`}),e.jsxs(w,{children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${s.bgColor} flex items-center justify-center mb-4`,children:s.logo?e.jsx("img",{src:s.logo,alt:s.title,className:"w-8 h-8 object-contain"}):e.jsx(t,{className:`w-6 h-6 ${s.color}`})}),e.jsx(C,{children:s.title}),e.jsx(E,{children:s.description})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.stats.species}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Esp√®ces"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.stats.occurrences}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Occurrences"})]}),s.stats.plots&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.stats.plots}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parcelles"})]}),s.stats.shapes&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.stats.shapes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Formes"})]})]}),e.jsx("div",{className:"space-y-2 pt-4 border-t",children:s.benefits.map((n,a)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s.bgColor}`}),e.jsx("span",{className:"text-sm",children:n})]},a))})]})]},r)})})]})}const Jt=[{name:"Philippe Birnbaum",nickname:"La Source",role:"CIRAD - UMR AMAP",description:"Le visionnaire qui a tout d√©clench√©",icon:_e,photo:"/team/philippe.png",color:"text-yellow-600",bgColor:"bg-yellow-600/10"},{name:"Dimitri Justeau-Allaire",nickname:"Le Sorcier",role:"IRD - UMR AMAP",description:"Le magicien des algorithmes et des donn√©es spatiales",icon:Ws,photo:"/team/dimitri.jpeg",color:"text-purple-600",bgColor:"bg-purple-600/10"},{name:"Gilles Dauby",nickname:"Le Cobaye",role:"IRD - UMR AMAP",description:"Le testeur intr√©pide qui fait marcher tout √ßa",icon:Hs,photo:"/team/gilles.png",color:"text-green-600",bgColor:"bg-green-600/10"},{name:"Julien Barbe",nickname:"Le Bourreau",role:"Ind√©pendant",description:"Le codeur qui transforme les r√™ves en r√©alit√©",icon:tt,photo:"/team/julien.png",color:"text-red-600",bgColor:"bg-red-600/10"}],Yt=[{name:"GitHub",icon:ws,url:"https://github.com/niamoto/niamoto",description:"Code source et contributions"},{name:"Documentation",icon:Pe,url:"https://niamoto.readthedocs.io/",description:"Guides et tutoriels"},{name:"Contact",icon:dt,url:"mailto:julien.barbe@me.com",description:"Nous contacter"}],Zt=[{name:"Province Nord",logo:"/partners/pn_100.png",url:"https://www.province-nord.nc/",description:"Partenaire institutionnel et financier"},{name:"Province Sud",logo:"/partners/ps_100.png",url:"https://www.province-sud.nc/",description:"Partenaire institutionnel"},{name:"Endemia",logo:"/partners/endemia_100.png",url:"https://endemia.nc/",description:"Plateforme collaborative sur la biodiversit√©"},{name:"UMR AMAP",logo:"/partners/amap_100.png",url:"https://amap.cirad.fr/",description:"Unit√© Mixte de Recherche botAnique et Mod√©lisation de l'Architecture des Plantes"},{name:"Herbarium",logo:"/partners/herbarium_100.png",url:"http://publish.plantnet-project.org/project/nou",description:"Herbier de Nouvelle-Cal√©donie"},{name:"IAC",logo:"/partners/iac_100.png",url:"https://iac.nc/",description:"Institut Agronomique n√©o-Cal√©donien"},{name:"IRD",logo:"/partners/ird_100.png",url:"https://nouvelle-caledonie.ird.fr/",description:"Institut de Recherche pour le D√©veloppement"},{name:"Cirad",logo:"/partners/cirad_100.png",url:"https://cirad.fr/",description:"Centre de coop√©ration internationale en recherche agronomique"},{name:"OFB",logo:"/partners/ofb_100.png",url:"https://www.ofb.gouv.fr/",description:"Office Fran√ßais de la Biodiversit√©"}];function Kt(){return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-12 py-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("img",{src:Ge,alt:"Niamoto",className:"w-14 h-14 object-contain"}),e.jsx("h2",{className:"text-4xl font-bold",children:"Niamoteam"}),e.jsx("img",{src:Ge,alt:"Niamoto",className:"w-14 h-14 object-contain"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Projet collaboratif open-source pour la conservation de la biodiversit√©"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Jt.map(s=>{const r=s.icon;return e.jsxs(p,{className:"border-2 hover:shadow-xl transition-all hover:scale-105",children:[e.jsxs(w,{className:"text-center",children:[e.jsxs("div",{className:"mb-6 mx-auto relative",children:[e.jsxs("div",{className:`w-32 h-32 rounded-full ${s.bgColor} flex items-center justify-center overflow-hidden border-4 border-background shadow-lg`,children:[e.jsx("img",{src:s.photo,alt:s.name,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none";const n=t.currentTarget.nextElementSibling;n&&(n.style.display="flex")}}),e.jsx("div",{className:"w-full h-full hidden items-center justify-center",children:e.jsx(r,{className:`w-16 h-16 ${s.color}`})})]}),e.jsxs(b,{className:`absolute -bottom-3 left-1/2 -translate-x-1/2 bg-white dark:bg-gray-900 ${s.color} border-2 border-background shadow-lg font-bold px-3 py-1 flex items-center gap-1.5`,children:[e.jsx(r,{className:`w-4 h-4 ${s.color}`}),s.nickname]})]}),e.jsx(C,{className:"text-xl mt-4",children:s.name}),e.jsx(E,{className:"text-sm font-medium",children:s.role})]}),e.jsx(j,{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground italic",children:s.description})})]},s.name)})}),e.jsxs(p,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20 border-blue-200 dark:border-blue-800",children:[e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(at,{className:"w-6 h-6 text-blue-600"}),e.jsx(C,{children:"Partenaires & Financeurs"})]}),e.jsxs(E,{className:"text-base",children:["Le d√©veloppement de Niamoto s'inscrit dans le cadre du projet de recherche",e.jsx("strong",{className:"text-foreground",children:` "Partenariat pour l'Analyse des DynaMIques de REforestation et de la r√©silience foresti√®re (ADMIRE)"`}),", √©tabli entre la Province Nord, l'IAC et le Cirad. Ce projet vise √† d√©velopper des outils informatiques pour l'aide √† la d√©cision dans la gestion des espaces naturels de la Province Nord de la Nouvelle-Cal√©donie."]})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-6 items-center justify-items-center",children:Zt.map(s=>e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex flex-col items-center gap-3 group",children:[e.jsx("div",{className:"w-20 h-20 bg-white dark:bg-gray-800 rounded-lg p-2 shadow-md group-hover:shadow-xl transition-all group-hover:scale-105 flex items-center justify-center",children:e.jsx("img",{src:s.logo,alt:s.name,className:"w-full h-full object-contain",title:s.description})}),e.jsx("p",{className:"text-xs text-center text-muted-foreground font-medium group-hover:text-foreground transition-colors",children:s.name})]},s.name))})})]}),e.jsxs(p,{className:"bg-gradient-to-br from-primary/5 to-primary/10 border-primary/20",children:[e.jsxs(w,{children:[e.jsx(C,{children:"Rejoignez-nous"}),e.jsx(E,{children:"Contribuez au projet ou contactez-nous pour en savoir plus"})]}),e.jsx(j,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Yt.map(s=>{const r=s.icon;return e.jsx(q,{variant:"outline",className:"h-auto flex-col items-start p-4 hover:bg-primary/10",asChild:!0,children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 w-full",children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:s.name})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-left",children:s.description})]})},s.name)})})})]}),e.jsx(p,{className:"text-center border-dashed",children:e.jsxs(j,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(ee,{className:"w-5 h-5 text-green-600"}),e.jsx(b,{variant:"outline",className:"text-green-600 border-green-600",children:"Open Source"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground max-w-2xl mx-auto",children:["Niamoto est un projet open-source sous licence GPL-3.0. Toutes les contributions sont les bienvenues !",e.jsx("br",{}),e.jsx("span",{className:"text-xs opacity-75",children:"D√©velopp√© avec passion pour la conservation de la biodiversit√© mondiale"})]})]})})]})}function Qt({}){return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(b,{variant:"outline",className:"mb-4",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"Open Source"]}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold",children:"Pr√™t √† transformer vos donn√©es ?"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Rejoignez la communaut√© Niamoto et cr√©ez votre site de donn√©es √©cologiques en quelques minutes"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(q,{size:"lg",className:"group",onClick:()=>window.open("https://github.com/niamoto/niamoto","_blank"),children:[e.jsx(ws,{className:"mr-2 h-5 w-5"}),"Commencer sur GitHub",e.jsx(he,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]}),e.jsxs(q,{size:"lg",variant:"outline",onClick:()=>window.open("https://niamoto.readthedocs.io/","_blank"),children:[e.jsx(Pe,{className:"mr-2 h-5 w-5"}),"Lire la documentation"]})]}),e.jsx(p,{className:"max-w-2xl mx-auto",children:e.jsx(j,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-center",children:"Installation rapide"}),e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsx("code",{className:"text-sm font-mono",children:"pip install niamoto"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:"niamoto init"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:"niamoto import"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:"niamoto transform"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:"niamoto export"})]})]})]})})}),e.jsxs("div",{className:"text-center pt-8 space-y-4",children:[e.jsx("p",{className:"text-lg text-muted-foreground",children:"Construit avec üíö pour la communaut√© scientifique"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(b,{variant:"secondary",children:"v0.7.3"}),e.jsx(b,{variant:"secondary",children:"GPL-3.0"}),e.jsx(b,{variant:"secondary",children:"Python 3.11+"})]})]})]})}function Xt(){return e.jsxs("div",{className:"space-y-16",children:[e.jsx(Ut,{}),e.jsx("div",{className:"border-t border-border/50"}),e.jsx(Kt,{}),e.jsx("div",{className:"border-t border-border/50"}),e.jsx(Qt,{})]})}function er(){const s=[{name:"Bootstrap Wizard",description:"Drag & drop ‚Üí Configuration automatique",path:"/setup/bootstrap",features:["D√©tection automatique","G√©n√©ration de configs","Preview temps r√©el"]},{name:"Pipeline Editor",description:"√âditeur visuel de flux",path:"/setup/pipeline",features:["N≈ìuds intelligents","Suggestions contextuelles","Export YAML"]},{name:"Goal-Driven Page Builder",description:"Approche invers√©e : page ‚Üí config",path:"/demos/goal-driven",features:["Conception visuelle","G√©n√©ration automatique","Configuration sans YAML"]}],r=[{name:"LIDA",org:"Microsoft Research",description:"Automatic Generation of Visualizations and Infographics using LLMs",url:"https://github.com/microsoft/lida",paper:"https://arxiv.org/abs/2303.02927"},{name:"Data Formulator",org:"Microsoft Research",description:"AI-powered concept-driven data transformation",url:"https://github.com/microsoft/data-formulator",paper:"https://arxiv.org/html/2408.16119v2"}];return e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-16 py-12",children:[e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs(b,{className:"mb-4  dark:text-gray-800 border-none",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"Recherche & D√©veloppement"]}),e.jsx("h2",{className:"text-5xl font-bold  bg-clip-text",children:"Perspectives & √âvolutions"}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Simplifier la configuration des pages √©cologiques gr√¢ce √† des interfaces graphiques ergonomiques"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-gradient-to-br from-amber-200/30 to-orange-200/30",children:e.jsx(Ss,{className:"w-8 h-8 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Le D√©fi : Configuration Complexe"}),e.jsx("p",{className:"text-muted-foreground",children:"Besoin d'ergonomie pour la g√©n√©ration de pages"})]})]}),e.jsxs(p,{className:"border-2 border-amber-300/30",children:[e.jsxs(w,{children:[e.jsx(C,{children:"Constats"}),e.jsx(E,{children:"La configuration actuelle devient complexe √† mesure que le projet √©volue"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 shrink-0"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Fichiers YAML manuels"})," : √âdition directe requise pour configurer les transformations et widgets"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 shrink-0"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Param√®tres nombreux"})," : Chaque plugin a ses propres sch√©mas et options"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 mt-2 shrink-0"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Cycle it√©ratif long"})," : √âditer YAML ‚Üí Ex√©cuter pipeline ‚Üí Voir r√©sultat ‚Üí Recommencer"]})]})]}),e.jsx("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-950/10 border border-amber-200/50 dark:border-amber-900/30 rounded-lg mt-4",children:e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-200",children:[e.jsx("strong",{children:"Objectif :"})," Cr√©er des interfaces graphiques qui permettent de configurer et pr√©visualiser les pages en temps r√©el, sans √©diter manuellement les fichiers de configuration."]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-gradient-to-br from-teal-200/30 to-cyan-200/30",children:e.jsx(ds,{className:"w-8 h-8 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Prototypes d'Interfaces"}),e.jsx("p",{className:"text-muted-foreground",children:"Interfaces de test dans la section Labs"})]})]}),e.jsxs(p,{className:"border-2",children:[e.jsxs(w,{children:[e.jsx(C,{children:"Prototypes Actuels"}),e.jsx(E,{children:"Plusieurs interfaces de test sont d√©j√† disponibles dans le menu Labs"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(t=>e.jsxs(p,{className:"border hover:shadow-md transition-shadow",children:[e.jsxs(w,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{className:"text-base",children:t.name}),e.jsxs(b,{variant:"outline",className:"text-teal-400 border-teal-300",children:[e.jsx(ds,{className:"w-3 h-3 mr-1"}),"Labs"]})]}),e.jsx(E,{className:"text-sm",children:t.description})]}),e.jsxs(j,{children:[e.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:t.features.map((n,a)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-teal-400 shrink-0"}),n]},a))}),e.jsx(q,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs("a",{href:t.path,children:["Tester",e.jsx(he,{className:"w-3 h-3 ml-2"})]})})]})]},t.name))}),e.jsx("div",{className:"mt-6 p-4 bg-teal-50/50 dark:bg-teal-950/10 border border-teal-200/50 dark:border-teal-900/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_e,{className:"w-5 h-5 text-teal-400 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-teal-700 dark:text-teal-200",children:"Prototype √† venir : Configuration de Page en Temps R√©el"}),e.jsx("p",{className:"text-sm text-teal-600 dark:text-teal-300 mt-1",children:"Une interface permettant de configurer une page taxon en temps r√©el, avec preview instantan√© des widgets et de la mise en page, sans √©diter manuellement les fichiers YAML."})]})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-gradient-to-br from-sky-200/30 to-cyan-200/30",children:e.jsx(Zs,{className:"w-8 h-8 text-sky-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Exploration de l'Assistance ML"}),e.jsx("p",{className:"text-muted-foreground",children:"Recherche en cours, approche en √©valuation"})]})]}),e.jsxs(p,{className:"border-2 border-sky-300/30",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-sky-400"}),"Potentiel du Machine Learning"]}),e.jsx(E,{children:"Dans le contexte d'interfaces ergonomiques, le ML pourrait assister l'utilisateur"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre syst√®me combine extraction de features statistiques et d√©tection de patterns s√©mantiques pour identifier automatiquement les types de colonnes dans vos donn√©es √©cologiques. Cette approche est encore en phase d'√©valuation pour d√©terminer si elle peut r√©ellement simplifier la configuration."})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-400 mt-2 shrink-0"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"D√©tection de types"})," : Random Forest avec features statistiques pour identifier diam√®tres, hauteurs, noms d'esp√®ces, etc."]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-400 mt-2 shrink-0"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Suggestions contextuelles"})," : Proposer automatiquement des widgets appropri√©s selon les types d√©tect√©s"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-400 mt-2 shrink-0"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Simplification"})," : R√©duire le nombre de d√©cisions manuelles n√©cessaires lors de la configuration"]})]})]}),e.jsx("div",{className:"p-4 bg-sky-50/50 dark:bg-sky-950/10 border border-sky-200/50 dark:border-sky-900/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-sky-700 dark:text-sky-200",children:[e.jsx("strong",{children:"√âtat actuel :"})," Mod√®le pr√©liminaire en phase de test. L'objectif est d'√©valuer si cette approche apporte r√©ellement une valeur ajout√©e ou si des solutions plus simples suffiraient."]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-full bg-gradient-to-br from-green-200/30 to-emerald-200/30",children:e.jsx(Pe,{className:"w-8 h-8 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold",children:"Inspirations"}),e.jsx("p",{className:"text-muted-foreground",children:"Travaux de recherche en visualisation automatique"})]})]}),e.jsxs(p,{className:"border-2",children:[e.jsxs(w,{children:[e.jsx(C,{children:"Projets de Recherche"}),e.jsx(E,{children:"Travaux r√©cents sur la g√©n√©ration automatique de visualisations"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(t=>e.jsxs(p,{className:"border",children:[e.jsxs(w,{className:"pb-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(C,{className:"text-lg",children:t.name}),e.jsx(b,{variant:"secondary",className:"text-xs",children:t.org})]})}),e.jsx(E,{className:"mt-2 text-sm",children:t.description})]}),e.jsxs(j,{className:"space-y-2",children:[e.jsxs(q,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>window.open(t.url,"_blank"),children:[e.jsx(ee,{className:"w-3 h-3 mr-2"}),"GitHub"]}),e.jsxs(q,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>window.open(t.paper,"_blank"),children:[e.jsx(Pe,{className:"w-3 h-3 mr-2"}),"Paper"]})]})]},t.name))}),e.jsx("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ces projets explorent l'utilisation de LLMs et d'approches d'IA pour g√©n√©rer automatiquement des visualisations de donn√©es. Ils peuvent inspirer notre r√©flexion sur l'assistance √† la configuration, tout en restant conscients des diff√©rences de contexte entre donn√©es tabulaires g√©n√©riques et donn√©es √©cologiques sp√©cifiques."})})]})]})]}),e.jsxs("div",{className:"pt-8 border-t space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"R√©f√©rences Scientifiques"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{children:'‚Ä¢ Hulsebos, M., et al. (2019). "Sherlock: A Deep Learning Approach to Semantic Data Type Detection". MIT'}),e.jsx("p",{children:'‚Ä¢ Zhang, D., et al. (2024). "Pythagoras: A GNN-based Approach for Table Column Type Prediction"'}),e.jsx("p",{children:'‚Ä¢ Koutras, C., et al. (2023). "GitTables: A Large-Scale Corpus of Relational Tables". arXiv:2106.07258'})]})]})]})}function sr({sections:s,currentSection:r,onSectionClick:t}){return e.jsx("nav",{className:"bg-card/80 backdrop-blur-lg rounded-lg shadow-lg p-3 mx-auto",children:e.jsx("ul",{className:"flex flex-wrap gap-3 justify-center",children:s.map((n,a)=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>t(a),className:ne("group flex items-center gap-2 px-4 py-2 rounded-md transition-all text-sm","hover:bg-accent",r===a&&"bg-primary/10"),"aria-label":`Aller √† la section ${n}`,children:[e.jsx("div",{className:ne("w-2 h-2 rounded-full transition-all",r===a?"bg-primary":"bg-muted-foreground/30 group-hover:bg-muted-foreground/50")}),e.jsx("span",{className:ne("text-sm font-medium transition-all",r===a?"text-primary":"text-muted-foreground group-hover:text-foreground"),children:n})]})},n))})})}function wr(){const{currentSection:s,sections:r,setCurrentSection:t,loadConfiguration:n}=Le(),a=l.useRef([]),h=l.useRef(!1),c=l.useRef(!1),v=l.useRef(!1),i=l.useRef(null),f=[_t,Ft,Wt,Xt,er];l.useEffect(()=>{i.current=document.querySelector("main")},[]),l.useEffect(()=>{n()},[n]),l.useEffect(()=>{if(!i.current)return;const x=i.current;t(0),c.current=!0,v.current=!1,window.location.hash&&window.history.replaceState(null,"",window.location.pathname),x.scrollTo({top:0,left:0,behavior:"instant"});const o=setTimeout(()=>{c.current=!1,v.current=!0},500),g=()=>{c.current||(h.current=!0)};return x.addEventListener("scroll",g),()=>{x.removeEventListener("scroll",g),clearTimeout(o)}},[t]),l.useEffect(()=>{if(!i.current)return;const x=new IntersectionObserver(o=>{if(!v.current||!h.current)return;const g=o.filter(A=>A.isIntersecting).map(A=>({index:a.current.indexOf(A.target),ratio:A.intersectionRatio})).sort((A,M)=>M.ratio-A.ratio);g.length>0&&g[0].index!==-1&&t(g[0].index)},{root:i.current,threshold:[0,.25,.5,.75,1],rootMargin:"-100px 0px -50% 0px"});return a.current.forEach(o=>{o&&x.observe(o)}),()=>{a.current.forEach(o=>{o&&x.unobserve(o)})}},[t]);const m=x=>{h.current=!0,c.current=!0,t(x),a.current[x]?.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{c.current=!1},600)};l.useEffect(()=>{const x=f.length,o=g=>{if(!(g.target instanceof HTMLInputElement||g.target instanceof HTMLTextAreaElement))switch(g.key){case"ArrowLeft":g.preventDefault(),s>0&&m(s-1);break;case"ArrowRight":g.preventDefault(),s<x-1&&m(s+1);break}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s]);const y=["Vue d'ensemble","Pipeline","API & Int√©gration","Communaut√©","Perspectives"];return e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-b from-background to-secondary/10",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:e.jsx(Ae,{value:(s+1)/r.length*100,className:"h-1 rounded-none"})}),e.jsx("div",{className:"fixed top-24 left-0 right-0 z-40",children:e.jsx("div",{className:"ml-[250px] flex justify-center",children:e.jsx(sr,{sections:y,currentSection:s,onSectionClick:m})})}),e.jsx("div",{className:"container max-w-7xl mx-auto pt-12",children:f.map((x,o)=>e.jsx("section",{ref:g=>{a.current[o]=g},id:r[o],className:"relative min-h-screen flex items-start justify-center py-20",children:e.jsx(x,{})},r[o]))}),s>0&&e.jsx("button",{onClick:()=>m(0),className:"fixed bottom-8 right-8 z-40 p-3 bg-primary text-primary-foreground rounded-full shadow-lg hover:scale-110 transition-transform","aria-label":"Retour en haut",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),e.jsx("polyline",{points:"5 12 12 5 19 12"})]})})]})}export{wr as default};
