import{q as He,r as x,av as xe,aw as ue,t as re,j as e,v as te,ax as Ue,w as k,s as L,ay as Ke,x as O,az as We,y as Ye,z as Je,A as F,ag as g,aA as Ze,aB as he,aC as Qe,aD as Xe,aE as es,aF as ss,aa as rs,C as I,g as Y,D as ts,H as as,P as is,a2 as J,e as os,f as ns,k as cs,aG as w,M as b,aH as E,Y as _,h as G,Z as R,aI as ls,aJ as le,V as y,I as Z,N as ds,O as ms,Q as ps,R as xs,U as de,W as Q,B as S,ab as us,$ as hs,F as fs}from"./index-DxSNfwTo.js";import{D as gs,A as js}from"./DemoWrapper-BBh5iNb5.js";import{P as vs}from"./progress-CP3viOl4.js";import{d as X}from"./js-yaml-yTPt38rv.js";import{F as bs}from"./file-output-BDzy7Qas.js";import{F as Ns}from"./file-code-JSNlsDoc.js";import{S as ys}from"./sparkles-K0ediSEW.js";import{A as Cs}from"./arrow-right-jYSyL5Rl.js";const ws=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],As=He("circle",ws);var ae="Radio",[_s,fe]=te(ae),[Rs,Es]=_s(ae),ge=x.forwardRef((t,n)=>{const{__scopeRadio:s,name:a,checked:i=!1,required:o,disabled:m,value:p="on",onCheck:u,form:f,...h}=t,[r,l]=x.useState(null),d=L(n,j=>l(j)),c=x.useRef(!1),v=r?f||!!r.closest("form"):!0;return e.jsxs(Rs,{scope:s,checked:i,disabled:m,children:[e.jsx(k.button,{type:"button",role:"radio","aria-checked":i,"data-state":Ne(i),"data-disabled":m?"":void 0,disabled:m,value:p,...h,ref:d,onClick:O(t.onClick,j=>{i||u?.(),v&&(c.current=j.isPropagationStopped(),c.current||j.stopPropagation())})}),v&&e.jsx(be,{control:r,bubbles:!c.current,name:a,value:p,checked:i,required:o,disabled:m,form:f,style:{transform:"translateX(-100%)"}})]})});ge.displayName=ae;var je="RadioIndicator",ve=x.forwardRef((t,n)=>{const{__scopeRadio:s,forceMount:a,...i}=t,o=Es(je,s);return e.jsx(We,{present:a||o.checked,children:e.jsx(k.span,{"data-state":Ne(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:n})})});ve.displayName=je;var Ss="RadioBubbleInput",be=x.forwardRef(({__scopeRadio:t,control:n,checked:s,bubbles:a=!0,...i},o)=>{const m=x.useRef(null),p=L(m,o),u=Ye(s),f=Je(n);return x.useEffect(()=>{const h=m.current;if(!h)return;const r=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(r,"checked").set;if(u!==s&&d){const c=new Event("click",{bubbles:a});d.call(h,s),h.dispatchEvent(c)}},[u,s,a]),e.jsx(k.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:p,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});be.displayName=Ss;function Ne(t){return t?"checked":"unchecked"}var ks=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],V="RadioGroup",[Is]=te(V,[xe,fe]),ye=xe(),Ce=fe(),[Ps,Ds]=Is(V),we=x.forwardRef((t,n)=>{const{__scopeRadioGroup:s,name:a,defaultValue:i,value:o,required:m=!1,disabled:p=!1,orientation:u,dir:f,loop:h=!0,onValueChange:r,...l}=t,d=ye(s),c=ue(f),[v,j]=re({prop:o,defaultProp:i??null,onChange:r,caller:V});return e.jsx(Ps,{scope:s,name:a,required:m,disabled:p,value:v,onValueChange:j,children:e.jsx(Ue,{asChild:!0,...d,orientation:u,dir:c,loop:h,children:e.jsx(k.div,{role:"radiogroup","aria-required":m,"aria-orientation":u,"data-disabled":p?"":void 0,dir:c,...l,ref:n})})})});we.displayName=V;var Ae="RadioGroupItem",_e=x.forwardRef((t,n)=>{const{__scopeRadioGroup:s,disabled:a,...i}=t,o=Ds(Ae,s),m=o.disabled||a,p=ye(s),u=Ce(s),f=x.useRef(null),h=L(n,f),r=o.value===i.value,l=x.useRef(!1);return x.useEffect(()=>{const d=v=>{ks.includes(v.key)&&(l.current=!0)},c=()=>l.current=!1;return document.addEventListener("keydown",d),document.addEventListener("keyup",c),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",c)}},[]),e.jsx(Ke,{asChild:!0,...p,focusable:!m,active:r,children:e.jsx(ge,{disabled:m,required:o.required,checked:r,...u,...i,name:o.name,ref:h,onCheck:()=>o.onValueChange(i.value),onKeyDown:O(d=>{d.key==="Enter"&&d.preventDefault()}),onFocus:O(i.onFocus,()=>{l.current&&f.current?.click()})})})});_e.displayName=Ae;var Ts="RadioGroupIndicator",Re=x.forwardRef((t,n)=>{const{__scopeRadioGroup:s,...a}=t,i=Ce(s);return e.jsx(ve,{...i,...a,ref:n})});Re.displayName=Ts;var Ee=we,Se=_e,Fs=Re;const ke=x.forwardRef(({className:t,...n},s)=>e.jsx(Ee,{className:F("grid gap-2",t),...n,ref:s}));ke.displayName=Ee.displayName;const M=x.forwardRef(({className:t,...n},s)=>e.jsx(Se,{ref:s,className:F("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(Fs,{className:"flex items-center justify-center",children:e.jsx(As,{className:"h-2.5 w-2.5 fill-current text-current"})})}));M.displayName=Se.displayName;var N="Accordion",Gs=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ie,Ms,Os]=Ze(N),[q]=te(N,[Os,he]),oe=he(),Ie=g.forwardRef((t,n)=>{const{type:s,...a}=t,i=a,o=a;return e.jsx(ie.Provider,{scope:t.__scopeAccordion,children:s==="multiple"?e.jsx(qs,{...o,ref:n}):e.jsx(Vs,{...i,ref:n})})});Ie.displayName=N;var[Pe,$s]=q(N),[De,Ls]=q(N,{collapsible:!1}),Vs=g.forwardRef((t,n)=>{const{value:s,defaultValue:a,onValueChange:i=()=>{},collapsible:o=!1,...m}=t,[p,u]=re({prop:s,defaultProp:a??"",onChange:i,caller:N});return e.jsx(Pe,{scope:t.__scopeAccordion,value:g.useMemo(()=>p?[p]:[],[p]),onItemOpen:u,onItemClose:g.useCallback(()=>o&&u(""),[o,u]),children:e.jsx(De,{scope:t.__scopeAccordion,collapsible:o,children:e.jsx(Te,{...m,ref:n})})})}),qs=g.forwardRef((t,n)=>{const{value:s,defaultValue:a,onValueChange:i=()=>{},...o}=t,[m,p]=re({prop:s,defaultProp:a??[],onChange:i,caller:N}),u=g.useCallback(h=>p((r=[])=>[...r,h]),[p]),f=g.useCallback(h=>p((r=[])=>r.filter(l=>l!==h)),[p]);return e.jsx(Pe,{scope:t.__scopeAccordion,value:m,onItemOpen:u,onItemClose:f,children:e.jsx(De,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(Te,{...o,ref:n})})})}),[zs,z]=q(N),Te=g.forwardRef((t,n)=>{const{__scopeAccordion:s,disabled:a,dir:i,orientation:o="vertical",...m}=t,p=g.useRef(null),u=L(p,n),f=Ms(s),r=ue(i)==="ltr",l=O(t.onKeyDown,d=>{if(!Gs.includes(d.key))return;const c=d.target,v=f().filter(W=>!W.ref.current?.disabled),j=v.findIndex(W=>W.ref.current===c),ce=v.length;if(j===-1)return;d.preventDefault();let C=j;const B=0,H=ce-1,U=()=>{C=j+1,C>H&&(C=B)},K=()=>{C=j-1,C<B&&(C=H)};switch(d.key){case"Home":C=B;break;case"End":C=H;break;case"ArrowRight":o==="horizontal"&&(r?U():K());break;case"ArrowDown":o==="vertical"&&U();break;case"ArrowLeft":o==="horizontal"&&(r?K():U());break;case"ArrowUp":o==="vertical"&&K();break}const Be=C%ce;v[Be].ref.current?.focus()});return e.jsx(zs,{scope:s,disabled:a,direction:i,orientation:o,children:e.jsx(ie.Slot,{scope:s,children:e.jsx(k.div,{...m,"data-orientation":o,ref:u,onKeyDown:a?void 0:l})})})}),$="AccordionItem",[Bs,ne]=q($),Fe=g.forwardRef((t,n)=>{const{__scopeAccordion:s,value:a,...i}=t,o=z($,s),m=$s($,s),p=oe(s),u=Qe(),f=a&&m.value.includes(a)||!1,h=o.disabled||t.disabled;return e.jsx(Bs,{scope:s,open:f,disabled:h,triggerId:u,children:e.jsx(Xe,{"data-orientation":o.orientation,"data-state":Ve(f),...p,...i,ref:n,disabled:h,open:f,onOpenChange:r=>{r?m.onItemOpen(a):m.onItemClose(a)}})})});Fe.displayName=$;var Ge="AccordionHeader",Me=g.forwardRef((t,n)=>{const{__scopeAccordion:s,...a}=t,i=z(N,s),o=ne(Ge,s);return e.jsx(k.h3,{"data-orientation":i.orientation,"data-state":Ve(o.open),"data-disabled":o.disabled?"":void 0,...a,ref:n})});Me.displayName=Ge;var se="AccordionTrigger",Oe=g.forwardRef((t,n)=>{const{__scopeAccordion:s,...a}=t,i=z(N,s),o=ne(se,s),m=Ls(se,s),p=oe(s);return e.jsx(ie.ItemSlot,{scope:s,children:e.jsx(es,{"aria-disabled":o.open&&!m.collapsible||void 0,"data-orientation":i.orientation,id:o.triggerId,...p,...a,ref:n})})});Oe.displayName=se;var $e="AccordionContent",Le=g.forwardRef((t,n)=>{const{__scopeAccordion:s,...a}=t,i=z(N,s),o=ne($e,s),m=oe(s);return e.jsx(ss,{role:"region","aria-labelledby":o.triggerId,"data-orientation":i.orientation,...m,...a,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Le.displayName=$e;function Ve(t){return t?"open":"closed"}var Hs=Ie,Us=Fe,Ks=Me,qe=Oe,ze=Le;const me=Hs,P=x.forwardRef(({className:t,...n},s)=>e.jsx(Us,{ref:s,className:F("border-b",t),...n}));P.displayName="AccordionItem";const D=x.forwardRef(({className:t,children:n,...s},a)=>e.jsx(Ks,{className:"flex",children:e.jsxs(qe,{ref:a,className:F("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...s,children:[n,e.jsx(rs,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));D.displayName=qe.displayName;const T=x.forwardRef(({className:t,children:n,...s},a)=>e.jsx(ze,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:F("pb-4 pt-0",t),children:n})}));T.displayName=ze.displayName;const A=[{id:"imports",title:"Sources de données",icon:ts},{id:"transforms",title:"Transformations",icon:as},{id:"widgets",title:"Widgets",icon:is},{id:"exports",title:"Exports",icon:bs},{id:"review",title:"Révision",icon:Ns}],Ws=["Provinces","Communes","Aires protegées","Substrats","Zone de vie","Captage","Emprises Minières"],Ys=["forest_cover","elevation","rainfall","holdridge"],pe={taxon:[{id:"field_aggregator",name:"Field Aggregator",description:"Agrège les champs de différentes sources"},{id:"geospatial_extractor",name:"Geospatial Extractor",description:"Extrait les données géospatiales"},{id:"top_ranking",name:"Top Ranking",description:"Calcule le classement des éléments"},{id:"time_series_analysis",name:"Time Series",description:"Analyse temporelle des données"},{id:"binned_distribution",name:"Binned Distribution",description:"Distribution par classes"},{id:"statistical_summary",name:"Statistical Summary",description:"Résumés statistiques"}],plot:[{id:"field_aggregator",name:"Field Aggregator",description:"Agrège les champs"},{id:"stats_loader",name:"Stats Loader",description:"Charge les statistiques"},{id:"class_object_series_extractor",name:"Series Extractor",description:"Extrait les séries"}],shape:[{id:"spatial_analysis",name:"Spatial Analysis",description:"Analyse spatiale"},{id:"overlay_analysis",name:"Overlay Analysis",description:"Analyse de superposition"}]},ee=[{id:"interactive_map",name:"Carte interactive",category:"visualization"},{id:"bar_plot",name:"Graphique en barres",category:"chart"},{id:"donut_chart",name:"Graphique en anneau",category:"chart"},{id:"radial_gauge",name:"Jauge radiale",category:"gauge"},{id:"info_grid",name:"Grille d'informations",category:"info"},{id:"hierarchical_nav_widget",name:"Navigation hiérarchique",category:"navigation"}];function ar(){const[t,n]=x.useState(0),[s,a]=x.useState({imports:{taxonomy:!0,occurrences:!0,plots:!1,shapes:[],layers:[]},transforms:{entity:"taxon",plugins:[],customParams:{}},widgets:{selected:[],config:{}},exports:{webEnabled:!0,apiEnabled:!1,staticPages:["home","methodology"],settings:{title:"Niamoto",lang:"fr",primary_color:"#228b22"}}}),[i,o]=x.useState({}),m=(t+1)/A.length*100,p=()=>{const r={};switch(t){case 0:!s.imports.taxonomy&&!s.imports.occurrences&&!s.imports.plots&&(r.general="Sélectionnez au moins une source de données principale");break;case 1:s.transforms.plugins.length===0&&(r.plugins="Sélectionnez au moins un plugin de transformation");break;case 2:s.widgets.selected.length===0&&(r.widgets="Sélectionnez au moins un widget");break;case 3:!s.exports.webEnabled&&!s.exports.apiEnabled&&(r.exports="Activez au moins un type d'export");break}return o(r),Object.keys(r).length===0},u=()=>{p()&&n(Math.min(t+1,A.length-1))},f=()=>{n(Math.max(t-1,0))},h=x.useMemo(()=>{const r={};s.imports.taxonomy&&(r.taxonomy={path:"imports/occurrences.csv",hierarchy:{levels:[{name:"family",column:"family"},{name:"genus",column:"genus"},{name:"species",column:"species"}]}}),s.imports.occurrences&&(r.occurrences={type:"csv",path:"imports/occurrences.csv",identifier:"id_taxonref",location_field:"geo_pt"}),s.imports.plots&&(r.plots={type:"csv",path:"imports/plots.csv",identifier:"id_plot"}),s.imports.shapes.length>0&&(r.shapes=s.imports.shapes.map(c=>({type:c,path:`imports/shapes/${c.toLowerCase()}.gpkg`}))),s.imports.layers.length>0&&(r.layers=s.imports.layers.map(c=>({name:c,type:c.includes("cover")?"vector":"raster",path:`imports/layers/${c}.tif`})));const l=[{group_by:s.transforms.entity,widgets_data:Object.fromEntries(s.transforms.plugins.map(c=>[c,{plugin:c,params:s.transforms.customParams[c]||{}}]))}],d={exports:[]};return s.exports.webEnabled&&d.exports.push({name:"web_pages",enabled:!0,exporter:"html_page_exporter",params:{output_dir:"exports/web",site:s.exports.settings,static_pages:s.exports.staticPages.map(c=>({name:c,template:`${c}.html`,output_file:`${c}.html`}))},groups:[{group_by:s.transforms.entity,widgets:s.widgets.selected.map(c=>{const v=ee.find(j=>j.id===c);return{plugin:c,title:v?.name||c,params:s.widgets.config[c]||{}}})}]}),s.exports.apiEnabled&&d.exports.push({name:"api",enabled:!0,exporter:"api_exporter",params:{output_dir:"exports/api"}}),{import:X(r,{indent:2}),transform:X(l,{indent:2}),export:X(d,{indent:2})}},[s]);return e.jsx(gs,{currentDemo:"wizard-form",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(I,{className:"mb-6",children:e.jsxs(Y,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:A.map((r,l)=>e.jsxs("div",{className:`flex items-center ${l<A.length-1?"flex-1":""}`,children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${l<=t?"bg-primary text-primary-foreground border-primary":"bg-background border-muted-foreground"}`,children:l<t?e.jsx(J,{className:"h-5 w-5"}):e.jsx(r.icon,{className:"h-5 w-5"})}),e.jsx("div",{className:"ml-2",children:e.jsx("p",{className:`text-sm font-medium ${l<=t?"text-foreground":"text-muted-foreground"}`,children:r.title})}),l<A.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${l<t?"bg-primary":"bg-muted"}`})]},r.id))}),e.jsx(vs,{value:m,className:"h-2"})]})}),e.jsxs(I,{className:"mb-6",children:[e.jsxs(os,{children:[e.jsxs(ns,{className:"flex items-center gap-2",children:[g.createElement(A[t].icon,{className:"h-5 w-5"}),A[t].title]}),e.jsxs(cs,{children:["Étape ",t+1," sur ",A.length]})]}),e.jsxs(Y,{children:[t===0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sources principales"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{id:"taxonomy",checked:s.imports.taxonomy,onCheckedChange:r=>a({...s,imports:{...s.imports,taxonomy:!!r}})}),e.jsxs(b,{htmlFor:"taxonomy",className:"flex-1",children:[e.jsx("div",{children:"Taxonomie"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Hiérarchie taxonomique extraite des occurrences"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{id:"occurrences",checked:s.imports.occurrences,onCheckedChange:r=>a({...s,imports:{...s.imports,occurrences:!!r}})}),e.jsxs(b,{htmlFor:"occurrences",className:"flex-1",children:[e.jsx("div",{children:"Occurrences"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Données d'observations des espèces"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{id:"plots",checked:s.imports.plots,onCheckedChange:r=>a({...s,imports:{...s.imports,plots:!!r}})}),e.jsxs(b,{htmlFor:"plots",className:"flex-1",children:[e.jsx("div",{children:"Parcelles"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Données de parcelles d'inventaire"})]})]})]})]}),e.jsx(E,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Formes géographiques"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ws.map(r=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{id:r,checked:s.imports.shapes.includes(r),onCheckedChange:l=>{const d=l?[...s.imports.shapes,r]:s.imports.shapes.filter(c=>c!==r);a({...s,imports:{...s.imports,shapes:d}})}}),e.jsx(b,{htmlFor:r,children:r})]},r))})]}),e.jsx(E,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Couches de données"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ys.map(r=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{id:r,checked:s.imports.layers.includes(r),onCheckedChange:l=>{const d=l?[...s.imports.layers,r]:s.imports.layers.filter(c=>c!==r);a({...s,imports:{...s.imports,layers:d}})}}),e.jsx(b,{htmlFor:r,children:r.replace("_"," ").charAt(0).toUpperCase()+r.slice(1).replace("_"," ")})]},r))})]}),i.general&&e.jsxs(_,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(R,{children:i.general})]})]}),t===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Entité principale"}),e.jsx(ke,{value:s.transforms.entity,onValueChange:r=>a({...s,transforms:{...s.transforms,entity:r,plugins:[]}}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{value:"taxon",id:"entity-taxon"}),e.jsxs(b,{htmlFor:"entity-taxon",className:"flex-1",children:[e.jsx("div",{children:"Taxon"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transformations centrées sur les espèces"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{value:"plot",id:"entity-plot"}),e.jsxs(b,{htmlFor:"entity-plot",className:"flex-1",children:[e.jsx("div",{children:"Parcelle"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transformations centrées sur les parcelles"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{value:"shape",id:"entity-shape"}),e.jsxs(b,{htmlFor:"entity-shape",className:"flex-1",children:[e.jsx("div",{children:"Forme géographique"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transformations centrées sur les zones"})]})]})]})})]}),e.jsx(E,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Plugins de transformation"}),e.jsx("div",{className:"space-y-3",children:pe[s.transforms.entity].map(r=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(w,{id:r.id,checked:s.transforms.plugins.includes(r.id),onCheckedChange:l=>{const d=l?[...s.transforms.plugins,r.id]:s.transforms.plugins.filter(c=>c!==r.id);a({...s,transforms:{...s.transforms,plugins:d}})}}),e.jsxs(b,{htmlFor:r.id,className:"flex-1",children:[e.jsx("div",{children:r.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.description})]})]},r.id))})]}),s.transforms.plugins.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Configuration des plugins"}),e.jsx(me,{type:"single",collapsible:!0,children:s.transforms.plugins.map(r=>{const l=pe[s.transforms.entity].find(d=>d.id===r);return e.jsxs(P,{value:r,children:[e.jsx(D,{children:l?.name}),e.jsx(T,{children:e.jsxs(_,{children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx(R,{children:"Configuration avancée disponible dans l'éditeur complet"})]})})]},r)})})]})]}),i.plugins&&e.jsxs(_,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(R,{children:i.plugins})]})]}),t===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsx(le,{children:"Widgets recommandés"}),e.jsx(R,{children:"Basé sur vos transformations, nous recommandons les widgets suivants"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sélection des widgets"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:ee.map(r=>e.jsx(I,{className:`cursor-pointer transition-colors ${s.widgets.selected.includes(r.id)?"border-primary bg-primary/5":"hover:bg-accent"}`,onClick:()=>{const l=s.widgets.selected.includes(r.id)?s.widgets.selected.filter(d=>d!==r.id):[...s.widgets.selected,r.id];a({...s,widgets:{...s.widgets,selected:l}})},children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.name}),e.jsx(y,{variant:"outline",className:"mt-1 text-xs",children:r.category})]}),e.jsx(w,{checked:s.widgets.selected.includes(r.id),className:"pointer-events-none"})]})})},r.id))})]}),i.widgets&&e.jsxs(_,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(R,{children:i.widgets})]})]}),t===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Types d'export"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{className:`p-4 cursor-pointer ${s.exports.webEnabled?"border-primary bg-primary/5":""}`,onClick:()=>a({...s,exports:{...s.exports,webEnabled:!s.exports.webEnabled}}),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Site Web Statique"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Génère un site web complet avec visualisations"})]}),e.jsx(w,{checked:s.exports.webEnabled,className:"pointer-events-none"})]})}),e.jsx(I,{className:`p-4 cursor-pointer ${s.exports.apiEnabled?"border-primary bg-primary/5":""}`,onClick:()=>a({...s,exports:{...s.exports,apiEnabled:!s.exports.apiEnabled}}),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"API REST"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Expose les données via une API REST"})]}),e.jsx(w,{checked:s.exports.apiEnabled,className:"pointer-events-none"})]})})]})]}),s.exports.webEnabled&&e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Configuration du site"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Titre du site"}),e.jsx(Z,{value:s.exports.settings.title,onChange:r=>a({...s,exports:{...s.exports,settings:{...s.exports.settings,title:r.target.value}}})})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Langue"}),e.jsxs(ds,{value:s.exports.settings.lang,onValueChange:r=>a({...s,exports:{...s.exports,settings:{...s.exports.settings,lang:r}}}),children:[e.jsx(ms,{children:e.jsx(ps,{})}),e.jsxs(xs,{children:[e.jsx(de,{value:"fr",children:"Français"}),e.jsx(de,{value:"en",children:"English"})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{children:"Couleur principale"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Z,{type:"color",value:s.exports.settings.primary_color,onChange:r=>a({...s,exports:{...s.exports,settings:{...s.exports.settings,primary_color:r.target.value}}}),className:"w-20 h-10"}),e.jsx(Z,{value:s.exports.settings.primary_color,onChange:r=>a({...s,exports:{...s.exports,settings:{...s.exports.settings,primary_color:r.target.value}}})})]})]})]})]})]}),i.exports&&e.jsxs(_,{variant:"destructive",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx(R,{children:i.exports})]})]}),t===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx(le,{children:"Configuration prête"}),e.jsx(R,{children:"Vérifiez votre configuration avant de générer les fichiers YAML"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Sources de données"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[s.imports.taxonomy&&e.jsx(y,{variant:"outline",children:"Taxonomie"}),s.imports.occurrences&&e.jsx(y,{variant:"outline",children:"Occurrences"}),s.imports.plots&&e.jsx(y,{variant:"outline",children:"Parcelles"}),s.imports.shapes.map(r=>e.jsx(y,{variant:"outline",children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Transformations"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs(y,{children:["Entité: ",s.transforms.entity]}),s.transforms.plugins.map(r=>e.jsx(y,{variant:"secondary",children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Widgets"}),e.jsx("div",{className:"space-y-1 text-sm",children:s.widgets.selected.map(r=>{const l=ee.find(d=>d.id===r);return e.jsx(y,{variant:"outline",children:l?.name},r)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Exports"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[s.exports.webEnabled&&e.jsx(y,{variant:"outline",children:"Site Web"}),s.exports.apiEnabled&&e.jsx(y,{variant:"outline",children:"API REST"})]})]})]}),e.jsx(E,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-4",children:"Fichiers YAML générés"}),e.jsxs(me,{type:"single",collapsible:!0,defaultValue:"import",children:[e.jsxs(P,{value:"import",children:[e.jsx(D,{children:"import.yml"}),e.jsx(T,{children:e.jsx(Q,{className:"h-[200px] w-full rounded-md border p-4",children:e.jsx("pre",{className:"text-xs font-mono",children:e.jsx("code",{children:h.import})})})})]}),e.jsxs(P,{value:"transform",children:[e.jsx(D,{children:"transform.yml"}),e.jsx(T,{children:e.jsx(Q,{className:"h-[200px] w-full rounded-md border p-4",children:e.jsx("pre",{className:"text-xs font-mono",children:e.jsx("code",{children:h.transform})})})})]}),e.jsxs(P,{value:"export",children:[e.jsx(D,{children:"export.yml"}),e.jsx(T,{children:e.jsx(Q,{className:"h-[200px] w-full rounded-md border p-4",children:e.jsx("pre",{className:"text-xs font-mono",children:e.jsx("code",{children:h.export})})})})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(S,{variant:"outline",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Importer config"]}),e.jsxs(S,{children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Télécharger YAML"]}),e.jsxs(S,{variant:"default",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Appliquer config"]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(S,{variant:"outline",onClick:f,disabled:t===0,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Précédent"]}),t<A.length-1?e.jsxs(S,{onClick:u,children:["Suivant",e.jsx(Cs,{className:"h-4 w-4 ml-2"})]}):e.jsxs(S,{variant:"default",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Terminer"]})]})]})})}export{ar as WizardFormDemo};
