import{c as k}from"./assets/RowActions-5NS1uw9x.js";const h=window.MantineCore.Anchor,f=window.MantineCore.Button,S=window.MantineCore.Paper,m=window.MantineCore.Stack,t=window.MantineCore.Text,b=window.MantineCore.TextInput,v=window.MantineCore.Title,r=window.MantineNotifications.notifications,g=window.React.useCallback,l=window.React.useState;function C({context:n}){const[o,d]=l(""),[u,w]=l([]),[c,p]=l(!1),i=g(async()=>{if(!o.trim()){r.show({title:"Error",message:"Please enter a barcode",color:"red"});return}p(!0);try{const a={...(await n.api.post("/plugin/continouous-stock-adjustment/scan/",{barcode:o.trim()})).data,timestamp:new Date};w(E=>[a,...E.slice(0,9)]),a.success?(r.show({title:"Success",message:a.message,color:"green"}),d("")):r.show({title:"Error",message:a.message,color:"red"})}catch(e){const s=e?.response?.data?.message||"Failed to process barcode";r.show({title:"Error",message:s,color:"red"}),w(a=>[{success:!1,message:s,timestamp:new Date},...a.slice(0,9)])}finally{p(!1)}},[o,n.api]),R=g(e=>{e.key==="Enter"&&!c&&i()},[i,c]);return React.createElement(m,{gap:"md"},React.createElement(v,{order:4},React.createElement(h,{href:"/app/plugin/continouous-stock-adjustment/stock-removal/",underline:"hover"},"Quick Stock Removal")),React.createElement(t,{size:"sm",c:"dimmed"},"Scan or enter a barcode to remove stock"),React.createElement(b,{label:"Barcode",placeholder:"Enter or scan barcode...",value:o,onChange:e=>d(e.currentTarget.value),onKeyPress:R,disabled:c,autoFocus:!0}),React.createElement(f,{onClick:i,loading:c,disabled:!o.trim()},"Remove Stock"),u.length>0&&React.createElement(m,{gap:"xs"},React.createElement(t,{size:"sm",fw:500},"Recent Scans"),u.map((e,s)=>React.createElement(S,{key:s,p:"xs",withBorder:!0},React.createElement(m,{gap:"xs"},React.createElement(t,{size:"xs",c:e.success?"green":"red",fw:500},e.success?"✓ Success":"✗ Failed"),React.createElement(t,{size:"xs"},e.message),e.part_name&&React.createElement(t,{size:"xs",c:"dimmed"},"Part: ",e.part_name),e.quantity_removed!==void 0&&React.createElement(t,{size:"xs",c:"dimmed"},"Removed: ",e.quantity_removed," | Remaining:"," ",e.remaining_stock),React.createElement(t,{size:"xs",c:"dimmed"},e.timestamp.toLocaleTimeString()))))))}function M(n){return n?(k(n),React.createElement(C,{context:n})):(console.error("Dashboard: Context is null or undefined"),React.createElement(t,{c:"red"},"Error: Plugin context not provided"))}export{M as renderContinouousStockAdjustmentDashboardItem};
