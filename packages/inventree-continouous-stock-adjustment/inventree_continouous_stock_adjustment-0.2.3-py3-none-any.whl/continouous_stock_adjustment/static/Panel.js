import{c as f}from"./assets/RowActions-5NS1uw9x.js";const k=window.MantineCore.Button,S=window.MantineCore.Paper,m=window.MantineCore.Stack,t=window.MantineCore.Text,h=window.MantineCore.TextInput,C=window.MantineCore.Title,r=window.MantineNotifications.notifications,p=window.React.useCallback,l=window.React.useState;function x({context:n}){const[s,d]=l(""),[u,w]=l([]),[o,g]=l(!1),i=p(async()=>{if(!s.trim()){r.show({title:"Error",message:"Please enter a barcode",color:"red"});return}g(!0);try{const a={...(await n.api.post("/plugin/continouous-stock-adjustment/scan/",{barcode:s.trim()})).data,timestamp:new Date};w(E=>[a,...E.slice(0,9)]),a.success?(r.show({title:"Success",message:a.message,color:"green"}),d("")):r.show({title:"Error",message:a.message,color:"red"})}catch(e){const c=e?.response?.data?.message||"Failed to process barcode";r.show({title:"Error",message:c,color:"red"}),w(a=>[{success:!1,message:c,timestamp:new Date},...a.slice(0,9)])}finally{g(!1)}},[s,n.api]),R=p(e=>{e.key==="Enter"&&!o&&i()},[i,o]);return React.createElement(m,{gap:"md"},React.createElement(C,{order:4},"Quick Stock Removal"),React.createElement(t,{size:"sm",c:"dimmed"},"Scan or enter a barcode to quickly remove stock for this part"),React.createElement(h,{label:"Barcode",placeholder:"Enter or scan barcode...",value:s,onChange:e=>d(e.currentTarget.value),onKeyPress:R,disabled:o,autoFocus:!0}),React.createElement(k,{onClick:i,loading:o,disabled:!s.trim()},"Remove Stock"),u.length>0&&React.createElement(m,{gap:"xs"},React.createElement(t,{size:"sm",fw:500},"Recent Scans"),u.map((e,c)=>React.createElement(S,{key:c,p:"xs",withBorder:!0},React.createElement(m,{gap:"xs"},React.createElement(t,{size:"xs",c:e.success?"green":"red",fw:500},e.success?"✓ Success":"✗ Failed"),React.createElement(t,{size:"xs"},e.message),e.part_name&&React.createElement(t,{size:"xs",c:"dimmed"},"Part: ",e.part_name),e.quantity_removed!==void 0&&React.createElement(t,{size:"xs",c:"dimmed"},"Removed: ",e.quantity_removed," | Remaining:"," ",e.remaining_stock),React.createElement(t,{size:"xs",c:"dimmed"},e.timestamp.toLocaleTimeString()))))))}function b(n){return n?(f(n),React.createElement(x,{context:n})):(console.error("Panel: Context is null or undefined"),React.createElement(t,{c:"red"},"Error: Plugin context not provided"))}export{b as renderContinouousStockAdjustmentPanel};
