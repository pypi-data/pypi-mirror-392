import{c as k}from"./assets/RowActions-5NS1uw9x.js";const S=window.MantineCore.Button,v=window.MantineCore.Container,w=window.MantineCore.Paper,s=window.MantineCore.Stack,t=window.MantineCore.Text,y=window.MantineCore.TextInput,R=window.MantineCore.Title,i=window.MantineNotifications.notifications,E=window.React.useCallback,l=window.React.useState;function C({context:a}){const[c,d]=l(""),[u,p]=l([]),[r,g]=l(!1),m=E(async()=>{if(!c.trim()){i.show({title:"Error",message:"Please enter a barcode",color:"red"});return}g(!0);try{const n={...(await a.api.post("/plugin/continouous-stock-adjustment/scan/",{barcode:c.trim()})).data,timestamp:new Date};p(h=>[n,...h.slice(0,9)]),n.success?(i.show({title:"Success",message:n.message,color:"green"}),d("")):i.show({title:"Error",message:n.message,color:"red"})}catch(e){const o=e?.response?.data?.message||"Failed to process barcode";i.show({title:"Error",message:o,color:"red"}),p(n=>[{success:!1,message:o,timestamp:new Date},...n.slice(0,9)])}finally{g(!1)}},[c,a.api]),f=E(e=>{e.key==="Enter"&&!r&&m()},[m,r]);return React.createElement(v,{size:"md",py:"xl"},React.createElement(s,{gap:"lg"},React.createElement("div",null,React.createElement(R,{order:2},"Quick Stock Removal"),React.createElement(t,{size:"sm",c:"dimmed",mt:"xs"},"Scan or enter a barcode to quickly remove stock from inventory. The system will automatically detect the part and remove the appropriate quantity based on supplier package information.")),React.createElement(w,{shadow:"sm",p:"md",withBorder:!0},React.createElement(s,{gap:"md"},React.createElement(y,{label:"Barcode",placeholder:"Enter or scan barcode...",value:c,onChange:e=>d(e.currentTarget.value),onKeyPress:f,disabled:r,autoFocus:!0,size:"lg"}),React.createElement(S,{onClick:m,loading:r,disabled:!c.trim(),size:"lg",fullWidth:!0},"Remove Stock"))),u.length>0&&React.createElement("div",null,React.createElement(R,{order:4,mb:"md"},"Recent Scans"),React.createElement(s,{gap:"sm"},u.map((e,o)=>React.createElement(w,{key:o,p:"md",withBorder:!0,shadow:"xs"},React.createElement(s,{gap:"xs"},React.createElement(t,{size:"sm",c:e.success?"green":"red",fw:600},e.success?"✓ Success":"✗ Failed"),React.createElement(t,{size:"sm"},e.message),e.part_name&&React.createElement(t,{size:"sm",c:"dimmed"},"Part: ",e.part_name),e.quantity_removed!==void 0&&React.createElement(t,{size:"sm",c:"dimmed"},"Removed: ",e.quantity_removed," | Remaining:"," ",e.remaining_stock),React.createElement(t,{size:"xs",c:"dimmed"},e.timestamp.toLocaleTimeString()))))))))}function P(a){return a?(k(a),React.createElement(C,{context:a})):(console.error("StockRemovalPage: Context is null or undefined"),React.createElement(t,{c:"red"},"Error: Plugin context not provided"))}export{P as renderStockRemovalPage};
