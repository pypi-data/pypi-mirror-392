[project]
name = "chunkcheck"
description = "Chunk and checkpoint memory optimisation"
readme = "README.md"
license = "MIT"
version = "0.1.1"
requires-python = ">=3.9"
dependencies = [
    "torch>=1.12",
]

[dependency-groups]
dev = [
    "pre-commit>=4.2.0",
    "pytest>=8.3.5",
    "pytest-cov>=6.1.1",
]

[tool.ruff]
src = ["src"]
line-length = 88

[tool.ruff.lint]
select = ["ALL"]
ignore = [
    "COM812", # Conflicts with formatter
    "D100", # Allow public modules without docstrings.
    "D102", # Allow public methods without docstrings.
    "D103", # Allow public functions without docstrings.
    "D105", # Allow magic methods without docstrings.
    "D107", # Allow `__init__` functions without docstrings.
    "D203", # one-blank-line-before-class (conflicts with D211)
    "D213", # multi-line-summary-second-line (conflicts with D212)
    "FIX002", # Allow use of TODOs.
    "G004", # Allow f-strings in logging statements for the moment.
    "LOG015", # Ignore this until we stop using the root logger.
    "N817", # Allow CamelCase objects to be imported as acronyms.
    "PLR0913", # Allow unlimited arguments.
    "PLR0915", # Allow unlimited statements.
    "T201", # Allow print statements.
    "TD002", # Allow unassigned TODOs.
    "TD003", # Allow TODOs without a linked issue.
]

[tool.ruff.lint.pycodestyle]
max-line-length = 88
max-doc-length = 88

[tool.ruff.lint.flake8-annotations]
allow-star-arg-any = true

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = [
    "S101", # Allow asserts in tests.
    "INP001", # Allow implicit namespaces in tests.
    "ARG001", # Allow unused function arguments for fixtures in tests.
    "D100", # Allow public modules without docstrings.
]

[build-system]
requires = ["uv_build>=0.9.10,<0.10.0"]
build-backend = "uv_build"
