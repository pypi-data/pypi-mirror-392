# –§–∞–∑–∞ 3: Dataclasses –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è - –í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚úÖ

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ó–∞–º–µ–Ω–∞ dataslots –Ω–∞ dataclasses ‚úÖ

**–ó–∞–º–µ–Ω–µ–Ω–æ –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö:**
- ‚úÖ `pobapi/models.py` - –≤—Å–µ 7 –∫–ª–∞—Å—Å–æ–≤ (Gem, GrantedAbility, SkillGroup, Tree, Keystones, Item, Set)
- ‚úÖ `pobapi/stats.py` - –∫–ª–∞—Å—Å Stats
- ‚úÖ `pobapi/config.py` - –∫–ª–∞—Å—Å Config

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@with_slots`
- –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `from dataslots import with_slots`
- –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `@dataclass` (–≤—Å—Ç—Ä–æ–µ–Ω –≤ Python 3.7+)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—É–±—Ä–∞–Ω–∞ dataslots)
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python
- ‚úÖ –ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π (frozen, field, post_init)
- ‚úÖ –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ IDE
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### 2. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ‚úÖ

**–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `pobapi/model_validators.py`:**

**–ö–ª–∞—Å—Å `ModelValidator`:**
- `validate_type()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- `validate_range()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
- `validate_choice()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
- `validate_not_empty()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
- `validate_positive()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã:**
- `validate_gem_level()` - —É—Ä–æ–≤–µ–Ω—å –≥–µ–º–∞ (1-30)
- `validate_gem_quality()` - –∫–∞—á–µ—Å—Ç–≤–æ –≥–µ–º–∞ (0-30)
- `validate_character_level()` - —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (1-100)
- `validate_item_level_req()` - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ø—Ä–µ–¥–º–µ—Ç–∞ (1-100)
- `validate_rarity()` - —Ä–µ–¥–∫–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–∞ (Normal/Magic/Rare/Unique)
- `validate_resistance_penalty()` - —à—Ç—Ä–∞—Ñ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è (0/-30/-60)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
- ‚úÖ `Gem.__post_init__()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–º–∞
- ‚úÖ `Item.__post_init__()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏, —É—Ä–æ–≤–Ω—è, –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ `Config.__post_init__()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —à—Ç—Ä–∞—Ñ–∞ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚úÖ

**`pyproject.toml`:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `dataslots = "^1.0.2"`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë–æ–ª–µ–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è dataclasses

## –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `pobapi/model_validators.py` - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
2. ‚úÖ `tests/test_model_validators.py` - —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `pobapi/models.py` - –∑–∞–º–µ–Ω–µ–Ω dataslots –Ω–∞ dataclass, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
2. ‚úÖ `pobapi/stats.py` - –∑–∞–º–µ–Ω–µ–Ω dataslots –Ω–∞ dataclass
3. ‚úÖ `pobapi/config.py` - –∑–∞–º–µ–Ω–µ–Ω dataslots –Ω–∞ dataclass, —É–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
4. ‚úÖ `pyproject.toml` - —É–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å dataslots

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **100% –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```python
from pobapi.models import Gem, Item
from pobapi.exceptions import ValidationError

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
try:
    gem = Gem(name="Arc", enabled=True, level=25, quality=20, support=False)
    # level=25 –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è (1-30) ‚úÖ
except ValidationError as e:
    print(f"Validation error: {e}")

try:
    item = Item(
        rarity="Invalid",  # ‚ùå –î–æ–ª–∂–Ω–æ –±—ã—Ç—å Normal/Magic/Rare/Unique
        name="Test Item",
        base="Test Base",
        uid="",
        shaper=False,
        elder=False,
        crafted=False,
        quality=None,
        sockets=None,
        level_req=1,
        item_level=1,
        implicit=None,
        text=""
    )
except ValidationError as e:
    print(f"Validation error: {e}")
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

‚úÖ **–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç pydantic
- –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:**
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
- –ú–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –Ω—É–∂–¥—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ù–µ—Ç overhead –æ—Ç pydantic
- –ë—ã—Å—Ç—Ä–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## –¢–µ—Å—Ç—ã

–°–æ–∑–¥–∞–Ω—ã comprehensive —Ç–µ—Å—Ç—ã:
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ ModelValidator
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –¢–µ—Å—Ç—ã –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚úÖ –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –§–∞–∑–∞ 1: –¢–µ—Å—Ç—ã
- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### ‚úÖ –§–∞–∑–∞ 2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Async –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### ‚úÖ –§–∞–∑–∞ 3: –ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è
- Dataclasses –≤–º–µ—Å—Ç–æ dataslots
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## –ò—Ç–æ–≥–∏

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è dataclasses
- ‚úÖ –ò–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–µ–∑ pydantic
- ‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

–í—Å–µ —Ç—Ä–∏ —Ñ–∞–∑—ã —É–ª—É—á—à–µ–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω—ã! üéâ
