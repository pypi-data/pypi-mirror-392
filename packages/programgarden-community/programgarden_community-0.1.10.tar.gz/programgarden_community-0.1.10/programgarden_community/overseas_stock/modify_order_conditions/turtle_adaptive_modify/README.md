# TurtleAdaptiveModify - 터틀 정정 요정

## 전략 ID
`TurtleAdaptiveModify`

## 목적
터틀 전략은 지정가 주문을 쓰지만, 5분 동안 체결이 안 되면 1호가씩 따라 붙으라고 알려줍니다. `TurtleAdaptiveModify`는 바로 그 역할을 하는 정정 모듈입니다.

## 어떻게 작동하나요?
1. 미체결 주문 목록을 10초마다 훑어봅니다.
2. 주문이 **설정한 시간(기본 300초)** 보다 오래 살아 있거나, 시장가와 **지정가 간격이 임계값**을 넘으면 동작합니다.
3. 전략 안쪽에 있는 가벼운 기록장이 주문 번호별 정정 횟수를 추적해 **최대 3회까지만** 가격을 손봅니다.
4. 정정 시에는 1호가(기본 0.05달러) 쪽으로 가격을 더 유리하게 이동시키고, 미체결 수량만큼 다시 제출합니다.

## DSL 예시
```python
{
    "condition_id": "TurtleAdaptiveModify",
    "params": {
        "appkey": "발급키",
        "appsecretkey": "발급시크릿",
        "price_gap": 0.2,
        "tick_size": 0.05,
        "timeout_seconds": 300,
        "max_modify": 3
    }
}
```

## 파라미터 가이드
| 이름 | 기본값 | 설명 |
| --- | --- | --- |
| `price_gap` | 0.2 | 현재 호가와 주문 가격 차이가 이 값을 넘으면 정정합니다. |
| `tick_size` | 0.05 | 한 번 정정할 때 이동할 최소 단위. |
| `timeout_seconds` | 300 | 주문이 이 시간 이상 미체결이면 정정합니다. |
| `max_modify` | 3 | 같은 주문을 몇 번까지 정정할지 |

## 기록은 어떻게 되나요?
- 내부 기록장이 주문 번호별 정정 횟수를 자동으로 저장합니다.
- 주문이 체결되거나 취소되면 관련 메모도 함께 정리됩니다.
- 사용자가 파일 이름을 정하거나 DB를 따로 관리할 필요는 없습니다.

## 좋은 점
- 초보자도 "불이 들어오면 가격을 당긴다"라는 단순한 규칙으로 이해할 수 있어요.
- 터틀 전략의 "최대 3회 정정" 원칙을 자동으로 지켜 줍니다.

## 주의사항
- 정정 후엔 다시 0초부터 시간을 재요.
- 주문이 취소되거나 체결되면 DB에서 해당 주문 번호를 자동으로 지웁니다.
