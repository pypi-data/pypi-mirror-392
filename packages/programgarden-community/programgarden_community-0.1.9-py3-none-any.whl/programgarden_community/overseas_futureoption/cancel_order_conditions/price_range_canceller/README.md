# Futures Price Range Canceller

## 전략 ID
FuturesPriceRangeCanceller

## 한 줄 요약
주문 가격과 현재 호가 사이의 간격이 너무 벌어지면 자동으로 취소해 주는 해외선물용 안전장치입니다.

## 왜 필요한가요?
해외선물 시장에서는 유동성이 순간적으로 줄어들거나 뉴스 한 줄에 호가가 빠르게 움직이기도 합니다. 기존 주문이 시장에서 멀리 떨어진 채 방치되면 원치 않는 체결이 발생하거나 괜히 증거금만 묶일 수 있어요. 이 전략은 **“주문가가 시장가와 일정 간격 이상 벌어지면 취소”** 라는 단순한 규칙으로 그런 상황을 예방해 줍니다.

## 어떻게 동작하나요?
1. 미체결 주문을 하나씩 읽어옵니다.
2. LS증권 API(o3106)로 현재 매수·매도 1호가를 조회합니다.
3. 주문가와 현재 호가의 차이가 `price_gap` 보다 크면 취소 주문을 만듭니다.
4. 매수/매도 중 어떤 방향을 감시할지 `enable` 값으로 선택할 수 있습니다.

## DSL 예시
```python
{
    "condition_id": "FuturesPriceRangeCanceller",
    "params": {
        "price_gap": 2.5,
        "enable": "sell"
    }
}
```

## 파라미터
| 이름 | 기본값 | 설명 |
| --- | --- | --- |
| `price_gap` | 1.0 | 주문가와 현재 호가 사이에 허용할 최대 거리입니다. 틱/포인트 단위로 생각하면 쉽습니다. |
| `enable` | `all` | `buy`, `sell`, `all` 중 선택. 특정 방향만 감시할 수 있습니다. |
| `appkey`, `appsecretkey` | 선택 | 전략에서 직접 LS API를 호출해야 할 때 입력하세요. 시스템에 이미 로그인되어 있으면 비워도 됩니다. |

## 참고 사항
- `price_gap`을 너무 작게 잡으면 잦은 취소로 수수료가 늘 수 있습니다.
- 취소된 주문은 자동으로 다시 넣지 않습니다. 필요하면 다른 신규 주문 전략과 함께 사용하세요.
