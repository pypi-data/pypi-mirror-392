# Loss Cut 전략 - 손절매 전략

## 전략 ID
`BasicLossCutManager`

## 전략 기여자
ProgramGarden Team

## 간단한 설명

이 전략은 **보유 중인 해외주식의 손익률이 미리 정한 손절 기준보다 나빠지면, 자동으로 매도 주문을 만들어 손실을 제한하는 기본 손절매 로직**입니다.

“어디까지 떨어지면 더 이상 버티지 않을지”를 숫자로 정해 두고,
그 기준에 도달하면 감정과 상관없이 **기계적으로 포지션을 정리**하는 데 도움을 줍니다.

## 이 전략이 필요한 이유

- 해외주식 투자는 환율, 장시간 거래, 야간 뉴스 등으로 **손실이 빠르게 커질 수 있는 환경**입니다.
- 사람은 가격이 떨어질수록 “조금만 더 버텨보자”는 마음이 생겨, **손실을 키우기 쉽습니다.**
- `BasicLossCutManager`는
    - 손절 기준(`losscut`)을 손익률(%)로 명확하게 정해 두고,
    - 그 기준을 아래로 이탈하면 자동으로 매도 조건을 만들어
    **“생각보다 오래 버틴 손실”을 미리 끊어 내는 안전장치** 역할을 합니다.

## 전략 상세 설명

### 손절매를 간단히 정리해 볼게요

- **손절매(Stop Loss)**
    - 주가가 내려갈 때, **미리 정해 둔 손실 비율에 도달하면 자동으로 파는 것**입니다.
    - 예: -5% 손절이면, 매수가 대비 -5%에서 더 내려가기 전에 포지션을 정리합니다.

- **손익률(%) 기준**
    - 손익률 = (현재 가격 - 매수가) / 매수가 × 100 입니다.
    - 예: 100달러에 산 주식이 95달러가 되면 손익률은 -5%, 90달러면 -10%입니다.

### 어떤 방식으로 동작하나요?

1. 보유 중인 각 종목의 **현재 손익률(%)** 을 계산합니다.
2. 손익률이 설정한 손절 기준(`losscut`, 예: -5.0) 이하인지 확인합니다.
3. 기준 이하로 떨어진 종목에 대해서는, **전량 매도 주문을 생성할 후보**로 표시합니다.
4. 실제 주문 방식(시장가/지정가 등)은 실행 환경에 따라 다를 수 있지만,
     이 전략의 핵심 역할은 **“손절 기준에 걸린 종목을 빠르게 찾아서, 매도 로직에 넘기는 것”**입니다.

### 손절 기준 예시

| 상황 | 매수가 | 현재가 | 손익률 | 손절 기준(`losscut`) | 손절 조건 |
|------|--------|--------|--------|----------------------|-----------|
| 예시 1 | 100달러 | 95달러 | -5%  | -5.0%               | 충족 (매도 후보) |
| 예시 2 | 100달러 | 90달러 | -10% | -15.0%              | 미충족 (아직 기준보다 작음) |
| 예시 3 | 100달러 | 88달러 | -12% | -10.0%              | 충족 (매도 후보) |

손절 기준을 **-5%처럼 촘촘하게 두면** 손실을 얕게 자르는 대신, 잦은 손절이 발생할 수 있고,
**-15%처럼 넓게 두면** 손절은 덜하지만 한 번의 손실 폭이 커질 수 있습니다.

## DSL 예시

```python
{
        "condition_id": "BasicLossCutManager",
        "params": {
                "losscut": -5.0
        }
}
```

## 파라미터 설명

| 이름 | 타입 | 기본값 | 설명 |
| --- | --- | --- | --- |
| `losscut` | float | -5.0 | 손절매를 실행할 손익률 임계값(%)입니다. 음수 값으로 설정하며, 예: -5.0이면 손익률이 -5% 이하일 때 손절 조건을 만족합니다. |

## 전략 사용 시 주의사항

- 손절 비율(`losscut`)은 **투자자의 리스크 성향과 종목 특성**에 따라 달라져야 합니다. 모든 종목에 똑같은 기준을 적용하는 것이 항상 최선은 아닐 수 있습니다.
- HTS/증권사 화면에서 보이는 수익률과, 전략이 계산하는 손익률에는 **환율·수수료·계산 기준 차이**로 인해 약간의 오차가 있을 수 있습니다.
- 이 전략은 “손실을 숫자로 관리하는 도구”일 뿐, **손절 기준이 너무 촘촘하면 유망한 종목을 너무 일찍 파는 부작용**이 있을 수 있습니다. 주기적으로 손절 기준이 적절한지 점검해 주세요.
