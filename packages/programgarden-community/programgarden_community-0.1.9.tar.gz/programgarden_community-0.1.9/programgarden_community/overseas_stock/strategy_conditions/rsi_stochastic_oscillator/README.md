# 해외주식 RSI·스토캐스틱 과매수/과매도 전략

## 전략 ID
`StockRSIStochastic`

## 전략 기여자
ProgramGarden Team

## 간단한 설명

이 전략은 **RSI와 스토캐스틱을 동시에 사용해 과열·침체 구간을 객관적으로 체크**해 주는 체온계 역할의 필터입니다.

해외주식 가격이 “너무 뜨거운지 혹은 너무 추운지”를 숫자로 보여 주어,
감(감정)에 기대지 않고 **차익 실현·분할 매수 타이밍을 더 차분하게 고를 수 있도록** 도와줍니다.

## 이 전략이 필요한 이유

- 해외주식은 거래 시간이 길고 공시·환율 뉴스가 뒤섞여 **"지금이 과열인지, 단순 조정인지"를 감으로만 판단하기 어렵습니다.**
- `StockRSIStochastic`은 RSI와 스토캐스틱 슬로우를 동시에 겹쳐 보여 주어 **과열/침체 구간을 객관적으로 체크**하도록 돕습니다.
- `signal`이 `oversold`면 반등 가능성을, `overbought`면 차익 실현 또는 리스크 관리 시그널을 먼저 살펴보도록 안내합니다. 필요하면 `focus_signal`로 한쪽 방향만 추적하도록 설정할 수 있습니다.

## 전략 상세 설명

### 어떤 방식으로 동작하나요?

- **두 개의 체온계**: RSI와 스토캐스틱 두 지표가 동시에 0~100 점수로 “지금 온도가 높은지 낮은지”를 보여줍니다. 숫자 계산은 전략이 알아서 하니, 점수대만 기억하면 됩니다.
- **신호 요약**: 두 점수가 함께 70선 위에 있으면 `overbought`, 30선 아래에 있으면 `oversold`로 표시해 “이제는 쉬어갈지, 반등을 기대할지”를 한 줄로 알려 줍니다.
- **필요한 방향만 필터링**: `focus_signal`을 `overbought` 또는 `oversold`로 바꾸면 원하는 경고만 남아, 차익 실현이나 분할 매수 타이밍에 집중할 수 있습니다.

### 방향성은 이렇게 고릅니다

- **과매수(overbought)** 신호:
    - “너무 급하게 올랐으니 쉬어갈 수 있다”는 뜻입니다.
    - 익절 계획이나 비중 축소를 검토하는 경고등 역할을 합니다.
    - 이 상황만 보고 싶으면 `focus_signal`을 `overbought`로 맞춥니다.
- **과매도(oversold)** 신호:
    - “너무 눌렸으니 반등 여지가 있다”는 신호입니다.
    - 분할 매수나 손실 축소 전략을 고민할 때 참고합니다.
    - 이 경우만 모으려면 `focus_signal`을 `oversold`로 설정합니다.
- **중립(neutral)** 구간:
    - 아직 극단 영역이 아니니 급히 움직일 필요가 없습니다.
    - 다른 지표나 뉴스와 함께 천천히 판단하는 구간으로 볼 수 있습니다.

### 활용 시나리오

- 바쁜 장 중에 **단순히 “지금 과열/침체인지”만 빠르게 체크**하고 싶을 때
- 추세 전략(브레이크아웃, 추세 추종 등)에 앞서 **너무 과열된 구간을 피하기 위한 필터**로 사용
- 장기 투자 포지션에서 **“지금은 추가 매수보다 보유/관망이 나은지”** 판단하는 보조 지표로 활용

## DSL 예시
```python
{
    "condition_id": "StockRSIStochastic",
    "parameters": {
        "appkey": "your_appkey",
        "appsecretkey": "your_appsecret",
        "timeframe": "days",
        "rsi_period": 14,
        "stoch_k": 14,
        "stoch_d": 3,
        "stoch_smooth": 3,
        "overbought": 70,
        "oversold": 30,
        "focus_signal": "both",
        "qrycnt": 200
    }
}
```

최근 거래일부터 `qrycnt` 길이만큼 자동 조회하므로 날짜를 별도로 넣지 않아도 됩니다.

## 파라미터 설명

| 이름 | 타입 | 기본값 | 설명 |
| --- | --- | --- | --- |
| `rsi_period` | int | 14 | RSI 계산에 사용할 종가 개수입니다. 작게 잡으면 빠르게 반응하고, 크게 잡으면 완만해집니다. |
| `stoch_k` | int | 14 | 스토캐스틱 %K 기간입니다. 짧으면 민감한 대신 요동이 크고, 길면 큰 흐름만 남습니다. |
| `stoch_d` | int | 3 | %K를 다시 평균낸 라인입니다. 값을 늘리면 잦은 교차를 줄일 수 있습니다. |
| `stoch_smooth` | int | 3 | %K를 계산하기 전에 미리 다듬을 구간입니다. |
| `overbought` | float | 70 | RSI·스토캐스틱이 이 값 이상이면 과열 구간으로 해석합니다. |
| `oversold` | float | 30 | RSI·스토캐스틱이 이 값 이하이면 침체 구간으로 해석합니다. |
| `focus_signal` | str | `both` | `overbought`, `oversold`, `both` 중 관심 있는 방향만 추적하도록 선택합니다. |
| `timeframe` | str | `days` | 일봉(`days`), 주봉(`weeks`), 월봉(`months`) 중 원하는 캔들을 선택합니다. |
| `qrycnt` | int | 200 | 조회할 캔들 수입니다. 필요 최소치보다 작게 입력해도 자동으로 늘려 줍니다. |
| `appkey` | str | - | LS증권 해외주식 Open API 인증 키입니다. |
| `appsecretkey` | str | - | LS증권 해외주식 Open API 인증 시크릿입니다. |

## 전략 사용 시 주의사항

- 급등락 장세에선 오실레이터가 극단값에 빠르게 도달할 수 있으니, 거래량·지지/저항과 함께 확인해야 합니다.
- `overbought`/`oversold` 임계값을 너무 공격적으로 조정하면, 잦은 반대 매매로 오히려 수익률이 떨어질 수 있습니다.
- API 인증 값은 안전하게 관리해야 하며, 외부에 노출되지 않도록 주의하세요.
- 과거 지표는 미래 수익을 보장하지 않으므로, 리스크 관리(손절·분할 매수/매도)와 함께 사용하는 것을 권장합니다.
