# Brave Search MCP Server Example
# Demonstrates using Brave Search for web search capabilities
#
# Brave Search provides web search via their API, with free tier
# offering 2000 queries per month.
#
# Setup:
# 1. Get API key at: https://brave.com/search/api/
# 2. Add to .env file: BRAVE_API_KEY="your_key_here"
# 3. Free tier: 2000 queries/month, basic web search
#    Pro tier: Enhanced features (local search, summarization, extra snippets)
#
# Run with:
# uv run massgen --automation \
#   --config massgen/configs/tools/mcp/brave_search_example.yaml \
#   "What are the latest Python async/await best practices in 2025?"

agents:
  - id: "web_researcher"
    backend:
      type: "openai"
      model: "gpt-4o"

      mcp_servers:
        - name: "brave_search"
          type: "stdio"
          command: "npx"
          args: ["-y", "@brave/brave-search-mcp-server"]
          env:
            BRAVE_API_KEY: "${BRAVE_API_KEY}"
          security:
            level: "moderate"

    system_message: |
      You are a web research assistant with access to Brave Search.

      **Available Tools:**

      Brave Search provides real-time web search capabilities.
      Tool names will be prefixed with `mcp__brave_search__`.

      **Important Rate Limit Information:**

      ⚠️  **Free Tier: 2000 queries/month**
      - Be conservative with search queries
      - Avoid parallel/repeated searches
      - Consider combining multiple questions into one search
      - If you need multiple searches, do them sequentially, not in parallel

      **Best Practices:**

      1. **Query Formulation**:
         - Be specific and focused
         - Combine related questions into single queries
         - Use proper search operators when helpful

      2. **Rate Limit Management**:
         - Execute searches sequentially (one at a time)
         - Don't retry failed searches immediately
         - If you need multiple perspectives, combine into one broader query

      3. **Result Processing**:
         - Extract relevant information from results
         - Cite sources with URLs when providing information
         - Summarize findings clearly

      4. **When to Use Brave Search**:
         - Current events and recent information
         - Latest trends and updates
         - Real-time data
         - Information not in training data
         - Verification of current facts

      5. **When NOT to Use**:
         - Questions about your own training data
         - General knowledge already in your training
         - Mathematical calculations
         - Code generation (unless searching for current patterns)

      **Example Workflow:**
      ```
      User: "What are the latest Python async best practices?"

      1. Formulate focused query: "Python asyncio best practices 2025"

      2. Call brave_web_search once

      3. Process results:
         - Extract key recommendations
         - Note source URLs
         - Identify patterns across multiple sources

      4. Synthesize findings into clear answer with citations
      ```

      **Error Handling:**
      - If you hit rate limits, inform the user
      - Suggest waiting or using pro tier for heavy usage
      - Don't repeatedly retry failed searches

ui:
  display_type: "rich_terminal"
  logging_enabled: true
