Metadata-Version: 2.4
Name: flet-popupmenu
Version: 0.0.3
Summary: Popup menu component for Flet
Author-email: Ivan Gonzalez Valles <ivanartista96@gmail.com>
License: MIT License
        
        Copyright (c) 2025
        Iv√°n Gonz√°lez Valles
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
        
Keywords: flet,python,ui,popup,menu
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: flet>=0.22
Dynamic: license-file

## DISPONIBLE EN INGLES Y ESPA√ëOL

# (VERSION INGLES)

# Flet Popup Menu

A customizable and ready-to-use popup menu component for **Flet** applications.  
It provides edit/delete dialogs, dynamic form generation for editing items, API communication,  
and a flexible callback system for UI updates across modules.

---

## üöÄ Installation

```bash
pip install flet_popupmenu
```

## Import

```python
from flet_popupmenu import PopupMenuButton
```

## Use

- Initialize function called "PopupMenuButton" whose arguments are:

```python
def PopupMenuButton(
    page: ft.Page,
    id: int,
    item_to_edit: dict = None,
    alias: str = "item",
    request_url: dict = None,
    callback=None,
    callbacks: dict = {}
):
```

üîç ARGUMENTS EXPLAINED

Below is exactly what each argument does, and which ones are optional.

üîµ Required Arguments

‚úî page: ft.Page

Current Flet page ‚Äî required for dialogs, updates, and UI rendering.

‚úî id: int

Unique identifier of the item being edited or deleted.

üü° Optional Arguments (EXPLAINED IN DETAIL)

üü° item_to_edit: dict = None (optional)

If provided ‚Üí the popup shows a form for editing the item.

If omitted ‚Üí the ‚Äúedit‚Äù option is disabled automatically.

Structure example:

```python
item_to_edit = {
    "title":  { "value": "Task A", "type": "text" },
    "state":  {
        "value": 1,
        "type": "dropdown",
        "options": { 0: "Pending", 1: "Completed" }
    }
}
```

If your item has no editable fields ‚Üí simply pass None

üü° alias: str = "item" (optional)

Name used in dialog messages.
Examples:

- "Task"

- "User"

- "Product"

If not set ‚Üí defaults to "item".

üü° request_url: dict = None (optional but RECOMMENDED)

Defines URLs for:

- deleting the item

- editing the item

Structure:

```python

request_url = {
    "delete": {
        "url": "https://api.com/items?id=3",
        "headers": headers
    },
    "edit": {
        "url": "https://api.com/items?id=3",
        "headers": headers
    }
}

```

If omitted:

- delete button will do nothing

- edit button will do nothing

- no errors will be thrown

üü° callback=None (optional)

Function executed **after a successful delete/edit**.

Use it for UI refresh:

```python
callback = refresh_tasks
```

‚ö†Ô∏è IMPORTANT:
The callback must NOT require arguments.
It must be a simple callable:

```python
def refresh_tasks():
    ...
```

üü° `callbacks: dict = {} ` &nbsp; (optional, advanced)

Allows triggering multiple auxiliary functions across your app.

This is useful if deleting/editing a task also needs to:

- reload categories

- refresh dashboards

- reload summary counters

```python
callbacks={
    "load_categories": {
        "function": refresh_categories,
        "args": []
    },
    "update_dashboard": {
        "function": refresh_dashboard,
        "args": []
    }
}
```

If omitted ‚Üí only the main callback (if any) will run.

üü° `Layout: dict = {} ` &nbsp; (optional, advanced)

Allows setting layout of popup container. Values are: **top, left, right, bottom, alignment, border_radius, bg_color**

```python

layout = {
    "top": int | 8,
    "left": int | 0,
    "right": int | 8,
    "bottom": int | 0,
    "alignment": "[top_right | top_center | top_left | right | center | left | bottom_right | bottom_center | bottom_left]" | ft.Alignment.top_right,
    "border_radius": int # In case exists, will set width amd heght as 40x40 to cover image according background
}

```

üåü FULL EXAMPLE (RECOMMENDED)

üü¶ STRUCTURE

2 files:

```cmd
app.py         ‚Üí main module
tasks.py       ‚Üí module where PopupMenuButton is used
```

üü© 1Ô∏è‚É£ app.py ‚Äî MAIN FILE (DEFINE CALLBACKS)

```python
# app.py
import flet as ft
from tasks import render_tasks_list

# ------- CALLBACKS DEFINED HERE IN -------
def refresh_tasks():
    """
    Refreshes the task list. Gets executed after deleting/editing.
    IMPORTANT: Must not require args.
    """
    print("‚úî refresh_tasks() executed (UI update here).")

def refresh_categories():
    """
    Example of a secondary function fired from callbacks argument.
    It can reload categories, counters, dashboards, etc.
    """
    print("‚úî refresh_categories() executed (extra UI update).")


def main(page: ft.Page):
    page.title = "Callback Example"
    page.vertical_alignment = ft.MainAxisAlignment.START

    # ------- PASS CALLBACKS TO MODULE -------
    content = render_tasks_list(
        page=page,
        callback_main=refresh_tasks,
        callbacks_extra={
            "reload_categories": {
                "function": refresh_categories,
                "args": []
            }
        }
    )

    page.add(content)


ft.app(target=main)
```

üü© 2Ô∏è‚É£ tasks.py ‚Äî Where is used PopupMenuButton (RECIVES CALLBACKS)

```python
# tasks.py
import flet as ft
from flet_popupmenu import PopupMenuButton


def render_tasks_list(page: ft.Page, callback_main=None, callbacks_extra=None):
    """
    callback_main: main refresh function (optional)
    callbacks_extra: dict with extra functions to run (optional)
    """

    # Simulated API task
    task = {
        "id": 3,
        "title": "Example Task",
        "description": "This is a sample description",
        "state": 1,
    }

    # Editable fields
    item_to_edit = {
        "id": { "value": task["id"], "type": "identifier", "disabled": True },
        "title": { "value": task["title"], "type": "text" },
        "description": { "value": task["description"], "type": "text" },
        "state": {
            "value": task["state"],
            "type": "dropdown",
            "options": {
                0: "Pending",
                1: "Completed",
                2: "In progress"
            }
        }
    }

    # Example headers
    headers = {
        "Content-Type": "application/json",
        "Authorization": "Bearer <token>"
    }

    popup = PopupMenuButton(
        page=page,
        id=task["id"],
        item_to_edit=item_to_edit,
        alias="Task",
        request_url={
            "delete": {
                "url": f"https://example.com/tasks?id={task['id']}",
                "headers": headers
            },
            "edit": {
                "url": f"https://example.com/tasks?id={task['id']}",
                "headers": headers
            }
        },

        # üî• MAIN CALLBACK (typically refresh list)
        callback=callback_main,

        # üî• EXTRA CALLBACKS (optional)
        callbacks=callbacks_extra
    )

    return ft.Column(
        controls=[
            ft.Text("Task List Example", size=20, weight="bold"),
            ft.ListTile(
                leading=ft.Icon(ft.icons.TASK),
                title=ft.Text(task["title"]),
                subtitle=ft.Text(task["description"]),
                trailing=popup
            )
        ]
    )
```

üüß What exacly happens when the user deletes or edits:

&nbsp;&nbsp;&nbsp; **1.** Popup sends a delete or an edit request to your API\
 &nbsp;&nbsp;&nbsp; **2.** If API responses OK ‚Üí PopupMenuButton runs:

```scss
callback_main()
callbacks_extra["reload_categories"]["function"](*args)
```

It called by example:

‚úî refresh_tasks() ‚Üí to reload the list
‚úî refresh_categories() ‚Üí to update other system parts

&nbsp;&nbsp;&nbsp; **3.** Defenitely, the UI turns into completelly optimized.

‚≠ê His finallity:

- How to separate logic across multiple files

- How to pass a function from the main file

- How to receive and use it within the component

- How to use advanced callbacks

- How to write functions without arguments

- How to refresh the UI after actions

‚ö†Ô∏è COMMON MISTAKES TO AVOID

- Do not pass callbacks that expect parameters. All functions must be def func(): ...

- Ensure your API ends with a valid JSON response.

- If item_to_edit is None, editing will be disabled.

- If request_url is None, delete/edit buttons will do nothing.

- The options key is only for dropdowns.

üßæ License

MIT License.

‚ù§Ô∏è Contributions Welcome

Open a pull request or issue on GitHub.
Suggestions and improvements are welcome!

---

# üöÄ ¬øDo you even want **badges** for PyPI too?

Can add:

- ‚úî PyPI version
- ‚úî Python versions
- ‚úî Wheel status
- ‚úî Download counts
- ‚úî License badge
- ‚úî Supported OS

Only say:

üëâ **‚ÄúPut badges too**

# (VERSI√ìN EN ESPA√ëOL)

# Men√∫ Emergente Flet

Un componente de men√∫ emergente personalizable y listo para usar para aplicaciones **Flet**.  
Proporciona di√°logos de edici√≥n/eliminaci√≥n, generaci√≥n din√°mica de formularios para editar elementos, comunicaci√≥n con API  
y un sistema flexible de callbacks para actualizar la interfaz de usuario en todos los m√≥dulos.

---

## üöÄ Instalaci√≥n

```bash
pip install flet_popupmenu
```

## Importaci√≥n

```python
from flet_popupmenu import PopupMenuButton
```

## Uso

- Inicializa la funci√≥n "PopupMenuButton" cuyos argumentos son:

```python
def PopupMenuButton(
    page: ft.Page,
    id: int,
    item_to_edit: dict = None,
    alias: str = "item",
    request_url: dict = None,
    callback=None,
    callbacks: dict = {}
):
```

üîç EXPLICACI√ìN DE ARGUMENTOS

A continuaci√≥n se detalla para qu√© sirve cada argumento y cu√°les son opcionales.

üîµ Argumentos obligatorios

‚úî page: ft.Page

P√°gina actual de Flet ‚Äî necesaria para di√°logos, actualizaciones y renderizado de la UI.

‚úî id: int

Identificador √∫nico del elemento a editar o eliminar.

üü° Argumentos opcionales (EXPLICADOS EN DETALLE)

üü° item_to_edit: dict = None (opcional)

Si se proporciona ‚Üí el men√∫ muestra un formulario para editar el elemento.

Si se omite ‚Üí la opci√≥n ‚Äúeditar‚Äù se desactiva autom√°ticamente.

Ejemplo de estructura:

```python
item_to_edit = {
    "title":  { "value": "Tarea A", "type": "text" },
    "state":  {
        "value": 1,
        "type": "dropdown",
        "options": { 0: "Pendiente", 1: "Completada" }
    }
}
```

Si tu elemento no tiene campos editables ‚Üí simplemente pasa None.

üü° alias: str = "item" (opcional)

Nombre usado en los mensajes de di√°logo.
Ejemplos:

- "Tarea"
- "Usuario"
- "Producto"

Si no se define ‚Üí por defecto es "item".

üü° request_url: dict = None (opcional pero RECOMENDADO)

Define URLs para:

- eliminar el elemento
- editar el elemento

Estructura:

```python
request_url = {
    "delete": {
        "url": "https://api.com/items?id=3",
        "headers": headers
    },
    "edit": {
        "url": "https://api.com/items?id=3",
        "headers": headers
    }
}
```

Si se omite:

- el bot√≥n eliminar no har√° nada
- el bot√≥n editar no har√° nada
- no se lanzar√°n errores

üü° callback=None (opcional)

Funci√≥n ejecutada **tras eliminar/editar exitosamente**.

√ösala para refrescar la UI:

```python
callback = refresh_tasks
```

‚ö†Ô∏è IMPORTANTE:
El callback NO debe requerir argumentos.
Debe ser una funci√≥n simple:

```python
def refresh_tasks():
    ...
```

üü° `callbacks: dict = {} ` &nbsp; (opcional, avanzado)

Permite disparar m√∫ltiples funciones auxiliares en tu app.

√ötil si al eliminar/editar una tarea tambi√©n necesitas:

- recargar categor√≠as
- refrescar dashboards
- recargar contadores resumen

```python
callbacks={
    "load_categories": {
        "function": refresh_categories,
        "args": []
    },
    "update_dashboard": {
        "function": refresh_dashboard,
        "args": []
    }
}
```

Si se omite ‚Üí solo se ejecuta el callback principal (si existe).

üåü EJEMPLO COMPLETO (RECOMENDADO)

üü¶ ESTRUCTURA

2 archivos:

```cmd
app.py         ‚Üí m√≥dulo principal
tasks.py       ‚Üí m√≥dulo donde se usa PopupMenuButton
```

üü© 1Ô∏è‚É£ app.py ‚Äî ARCHIVO PRINCIPAL (DEFINE CALLBACKS)

```python
# app.py
import flet as ft
from tasks import render_tasks_list

# ------- CALLBACKS DEFINIDOS AQU√ç -------
def refresh_tasks():
    """
    Refresca la lista de tareas. Se ejecuta tras eliminar/editar.
    IMPORTANTE: No debe requerir argumentos.
    """
    print("‚úî refresh_tasks() ejecutado (actualizaci√≥n de UI).")

def refresh_categories():
    """
    Ejemplo de funci√≥n secundaria disparada desde callbacks.
    Puede recargar categor√≠as, contadores, dashboards, etc.
    """
    print("‚úî refresh_categories() ejecutado (actualizaci√≥n extra de UI).")


def main(page: ft.Page):
    page.title = "Ejemplo de Callback"
    page.vertical_alignment = ft.MainAxisAlignment.START

    # ------- PASA CALLBACKS AL M√ìDULO -------
    content = render_tasks_list(
        page=page,
        callback_main=refresh_tasks,
        callbacks_extra={
            "reload_categories": {
                "function": refresh_categories,
                "args": []
            }
        }
    )

    page.add(content)


ft.app(target=main)
```

üü© 2Ô∏è‚É£ tasks.py ‚Äî Donde se usa PopupMenuButton (RECIBE CALLBACKS)

```python
# tasks.py
import flet as ft
from flet_popupmenu import PopupMenuButton


def render_tasks_list(page: ft.Page, callback_main=None, callbacks_extra=None):
    """
    callback_main: funci√≥n principal de refresco (opcional)
    callbacks_extra: dict con funciones extra a ejecutar (opcional)
    """

    # Tarea simulada de API
    task = {
        "id": 3,
        "title": "Tarea Ejemplo",
        "description": "Esta es una descripci√≥n de muestra",
        "state": 1,
    }

    # Campos editables
    item_to_edit = {
        "id": { "value": task["id"], "type": "identifier", "disabled": True },
        "title": { "value": task["title"], "type": "text" },
        "description": { "value": task["description"], "type": "text" },
        "state": {
            "value": task["state"],
            "type": "dropdown",
            "options": {
                0: "Pendiente",
                1: "Completada",
                2: "En progreso"
            }
        }
    }

    # Ejemplo de headers
    headers = {
        "Content-Type": "application/json",
        "Authorization": "Bearer <token>"
    }

    popup = PopupMenuButton(
        page=page,
        id=task["id"],
        item_to_edit=item_to_edit,
        alias="Tarea",
        request_url={
            "delete": {
                "url": f"https://example.com/tasks?id={task['id']}",
                "headers": headers
            },
            "edit": {
                "url": f"https://example.com/tasks?id={task['id']}",
                "headers": headers
            }
        },

        # üî• CALLBACK PRINCIPAL (normalmente refresca la lista)
        callback=callback_main,

        # üî• CALLBACKS EXTRA (opcional)
        callbacks=callbacks_extra
    )

    return ft.Column(
        controls=[
            ft.Text("Ejemplo de Lista de Tareas", size=20, weight="bold"),
            ft.ListTile(
                leading=ft.Icon(ft.icons.TASK),
                title=ft.Text(task["title"]),
                subtitle=ft.Text(task["description"]),
                trailing=popup
            )
        ]
    )
```

üüß ¬øQu√© ocurre exactamente al eliminar o editar?

&nbsp;&nbsp;&nbsp; **1.** El popup env√≠a una petici√≥n de eliminaci√≥n o edici√≥n a tu API\
&nbsp;&nbsp;&nbsp; **2.** Si la API responde OK ‚Üí PopupMenuButton ejecuta:

```scss
callback_main()
callbacks_extra["reload_categories"]["function"](*args)
```

Ejemplo de llamada:

‚úî refresh_tasks() ‚Üí para recargar la lista  
‚úî refresh_categories() ‚Üí para actualizar otras partes del sistema

&nbsp;&nbsp;&nbsp; **3.** Finalmente, la UI queda completamente optimizada.

‚≠ê Su finalidad:

- C√≥mo separar la l√≥gica en varios archivos
- C√≥mo pasar una funci√≥n desde el archivo principal
- C√≥mo recibirla y usarla en el componente
- C√≥mo usar callbacks avanzados
- C√≥mo escribir funciones sin argumentos
- C√≥mo refrescar la UI tras acciones

‚ö†Ô∏è ERRORES COMUNES A EVITAR

- No pases callbacks que requieran par√°metros. Todas las funciones deben ser def func(): ...
- Aseg√∫rate de que tu API devuelva una respuesta JSON v√°lida.
- Si item_to_edit es None, la edici√≥n estar√° deshabilitada.
- Si request_url es None, los botones de eliminar/editar no har√°n nada.
- La clave options solo es para dropdowns.

üßæ Licencia

Licencia MIT.

‚ù§Ô∏è ¬°Contribuciones bienvenidas!

Abre un pull request o issue en GitHub.
¬°Se aceptan sugerencias y mejoras!

---

# üöÄ ¬øQuieres tambi√©n **badges** para PyPI?

Se pueden a√±adir:

- ‚úî Versi√≥n PyPI
- ‚úî Versiones de Python
- ‚úî Estado Wheel
- ‚úî Contador de descargas
- ‚úî Badge de licencia
- ‚úî SO soportados

Solo di:

üëâ **‚ÄúPon badges tambi√©n‚Äù**
