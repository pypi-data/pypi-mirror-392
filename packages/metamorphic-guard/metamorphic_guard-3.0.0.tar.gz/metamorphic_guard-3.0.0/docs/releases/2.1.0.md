# Metamorphic Guard 2.1.0

## Highlights

- **Metrics Pipeline Upgrades**  
  - Added memoization (`memoize`, `memoize_key`) and sampling (`sample_rate`) controls to `Spec.metrics`, reducing extractor overhead on large suites.  
  - Harness caches metric extractor outputs across metrics sharing a memo key and tracks sampled counts while preserving bootstrap confidence intervals.

- **Sandbox Provenance & Guardrails**  
  - Sandbox runs now emit detailed runtime metadata (image digests, capabilities, run state fingerprints) that land in `provenance.sandbox.executions`.  
  - New CLI tooling: `provenance-diff` compares reports; `regression-guard` enforces metric thresholds and provenance equality for CI.

- **Observability & Simulation Workflow**  
  - Cookbook and architecture docs describe end-to-end observability flows, including Prometheus wiring and provenance diffs.  
  - Statistical simulations accept env overrides (`MG_CI_RUNS`, `MG_CI_TOLERANCE`, `MG_CI_MIN_COVERAGE`) for deterministic CI validation.

## Upgrade Notes

- Default version bumped to `2.1.0`; no breaking API changes.  
- Optional metric sampling may introduce `missing` counts in metric summariesâ€”downstream dashboards should handle this field if leveraging sampling.  
- CI pipelines can integrate `metamorphic-guard regression-guard` to block regressions prior to deployment.

